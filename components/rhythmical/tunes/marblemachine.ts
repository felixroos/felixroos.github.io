const c = (...[a, b, c]) => [a, { parallel: [b, c] }, 'r', { parallel: [b, c] }];
const m1 = (...[a, b, c]) => [a, ['_', b], '_', ['_', c]];
const m2 = (...[a, b, c, d, e, f]) => [[a, b, '_', c], ['_', d, e, f]];
const m3 = (...[a, b, c, d]) => [a, ['_', b], '_', [c, d]]

export const marblemachine = {
  duration: 56,
  transpose: 12,
  parallel: [[
    // melody section 1
    m1('E4', 'B3', 'A3'), m2('G3', 'A3', 'B3', 'G3', 'A3', 'D4'), m1('_', 'B3', 'A3'), m2('G3', 'A3', 'F#3', 'G3', 'A3', 'D4'), //
    m1('_', 'B3', 'D4'), m2('C4', 'B3', 'A3', 'G3', 'A3', 'E3'), m1('_', 'B3', 'D4'), m2('C4', 'B3', 'A3', 'G3', 'A3', 'E4'), //
    m1('_', 'B3', 'A3'), m2('G3', 'A3', 'B3', 'G3', 'A3', 'D4'), m1('_', 'B3', 'D4'), m2('C4', 'B3', 'A3', 'G3', 'A3', 'D4'), //
    m3('_', 'B3', 'A3', 'E4'), m2('_', 'B3', 'A3', 'G3', 'F#3', 'E3'), [['_', 'B2', 'C3', 'E3'], ['C3', 'E3', 'G3', 'D3']], [['F#3', 'A3', 'E3', 'B3'], ['F#3', 'G3', 'A3', 'E4']], //
    // melody section 1 repeat (only last 2 bars are different)
    m1('_', 'B3', 'A3'), m2('G3', 'A3', 'B3', 'G3', 'A3', 'D4'), m1('_', 'B3', 'A3'), m2('G3', 'A3', 'F#3', 'G3', 'A3', 'D4'), //
    m1('_', 'B3', 'D4'), m2('C4', 'B3', 'A3', 'G3', 'A3', 'E3'), m1('_', 'B3', 'D4'), m2('C4', 'B3', 'A3', 'G3', 'A3', 'E4'), //
    m1('_', 'B3', 'A3'), m2('G3', 'A3', 'B3', 'G3', 'A3', 'D4'), m1('_', 'B3', 'D4'), m2('C4', 'B3', 'A3', 'G3', 'A3', 'D4'), //
    m3('_', 'B3', 'A3', 'E4'), m2('_', 'B3', 'A3', 'G3', 'F#3', 'E3'), '_', '_' //
  ], [
    // chords section 1
    c('E2', 'G2', 'B2'), c('E2', 'G2', 'B2'), c('G2', 'B2', 'D3'), c('G2', 'B2', 'D3'), //
    c('F#2', 'B2', 'D3'), c('F#2', 'B2', 'D3'), c('C2', 'E2', 'A2'), c('D2', 'F#2', 'B2'), //
    c('E2', 'G2', 'B2'), c('E2', 'G2', 'B2'), c('G2', 'B2', 'D3'), c('G2', 'B2', 'D3'), //
    c('B1', 'D2', 'F#2'), c('B1', 'D2', 'F#2'), ['A1', [{ parallel: ['E2', 'A2'], duration: 3 }, 'B1']], ['_', { parallel: ['D2', 'F#2'] }], //
    // chords section 2
    c('C2', 'G2', 'B2'), c('C2', 'G2', 'B2'), c('D2', 'F#2', 'B2'), c('D2', 'F#2', 'B2'), //
    c('E2', 'G2', 'B2'), c('E2', 'G2', 'B2'), c('A1', 'A2', 'C3'), c('B1', 'B2', 'D2'), //
    c('C2', 'G2', 'B2'), c('C2', 'G2', 'B2'), c('D2', 'F#2', 'B2'), c('D2', 'F#2', 'B2'), //
    c('E2', 'G2', 'B2'), c('B1', 'F#2', 'B2'), c('E2', 'G2', 'B2'), 'E2' //
  ]]
}
