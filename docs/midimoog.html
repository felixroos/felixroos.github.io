<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Loophole Letters</title><meta content="This is where felixroos writes about music and coding and stuff that he finds interesting." name="description"/><meta property="og:url" content="https://felixroos.github.io/midimoog"/><link rel="canonical" href="https://felixroos.github.io/midimoog"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"/><meta property="og:type" content="website"/><meta property="og:site_name" content="Loophole Letters"/><meta property="og:description" content="This is where felixroos writes about music and coding and stuff that he finds interesting."/><meta property="og:title" content="Loophole Letters"/><meta property="og:image" content="https://felixroos.github.io/images/site-preview.png"/><meta name="next-head-count" content="12"/><link rel="preload" href="/_next/static/css/1bf41908dc2b02975933.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1bf41908dc2b02975933.css" data-n-g=""/><link rel="preload" href="/_next/static/css/3dd4d340904c9260f6d8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3dd4d340904c9260f6d8.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-ddd010a953737b6e3536.js" defer=""></script><script src="/_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="/_next/static/chunks/main-222191e14496d29481e0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c65e8d89af93cd56015f.js" defer=""></script><script src="/_next/static/chunks/777-7483eb94965edd378d21.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-aeedde4870ef19569242.js" defer=""></script><script src="/_next/static/ohVobnQ3Ypc1-7cMb_4WQ/_buildManifest.js" defer=""></script><script src="/_next/static/ohVobnQ3Ypc1-7cMb_4WQ/_ssgManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css-global 1ob364s">html{--theme-ui-colors-primary:#307AC6;--theme-ui-colors-secondary:#27a727;--theme-ui-colors-background:#fff;--theme-ui-colors-text:#1b1e21;--theme-ui-colors-blue:#4169e1;--theme-ui-colors-cyan:#41b9e1;--theme-ui-colors-gray:#667788;--theme-ui-colors-green:#27a727;--theme-ui-colors-purple:#6941e1;--theme-ui-colors-orange:#fba100;--theme-ui-colors-pink:#e141b9;--theme-ui-colors-red:#ee5555;--theme-ui-colors-white:#fff;--theme-ui-colors-yellow:#FFDD22;--theme-ui-colors-lite:#eee;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}html.theme-ui-__default{--theme-ui-colors-primary:#307AC6;--theme-ui-colors-secondary:#27a727;--theme-ui-colors-background:#fff;--theme-ui-colors-text:#1b1e21;--theme-ui-colors-blue:#4169e1;--theme-ui-colors-cyan:#41b9e1;--theme-ui-colors-gray:#667788;--theme-ui-colors-green:#27a727;--theme-ui-colors-purple:#6941e1;--theme-ui-colors-orange:#fba100;--theme-ui-colors-pink:#e141b9;--theme-ui-colors-red:#ee5555;--theme-ui-colors-white:#fff;--theme-ui-colors-yellow:#FFDD22;--theme-ui-colors-lite:#eee;}html.theme-ui-dark{--theme-ui-colors-text:#fff;--theme-ui-colors-background:#292C34;--theme-ui-colors-lite:#333;--theme-ui-colors-primary:#85DEFB;}</style><style data-emotion="css-global 0"></style><style data-emotion="css 1td7120">.css-1td7120{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:100vh;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:auto;position:relative;max-width:800px;}</style><div class="css-1td7120"><style data-emotion="css eim2bq">.css-eim2bq{box-sizing:border-box;margin:0;min-width:0;padding:16px;position:absolute;top:0;right:0;opacity:0;-webkit-transition:opacity .25s ease-in-out;transition:opacity .25s ease-in-out;}</style><div class="css-eim2bq"><style data-emotion="css jakyet">.css-jakyet{box-sizing:border-box;margin:0;min-width:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;display:inline-block;text-align:center;line-height:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:inherit;padding-left:16px;padding-right:16px;padding-top:8px;padding-bottom:8px;color:var(--theme-ui-colors-white);background-color:var(--theme-ui-colors-primary);border:0;border-radius:4px;color:var(--theme-ui-colors-background);background-color:var(--theme-ui-colors-primary);background-color:var(--theme-ui-colors-gray);padding-top:4px;padding-bottom:4px;padding-left:8px;padding-right:8px;font-size:16px;cursor:pointer;}.css-jakyet:hover{background-color:var(--theme-ui-colors-text);}</style><button class="css-jakyet">light<!-- --> mode</button></div><style data-emotion="css 1doo0ju">.css-1doo0ju{box-sizing:border-box;margin:0;min-width:0;padding-top:32px;}</style><header class="css-1doo0ju"><style data-emotion="css 1n35gdr">.css-1n35gdr{box-sizing:border-box;margin:0;min-width:0;font-family:Montserrat,sans-serif;font-weight:900;line-height:1.1;font-size:30px;padding-bottom:32px;padding-left:16px;padding-right:16px;font-weight:900;}@media screen and (min-width: 32em){.css-1n35gdr{padding-left:32px;padding-right:32px;}}</style><h1 class="css-1n35gdr"><style data-emotion="css 1ie6k50">.css-1ie6k50{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-text);}</style><a href="/" class="css-1ie6k50">♾️ loophole letters</a></h1></header><style data-emotion="css td0gup">.css-td0gup{box-sizing:border-box;margin:0;min-width:0;padding-left:16px;padding-right:16px;padding-bottom:0;}@media screen and (min-width: 32em){.css-td0gup{padding-left:32px;padding-right:32px;}}</style><main class="css-td0gup"><style data-emotion="css vurnku">.css-vurnku{box-sizing:border-box;margin:0;min-width:0;}</style><article class="css-vurnku"><style data-emotion="css 1hep91p">.css-1hep91p{box-sizing:border-box;margin:0;min-width:0;float:right;}</style><div class="css-1hep91p"><style data-emotion="css 1f7qs6g">.css-1f7qs6g{box-sizing:border-box;margin:0;min-width:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;display:inline-block;text-align:center;line-height:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:inherit;padding-left:16px;padding-right:16px;padding-top:8px;padding-bottom:8px;color:var(--theme-ui-colors-white);background-color:var(--theme-ui-colors-primary);border:0;border-radius:4px;color:var(--theme-ui-colors-primary);border:1px solid var(--theme-ui-colors-primary);background-color:var(--theme-ui-colors-background);display:inline;margin-right:4px;}</style><button class="css-1f7qs6g">diy</button><button class="css-1f7qs6g">electronics</button><button class="css-1f7qs6g">arduino</button></div><style data-emotion="css 108j34h">.css-108j34h{box-sizing:border-box;margin:0;min-width:0;font-family:Montserrat,sans-serif;font-weight:900;line-height:1.1;font-size:40px;}</style><h2 class="css-108j34h">Building a Minimoog MIDI Controller</h2><style data-emotion="css 188b938">.css-188b938{box-sizing:border-box;margin:0;min-width:0;font-family:'Merriweather','Georgia',serif;font-weight:400;line-height:1.75;margin-bottom:32px;color:var(--theme-ui-colors-gray);font-style:italic;}</style><p class="css-188b938">June 11, 2020</p><div class="css-vurnku"><style data-emotion="css 142cd63">.css-142cd63{font-size:18px;font-weight:400;line-height:1.75;}</style><p class="css-142cd63">Last week, a friend a I built a MIDI Controller for the Arturia Mini V3 VST:</p>
<p class="css-142cd63"><style data-emotion="css 9whsf3">.css-9whsf3{max-width:100%;}</style><img src="./img/miniv3.png" alt="mini v3" class="css-9whsf3"/></p>
<style data-emotion="css 12ewxln">.css-12ewxln{box-sizing:border-box;margin:0;min-width:0;font-family:Montserrat,sans-serif;font-weight:900;line-height:1.1;margin-bottom:8px;margin-top:32px;}</style><h2 id="front-panel-controls" class="css-12ewxln"><style data-emotion="css 1e6egy8">.css-1e6egy8{color:var(--theme-ui-colors-primary);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;}</style><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Front Panel Controls</h2>
<p class="css-142cd63">At first, we identified the different 44 controls we needed:</p>
<style data-emotion="css zoser8">.css-zoser8{padding-top:8px;}</style><ul class="css-zoser8">
<style data-emotion="css 58pxoz">.css-58pxoz{font-family:'Merriweather','Georgia',serif;margin-bottom:14px;}</style><li class="css-58pxoz"><a target="_blank" href="https://www.musikding.de/Alpha-Poti-16mm-gewinkelt-print-5k-lin" class="css-1e6egy8">21 potentiometers</a> (with 2 <a target="_blank" href="https://www.musikding.de/Bakelit-Knopf-21mm-schwarz" class="css-1e6egy8">21mm</a> and 19 <a target="_blank" href="https://www.musikding.de/Bakelit-Knopf-19mm-schwarz" class="css-1e6egy8">19mm</a> bakelit knobs)</li>
<li class="css-58pxoz"><a target="_blank" href="https://www.musikding.de/Drehschalter-6-Pole-2-Stellungen-offen" class="css-1e6egy8">6 rotary switches</a> (with <a target="_blank" href="https://www.musikding.de/Chickenhead-23mm-schwarz" class="css-1e6egy8">chicken head knobs</a>)</li>
<li class="css-58pxoz"><a target="_blank" href="https://www.conrad.de/de/p/tru-components-tc-r13-2-05-kippschalter-250-v-ac-1-5-a-1-x-aus-ein-rastend-1-1587664.html" class="css-1e6egy8">17 flip switches</a></li>
</ul>
<p class="css-142cd63">We decided to omit the following rather useless controls:</p>
<ul class="css-zoser8">
<li class="css-58pxoz">A440 rocker switch</li>
<li class="css-58pxoz">soft clipping switch + button</li>
<li class="css-58pxoz">all keyboard controls</li>
<li class="css-58pxoz">flip switch + overload leds</li>
</ul>
<p class="css-142cd63">Also, we decided to use flip switches only + we added 2 extra flip switches below the 3 pots on the left.</p>
<p class="css-142cd63">This is the front panel with all the pots and switches in place:</p>
<p class="css-142cd63"><img src="./img/midimoogpanel.png" alt="front panel" class="css-9whsf3"/></p>
<p class="css-142cd63">for comparison:</p>
<p class="css-142cd63"><img src="./img/miniv3frontpanel.png" alt="mini v3 front panel" class="css-9whsf3"/></p>
<h2 id="midi-brain" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>MIDI Brain</h2>
<p class="css-142cd63">To read the positions of all controls, we ended up using the Arduino Micro:</p>
<p class="css-142cd63"><img src="./img/arduinopins.png" alt="arduino pins" class="css-9whsf3"/></p>
<ul class="css-zoser8">
<li class="css-58pxoz">it has a ATmega32U4 microcontroller, which makes it usable as a USB device</li>
<li class="css-58pxoz">it has up to 12 analog inputs and up to 20 digital inputs</li>
</ul>
<h2 id="analog-input-multiplexing" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Analog Input Multiplexing</h2>
<p class="css-142cd63">As we have 44 controls and only 12 analog inputs, we used seven <a target="_blank" href="https://www.musikding.de/CD4051" class="css-1e6egy8">cd4051 ics</a>:</p>
<p class="css-142cd63"><img src="./img/cd4051.png" alt="cd4051 pins" class="css-9whsf3"/></p>
<ul class="css-zoser8">
<li class="css-58pxoz">pins 6 7 &amp; 8 can be connected to ground</li>
<li class="css-58pxoz">pin 16 is connected to 5V</li>
<li class="css-58pxoz">the &quot;channel in&quot; pins are connected to the controls</li>
<li class="css-58pxoz">via the select pins a b and c, we can control which &quot;channel in&quot; is routed to the &quot;com out&quot;. This is done by splitting the three digits of a binary number (000-111) to the three select pins.<!-- -->
<ul class="css-zoser8">
<li class="css-58pxoz">by constantly looping through all inputs, we can read all 8 controls in a short amount of time</li>
<li class="css-58pxoz">this &quot;trick&quot; is also called time multiplexing, which makes the cd4051 a multiplexer</li>
</ul>
</li>
<li class="css-58pxoz">so with the 12 analog inputs of the arduino, we can connect up to 12x8 = 96 controls</li>
</ul>
<h2 id="the-board" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>The Board</h2>
<p class="css-142cd63">To connect all 44 controls with the multiplexers to the arduino, I drew this board plan:</p>
<p class="css-142cd63"><img src="./img/boardplan1.png" alt="board plan 1" class="css-9whsf3"/></p>
<ul class="css-zoser8">
<li class="css-58pxoz"><a target="_blank" href="https://www.conrad.de/de/p/rademacher-wr-typ-710-5-platine-hartpapier-l-x-b-160-mm-x-100-mm-35-m-rastermass-2-54-mm-inhalt-1-529506.html" class="css-1e6egy8">the copper strips</a> go from left to right</li>
<li class="css-58pxoz">black boxes: <a class="css-1e6egy8">cd4051 multiplexers</a></li>
<li class="css-58pxoz">blue vertical lines: <a target="_blank" href="https://www.musikding.de/Platinen-Steckverbinder-8-polig" class="css-1e6egy8">8 pole plug jacks</a></li>
<li class="css-58pxoz">red: 5V</li>
<li class="css-58pxoz">white: ground</li>
<li class="css-58pxoz">shades of blue: select bits a b and c</li>
<li class="css-58pxoz">red vertical marks: copper cuts</li>
<li class="css-58pxoz">green: output cables</li>
</ul>
<p class="css-142cd63">By rotating the middle row of ics by 180 degrees, we can spare some cables for ground and the select pins.</p>
<p class="css-142cd63">After soldering it together, the board looked like this:</p>
<p class="css-142cd63"><img src="./img/board1.png" alt="soldered board" class="css-9whsf3"/></p>
<h2 id="problems" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Problems</h2>
<p class="css-142cd63">As this was our first real electronics project, we ran into some unforseen problems.</p>
<h3 id="problem-1-mirroring" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Problem 1: Mirroring</h3>
<ul class="css-zoser8">
<li class="css-58pxoz">After the plan was made, we started using it on the copper side (top image) to solder the <a target="_blank" href="https://www.musikding.de/16-Pin-Sockel" class="css-1e6egy8">16 pin jacks</a> and the <a target="_blank" href="https://www.musikding.de/Platinen-Steckverbinder-8-polig" class="css-1e6egy8">plug jacks</a>.</li>
<li class="css-58pxoz">When we were done soldering, we realized that if we now attach the ics from the plastic side (down image), they will be mirrored, having wrong pin placements!</li>
<li class="css-58pxoz"><strong>Workaround</strong>: To fix the problem, we painstakingly bent all the ic legs to the other side to &quot;mirror&quot; them...</li>
<li class="css-58pxoz"><strong>Future Learning</strong>: Use two plans, where one is the mirrored version of the other, for both sides of the board</li>
</ul>
<h3 id="problem-2-empty-inputs" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Problem 2: Empty Inputs</h3>
<ul class="css-zoser8">
<li class="css-58pxoz">Another thing that we realized too late was all the multiplexers inputs must be connected to the circuit to make them work</li>
<li class="css-58pxoz"><strong>Workaround</strong>: We connected all empty inputs via 10k pull up resistors to ground</li>
<li class="css-58pxoz"><strong>Future Learning</strong>: It&#x27;s better to use up as much inputs as possible</li>
</ul>
<h2 id="wiring-the-controls" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Wiring the controls</h2>
<p class="css-142cd63"><img src="./img/panelwires.png" alt="panel wires" class="css-9whsf3"/></p>
<ul class="css-zoser8">
<li class="css-58pxoz">the middle pins of each pot + one of the pins of each switch are connected to ic inputs</li>
<li class="css-58pxoz">all other pins of the switches + one of the outer pot pins are connected to 5V</li>
<li class="css-58pxoz">all remaining pins are connected to ground</li>
<li class="css-58pxoz">all the 5V pins of the switches are connected to ground with a 10k resistor</li>
<li class="css-58pxoz">we transformed the rotary switches to potentiometers <a target="_blank" href="https://www.instructables.com/id/Arduino-Rotary-Switch-One-Analogue-Input/" class="css-1e6egy8">by connecting the outer pins via resistors</a></li>
</ul>
<p class="css-142cd63">For the switches and the empty inputs (see Problem 2), we added the resistors directly on the board, before the plugs:</p>
<p class="css-142cd63"><img src="./img/boardwithresistors.png" alt="board with resistors" class="css-9whsf3"/></p>
<ul class="css-zoser8">
<li class="css-58pxoz"><strong>Future Learning</strong>: Add the resistors directly to the 5V pin</li>
</ul>
<h2 id="programming-the-arduino" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Programming the Arduino</h2>
<p class="css-142cd63">The controls can be identified like this:</p>
<pre class="language-c"><code class="language-c"><span class="token keyword">const</span> <span class="token keyword">int</span> NControls <span class="token operator">=</span> <span class="token number">44</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> connected<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">184</span><span class="token punctuation">,</span> <span class="token comment">// polyphonic switch</span>
  <span class="token number">185</span><span class="token punctuation">,</span> <span class="token comment">// volume poti</span>
  <span class="token number">186</span><span class="token punctuation">,</span> <span class="token comment">// unison switch</span>
  <span class="token number">187</span><span class="token punctuation">,</span> <span class="token comment">// voice detune poti</span>
  <span class="token number">191</span><span class="token punctuation">,</span> <span class="token comment">// osc3 volume poti</span>
  <span class="token number">193</span><span class="token punctuation">,</span> <span class="token comment">// ext volume switch</span>
  <span class="token number">195</span><span class="token punctuation">,</span> <span class="token comment">// keyboard ctrl 1 switch</span>
  <span class="token number">196</span><span class="token punctuation">,</span> <span class="token comment">// amp attack poti</span>
  <span class="token number">197</span><span class="token punctuation">,</span> <span class="token comment">// filter mod switch</span>
  <span class="token number">198</span><span class="token punctuation">,</span> <span class="token comment">// osc1 switch</span>
  <span class="token number">201</span><span class="token punctuation">,</span> <span class="token comment">// osc2 tune poti</span>
  <span class="token number">203</span><span class="token punctuation">,</span> <span class="token comment">// osc1 range rotary switch</span>
  <span class="token number">204</span><span class="token punctuation">,</span> <span class="token comment">// noise volume poti</span>
  <span class="token number">205</span><span class="token punctuation">,</span> <span class="token comment">// osc2 switch</span>
  <span class="token number">206</span><span class="token punctuation">,</span> <span class="token comment">// osc3 switch</span>
  <span class="token number">207</span><span class="token punctuation">,</span> <span class="token comment">// noise switch</span>
  <span class="token number">208</span><span class="token punctuation">,</span> <span class="token comment">// osc2 range rotary switch</span>
  <span class="token number">211</span><span class="token punctuation">,</span> <span class="token comment">// vcf cutoff poti</span>
  <span class="token number">213</span><span class="token punctuation">,</span> <span class="token comment">// vcf decay poti</span>
  <span class="token number">214</span><span class="token punctuation">,</span> <span class="token comment">// osc2 vol poti</span>
  <span class="token number">215</span><span class="token punctuation">,</span> <span class="token comment">// osc1 vol poti</span>
  <span class="token number">216</span><span class="token punctuation">,</span> <span class="token comment">// osc2 waveform rotary switch</span>
  <span class="token number">217</span><span class="token punctuation">,</span> <span class="token comment">// osc3 waveform rotary switch</span>
  <span class="token number">218</span><span class="token punctuation">,</span> <span class="token comment">// vcf emphasis poti</span>
  <span class="token number">221</span><span class="token punctuation">,</span> <span class="token comment">// external volume poti</span>
  <span class="token number">223</span><span class="token punctuation">,</span> <span class="token comment">// keyboard ctrl 2 switch</span>
  <span class="token number">224</span><span class="token punctuation">,</span> <span class="token comment">// osc1 frequency sync switch</span>
  <span class="token number">225</span><span class="token punctuation">,</span> <span class="token comment">// osc3 tune poti</span>
  <span class="token number">226</span><span class="token punctuation">,</span> <span class="token comment">// osc1 waveform rotary switch</span>
  <span class="token number">227</span><span class="token punctuation">,</span> <span class="token comment">// osc3 range rotary switch</span>
  <span class="token number">228</span><span class="token punctuation">,</span> <span class="token comment">// white/pink switch</span>
  <span class="token number">231</span><span class="token punctuation">,</span> <span class="token comment">// effect 2 switch</span>
  <span class="token number">232</span><span class="token punctuation">,</span> <span class="token comment">// effect 1 switch</span>
  <span class="token number">233</span><span class="token punctuation">,</span> <span class="token comment">// osc2 ctrl switch</span>
  <span class="token number">234</span><span class="token punctuation">,</span> <span class="token comment">// master tune poti</span>
  <span class="token number">235</span><span class="token punctuation">,</span> <span class="token comment">// osc modulation switch</span>
  <span class="token number">236</span><span class="token punctuation">,</span> <span class="token comment">// glide poti</span>
  <span class="token number">237</span><span class="token punctuation">,</span> <span class="token comment">// mod mix poti</span>
  <span class="token number">238</span><span class="token punctuation">,</span> <span class="token comment">// osc3 ctrl switch</span>
  <span class="token number">274</span><span class="token punctuation">,</span> <span class="token comment">// vcf sustain poti</span>
  <span class="token number">276</span><span class="token punctuation">,</span> <span class="token comment">// vcf contour poti</span>
  <span class="token number">277</span><span class="token punctuation">,</span> <span class="token comment">// amp sustain poti</span>
  <span class="token number">275</span><span class="token punctuation">,</span> <span class="token comment">// amp decay poti</span>
  <span class="token number">194</span> <span class="token comment">// vcf attack poti</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<ul class="css-zoser8">
<li class="css-58pxoz">The first two digits are the analog input of the ic (a0 - a5 = 18 - 23, a9 = 27)</li>
<li class="css-58pxoz">The third digit is where the control is connected to the ic (1-8)</li>
</ul>
<p class="css-142cd63">For easier access, we can seperate the two numbers into two arrays:</p>
<pre class="language-c"><code class="language-c"><span class="token keyword">int</span> analogInput<span class="token punctuation">[</span>NControls<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// holds aX for every index</span>
<span class="token keyword">int</span> selectByte<span class="token punctuation">[</span>NControls<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// holds select byte for every index (controls ic)</span>
<span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span>byte i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NControls<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    analogInput<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">floor</span><span class="token punctuation">(</span>connected<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    selectByte<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> connected<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p class="css-142cd63">In the loop function, we can now read all the voltages:</p>
<pre class="language-c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span>byte i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NControls<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// loop through all connected controls</span>
    <span class="token comment">// select correct byte for current control</span>
    <span class="token function">digitalWrite</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token function">bitRead</span><span class="token punctuation">(</span>selectByte<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">digitalWrite</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token function">bitRead</span><span class="token punctuation">(</span>selectByte<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">digitalWrite</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token function">bitRead</span><span class="token punctuation">(</span>selectByte<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> voltage <span class="token operator">=</span> <span class="token function">analogRead</span><span class="token punctuation">(</span>analogInput<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0-1023</span>
    <span class="token function">voltageToMidi</span><span class="token punctuation">(</span>voltage<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p class="css-142cd63">Now we can transform the raw voltage value to MIDI messages:</p>
<pre class="language-c"><code class="language-c"><span class="token keyword">int</span> midiCh <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> cc <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> voltageChangeThreshold <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> TIMEOUT <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">long</span> PTime<span class="token punctuation">[</span>NControls<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// previous time the voltage changed (more than threshold)</span>
<span class="token keyword">int</span> midiPState<span class="token punctuation">[</span>NControls<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// previous sent midi value for control i</span>
<span class="token keyword">int</span> voltagePState<span class="token punctuation">[</span>NControls<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// voltage of control i at last midi send</span>

<span class="token keyword">void</span> <span class="token function">voltageToMidi</span><span class="token punctuation">(</span><span class="token keyword">int</span> voltage<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>voltage<span class="token operator">-</span>voltagePState<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> voltageChangeThreshold<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    PTime<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">millis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">millis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> PTime<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> TIMEOUT<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// here the voltage changed significantly and &quot;stayed there&quot; for more than 300 ms</span>
    <span class="token keyword">int</span> midiValue<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isInverted</span><span class="token punctuation">(</span>connected<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      midiValue <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span>voltage<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1023</span><span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// flipped last 2 numbers to invert</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>connected<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">227</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      midiValue <span class="token operator">=</span> <span class="token function">rotaryMidi</span><span class="token punctuation">(</span>voltage<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      midiValue <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span>voltage<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1023</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// only send midi if it changes (0-127)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>midiPState<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> midiValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">controlChange</span><span class="token punctuation">(</span>midiCh<span class="token punctuation">,</span> cc<span class="token operator">+</span>i<span class="token punctuation">,</span> midiValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// send midi</span>
      MidiUSB<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// force send midi immediately</span>
      voltagePState<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> voltage<span class="token punctuation">;</span> <span class="token comment">// remember last voltage where midi was sent</span>
      midiPState<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> midiValue<span class="token punctuation">;</span> <span class="token comment">// update last sent midi</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<ul class="css-zoser8">
<li class="css-58pxoz">to compensate for voltage jitter, we ignore voltage changes that are lower than a threshold of 8</li>
<li class="css-58pxoz">if the voltage change is above the the theshold, the time is remembered</li>
<li class="css-58pxoz">for 300ms after a significant voltage change, the voltage is mapped to a midi value (0-127)</li>
<li class="css-58pxoz">if the calculated midi value is different from the last, the value is sent out, using <a target="_blank" href="https://www.arduino.cc/en/Reference/MIDIUSB" class="css-1e6egy8">MIDIUSB lib</a></li>
<li class="css-58pxoz">isInverted inverts the mapping for controls with inverted voltages (depends on wiring of 5v and ground)</li>
<li class="css-58pxoz">rotaryMidi maps the 6 step rotary switch to the target 7 step midi value of osc3 range (ignoring the first step)</li>
</ul>
<a href="https://gist.github.com/felixroos/929a8d9c303748179c6bca835e6a16ab" target="_blank"><p class="css-142cd63">show complete code</p></a>
<br/>
<br/>
<h2 id="conclusion" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Conclusion</h2>
<p class="css-142cd63">After 4 days of soldering, and learning a lot about electronics, the basic controller was finished. I also built a prototype case:</p>
<p class="css-142cd63"><img src="./img/caseprototype.jpg" alt="case" class="css-9whsf3"/></p>
<p class="css-142cd63">Huge thanks goes out</p>
<ul class="css-zoser8">
<li class="css-58pxoz"><a target="_blank" href="https://goetzmd.de/category/diy/diy-midi-controller" class="css-1e6egy8">!! Goetz Müller Dürholt for his DIY Midi Controller Series</a></li>
<li class="css-58pxoz"><a target="_blank" href="https://www.musiconerd.com/single-post/arduino-pro-micro-as-a-usb-midi-device" class="css-1e6egy8">Gustavo Silveira for the mapping idea</a></li>
<li class="css-58pxoz"><a target="_blank" href="https://www.instructables.com/id/Arduino-Rotary-Switch-One-Analogue-Input/" class="css-1e6egy8">Mr Fid for the rotary switch idea</a></li>
</ul>
<p class="css-142cd63">I already know that this was not the last MIDI controller to build for myself. Next time, I will try to build a controller for the Prophet V (maybe also including keys).</p>
<h3 id="tbd" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>TBD</h3>
<ul class="css-zoser8">
<li class="css-58pxoz">build proper case</li>
<li class="css-58pxoz">add labels</li>
<li class="css-58pxoz">minor midi mapping issues</li>
</ul></div></article></main><style data-emotion="css btp6j1">.css-btp6j1{box-sizing:border-box;margin:0;min-width:0;padding:32px;color:#666;text-align:center;font-size:18px;}</style><div class="css-btp6j1"><style data-emotion="css i57cvr">.css-i57cvr{box-sizing:border-box;margin:0;min-width:0;margin-left:16px;margin-right:16px;display:inline-block;}</style><span class="css-i57cvr">Created by <a href="https://github.com/felixroos" class="css-1e6egy8">Felix Roos</a></span></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Building a Minimoog MIDI Controller","date":"2020-06-11","tags":["diy","electronics","arduino"],"description":"Last week, a friend a I built a MIDI Controller for the Arturia Mini V3 VST.","image":"img/miniv3frontpanel.png"},"code":"var Component=(()=\u003e{var r=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var i=a=\u003ec(a,\"__esModule\",{value:!0});var u=(a,n)=\u003e()=\u003e(n||a((n={exports:{}}).exports,n),n.exports),k=(a,n)=\u003e{i(a);for(var s in n)c(a,s,{get:n[s],enumerable:!0})},N=(a,n,s)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let t of d(n))!m.call(a,t)\u0026\u0026t!==\"default\"\u0026\u0026c(a,t,{get:()=\u003en[t],enumerable:!(s=p(n,t))||s.enumerable});return a},g=a=\u003eN(i(c(a!=null?r(h(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=u((I,l)=\u003e{l.exports=_jsx_runtime});var y={};k(y,{default:()=\u003ef,frontmatter:()=\u003ew});var e=g(o()),w={title:\"Building a Minimoog MIDI Controller\",date:\"2020-06-11\",tags:[\"diy\",\"electronics\",\"arduino\"],description:\"Last week, a friend a I built a MIDI Controller for the Arturia Mini V3 VST.\",image:\"img/miniv3frontpanel.png\"};function b(a){let n=Object.assign({p:\"p\",img:\"img\",h2:\"h2\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",h3:\"h3\",strong:\"strong\",pre:\"pre\",code:\"code\"},a.components),{wrapper:s}=n,t=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"Last week, a friend a I built a MIDI Controller for the Arturia Mini V3 VST:\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"./img/miniv3.png\",alt:\"mini v3\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"front-panel-controls\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#front-panel-controls\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Front Panel Controls\"]}),`\n`,(0,e.jsx)(n.p,{children:\"At first, we identified the different 44 controls we needed:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.musikding.de/Alpha-Poti-16mm-gewinkelt-print-5k-lin\",children:\"21 potentiometers\"}),\" (with 2 \",(0,e.jsx)(n.a,{href:\"https://www.musikding.de/Bakelit-Knopf-21mm-schwarz\",children:\"21mm\"}),\" and 19 \",(0,e.jsx)(n.a,{href:\"https://www.musikding.de/Bakelit-Knopf-19mm-schwarz\",children:\"19mm\"}),\" bakelit knobs)\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.musikding.de/Drehschalter-6-Pole-2-Stellungen-offen\",children:\"6 rotary switches\"}),\" (with \",(0,e.jsx)(n.a,{href:\"https://www.musikding.de/Chickenhead-23mm-schwarz\",children:\"chicken head knobs\"}),\")\"]}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.conrad.de/de/p/tru-components-tc-r13-2-05-kippschalter-250-v-ac-1-5-a-1-x-aus-ein-rastend-1-1587664.html\",children:\"17 flip switches\"})}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"We decided to omit the following rather useless controls:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"A440 rocker switch\"}),`\n`,(0,e.jsx)(n.li,{children:\"soft clipping switch + button\"}),`\n`,(0,e.jsx)(n.li,{children:\"all keyboard controls\"}),`\n`,(0,e.jsx)(n.li,{children:\"flip switch + overload leds\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Also, we decided to use flip switches only + we added 2 extra flip switches below the 3 pots on the left.\"}),`\n`,(0,e.jsx)(n.p,{children:\"This is the front panel with all the pots and switches in place:\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"./img/midimoogpanel.png\",alt:\"front panel\"})}),`\n`,(0,e.jsx)(n.p,{children:\"for comparison:\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"./img/miniv3frontpanel.png\",alt:\"mini v3 front panel\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"midi-brain\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#midi-brain\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"MIDI Brain\"]}),`\n`,(0,e.jsx)(n.p,{children:\"To read the positions of all controls, we ended up using the Arduino Micro:\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"./img/arduinopins.png\",alt:\"arduino pins\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"it has a ATmega32U4 microcontroller, which makes it usable as a USB device\"}),`\n`,(0,e.jsx)(n.li,{children:\"it has up to 12 analog inputs and up to 20 digital inputs\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"analog-input-multiplexing\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#analog-input-multiplexing\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Analog Input Multiplexing\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"As we have 44 controls and only 12 analog inputs, we used seven \",(0,e.jsx)(n.a,{href:\"https://www.musikding.de/CD4051\",children:\"cd4051 ics\"}),\":\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"./img/cd4051.png\",alt:\"cd4051 pins\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"pins 6 7 \u0026 8 can be connected to ground\"}),`\n`,(0,e.jsx)(n.li,{children:\"pin 16 is connected to 5V\"}),`\n`,(0,e.jsx)(n.li,{children:'the \"channel in\" pins are connected to the controls'}),`\n`,(0,e.jsxs)(n.li,{children:['via the select pins a b and c, we can control which \"channel in\" is routed to the \"com out\". This is done by splitting the three digits of a binary number (000-111) to the three select pins.',`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"by constantly looping through all inputs, we can read all 8 controls in a short amount of time\"}),`\n`,(0,e.jsx)(n.li,{children:'this \"trick\" is also called time multiplexing, which makes the cd4051 a multiplexer'}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.li,{children:\"so with the 12 analog inputs of the arduino, we can connect up to 12x8 = 96 controls\"}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"the-board\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#the-board\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"The Board\"]}),`\n`,(0,e.jsx)(n.p,{children:\"To connect all 44 controls with the multiplexers to the arduino, I drew this board plan:\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"./img/boardplan1.png\",alt:\"board plan 1\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.conrad.de/de/p/rademacher-wr-typ-710-5-platine-hartpapier-l-x-b-160-mm-x-100-mm-35-m-rastermass-2-54-mm-inhalt-1-529506.html\",children:\"the copper strips\"}),\" go from left to right\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"black boxes: \",(0,e.jsx)(n.a,{href:\"(https://www.musikding.de/CD4051)\",children:\"cd4051 multiplexers\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"blue vertical lines: \",(0,e.jsx)(n.a,{href:\"https://www.musikding.de/Platinen-Steckverbinder-8-polig\",children:\"8 pole plug jacks\"})]}),`\n`,(0,e.jsx)(n.li,{children:\"red: 5V\"}),`\n`,(0,e.jsx)(n.li,{children:\"white: ground\"}),`\n`,(0,e.jsx)(n.li,{children:\"shades of blue: select bits a b and c\"}),`\n`,(0,e.jsx)(n.li,{children:\"red vertical marks: copper cuts\"}),`\n`,(0,e.jsx)(n.li,{children:\"green: output cables\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"By rotating the middle row of ics by 180 degrees, we can spare some cables for ground and the select pins.\"}),`\n`,(0,e.jsx)(n.p,{children:\"After soldering it together, the board looked like this:\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"./img/board1.png\",alt:\"soldered board\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"problems\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#problems\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Problems\"]}),`\n`,(0,e.jsx)(n.p,{children:\"As this was our first real electronics project, we ran into some unforseen problems.\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"problem-1-mirroring\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#problem-1-mirroring\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Problem 1: Mirroring\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"After the plan was made, we started using it on the copper side (top image) to solder the \",(0,e.jsx)(n.a,{href:\"https://www.musikding.de/16-Pin-Sockel\",children:\"16 pin jacks\"}),\" and the \",(0,e.jsx)(n.a,{href:\"https://www.musikding.de/Platinen-Steckverbinder-8-polig\",children:\"plug jacks\"}),\".\"]}),`\n`,(0,e.jsx)(n.li,{children:\"When we were done soldering, we realized that if we now attach the ics from the plastic side (down image), they will be mirrored, having wrong pin placements!\"}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Workaround\"}),': To fix the problem, we painstakingly bent all the ic legs to the other side to \"mirror\" them...']}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Future Learning\"}),\": Use two plans, where one is the mirrored version of the other, for both sides of the board\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"problem-2-empty-inputs\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#problem-2-empty-inputs\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Problem 2: Empty Inputs\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Another thing that we realized too late was all the multiplexers inputs must be connected to the circuit to make them work\"}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Workaround\"}),\": We connected all empty inputs via 10k pull up resistors to ground\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Future Learning\"}),\": It's better to use up as much inputs as possible\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"wiring-the-controls\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#wiring-the-controls\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Wiring the controls\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"./img/panelwires.png\",alt:\"panel wires\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"the middle pins of each pot + one of the pins of each switch are connected to ic inputs\"}),`\n`,(0,e.jsx)(n.li,{children:\"all other pins of the switches + one of the outer pot pins are connected to 5V\"}),`\n`,(0,e.jsx)(n.li,{children:\"all remaining pins are connected to ground\"}),`\n`,(0,e.jsx)(n.li,{children:\"all the 5V pins of the switches are connected to ground with a 10k resistor\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"we transformed the rotary switches to potentiometers \",(0,e.jsx)(n.a,{href:\"https://www.instructables.com/id/Arduino-Rotary-Switch-One-Analogue-Input/\",children:\"by connecting the outer pins via resistors\"})]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"For the switches and the empty inputs (see Problem 2), we added the resistors directly on the board, before the plugs:\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"./img/boardwithresistors.png\",alt:\"board with resistors\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Future Learning\"}),\": Add the resistors directly to the 5V pin\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"programming-the-arduino\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#programming-the-arduino\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Programming the Arduino\"]}),`\n`,(0,e.jsx)(n.p,{children:\"The controls can be identified like this:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-c\",children:(0,e.jsxs)(n.code,{className:\"language-c\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" NControls \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"44\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" connected\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"184\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// polyphonic switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"185\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// volume poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"186\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// unison switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"187\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// voice detune poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"191\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc3 volume poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"193\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// ext volume switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"195\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// keyboard ctrl 1 switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"196\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// amp attack poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"197\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// filter mod switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"198\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc1 switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"201\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc2 tune poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"203\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc1 range rotary switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"204\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// noise volume poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"205\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc2 switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"206\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc3 switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"207\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// noise switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"208\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc2 range rotary switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"211\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// vcf cutoff poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"213\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// vcf decay poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"214\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc2 vol poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"215\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc1 vol poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"216\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc2 waveform rotary switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"217\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc3 waveform rotary switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"218\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// vcf emphasis poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"221\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// external volume poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"223\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// keyboard ctrl 2 switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"224\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc1 frequency sync switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"225\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc3 tune poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"226\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc1 waveform rotary switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"227\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc3 range rotary switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"228\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// white/pink switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"231\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// effect 2 switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"232\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// effect 1 switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"233\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc2 ctrl switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"234\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// master tune poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"235\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc modulation switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"236\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// glide poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"237\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// mod mix poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"238\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// osc3 ctrl switch\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"274\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// vcf sustain poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"276\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// vcf contour poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"277\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// amp sustain poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"275\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// amp decay poti\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token number\",children:\"194\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// vcf attack poti\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"The first two digits are the analog input of the ic (a0 - a5 = 18 - 23, a9 = 27)\"}),`\n`,(0,e.jsx)(n.li,{children:\"The third digit is where the control is connected to the ic (1-8)\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"For easier access, we can seperate the two numbers into two arrays:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-c\",children:(0,e.jsxs)(n.code,{className:\"language-c\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" analogInput\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"NControls\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// holds aX for every index\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" selectByte\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"NControls\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// holds select byte for every index (controls ic)\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"setup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"byte i \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\" NControls\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"++\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    analogInput`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"floor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"connected\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"10\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n    selectByte`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" connected\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"%\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"10\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,e.jsx)(n.p,{children:\"In the loop function, we can now read all the voltages:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-c\",children:(0,e.jsxs)(n.code,{className:\"language-c\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"loop\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"byte i \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\" NControls\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"++\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// loop through all connected controls\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// select correct byte for current control\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token function\",children:\"digitalWrite\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"10\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"bitRead\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"selectByte\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token function\",children:\"digitalWrite\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"11\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"bitRead\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"selectByte\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token function\",children:\"digitalWrite\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"12\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"bitRead\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"selectByte\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" voltage \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"analogRead\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"analogInput\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// 0-1023\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token function\",children:\"voltageToMidi\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"voltage\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,e.jsx)(n.p,{children:\"Now we can transform the raw voltage value to MIDI messages:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-c\",children:(0,e.jsxs)(n.code,{className:\"language-c\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" midiCh \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"9\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" cc \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" voltageChangeThreshold \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" TIMEOUT \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"300\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"unsigned\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"long\"}),\" PTime\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"NControls\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// previous time the voltage changed (more than threshold)\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" midiPState\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"NControls\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// previous sent midi value for control i\"}),`\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" voltagePState\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"NControls\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// voltage of control i at last midi send\"}),`\n\n`,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"voltageToMidi\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" voltage\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"abs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"voltage\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\"voltagePState\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" voltageChangeThreshold\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    PTime`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"millis\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"millis\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" PTime\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\" TIMEOUT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token comment\",children:'// here the voltage changed significantly and \"stayed there\" for more than 300 ms'}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"int\"}),\" midiValue\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"isInverted\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"connected\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n      midiValue `,(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"map\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"voltage\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1023\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"127\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// flipped last 2 numbers to invert\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"connected\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"==\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"227\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n      midiValue `,(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"rotaryMidi\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"voltage\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"6\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"7\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n      midiValue `,(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"map\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"voltage\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1023\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"127\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token comment\",children:\"// only send midi if it changes (0-127)\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"midiPState\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"!=\"}),\" midiValue\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n      `,(0,e.jsx)(n.span,{className:\"token function\",children:\"controlChange\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"midiCh\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" cc\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" midiValue\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// send midi\"}),`\n      MidiUSB`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"flush\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// force send midi immediately\"}),`\n      voltagePState`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" voltage\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// remember last voltage where midi was sent\"}),`\n      midiPState`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" midiValue\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// update last sent midi\"}),`\n    `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"to compensate for voltage jitter, we ignore voltage changes that are lower than a threshold of 8\"}),`\n`,(0,e.jsx)(n.li,{children:\"if the voltage change is above the the theshold, the time is remembered\"}),`\n`,(0,e.jsx)(n.li,{children:\"for 300ms after a significant voltage change, the voltage is mapped to a midi value (0-127)\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"if the calculated midi value is different from the last, the value is sent out, using \",(0,e.jsx)(n.a,{href:\"https://www.arduino.cc/en/Reference/MIDIUSB\",children:\"MIDIUSB lib\"})]}),`\n`,(0,e.jsx)(n.li,{children:\"isInverted inverts the mapping for controls with inverted voltages (depends on wiring of 5v and ground)\"}),`\n`,(0,e.jsx)(n.li,{children:\"rotaryMidi maps the 6 step rotary switch to the target 7 step midi value of osc3 range (ignoring the first step)\"}),`\n`]}),`\n`,(0,e.jsx)(\"a\",{href:\"https://gist.github.com/felixroos/929a8d9c303748179c6bca835e6a16ab\",target:\"_blank\",children:(0,e.jsx)(n.p,{children:\"show complete code\"})}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsxs)(n.h2,{id:\"conclusion\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#conclusion\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),`\n`,(0,e.jsx)(n.p,{children:\"After 4 days of soldering, and learning a lot about electronics, the basic controller was finished. I also built a prototype case:\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"./img/caseprototype.jpg\",alt:\"case\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Huge thanks goes out\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://goetzmd.de/category/diy/diy-midi-controller\",children:\"!! Goetz M\\xFCller D\\xFCrholt for his DIY Midi Controller Series\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.musiconerd.com/single-post/arduino-pro-micro-as-a-usb-midi-device\",children:\"Gustavo Silveira for the mapping idea\"})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.instructables.com/id/Arduino-Rotary-Switch-One-Analogue-Input/\",children:\"Mr Fid for the rotary switch idea\"})}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"I already know that this was not the last MIDI controller to build for myself. Next time, I will try to build a controller for the Prophet V (maybe also including keys).\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"tbd\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#tbd\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"TBD\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"build proper case\"}),`\n`,(0,e.jsx)(n.li,{children:\"add labels\"}),`\n`,(0,e.jsx)(n.li,{children:\"minor midi mapping issues\"}),`\n`]})]});return s?(0,e.jsx)(s,Object.assign({},a,{children:t})):t}var f=b;return y;})();\n;return Component.default;"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"midimoog"},"buildId":"ohVobnQ3Ypc1-7cMb_4WQ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>