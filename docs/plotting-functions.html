<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Loophole Letters</title><meta content="This is where felixroos writes about music and coding and stuff that he finds interesting." name="description"/><meta property="og:url" content="https://felixroos.github.io/plotting-functions"/><link rel="canonical" href="https://felixroos.github.io/plotting-functions"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"/><meta property="og:type" content="website"/><meta property="og:site_name" content="Loophole Letters"/><meta property="og:description" content="This is where felixroos writes about music and coding and stuff that he finds interesting."/><meta property="og:title" content="Loophole Letters"/><meta property="og:image" content="https://felixroos.github.io/images/site-preview.png"/><meta name="next-head-count" content="12"/><link rel="preload" href="/_next/static/css/1bf41908dc2b02975933.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1bf41908dc2b02975933.css" data-n-g=""/><link rel="preload" href="/_next/static/css/3dd4d340904c9260f6d8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3dd4d340904c9260f6d8.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-ddd010a953737b6e3536.js" defer=""></script><script src="/_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="/_next/static/chunks/main-222191e14496d29481e0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-59e28196aa70d0b239d8.js" defer=""></script><script src="/_next/static/chunks/404-d5935ede064e9f79c1b7.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-e72df5e3122da1e00991.js" defer=""></script><script src="/_next/static/3g4JzCtv87FmuTIoVbGJn/_buildManifest.js" defer=""></script><script src="/_next/static/3g4JzCtv87FmuTIoVbGJn/_ssgManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css-global 1ob364s">html{--theme-ui-colors-primary:#307AC6;--theme-ui-colors-secondary:#27a727;--theme-ui-colors-background:#fff;--theme-ui-colors-text:#1b1e21;--theme-ui-colors-blue:#4169e1;--theme-ui-colors-cyan:#41b9e1;--theme-ui-colors-gray:#667788;--theme-ui-colors-green:#27a727;--theme-ui-colors-purple:#6941e1;--theme-ui-colors-orange:#fba100;--theme-ui-colors-pink:#e141b9;--theme-ui-colors-red:#ee5555;--theme-ui-colors-white:#fff;--theme-ui-colors-yellow:#FFDD22;--theme-ui-colors-lite:#eee;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}html.theme-ui-__default{--theme-ui-colors-primary:#307AC6;--theme-ui-colors-secondary:#27a727;--theme-ui-colors-background:#fff;--theme-ui-colors-text:#1b1e21;--theme-ui-colors-blue:#4169e1;--theme-ui-colors-cyan:#41b9e1;--theme-ui-colors-gray:#667788;--theme-ui-colors-green:#27a727;--theme-ui-colors-purple:#6941e1;--theme-ui-colors-orange:#fba100;--theme-ui-colors-pink:#e141b9;--theme-ui-colors-red:#ee5555;--theme-ui-colors-white:#fff;--theme-ui-colors-yellow:#FFDD22;--theme-ui-colors-lite:#eee;}html.theme-ui-dark{--theme-ui-colors-text:#fff;--theme-ui-colors-background:#292C34;--theme-ui-colors-lite:#333;--theme-ui-colors-primary:#85DEFB;}</style><style data-emotion="css-global 0"></style><style data-emotion="css 1td7120">.css-1td7120{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:100vh;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:auto;position:relative;max-width:800px;}</style><div class="css-1td7120"><style data-emotion="css eim2bq">.css-eim2bq{box-sizing:border-box;margin:0;min-width:0;padding:16px;position:absolute;top:0;right:0;opacity:0;-webkit-transition:opacity .25s ease-in-out;transition:opacity .25s ease-in-out;}</style><div class="css-eim2bq"><style data-emotion="css jakyet">.css-jakyet{box-sizing:border-box;margin:0;min-width:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;display:inline-block;text-align:center;line-height:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:inherit;padding-left:16px;padding-right:16px;padding-top:8px;padding-bottom:8px;color:var(--theme-ui-colors-white);background-color:var(--theme-ui-colors-primary);border:0;border-radius:4px;color:var(--theme-ui-colors-background);background-color:var(--theme-ui-colors-primary);background-color:var(--theme-ui-colors-gray);padding-top:4px;padding-bottom:4px;padding-left:8px;padding-right:8px;font-size:16px;cursor:pointer;}.css-jakyet:hover{background-color:var(--theme-ui-colors-text);}</style><button class="css-jakyet">light<!-- --> mode</button></div><style data-emotion="css 1doo0ju">.css-1doo0ju{box-sizing:border-box;margin:0;min-width:0;padding-top:32px;}</style><header class="css-1doo0ju"><style data-emotion="css 1n35gdr">.css-1n35gdr{box-sizing:border-box;margin:0;min-width:0;font-family:Montserrat,sans-serif;font-weight:900;line-height:1.1;font-size:30px;padding-bottom:32px;padding-left:16px;padding-right:16px;font-weight:900;}@media screen and (min-width: 32em){.css-1n35gdr{padding-left:32px;padding-right:32px;}}</style><h1 class="css-1n35gdr"><style data-emotion="css 1ie6k50">.css-1ie6k50{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-text);}</style><a href="/" class="css-1ie6k50">♾️ loophole letters</a></h1></header><style data-emotion="css td0gup">.css-td0gup{box-sizing:border-box;margin:0;min-width:0;padding-left:16px;padding-right:16px;padding-bottom:0;}@media screen and (min-width: 32em){.css-td0gup{padding-left:32px;padding-right:32px;}}</style><main class="css-td0gup"><style data-emotion="css vurnku">.css-vurnku{box-sizing:border-box;margin:0;min-width:0;}</style><article class="css-vurnku"><style data-emotion="css 1hep91p">.css-1hep91p{box-sizing:border-box;margin:0;min-width:0;float:right;}</style><div class="css-1hep91p"><style data-emotion="css 1f7qs6g">.css-1f7qs6g{box-sizing:border-box;margin:0;min-width:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;display:inline-block;text-align:center;line-height:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:inherit;padding-left:16px;padding-right:16px;padding-top:8px;padding-bottom:8px;color:var(--theme-ui-colors-white);background-color:var(--theme-ui-colors-primary);border:0;border-radius:4px;color:var(--theme-ui-colors-primary);border:1px solid var(--theme-ui-colors-primary);background-color:var(--theme-ui-colors-background);display:inline;margin-right:4px;}</style><button class="css-1f7qs6g">code</button><button class="css-1f7qs6g">d3</button></div><style data-emotion="css 108j34h">.css-108j34h{box-sizing:border-box;margin:0;min-width:0;font-family:Montserrat,sans-serif;font-weight:900;line-height:1.1;font-size:40px;}</style><h2 class="css-108j34h">Plotting Functions with React and d3.js</h2><style data-emotion="css 188b938">.css-188b938{box-sizing:border-box;margin:0;min-width:0;font-family:'Merriweather','Georgia',serif;font-weight:400;line-height:1.75;margin-bottom:32px;color:var(--theme-ui-colors-gray);font-style:italic;}</style><p class="css-188b938">April 18, 2020</p><div class="css-vurnku"><style data-emotion="css 142cd63">.css-142cd63{font-size:18px;font-weight:400;line-height:1.75;}</style><p class="css-142cd63">As the basis of many upcoming visualizations, I will use libraries of <style data-emotion="css 1e6egy8">.css-1e6egy8{color:var(--theme-ui-colors-primary);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;}</style><a target="_blank" href="https://github.com/d3/d3/blob/master/API.md" class="css-1e6egy8">the huge d3 ecosystem</a>.
For many applications, for example to animate vibrating strings, it want to plot functions:</p>
<svg width="500" height="300"><g class="x-axis plot-axis"></g><g class="y-axis plot-axis"></g><g><path d="M469.000001,153.13007599287843L468.000001,151.2605685979838L467.000001,149.39189807429824L466.000001,147.5244826235193L465.000001,145.65874016646364L464.000001,143.79508824953834L463.000001,141.9339439512949L462.000001,140.07572378908893L461.000001,138.22084362586477L460.000001,136.36971857708753L459.000001,134.52276291784094L458.000001,132.68038999011452L457.000001,130.84301211029893L456.000001,129.01104047691175L455.000001,127.1848850785716L454.000001,125.36495460224492L453.000001,123.55165634178312L452.000001,121.7453961067719L451.000001,119.94657813171216L450.000001,118.15560498555396L449.000001,116.37287748160306L448.000001,114.59879458782058L447.000001,112.83375333753486L446.000001,111.07814874058725L445.000001,109.33237369493047L444.000001,107.59681889869887L443.000001,105.87187276277243L442.000001,104.15792132385099L441.000001,102.45534815806104L440.000001,100.76453429511304L439.000001,99.08585813302776L438.000001,97.41969535345243L437.000001,95.76641883758494L436.000001,94.12639858272362L435.000001,92.50000161946376L434.000001,90.8875919295572L433.000001,89.28953036445492L432.000001,87.70617456454923L431.000001,86.13787887913551L430.000001,84.58499428711016L429.000001,83.04786831842242L428.000001,81.52684497629909L427.000001,80.02226466025705L426.000001,78.53446408992352L425.000001,77.06377622967975L424.000001,75.61053021414402L423.000001,74.17505127451304L422.000001,72.75766066577624L421.000001,71.35867559482031L420.000001,69.9784091494389L419.000001,68.61717022826522L418.000001,67.2752634716412L417.000001,65.95298919344086L416.000001,64.65064331386017L415.000001,63.36851729319176L414.000001,62.106898066597L413.000001,60.86606797989117L412.000001,59.646304726355126L411.000001,58.4478812845888L410.000001,57.27106585741945L409.000001,56.11612181187911L408.000001,54.983307620263574L407.000001,53.87287680228742L406.000001,52.78507786834749L405.000001,51.72015426390672L404.000001,50.67834431501209L403.000001,49.65988117495843L402.000001,48.66499277210887L401.000001,47.69390175888613L400.000001,46.746825461943004L399.000001,45.823975833525736L398.000001,44.92555940404006L397.000001,44.05177723583012L396.000001,43.20282487818156L395.000001,42.37889232355832L394.000001,41.5801639650831L393.000001,40.80681855527066L392.000001,40.059029166023805L391.000001,39.33696314990035L390.000001,38.64078210266056L389.000001,37.97064182710222L388.000001,37.32669229819272L387.000001,36.709077629505124L386.000001,36.11793604096622L385.000001,35.5533998279233L384.000001,35.01559533153689L383.000001,34.504642910506064L382.000001,34.020656914132836L381.000001,33.563745656730845L380.000001,33.13401139338523L379.000001,32.73155029706826L378.000001,32.35645243711613L377.000001,32.00880175907192L376.000001,31.68867606589862L375.000001,31.39614700056734L374.000001,31.131280030023774L373.000001,30.894134430537044L372.000001,30.68476327443362L371.000001,30.503213418220238L370.000001,30.349525492097435L369.000001,30.223733890866637L368.000001,30.12586676623272L367.000001,30.055946020503903L366.000001,30.01398730168986L365.000001,30L364.000001,30.01398724574181L363.000001,30.055945908620295L362.000001,30.125866598438662L361.000001,30.22373366719963L360.000001,30.34952521260756L359.000001,30.50321308297002L358.000001,30.68476288349806L357.000001,30.894133984003673L356.000001,31.131279527992554L355.000001,31.39614644315056L354.000001,31.688675453221045L353.000001,32.00880109127069L352.000001,32.356451714340736L351.000001,32.731549519480374L350.000001,33.13401056115889L349.000001,33.56374477005231L348.000001,34.02065597320056L347.000001,34.50464191553063L346.000001,35.0155942827409L345.000001,35.55339872554153L344.000001,36.1179348852454L343.000001,36.70907642070384L342.000001,37.326691036581515L341.000001,37.97064051296348L340.000001,38.64078073628838L339.000001,39.33696173160048L338.000001,40.05902769611361L337.000001,40.80681703407915L336.000001,41.58016239295073L335.000001,42.37889070083692L334.000001,43.20282320523428L333.000001,44.051775513031416L332.000001,44.92555763177544L331.000001,45.823974012191826L330.000001,46.74682359194735L329.000001,47.69389984064735L328.000001,48.66499080605621L327.000001,49.65987916153178L326.000001,50.678342254662255L325.000001,51.7201521570946L324.000001,52.78507571554472L323.000001,53.872874603975745L322.000001,54.98330537693491L321.000001,56.11611952403561L320.000001,57.2710635255731L319.000001,58.44787890926137L318.000001,59.64630230807825L317.000001,60.86606551920606L316.000001,62.10689556405441L315.000001,63.368514749351654L314.000001,64.65064072929192L313.000001,65.95298656872292L312.000001,67.27526080736092L311.000001,68.6171675250187L310.000001,69.97840640783132L309.000001,71.35867281546518L308.000001,72.75765784929561L307.000001,74.17504842153707L306.000001,75.61052732531135L305.000001,77.06377330563683L304.000001,78.53446113132482L303.000001,80.02226166776458L302.000001,81.52684195058261L301.000001,83.04786526015914L300.000001,84.58499119698432L299.000001,86.13787575783888L298.000001,87.70617141278022L297.000001,89.28952718291892L296.000001,90.88758871896627L295.000001,92.49999838053633L294.000001,94.12639531618458L293.000001,95.7664155441654L292.000001,97.41969203388942L291.000001,99.08585478806408L290.000001,100.76453092549737L289.000001,102.45534476454752L288.000001,104.15791790719891L287.000001,105.87186932374661L286.000001,107.596815438069L285.000001,109.33237021347084L284.000001,111.07814523907709L283.000001,112.83374981675772L282.000001,114.59879104856444L281.000001,116.37287392466008L280.000001,118.15560141171999L279.000001,119.94657454178717L278.000001,121.74539250155925L277.000001,123.55165272208968L276.000001,125.36495096888065L275.000001,127.18488143234974L274.000001,129.01103681864834L273.000001,130.84300844081272L272.000001,132.6803863102264L271.000001,134.52275922837472L270.000001,136.36971487886888L269.000001,138.22083991972136L268.000001,140.07572007585003L267.000001,141.93394023179172L266.000001,143.79508452460328L265.000001,145.6587364369302L264.000001,147.52447889022216L263.000001,149.39189433807292L262.000001,151.2605648596665L261.000001,153.13007225330563L260.000001,154.99999813000437L259.000001,156.8699240071216L258.000001,158.73943140201612L257.000001,160.6081019257017L256.000001,162.47551737648072L255.000001,164.3412598335363L254.000001,166.20491175046163L253.000001,168.0660560487051L252.000001,169.92427621091113L251.000001,171.7791563741352L250.000001,173.6302814229125L249.000001,175.4772370821591L248.000001,177.31961000988557L247.000001,179.15698788970093L246.000001,180.98895952308817L245.000001,182.81511492142835L244.000001,184.6350453977551L243.000001,186.4483436582168L242.000001,188.25460389322808L241.000001,190.0534218682878L240.000001,191.84439501444606L239.000001,193.62712251839687L238.000001,195.40120541217942L237.000001,197.1662466624652L236.000001,198.92185125941276L235.000001,200.66762630506955L234.000001,202.4031811013011L233.000001,204.12812723722755L232.000001,205.84207867614904L231.000001,207.5446518419389L230.000001,209.23546570488696L229.000001,210.91414186697222L228.000001,212.5803046465475L227.000001,214.23358116241505L226.000001,215.8736014172764L225.000001,217.49999838053628L224.000001,219.11240807044277L223.000001,220.71046963554508L222.000001,222.29382543545074L221.000001,223.86212112086446L220.000001,225.4150057128898L219.000001,226.9521316815775L218.000001,228.47315502370083L217.000001,229.97773533974302L216.000001,231.4655359100764L215.000001,232.93622377032023L214.000001,234.389469785856L213.000001,235.824948725487L212.000001,237.24233933422371L211.000001,238.64132440517974L210.000001,240.02159085056118L209.000001,241.3828297717349L208.000001,242.7247365283587L207.000001,244.04701080655911L206.000001,245.3493566861398L205.000001,246.63148270680824L204.000001,247.89310193340293L203.000001,249.13393202010883L202.000001,250.35369527364486L201.000001,251.55211871541118L200.000001,252.7289341425805L199.000001,253.8838781881209L198.000001,255.01669237973644L197.000001,256.1271231977126L196.000001,257.2149221316525L195.000001,258.27984573609325L194.000001,259.32165568498783L193.000001,260.3401188250416L192.000001,261.335007227891L191.000001,262.30609824111383L190.000001,263.253174538057L189.000001,264.17602416647424L188.000001,265.0744405959599L187.000001,265.9482227641699L186.000001,266.79717512181844L185.000001,267.6211076764417L184.000001,268.41983603491695L183.000001,269.19318144472936L182.000001,269.9409708339763L181.000001,270.6630368500996L180.000001,271.3592178973394L179.000001,272.0293581728978L178.000001,272.6733077018073L177.000001,273.29092237049485L176.000001,273.88206395903376L175.000001,274.4466001720767L174.000001,274.98440466846307L173.000001,275.4953570894939L172.000001,275.9793430858672L171.000001,276.4362543432692L170.000001,276.86598860661474L169.000001,277.2684497029317L168.000001,277.64354756288384L167.000001,277.99119824092804L166.000001,278.3113239341014L165.000001,278.60385299943266L164.000001,278.8687199699762L163.000001,279.10586556946294L162.000001,279.31523672556636L161.000001,279.49678658177976L160.000001,279.6504745079026L159.000001,279.77626610913336L158.000001,279.8741332337673L157.000001,279.9440539794961L156.000001,279.9860126983101L155.000001,280L154.000001,279.9860127542582L153.000001,279.9440540913797L152.000001,279.8741334015613L151.000001,279.7762663328004L150.000001,279.65047478739245L149.000001,279.49678691702997L148.000001,279.3152371165019L147.000001,279.1058660159963L146.000001,278.86872047200745L145.000001,278.60385355684946L144.000001,278.3113245467789L143.000001,277.9911989087293L142.000001,277.6435482856593L141.000001,277.2684504805197L140.000001,276.86598943884115L139.000001,276.4362552299477L138.000001,275.9793440267994L137.000001,275.4953580844694L136.000001,274.98440571725905L135.000001,274.4466012744585L134.000001,273.8820651147546L133.000001,273.29092357929613L132.000001,272.6733089634185L131.000001,272.0293594870366L130.000001,271.3592192637116L129.000001,270.66303826839953L128.000001,269.9409723038864L127.000001,269.19318296592087L126.000001,268.41983760704926L125.000001,267.6211092991631L124.000001,266.7971767947658L123.000001,265.94822448696857L122.000001,265.0744423682246L121.000001,264.1760259878082L120.000001,263.25317640805264L119.000001,262.3061001593527L118.000001,261.3350091939438L117.000001,260.34012083846824L116.000001,259.3216577453378L115.000001,258.2798478429054L114.000001,257.21492428445526L113.000001,256.12712539602427L112.000001,255.01669462306512L111.000001,253.88388047596436L110.000001,252.72893647442692L109.000001,251.55212109073864L108.000001,250.35369769192175L107.000001,249.13393448079387L106.000001,247.8931044359456L105.000001,246.63148525064835L104.000001,245.34935927070805L103.000001,244.04701343127707L102.000001,242.72473919263905L101.000001,241.38283247498129L100.000001,240.02159359216873L99.000001,238.64132718453484L98.000001,237.24234215070442L97.000001,235.82495157846293L96.000001,234.3894726746887L95.000001,232.9362266943631L94.000001,231.46553886867517L93.000001,229.97773833223548L92.000001,228.47315804941735L91.000001,226.9521347398409L90.000001,225.41500880301572L89.000001,223.86212424216114L88.000001,222.29382858721982L87.000001,220.71047281708104L86.000001,219.11241128103373L85.000001,217.50000161946372L84.000001,215.87360468381536L83.000001,214.2335844558346L82.000001,212.5803079661106L81.000001,210.91414521193596L80.000001,209.23546907450262L79.000001,207.54465523545247L78.000001,205.84208209280106L77.000001,204.12813067625336L76.000001,202.40318456193103L75.000001,200.66762978652918L74.000001,198.92185476092294L73.000001,197.16625018324234L72.000001,195.4012089514355L71.000001,193.62712607533996L70.000001,191.84439858828L69.000001,190.0534254582129L68.000001,188.25460749844072L67.000001,186.44834727791033L66.000001,184.63504903111937L65.000001,182.81511856765025L64.000001,180.9889631813517L63.000001,179.1569915591873L62.000001,177.31961368977358L61.000001,175.47724077162533L60.000001,173.63028512113107L59.000001,171.77916008027864L58.000001,169.92427992414997L57.000001,168.06605976820836L56.000001,166.20491547539677L55.000001,164.3412635630698L54.000001,162.4755211097779L53.000001,160.60810566192703L52.000001,158.7394351403335L51.000001,156.8699277466944L50.000001,155.0000018699956" stroke="lightsalmon" stroke-width="5" fill="none"></path><path d="M469.000001,279.9860127542582L468.000001,279.9440540913797L467.000001,279.8741334015613L466.000001,279.7762663328004L465.000001,279.65047478739245L464.000001,279.49678691702997L463.000001,279.3152371165019L462.000001,279.1058660159963L461.000001,278.86872047200745L460.000001,278.60385355684946L459.000001,278.3113245467789L458.000001,277.99119890872936L457.000001,277.6435482856593L456.000001,277.2684504805196L455.000001,276.8659894388411L454.000001,276.4362552299477L453.000001,275.9793440267994L452.000001,275.4953580844694L451.000001,274.98440571725905L450.000001,274.4466012744585L449.000001,273.8820651147546L448.000001,273.29092357929613L447.000001,272.6733089634185L446.000001,272.0293594870366L445.000001,271.3592192637116L444.000001,270.66303826839953L443.000001,269.9409723038864L442.000001,269.19318296592087L441.000001,268.41983760704926L440.000001,267.62110929916304L439.000001,266.79717679476573L438.000001,265.94822448696857L437.000001,265.0744423682246L436.000001,264.1760259878082L435.000001,263.25317640805264L434.000001,262.3061001593527L433.000001,261.3350091939438L432.000001,260.34012083846824L431.000001,259.32165774533775L430.000001,258.2798478429054L429.000001,257.21492428445526L428.000001,256.12712539602427L427.000001,255.01669462306512L426.000001,253.88388047596436L425.000001,252.7289364744269L424.000001,251.55212109073864L423.000001,250.35369769192175L422.000001,249.13393448079387L421.000001,247.89310443594556L420.000001,246.63148525064835L419.000001,245.3493592707081L418.000001,244.047013431277L417.000001,242.72473919263902L416.000001,241.38283247498129L415.000001,240.02159359216873L414.000001,238.6413271845348L413.000001,237.2423421507044L412.000001,235.82495157846293L411.000001,234.3894726746887L410.000001,232.9362266943631L409.000001,231.46553886867514L408.000001,229.97773833223548L407.000001,228.47315804941735L406.000001,226.95213473984086L405.000001,225.41500880301567L404.000001,223.8621242421611L403.000001,222.2938285872198L402.000001,220.71047281708104L401.000001,219.11241128103376L400.000001,217.50000161946372L399.000001,215.87360468381536L398.000001,214.2335844558346L397.000001,212.58030796611055L396.000001,210.91414521193593L395.000001,209.23546907450256L394.000001,207.54465523545247L393.000001,205.84208209280104L392.000001,204.12813067625342L391.000001,202.40318456193094L390.000001,200.66762978652915L389.000001,198.9218547609229L388.000001,197.16625018324234L387.000001,195.40120895143554L386.000001,193.6271260753399L385.000001,191.84439858827997L384.000001,190.05342545821284L383.000001,188.2546074984407L382.000001,186.4483472779103L381.000001,184.63504903111937L380.000001,182.81511856765025L379.000001,180.98896318135166L378.000001,179.15699155918728L377.000001,177.31961368977358L376.000001,175.47724077162528L375.000001,173.63028512113107L374.000001,171.77916008027864L373.000001,169.92427992414997L372.000001,168.0660597682083L371.000001,166.20491547539675L370.000001,164.3412635630698L369.000001,162.4755211097779L368.000001,160.60810566192706L367.000001,158.73943514033346L366.000001,156.86992774669437L365.000001,155.00000186999563L364.000001,153.1300759928784L363.000001,151.26056859798382L362.000001,149.39189807429824L361.000001,147.5244826235193L360.000001,145.65874016646364L359.000001,143.79508824953834L358.000001,141.9339439512949L357.000001,140.07572378908893L356.000001,138.22084362586477L355.000001,136.36971857708753L354.000001,134.52276291784094L353.000001,132.6803899901145L352.000001,130.84301211029896L351.000001,129.01104047691175L350.000001,127.1848850785716L349.000001,125.36495460224495L348.000001,123.55165634178314L347.000001,121.7453961067719L346.000001,119.94657813171216L345.000001,118.15560498555396L344.000001,116.37287748160308L343.000001,114.59879458782058L342.000001,112.83375333753486L341.000001,111.07814874058728L340.000001,109.33237369493047L339.000001,107.5968188986989L338.000001,105.87187276277243L337.000001,104.15792132385097L336.000001,102.45534815806107L335.000001,100.76453429511307L334.000001,99.08585813302778L333.000001,97.4196953534525L332.000001,95.76641883758494L331.000001,94.12639858272362L330.000001,92.50000161946372L329.000001,90.88759192955723L328.000001,89.28953036445495L327.000001,87.70617456454923L326.000001,86.13787887913551L325.000001,84.58499428711013L324.000001,83.04786831842246L323.000001,81.52684497629909L322.000001,80.022264660257L321.000001,78.53446408992357L320.000001,77.06377622967975L319.000001,75.61053021414402L318.000001,74.17505127451304L317.000001,72.7576606657763L316.000001,71.35867559482031L315.000001,69.9784091494389L314.000001,68.61717022826517L313.000001,67.27526347164124L312.000001,65.95298919344086L311.000001,64.6506433138602L310.000001,63.368517293191736L309.000001,62.106898066597026L308.000001,60.86606797989117L307.000001,59.646304726355126L306.000001,58.447881284588775L305.000001,57.2710658574195L304.000001,56.11612181187911L303.000001,54.98330762026352L302.000001,53.87287680228745L301.000001,52.78507786834749L300.000001,51.72015426390672L299.000001,50.67834431501211L298.000001,49.6598811749584L297.000001,48.66499277210892L296.000001,47.69390175888613L295.000001,46.746825461942976L294.000001,45.823975833525765L293.000001,44.92555940404009L292.000001,44.05177723583012L291.000001,43.20282487818153L290.000001,42.37889232355832L289.000001,41.5801639650831L288.000001,40.80681855527066L287.000001,40.059029166023805L286.000001,39.33696314990035L285.000001,38.64078210266056L284.000001,37.97064182710222L283.000001,37.32669229819272L282.000001,36.709077629505124L281.000001,36.11793604096622L280.000001,35.5533998279233L279.000001,35.01559533153689L278.000001,34.50464291050612L277.000001,34.020656914132836L276.000001,33.56374565673087L275.000001,33.13401139338526L274.000001,32.73155029706826L273.000001,32.35645243711613L272.000001,32.00880175907192L271.000001,31.68867606589862L270.000001,31.39614700056734L269.000001,31.131280030023774L268.000001,30.894134430537044L267.000001,30.68476327443362L266.000001,30.503213418220238L265.000001,30.349525492097435L264.000001,30.223733890866605L263.000001,30.12586676623272L262.000001,30.055946020503903L261.000001,30.01398730168986L260.000001,30L259.000001,30.01398724574181L258.000001,30.055945908620295L257.000001,30.125866598438662L256.000001,30.22373366719963L255.000001,30.34952521260756L254.000001,30.50321308297002L253.000001,30.68476288349806L252.000001,30.894133984003673L251.000001,31.131279527992554L250.000001,31.39614644315056L249.000001,31.688675453221045L248.000001,32.00880109127069L247.000001,32.35645171434071L246.000001,32.731549519480346L245.000001,33.13401056115886L244.000001,33.56374477005234L243.000001,34.02065597320056L242.000001,34.50464191553063L241.000001,35.0155942827409L240.000001,35.55339872554153L239.000001,36.11793488524537L238.000001,36.70907642070384L237.000001,37.326691036581515L236.000001,37.97064051296348L235.000001,38.64078073628838L234.000001,39.33696173160048L233.000001,40.05902769611361L232.000001,40.80681703407915L231.000001,41.58016239295073L230.000001,42.37889070083692L229.000001,43.20282320523428L228.000001,44.05177551303139L227.000001,44.92555763177544L226.000001,45.823974012191826L225.000001,46.746823591947376L224.000001,47.69389984064735L223.000001,48.66499080605621L222.000001,49.659879161531805L221.000001,50.678342254662226L220.000001,51.72015215709458L219.000001,52.785075715544664L218.000001,53.87287460397569L217.000001,54.983305376934936L216.000001,56.11611952403558L215.000001,57.2710635255731L214.000001,58.44787890926134L213.000001,59.64630230807827L212.000001,60.86606551920606L211.000001,62.10689556405444L210.000001,63.36851474935171L209.000001,64.65064072929198L208.000001,65.95298656872292L207.000001,67.27526080736092L206.000001,68.6171675250187L205.000001,69.9784064078313L204.000001,71.35867281546516L203.000001,72.75765784929558L202.000001,74.17504842153707L201.000001,75.6105273253113L200.000001,77.06377330563686L199.000001,78.53446113132482L198.000001,80.02226166776452L197.000001,81.52684195058266L196.000001,83.04786526015914L195.000001,84.58499119698435L194.000001,86.13787575783883L193.000001,87.70617141278017L192.000001,89.28952718291892L191.000001,90.88758871896627L190.000001,92.4999983805363L189.000001,94.12639531618461L188.000001,95.7664155441654L187.000001,97.41969203388942L186.000001,99.08585478806405L185.000001,100.76453092549741L184.000001,102.45534476454759L183.000001,104.157917907199L182.000001,105.87186932374665L181.000001,107.59681543806899L180.000001,109.33237021347081L179.000001,111.07814523907709L178.000001,112.83374981675767L177.000001,114.59879104856446L176.000001,116.37287392466007L175.000001,118.15560141171999L174.000001,119.94657454178713L173.000001,121.74539250155931L172.000001,123.55165272208968L171.000001,125.36495096888069L170.000001,127.1848814323498L169.000001,129.01103681864834L168.000001,130.8430084408126L167.000001,132.68038631022637L166.000001,134.52275922837467L165.000001,136.36971487886893L164.000001,138.22083991972136L163.000001,140.07572007585003L162.000001,141.93394023179172L161.000001,143.79508452460328L160.000001,145.6587364369302L159.000001,147.5244788902221L158.000001,149.39189433807297L157.000001,151.26056485966654L156.000001,153.13007225330568L155.000001,154.99999813000437L154.000001,156.86992400712154L153.000001,158.73943140201615L152.000001,160.6081019257017L151.000001,162.47551737648067L150.000001,164.34125983353633L149.000001,166.20491175046163L148.000001,168.06605604870506L147.000001,169.92427621091107L146.000001,171.77915637413525L145.000001,173.63028142291245L144.000001,175.4772370821591L143.000001,177.3196100098855L142.000001,179.15698788970093L141.000001,180.98895952308817L140.000001,182.81511492142837L139.000001,184.63504539775502L138.000001,186.44834365821683L137.000001,188.25460389322808L136.000001,190.05342186828778L135.000001,191.84439501444604L134.000001,193.6271225183969L133.000001,195.40120541217942L132.000001,197.16624666246514L131.000001,198.92185125941273L130.000001,200.66762630506958L129.000001,202.40318110130107L128.000001,204.12812723722755L127.000001,205.84207867614896L126.000001,207.54465184193893L125.000001,209.23546570488696L124.000001,210.91414186697222L123.000001,212.58030464654752L122.000001,214.23358116241505L121.000001,215.8736014172764L120.000001,217.49999838053623L119.000001,219.11240807044277L118.000001,220.71046963554505L117.000001,222.2938254354507L116.000001,223.86212112086443L115.000001,225.4150057128898L114.000001,226.95213168157755L113.000001,228.4731550237009L112.000001,229.97773533974294L111.000001,231.46553591007643L110.000001,232.93622377032023L109.000001,234.389469785856L108.000001,235.82494872548696L107.000001,237.24233933422374L106.000001,238.64132440517966L105.000001,240.02159085056107L104.000001,241.38282977173486L103.000001,242.72473652835876L102.000001,244.04701080655914L101.000001,245.3493566861398L100.000001,246.6314827068082L99.000001,247.893101933403L98.000001,249.13393202010883L97.000001,250.35369527364483L96.000001,251.55211871541118L95.000001,252.72893414258053L94.000001,253.88387818812086L93.000001,255.01669237973644L92.000001,256.12712319771254L91.000001,257.2149221316525L90.000001,258.2798457360933L89.000001,259.3216556849879L88.000001,260.3401188250416L87.000001,261.3350072278911L86.000001,262.30609824111383L85.000001,263.253174538057L84.000001,264.17602416647424L83.000001,265.0744405959599L82.000001,265.9482227641699L81.000001,266.79717512181844L80.000001,267.6211076764417L79.000001,268.4198360349169L78.000001,269.1931814447293L77.000001,269.9409708339762L76.000001,270.6630368500996L75.000001,271.3592178973394L74.000001,272.02935817289773L73.000001,272.6733077018073L72.000001,273.29092237049485L71.000001,273.88206395903376L70.000001,274.4466001720767L69.000001,274.98440466846307L68.000001,275.4953570894939L67.000001,275.97934308586713L66.000001,276.4362543432691L65.000001,276.86598860661474L64.000001,277.2684497029317L63.000001,277.6435475628839L62.000001,277.99119824092804L61.000001,278.3113239341014L60.000001,278.60385299943266L59.000001,278.8687199699762L58.000001,279.10586556946294L57.000001,279.31523672556636L56.000001,279.49678658177976L55.000001,279.6504745079026L54.000001,279.77626610913336L53.000001,279.8741332337673L52.000001,279.9440539794961L51.000001,279.9860126983101L50.000001,280" stroke="lightseagreen" stroke-width="5" fill="none"></path></g></svg>
<p class="css-142cd63">The code:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Plot</span> functions<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">sin</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">cos</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">}</span> range<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<style data-emotion="css 12ewxln">.css-12ewxln{box-sizing:border-box;margin:0;min-width:0;font-family:Montserrat,sans-serif;font-weight:900;line-height:1.1;margin-bottom:8px;margin-top:32px;}</style><h2 id="combining-d3-and-react" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Combining d3 and react</h2>
<p class="css-142cd63">As d3 has its own API for handling the DOM, we could theoretically do the job without React.
But as I want to be able to use components in MDX files directly, React needs to be at least a wrapper for d3.</p>
<h3 id="with-d3-selection" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>With d3-selection</h3>
<p class="css-142cd63">So now let&#x27;s just use React as a wrapper and let d3 handle the DOM inside the svg element, by using its jquery-like API <a target="_blank" href="https://github.com/d3/d3-selection" class="css-1e6egy8">d3-selection</a>.</p>
<p class="css-142cd63">By using most of the code from <a target="_blank" href="https://observablehq.com/@d3/continuous-scales#visualizeScale" class="css-1e6egy8">here</a> and pasting it into the <a target="_blank" href="https://reactjs.org/docs/refs-and-the-dom.html#callback-refs" class="css-1e6egy8">ref callback</a>, we can operate directly on the svg element:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">React</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> scaleLinear <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;d3-scale&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> select <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;d3-selection&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> axisBottom<span class="token punctuation">,</span> axisLeft <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;d3-axis&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">FunctionPlot</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> f<span class="token punctuation">,</span> width<span class="token punctuation">,</span> margin<span class="token punctuation">,</span> height<span class="token punctuation">,</span> range <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  margin <span class="token operator">=</span> margin <span class="token operator">||</span> <span class="token number">40</span><span class="token punctuation">;</span>
  width <span class="token operator">=</span> width <span class="token operator">||</span> <span class="token number">400</span><span class="token punctuation">;</span>
  height <span class="token operator">=</span> height <span class="token operator">||</span> <span class="token number">300</span><span class="token punctuation">;</span>
  range <span class="token operator">=</span> range <span class="token operator">||</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>svg
      ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> svg <span class="token operator">=</span> <span class="token function">select</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">&#x27;width&#x27;</span><span class="token punctuation">,</span> width <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">&#x27;height&#x27;</span><span class="token punctuation">,</span> height <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          x <span class="token operator">=</span> <span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token method function property-access">domain</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token method function property-access">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span>margin<span class="token punctuation">,</span> width <span class="token operator">-</span> margin<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          y <span class="token operator">=</span> <span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token method function property-access">domain</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span><span class="token property-access">y</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token method function property-access">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span>height <span class="token operator">-</span> margin<span class="token punctuation">,</span> margin<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          g <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">&#x27;g&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          line <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> margin <span class="token operator">+</span> <span class="token number">1e-6</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> width <span class="token operator">-</span> margin<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token constant">X</span> <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token method function property-access">invert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token constant">Y</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token constant">X</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            j <span class="token operator">=</span> <span class="token function">y</span><span class="token punctuation">(</span><span class="token constant">Y</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          line<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        g<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">&#x27;d&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;M&#x27;</span> <span class="token operator">+</span> line<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span><span class="token string">&#x27;L&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">&#x27;stroke&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;steelblue&#x27;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">&#x27;fill&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;none&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        g<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">&#x27;g&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">&#x27;transform&#x27;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>margin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,0)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token function">axisLeft</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        g<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">&#x27;g&#x27;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">&#x27;transform&#x27;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(0,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>svg<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p class="css-142cd63">and using it:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">FunctionPlot</span> f<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">sin</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">}</span> range<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<svg></svg>
<p class="css-142cd63">Other d3 APIs used:</p>
<style data-emotion="css zoser8">.css-zoser8{padding-top:8px;}</style><ul class="css-zoser8">
<style data-emotion="css 58pxoz">.css-58pxoz{font-family:'Merriweather','Georgia',serif;margin-bottom:14px;}</style><li class="css-58pxoz"><a target="_blank" href="https://observablehq.com/@d3/introduction-to-d3s-scales?collection=@d3/d3-scale" class="css-1e6egy8">d3-scale</a> for a convenient translation of the function value range to the pixels dimensions on screen</li>
<li class="css-58pxoz"><a target="_blank" href="https://github.com/d3/d3-axis" class="css-1e6egy8">d3-axis</a> for easy-to-use x and y axis</li>
</ul>
<h3 id="with-jsx" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>With JSX</h3>
<p class="css-142cd63">As React is already a pretty good lib to handle the DOM efficiently, we can (mostly) spare d3-selection and render the SVG elements in JSX:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">FunctionPlot</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> f<span class="token punctuation">,</span> width<span class="token punctuation">,</span> margin<span class="token punctuation">,</span> height<span class="token punctuation">,</span> range <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  margin <span class="token operator">=</span> margin <span class="token operator">||</span> <span class="token number">40</span><span class="token punctuation">;</span>
  width <span class="token operator">=</span> width <span class="token operator">||</span> <span class="token number">400</span><span class="token punctuation">;</span>
  height <span class="token operator">=</span> height <span class="token operator">||</span> <span class="token number">300</span><span class="token punctuation">;</span>
  range <span class="token operator">=</span> range <span class="token operator">||</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> line <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    x <span class="token operator">=</span> <span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">domain</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span>margin<span class="token punctuation">,</span> width <span class="token operator">-</span> margin<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">domain</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span><span class="token property-access">y</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span>height <span class="token operator">-</span> margin<span class="token punctuation">,</span> margin<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> margin <span class="token operator">+</span> <span class="token number">1e-6</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> width <span class="token operator">-</span> margin<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token constant">X</span> <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token method function property-access">invert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token constant">Y</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token constant">X</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      j <span class="token operator">=</span> <span class="token function">y</span><span class="token punctuation">(</span><span class="token constant">Y</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    line<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>svg width<span class="token operator">=</span><span class="token punctuation">{</span>width <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">}</span> height<span class="token operator">=</span><span class="token punctuation">{</span>height <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>g<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>path d<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">M</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>line<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span><span class="token string">&#x27;L&#x27;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> stroke<span class="token operator">=</span><span class="token string">&quot;steelblue&quot;</span> fill<span class="token operator">=</span><span class="token string">&quot;none&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>g transform<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>margin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,0)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">g</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">select</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token function">axisLeft</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>g transform<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(0,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">g</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">select</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>g<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>svg<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p class="css-142cd63">Now the .select / .append calls have been refactored to JSX. I like this code much more as it looks flatter and lets me manipulate the svg elements directly as JSX without using a wide API surface of chaining methods.</p>
<p class="css-142cd63">The output is exactly the same:</p>
<svg width="420" height="320"><g><path d="M40.000001,66.7517273136479L41.000001,68.57507381752689L42.000001,70.44930824977422L43.000001,72.37325927487859L44.000001,74.34572448607673L45.000001,76.3654711568181L46.000001,78.43123701117901L47.000001,80.54173101274421L48.000001,82.6956341714621L49.000001,84.89160036797124L50.000001,87.12825719488048L51.000001,89.40420681447925L52.000001,91.71802683234085L53.000001,94.06827118627203L54.000001,96.45347105005555L55.000001,98.87213575141797L56.000001,101.32275370365188L57.000001,103.80379335030831L58.000001,106.31370412236927L59.000001,108.85091740730353L60.000001,111.41384752939776L61.000001,114.00089274075253L62.000001,116.61043622232289L63.000001,119.240847094377L64.000001,121.89048143574358L65.000001,124.55768331120848L66.000001,127.24078580642065L67.000001,129.93811206965947L68.000001,132.64797635981202L69.000001,135.36868509990703L70.000001,138.09853793554473L71.000001,140.8358287975633L72.000001,143.57884696827685L73.000001,146.3258781506176L74.000001,149.07520553951645L75.000001,151.82511089484976L76.000001,154.5738756152836L77.000001,157.31978181234405L78.000001,160.0611133840409L79.000001,162.7961570873762L80.000001,165.52320360906478L81.000001,168.2405486337997L82.000001,170.94649390939406L83.000001,173.63934830813275L84.000001,176.317428883673L85.000001,178.97906192283023L86.000001,181.62258399159475L87.000001,184.24634297472423L88.000001,186.84869910826094L89.000001,189.42802600433203L90.000001,191.98271166758806L91.000001,194.511159502648L92.000001,197.0117893119197L93.000001,199.4830382831711L94.000001,201.9233619662381L95.000001,204.33123523825458L96.000001,206.7051532568051L97.000001,209.04363240040263L98.000001,211.34521119570303L99.000001,213.60845123087898L100.000001,215.83193805458015L101.000001,218.01428205991925L102.000001,220.15411935293136L103.000001,222.250112604963L104.000001,224.3009518884593L105.000001,226.3053554956257L106.000001,228.26207073945383L107.000001,230.16987473661018L108.000001,232.0275751716982L109.000001,233.83401104241682L110.000001,235.58805338514878L111.000001,237.28860598052637L112.000001,238.93460603853296L113.000001,240.52502486271186L114.000001,242.0588684930683L115.000001,243.53517832726212L116.000001,244.95303171970286L117.000001,246.31154255817341L118.000001,247.60986181762115L119.000001,248.84717809077105L120.000001,250.02271809522875L121.000001,251.13574715675696L122.000001,252.1855696684229L123.000001,253.17152952532987L124.000001,254.0930105346619L125.000001,254.94943680078345L126.000001,255.7402730851561L127.000001,256.4650251408451L128.000001,257.1232400214072L129.000001,257.7145063639679L130.000001,258.23845464630966L131.000001,258.6947574178113L132.000001,259.0831295040939L133.000001,259.4033281852456L134.000001,259.6551533475135L135.000001,259.83844760836854L136.000001,259.95309641486426L137.000001,259.9990281152284L138.000001,259.97621400364346L139.000001,259.88466833818654L140.000001,259.72444833191867L141.000001,259.4956541171283L142.000001,259.1984286827521L143.000001,258.8329577850115L144.000001,258.39946983132097L145.000001,257.8982357375409L146.000001,257.3295687586641L147.000001,256.69382429304136L148.000001,255.99139966026942L149.000001,255.22273385287878L150.000001,254.38830726197796L151.000001,253.4886413770245L152.000001,252.52429845991102L153.000001,251.49588119357017L154.000001,250.4040323053168L155.000001,249.24943416516504L156.000001,248.03280835936854L157.000001,246.75491523945306L158.000001,245.41655344702144L159.000001,244.01855941462827L160.000001,242.56180684303723L161.000001,241.0472061551862L162.000001,239.47570392720257L163.000001,237.84828229682444L164.000001,236.16595834959574L165.000001,234.4297834832216L166.000001,232.64084275047853L167.000001,230.80025418109196L168.000001,228.90916808300403L169.000001,226.96876632346851L170.000001,224.98026159042232L171.000001,222.94489663459507L172.000001,220.86394349282997L173.000001,218.73870269310288L174.000001,216.5705024417339L175.000001,214.36069779330225L176.000001,212.11066980378098L177.000001,209.82182466742182L178.000001,207.49559283793008L179.000001,205.13342813447693L180.000001,202.73680683311022L181.000001,200.30722674413013L182.000001,197.84620627600577L183.000001,195.3552834864202L184.000001,192.83601512103382L185.000001,190.28997564056925L186.000001,187.7187562368247L187.000001,185.1239638382306L188.000001,182.507220105572L189.000001,179.87016041850313L190.000001,177.21443285348835L191.000001,174.54169715380823L192.000001,171.85362369227363L193.000001,169.15189242729758L194.000001,166.43819185297545L195.000001,163.71421794383144L196.000001,160.98167309488966L197.000001,158.2422650577324L198.000001,155.4977058732114L199.000001,152.7497108014777L200.000001,149.99999724999995L201.000001,147.250283700241L202.000001,144.50228863366215L203.000001,141.75772945772914L204.000001,139.01832143258747L205.000001,136.28577659908134L206.000001,133.56180270878363L207.000001,130.84810215670646L208.000001,128.14637091736023L209.000001,125.45829748482421L210.000001,122.7855618174933L211.000001,120.12983428815834L212.000001,117.4927746400773L213.000001,114.87603094969046L214.000001,112.28123859662541L215.000001,109.71001924163879L216.000001,107.16397981313074L217.000001,104.64471150286676L218.000001,102.15378877153519L219.000001,99.69276836475991L220.000001,97.26318834018561L221.000001,94.86656710624142L222.000001,92.50440247318505L223.000001,90.17817071702052L224.000001,87.88932565687321L225.000001,85.63929774640057L226.000001,83.42949317980523L227.000001,81.2612930130089L228.000001,79.13605230053804L229.000001,77.05509924865817L230.000001,75.01973438528884L231.000001,73.0312297472158L232.000001,71.09082808510905L233.000001,69.19974208684475L234.000001,67.3591536196142L235.000001,65.57021299129566L236.000001,63.834038231549464L237.000001,62.15171439308533L238.000001,60.524292873540446L239.000001,58.95279075838955L240.000001,57.43819018530006L241.000001,55.98143773032782L242.000001,54.58344381633778L243.000001,53.24508214401958L244.000001,51.9671891458528L245.000001,50.75056346336413L246.000001,49.59596544800226L247.000001,48.504116685942925L248.000001,47.47569954712134L249.000001,46.51135675877267L250.000001,45.611691003749044L251.000001,44.77726454386197L252.000001,44.00859886848702L253.000001,43.306174368650275L254.000001,42.67043003679916L255.000001,42.101763192446704L256.000001,41.600529233859795L257.000001,41.167041415946585L258.000001,40.80157065448269L259.000001,40.50434535679743L260.000001,40.27555127902674L261.000001,40.11533141002167L262.000001,40.02378588198499L263.000001,40.00097190789177L264.000001,40.04690374573314L265.000001,40.16155268960568L266.000001,40.34484708765142L267.000001,40.59667238683803L268.000001,40.91687120455083L269.000001,41.30524342695169L270.000001,41.76154633404362L271.000001,42.28549475136303L272.000001,42.87676122820432L273.000001,43.53497624226603L274.000001,44.259728430590215L275.000001,45.050564846650865L276.000001,45.90699124343072L277.000001,46.828472382309805L278.000001,47.814432367571676L279.000001,48.86425500632004L280.000001,49.977284193578875L281.000001,51.152824322336706L282.000001,52.39014071827864L283.000001,53.68846009893355L284.000001,55.04697105695071L285.000001,56.464824567202726L286.000001,57.941134517398844L287.000001,59.47497826187619L288.000001,61.06539719822315L289.000001,62.711397366374975L290.000001,64.41195006980618L291.000001,66.16599251843238L292.000001,67.97242849281989L293.000001,69.83012902928658L294.000001,71.73793312546809L295.000001,73.69464846590594L296.000001,75.6990521672061L297.000001,77.74989154230161L298.000001,79.84588488334052L299.000001,81.98572226271241L300.000001,84.16806635170978L301.000001,86.39155325631529L302.000001,88.65479336959139L303.000001,90.95637224013873L304.000001,93.29485145608304L305.000001,95.668769544035L306.000001,98.07664288246394L307.000001,100.51696662891322L308.000001,102.98821566047707L309.000001,105.48884552695355L310.000001,108.01729341607509L311.000001,110.5719791302154L312.000001,113.15130607396192L313.000001,115.75366225193537L314.000001,118.37742127623503L315.000001,121.02094338287763L316.000001,123.68257645659688L317.000001,126.36065706336173L318.000001,129.05351148996803L319.000001,131.75945679005557L320.000001,134.476801835894L321.000001,137.203848375283L322.000001,139.93889209290484L323.000001,142.6802236754653L324.000001,145.4261298799597L325.000001,148.17489460439322L326.000001,150.92479996028916L327.000001,153.67412734631353L328.000001,156.42115852234434L329.000001,159.1641766833166L330.000001,161.90146753216857L331.000001,164.63132035122234L332.000001,167.35202907132668L333.000001,170.0618933380943L334.000001,172.7592195745686L335.000001,175.44232203965328L336.000001,178.10952388164645L337.000001,180.75915818621817L338.000001,183.38956901817724L339.000001,185.99911245637745L340.000001,188.58615762111407L341.000001,191.1490876933711L342.000001,193.6863009252805L343.000001,196.19621164116194L344.000001,198.6772512285194L345.000001,201.1278691183719L346.000001,203.5465337543094L347.000001,205.93173354966538L348.000001,208.2819778322093L349.000001,210.5957977757684L350.000001,212.87174731819607L351.000001,215.10840406511343L352.000001,217.3043701788603L353.000001,219.45827325209711L354.000001,221.56876716551577L355.000001,223.63453292911998L356.000001,225.65427950655092L357.000001,227.6267446219434L358.000001,229.5506955488068L359.000001,231.4249298804391" stroke="steelblue" fill="none"></path><g transform="translate(40,0)"></g><g transform="translate(0,150)"></g></g></svg>
<p class="css-142cd63">You may have noticed that the axes are still rendered using ref callback + d3-selection.
This is because the axes methods are generators that output a subtree of DOM nodes.
If we wanted to avoid using d3-selection completely, we could implement our own axis component using <a target="_blank" href="https://observablehq.com/@d3/scale-ticks" class="css-1e6egy8">scale.ticks</a>.</p>
<p class="css-142cd63">But for my use case, the above approach is perfectly fine.</p>
<p class="css-142cd63">I am really excited by d3 and the way it is organized in small modules, letting me pick only the parts I need! It will be a big part of upcoming visualizations on this blog.</p>
<h2 id="more-d3-resources" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>More d3 Resources</h2>
<ul class="css-zoser8">
<li class="css-58pxoz"><a target="_blank" href="https://observablehq.com/collection/@d3/learn-d3" class="css-1e6egy8">https://observablehq.com/collection/@d3/learn-d3</a></li>
<li class="css-58pxoz"><a target="_blank" href="https://medium.com/@enjalot/how-do-you-learn-d3-js-ccffc151419b" class="css-1e6egy8">https://medium.com/@enjalot/how-do-you-learn-d3-js-ccffc151419b</a></li>
<li class="css-58pxoz"><a target="_blank" href="https://medium.com/@enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a" class="css-1e6egy8">https://medium.com/@enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a</a></li>
<li class="css-58pxoz"><a target="_blank" href="https://bost.ocks.org/mike/" class="css-1e6egy8">https://bost.ocks.org/mike/</a></li>
</ul></div></article></main><style data-emotion="css btp6j1">.css-btp6j1{box-sizing:border-box;margin:0;min-width:0;padding:32px;color:#666;text-align:center;font-size:18px;}</style><div class="css-btp6j1"><style data-emotion="css i57cvr">.css-i57cvr{box-sizing:border-box;margin:0;min-width:0;margin-left:16px;margin-right:16px;display:inline-block;}</style><span class="css-i57cvr">Created by <a href="https://github.com/felixroos" class="css-1e6egy8">Felix Roos</a></span></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Plotting Functions with React and d3.js","date":"2020-04-18","tags":["code","d3"],"description":"As the basis of many upcoming visualizations.","image":"./img/plot.png"},"code":"var Component=(()=\u003e{var or=Object.create;var In=Object.defineProperty;var ir=Object.getOwnPropertyDescriptor;var cr=Object.getOwnPropertyNames;var lr=Object.getPrototypeOf,ur=Object.prototype.hasOwnProperty;var Ue=e=\u003eIn(e,\"__esModule\",{value:!0});var se=(e,n)=\u003e()=\u003e(n||e((n={exports:{}}).exports,n),n.exports),pr=(e,n)=\u003e{Ue(e);for(var a in n)In(e,a,{get:n[a],enumerable:!0})},fr=(e,n,a)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let s of cr(n))!ur.call(e,s)\u0026\u0026s!==\"default\"\u0026\u0026In(e,s,{get:()=\u003en[s],enumerable:!(a=ir(n,s))||a.enumerable});return e},hn=e=\u003efr(Ue(In(e!=null?or(lr(e)):{},\"default\",e\u0026\u0026e.__esModule\u0026\u0026\"default\"in e?{get:()=\u003ee.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Qe=se((Ts,Je)=\u003e{Je.exports=_jsx_runtime});var oe=se((Os,Ge)=\u003e{Ge.exports=React});var Fn=se((Cn,We)=\u003e{(function(e,n){typeof Cn==\"object\"\u0026\u0026typeof We!=\"undefined\"?n(Cn):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\"],n):(e=typeof globalThis!=\"undefined\"?globalThis:e||self,n(e.d3=e.d3||{}))})(Cn,function(e){\"use strict\";function n(r,o){return r\u003co?-1:r\u003eo?1:r\u003e=o?0:NaN}function a(r){let o=r,i=r;r.length===1\u0026\u0026(o=(k,x)=\u003er(k)-x,i=s(r));function u(k,x,j,M){for(j==null\u0026\u0026(j=0),M==null\u0026\u0026(M=k.length);j\u003cM;){let A=j+M\u003e\u003e\u003e1;i(k[A],x)\u003c0?j=A+1:M=A}return j}function l(k,x,j,M){for(j==null\u0026\u0026(j=0),M==null\u0026\u0026(M=k.length);j\u003cM;){let A=j+M\u003e\u003e\u003e1;i(k[A],x)\u003e0?M=A:j=A+1}return j}function f(k,x,j,M){j==null\u0026\u0026(j=0),M==null\u0026\u0026(M=k.length);let A=u(k,x,j,M-1);return A\u003ej\u0026\u0026o(k[A-1],x)\u003e-o(k[A],x)?A-1:A}return{left:u,center:f,right:l}}function s(r){return(o,i)=\u003en(r(o),i)}function c(r){return r===null?NaN:+r}function*p(r,o){if(o===void 0)for(let i of r)i!=null\u0026\u0026(i=+i)\u003e=i\u0026\u0026(yield i);else{let i=-1;for(let u of r)(u=o(u,++i,r))!=null\u0026\u0026(u=+u)\u003e=u\u0026\u0026(yield u)}}let m=a(n),d=m.right,h=m.left,N=a(c).center;function b(r,o){let i=0;if(o===void 0)for(let u of r)u!=null\u0026\u0026(u=+u)\u003e=u\u0026\u0026++i;else{let u=-1;for(let l of r)(l=o(l,++u,r))!=null\u0026\u0026(l=+l)\u003e=l\u0026\u0026++i}return i}function g(r){return r.length|0}function y(r){return!(r\u003e0)}function w(r){return typeof r!=\"object\"||\"length\"in r?r:Array.from(r)}function S(r){return o=\u003er(...o)}function O(...r){let o=typeof r[r.length-1]==\"function\"\u0026\u0026S(r.pop());r=r.map(w);let i=r.map(g),u=r.length-1,l=new Array(u+1).fill(0),f=[];if(u\u003c0||i.some(y))return f;for(;;){f.push(l.map((x,j)=\u003er[j][x]));let k=u;for(;++l[k]===i[k];){if(k===0)return o?f.map(o):f;l[k--]=0}}}function T(r,o){var i=0,u=0;return Float64Array.from(r,o===void 0?l=\u003ei+=+l||0:l=\u003ei+=+o(l,u++,r)||0)}function D(r,o){return o\u003cr?-1:o\u003er?1:o\u003e=r?0:NaN}function q(r,o){let i=0,u,l=0,f=0;if(o===void 0)for(let k of r)k!=null\u0026\u0026(k=+k)\u003e=k\u0026\u0026(u=k-l,l+=u/++i,f+=u*(k-l));else{let k=-1;for(let x of r)(x=o(x,++k,r))!=null\u0026\u0026(x=+x)\u003e=x\u0026\u0026(u=x-l,l+=u/++i,f+=u*(x-l))}if(i\u003e1)return f/(i-1)}function I(r,o){let i=q(r,o);return i\u0026\u0026Math.sqrt(i)}function P(r,o){let i,u;if(o===void 0)for(let l of r)l!=null\u0026\u0026(i===void 0?l\u003e=l\u0026\u0026(i=u=l):(i\u003el\u0026\u0026(i=l),u\u003cl\u0026\u0026(u=l)));else{let l=-1;for(let f of r)(f=o(f,++l,r))!=null\u0026\u0026(i===void 0?f\u003e=f\u0026\u0026(i=u=f):(i\u003ef\u0026\u0026(i=f),u\u003cf\u0026\u0026(u=f)))}return[i,u]}class _{constructor(){this._partials=new Float64Array(32),this._n=0}add(o){let i=this._partials,u=0;for(let l=0;l\u003cthis._n\u0026\u0026l\u003c32;l++){let f=i[l],k=o+f,x=Math.abs(o)\u003cMath.abs(f)?o-(k-f):f-(k-o);x\u0026\u0026(i[u++]=x),o=k}return i[u]=o,this._n=u+1,this}valueOf(){let o=this._partials,i=this._n,u,l,f,k=0;if(i\u003e0){for(k=o[--i];i\u003e0\u0026\u0026(u=k,l=o[--i],k=u+l,f=l-(k-u),!f););i\u003e0\u0026\u0026(f\u003c0\u0026\u0026o[i-1]\u003c0||f\u003e0\u0026\u0026o[i-1]\u003e0)\u0026\u0026(l=f*2,u=k+l,l==u-k\u0026\u0026(k=u))}return k}}function B(r,o){let i=new _;if(o===void 0)for(let u of r)(u=+u)\u0026\u0026i.add(u);else{let u=-1;for(let l of r)(l=+o(l,++u,r))\u0026\u0026i.add(l)}return+i}function R(r,o){let i=new _,u=-1;return Float64Array.from(r,o===void 0?l=\u003ei.add(+l||0):l=\u003ei.add(+o(l,++u,r)||0))}class H extends Map{constructor(o,i=F){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),o!=null)for(let[u,l]of o)this.set(u,l)}get(o){return super.get(X(this,o))}has(o){return super.has(X(this,o))}set(o,i){return super.set(v(this,o),i)}delete(o){return super.delete(z(this,o))}}class Q extends Set{constructor(o,i=F){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),o!=null)for(let u of o)this.add(u)}has(o){return super.has(X(this,o))}add(o){return super.add(v(this,o))}delete(o){return super.delete(z(this,o))}}function X({_intern:r,_key:o},i){let u=o(i);return r.has(u)?r.get(u):i}function v({_intern:r,_key:o},i){let u=o(i);return r.has(u)?r.get(u):(r.set(u,i),i)}function z({_intern:r,_key:o},i){let u=o(i);return r.has(u)\u0026\u0026(i=r.get(i),r.delete(u)),i}function F(r){return r!==null\u0026\u0026typeof r==\"object\"?r.valueOf():r}function V(r){return r}function xn(r,...o){return dn(r,V,V,o)}function fn(r,...o){return dn(r,Array.from,V,o)}function rn(r,o,...i){return dn(r,V,o,i)}function mn(r,o,...i){return dn(r,Array.from,o,i)}function U(r,...o){return dn(r,V,Ee,o)}function va(r,...o){return dn(r,Array.from,Ee,o)}function Ee(r){if(r.length!==1)throw new Error(\"duplicate key\");return r[0]}function dn(r,o,i,u){return function l(f,k){if(k\u003e=u.length)return i(f);let x=new H,j=u[k++],M=-1;for(let A of f){let L=j(A,++M,f),E=x.get(L);E?E.push(A):x.set(L,[A])}for(let[A,L]of x)x.set(A,l(L,k));return o(x)}(r,0)}function Re(r,o){return Array.from(o,i=\u003er[i])}function Wn(r,...o){if(typeof r[Symbol.iterator]!=\"function\")throw new TypeError(\"values is not iterable\");r=Array.from(r);let[i=n]=o;if(i.length===1||o.length\u003e1){let u=Uint32Array.from(r,(l,f)=\u003ef);return o.length\u003e1?(o=o.map(l=\u003er.map(l)),u.sort((l,f)=\u003e{for(let k of o){let x=n(k[l],k[f]);if(x)return x}})):(i=r.map(i),u.sort((l,f)=\u003en(i[l],i[f]))),Re(r,u)}return r.sort(i)}function _a(r,o,i){return(o.length===1?Wn(rn(r,o,i),([u,l],[f,k])=\u003en(l,k)||n(u,f)):Wn(xn(r,i),([u,l],[f,k])=\u003eo(l,k)||n(u,f))).map(([u])=\u003eu)}var Ma=Array.prototype,Aa=Ma.slice;function Sn(r){return function(){return r}}var Kn=Math.sqrt(50),Zn=Math.sqrt(10),ne=Math.sqrt(2);function ze(r,o,i){var u,l=-1,f,k,x;if(o=+o,r=+r,i=+i,r===o\u0026\u0026i\u003e0)return[r];if((u=o\u003cr)\u0026\u0026(f=r,r=o,o=f),(x=Pn(r,o,i))===0||!isFinite(x))return[];if(x\u003e0){let j=Math.round(r/x),M=Math.round(o/x);for(j*x\u003cr\u0026\u0026++j,M*x\u003eo\u0026\u0026--M,k=new Array(f=M-j+1);++l\u003cf;)k[l]=(j+l)*x}else{x=-x;let j=Math.round(r*x),M=Math.round(o*x);for(j/x\u003cr\u0026\u0026++j,M/x\u003eo\u0026\u0026--M,k=new Array(f=M-j+1);++l\u003cf;)k[l]=(j+l)/x}return u\u0026\u0026k.reverse(),k}function Pn(r,o,i){var u=(o-r)/Math.max(0,i),l=Math.floor(Math.log(u)/Math.LN10),f=u/Math.pow(10,l);return l\u003e=0?(f\u003e=Kn?10:f\u003e=Zn?5:f\u003e=ne?2:1)*Math.pow(10,l):-Math.pow(10,-l)/(f\u003e=Kn?10:f\u003e=Zn?5:f\u003e=ne?2:1)}function Sa(r,o,i){var u=Math.abs(o-r)/Math.max(0,i),l=Math.pow(10,Math.floor(Math.log(u)/Math.LN10)),f=u/l;return f\u003e=Kn?l*=10:f\u003e=Zn?l*=5:f\u003e=ne\u0026\u0026(l*=2),o\u003cr?-l:l}function De(r,o,i){let u;for(;;){let l=Pn(r,o,i);if(l===u||l===0||!isFinite(l))return[r,o];l\u003e0?(r=Math.floor(r/l)*l,o=Math.ceil(o/l)*l):l\u003c0\u0026\u0026(r=Math.ceil(r*l)/l,o=Math.floor(o*l)/l),u=l}}function Be(r){return Math.ceil(Math.log(b(r))/Math.LN2)+1}function Te(){var r=V,o=P,i=Be;function u(l){Array.isArray(l)||(l=Array.from(l));var f,k=l.length,x,j=new Array(k);for(f=0;f\u003ck;++f)j[f]=r(l[f],f,l);var M=o(j),A=M[0],L=M[1],E=i(j,A,L);if(!Array.isArray(E)){let sr=L,re=+E;if(o===P\u0026\u0026([A,L]=De(A,L,re)),E=ze(A,L,re),E[E.length-1]\u003e=L)if(sr\u003e=L\u0026\u0026o===P){let sn=Pn(A,L,re);isFinite(sn)\u0026\u0026(sn\u003e0?L=(Math.floor(L/sn)+1)*sn:sn\u003c0\u0026\u0026(L=(Math.ceil(L*-sn)+1)/-sn))}else E.pop()}for(var nn=E.length;E[0]\u003c=A;)E.shift(),--nn;for(;E[nn-1]\u003eL;)E.pop(),--nn;var bn=new Array(nn+1),ae;for(f=0;f\u003c=nn;++f)ae=bn[f]=[],ae.x0=f\u003e0?E[f-1]:A,ae.x1=f\u003cnn?E[f]:L;for(f=0;f\u003ck;++f)x=j[f],A\u003c=x\u0026\u0026x\u003c=L\u0026\u0026bn[d(E,x,0,nn)].push(l[f]);return bn}return u.value=function(l){return arguments.length?(r=typeof l==\"function\"?l:Sn(l),u):r},u.domain=function(l){return arguments.length?(o=typeof l==\"function\"?l:Sn([l[0],l[1]]),u):o},u.thresholds=function(l){return arguments.length?(i=typeof l==\"function\"?l:Array.isArray(l)?Sn(Aa.call(l)):Sn(l),u):i},u}function ee(r,o){let i;if(o===void 0)for(let u of r)u!=null\u0026\u0026(i\u003cu||i===void 0\u0026\u0026u\u003e=u)\u0026\u0026(i=u);else{let u=-1;for(let l of r)(l=o(l,++u,r))!=null\u0026\u0026(i\u003cl||i===void 0\u0026\u0026l\u003e=l)\u0026\u0026(i=l)}return i}function Ln(r,o){let i;if(o===void 0)for(let u of r)u!=null\u0026\u0026(i\u003eu||i===void 0\u0026\u0026u\u003e=u)\u0026\u0026(i=u);else{let u=-1;for(let l of r)(l=o(l,++u,r))!=null\u0026\u0026(i\u003el||i===void 0\u0026\u0026l\u003e=l)\u0026\u0026(i=l)}return i}function te(r,o,i=0,u=r.length-1,l=n){for(;u\u003ei;){if(u-i\u003e600){let j=u-i+1,M=o-i+1,A=Math.log(j),L=.5*Math.exp(2*A/3),E=.5*Math.sqrt(A*L*(j-L)/j)*(M-j/2\u003c0?-1:1),nn=Math.max(i,Math.floor(o-M*L/j+E)),bn=Math.min(u,Math.floor(o+(j-M)*L/j+E));te(r,o,nn,bn,l)}let f=r[o],k=i,x=u;for(yn(r,i,o),l(r[u],f)\u003e0\u0026\u0026yn(r,i,u);k\u003cx;){for(yn(r,k,x),++k,--x;l(r[k],f)\u003c0;)++k;for(;l(r[x],f)\u003e0;)--x}l(r[i],f)===0?yn(r,i,x):(++x,yn(r,x,u)),x\u003c=o\u0026\u0026(i=x+1),o\u003c=x\u0026\u0026(u=x-1)}return r}function yn(r,o,i){let u=r[o];r[o]=r[i],r[i]=u}function qn(r,o,i){if(r=Float64Array.from(p(r,i)),!!(u=r.length)){if((o=+o)\u003c=0||u\u003c2)return Ln(r);if(o\u003e=1)return ee(r);var u,l=(u-1)*o,f=Math.floor(l),k=ee(te(r,f).subarray(0,f+1)),x=Ln(r.subarray(f+1));return k+(x-k)*(l-f)}}function Pa(r,o,i=c){if(!!(u=r.length)){if((o=+o)\u003c=0||u\u003c2)return+i(r[0],0,r);if(o\u003e=1)return+i(r[u-1],u-1,r);var u,l=(u-1)*o,f=Math.floor(l),k=+i(r[f],f,r),x=+i(r[f+1],f+1,r);return k+(x-k)*(l-f)}}function La(r,o,i){return Math.ceil((i-o)/(2*(qn(r,.75)-qn(r,.25))*Math.pow(b(r),-1/3)))}function qa(r,o,i){return Math.ceil((i-o)/(3.5*I(r)*Math.pow(b(r),-1/3)))}function Oe(r,o){let i,u=-1,l=-1;if(o===void 0)for(let f of r)++l,f!=null\u0026\u0026(i\u003cf||i===void 0\u0026\u0026f\u003e=f)\u0026\u0026(i=f,u=l);else for(let f of r)(f=o(f,++l,r))!=null\u0026\u0026(i\u003cf||i===void 0\u0026\u0026f\u003e=f)\u0026\u0026(i=f,u=l);return u}function Ia(r,o){let i=0,u=0;if(o===void 0)for(let l of r)l!=null\u0026\u0026(l=+l)\u003e=l\u0026\u0026(++i,u+=l);else{let l=-1;for(let f of r)(f=o(f,++l,r))!=null\u0026\u0026(f=+f)\u003e=f\u0026\u0026(++i,u+=f)}if(i)return u/i}function Ca(r,o){return qn(r,.5,o)}function*Fa(r){for(let o of r)yield*o}function Ea(r){return Array.from(Fa(r))}function He(r,o){let i,u=-1,l=-1;if(o===void 0)for(let f of r)++l,f!=null\u0026\u0026(i\u003ef||i===void 0\u0026\u0026f\u003e=f)\u0026\u0026(i=f,u=l);else for(let f of r)(f=o(f,++l,r))!=null\u0026\u0026(i\u003ef||i===void 0\u0026\u0026f\u003e=f)\u0026\u0026(i=f,u=l);return u}function Ra(r,o=za){let i=[],u,l=!1;for(let f of r)l\u0026\u0026i.push(o(u,f)),u=f,l=!0;return i}function za(r,o){return[r,o]}function Da(r,o,i){r=+r,o=+o,i=(l=arguments.length)\u003c2?(o=r,r=0,1):l\u003c3?1:+i;for(var u=-1,l=Math.max(0,Math.ceil((o-r)/i))|0,f=new Array(l);++u\u003cl;)f[u]=r+u*i;return f}function Ba(r,o=n){let i,u=!1;if(o.length===1){let l;for(let f of r){let k=o(f);(u?n(k,l)\u003c0:n(k,k)===0)\u0026\u0026(i=f,l=k,u=!0)}}else for(let l of r)(u?o(l,i)\u003c0:o(l,l)===0)\u0026\u0026(i=l,u=!0);return i}function Ve(r,o=n){if(o.length===1)return He(r,o);let i,u=-1,l=-1;for(let f of r)++l,(u\u003c0?o(f,f)===0:o(f,i)\u003c0)\u0026\u0026(i=f,u=l);return u}function Ta(r,o=n){let i,u=!1;if(o.length===1){let l;for(let f of r){let k=o(f);(u?n(k,l)\u003e0:n(k,k)===0)\u0026\u0026(i=f,l=k,u=!0)}}else for(let l of r)(u?o(l,i)\u003e0:o(l,l)===0)\u0026\u0026(i=l,u=!0);return i}function Oa(r,o=n){if(o.length===1)return Oe(r,o);let i,u=-1,l=-1;for(let f of r)++l,(u\u003c0?o(f,f)===0:o(f,i)\u003e0)\u0026\u0026(i=f,u=l);return u}function Ha(r,o){let i=Ve(r,o);return i\u003c0?void 0:i}var Va=$e(Math.random);function $e(r){return function(i,u=0,l=i.length){let f=l-(u=+u);for(;f;){let k=r()*f--|0,x=i[f+u];i[f+u]=i[k+u],i[k+u]=x}return i}}function $a(r,o){let i=0;if(o===void 0)for(let u of r)(u=+u)\u0026\u0026(i+=u);else{let u=-1;for(let l of r)(l=+o(l,++u,r))\u0026\u0026(i+=l)}return i}function Xe(r){if(!(f=r.length))return[];for(var o=-1,i=Ln(r,Xa),u=new Array(i);++o\u003ci;)for(var l=-1,f,k=u[o]=new Array(f);++l\u003cf;)k[l]=r[l][o];return u}function Xa(r){return r.length}function Ya(){return Xe(arguments)}function Ua(r,o){if(typeof o!=\"function\")throw new TypeError(\"test is not a function\");let i=-1;for(let u of r)if(!o(u,++i,r))return!1;return!0}function Ja(r,o){if(typeof o!=\"function\")throw new TypeError(\"test is not a function\");let i=-1;for(let u of r)if(o(u,++i,r))return!0;return!1}function Qa(r,o){if(typeof o!=\"function\")throw new TypeError(\"test is not a function\");let i=[],u=-1;for(let l of r)o(l,++u,r)\u0026\u0026i.push(l);return i}function Ga(r,o){if(typeof r[Symbol.iterator]!=\"function\")throw new TypeError(\"values is not iterable\");if(typeof o!=\"function\")throw new TypeError(\"mapper is not a function\");return Array.from(r,(i,u)=\u003eo(i,u,r))}function Wa(r,o,i){if(typeof o!=\"function\")throw new TypeError(\"reducer is not a function\");let u=r[Symbol.iterator](),l,f,k=-1;if(arguments.length\u003c3){if({done:l,value:i}=u.next(),l)return;++k}for(;{done:l,value:f}=u.next(),!l;)i=o(i,f,++k,r);return i}function Ka(r){if(typeof r[Symbol.iterator]!=\"function\")throw new TypeError(\"values is not iterable\");return Array.from(r).reverse()}function Za(r,...o){r=new Set(r);for(let i of o)for(let u of i)r.delete(u);return r}function nr(r,o){let i=o[Symbol.iterator](),u=new Set;for(let l of r){if(u.has(l))return!1;let f,k;for(;({value:f,done:k}=i.next())\u0026\u0026!k;){if(Object.is(l,f))return!1;u.add(f)}}return!0}function er(r){return r instanceof Set?r:new Set(r)}function tr(r,...o){r=new Set(r),o=o.map(er);n:for(let i of r)for(let u of o)if(!u.has(i)){r.delete(i);continue n}return r}function Ye(r,o){let i=r[Symbol.iterator](),u=new Set;for(let l of o){if(u.has(l))continue;let f,k;for(;{value:f,done:k}=i.next();){if(k)return!1;if(u.add(f),Object.is(l,f))break}}return!0}function ar(r,o){return Ye(o,r)}function rr(...r){let o=new Set;for(let i of r)for(let u of i)o.add(u);return o}e.Adder=_,e.InternMap=H,e.InternSet=Q,e.ascending=n,e.bin=Te,e.bisect=d,e.bisectCenter=N,e.bisectLeft=h,e.bisectRight=d,e.bisector=a,e.count=b,e.cross=O,e.cumsum=T,e.descending=D,e.deviation=I,e.difference=Za,e.disjoint=nr,e.every=Ua,e.extent=P,e.fcumsum=R,e.filter=Qa,e.fsum=B,e.greatest=Ta,e.greatestIndex=Oa,e.group=xn,e.groupSort=_a,e.groups=fn,e.histogram=Te,e.index=U,e.indexes=va,e.intersection=tr,e.least=Ba,e.leastIndex=Ve,e.map=Ga,e.max=ee,e.maxIndex=Oe,e.mean=Ia,e.median=Ca,e.merge=Ea,e.min=Ln,e.minIndex=He,e.nice=De,e.pairs=Ra,e.permute=Re,e.quantile=qn,e.quantileSorted=Pa,e.quickselect=te,e.range=Da,e.reduce=Wa,e.reverse=Ka,e.rollup=rn,e.rollups=mn,e.scan=Ha,e.shuffle=Va,e.shuffler=$e,e.some=Ja,e.sort=Wn,e.subset=ar,e.sum=$a,e.superset=Ye,e.thresholdFreedmanDiaconis=La,e.thresholdScott=qa,e.thresholdSturges=Be,e.tickIncrement=Pn,e.tickStep=Sa,e.ticks=ze,e.transpose=Xe,e.union=rr,e.variance=q,e.zip=Ya,Object.defineProperty(e,\"__esModule\",{value:!0})})});var Ds={};pr(Ds,{default:()=\u003ezs,frontmatter:()=\u003eEs});var t=hn(Qe());var Y=hn(oe());function Ke(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}var Vn=hn(Fn());var gt=hn(Fn());function En(e,n,a){e.prototype=n.prototype=a,a.constructor=e}function ie(e,n){var a=Object.create(e.prototype);for(var s in n)a[s]=n[s];return a}function wn(){}var jn=.7,Rn=1/jn,kn=\"\\\\s*([+-]?\\\\d+)\\\\s*\",vn=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",G=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",mr=/^#([0-9a-f]{3,8})$/,dr=new RegExp(\"^rgb\\\\(\"+[kn,kn,kn]+\"\\\\)$\"),hr=new RegExp(\"^rgb\\\\(\"+[G,G,G]+\"\\\\)$\"),kr=new RegExp(\"^rgba\\\\(\"+[kn,kn,kn,vn]+\"\\\\)$\"),Nr=new RegExp(\"^rgba\\\\(\"+[G,G,G,vn]+\"\\\\)$\"),gr=new RegExp(\"^hsl\\\\(\"+[vn,G,G]+\"\\\\)$\"),xr=new RegExp(\"^hsla\\\\(\"+[vn,G,G,vn]+\"\\\\)$\"),Ze={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};En(wn,en,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:nt,formatHex:nt,formatHsl:yr,formatRgb:et,toString:et});function nt(){return this.rgb().formatHex()}function yr(){return ot(this).formatHsl()}function et(){return this.rgb().formatRgb()}function en(e){var n,a;return e=(e+\"\").trim().toLowerCase(),(n=mr.exec(e))?(a=n[1].length,n=parseInt(n[1],16),a===6?tt(n):a===3?new $(n\u003e\u003e8\u002615|n\u003e\u003e4\u0026240,n\u003e\u003e4\u002615|n\u0026240,(n\u002615)\u003c\u003c4|n\u002615,1):a===8?zn(n\u003e\u003e24\u0026255,n\u003e\u003e16\u0026255,n\u003e\u003e8\u0026255,(n\u0026255)/255):a===4?zn(n\u003e\u003e12\u002615|n\u003e\u003e8\u0026240,n\u003e\u003e8\u002615|n\u003e\u003e4\u0026240,n\u003e\u003e4\u002615|n\u0026240,((n\u002615)\u003c\u003c4|n\u002615)/255):null):(n=dr.exec(e))?new $(n[1],n[2],n[3],1):(n=hr.exec(e))?new $(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=kr.exec(e))?zn(n[1],n[2],n[3],n[4]):(n=Nr.exec(e))?zn(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=gr.exec(e))?st(n[1],n[2]/100,n[3]/100,1):(n=xr.exec(e))?st(n[1],n[2]/100,n[3]/100,n[4]):Ze.hasOwnProperty(e)?tt(Ze[e]):e===\"transparent\"?new $(NaN,NaN,NaN,0):null}function tt(e){return new $(e\u003e\u003e16\u0026255,e\u003e\u003e8\u0026255,e\u0026255,1)}function zn(e,n,a,s){return s\u003c=0\u0026\u0026(e=n=a=NaN),new $(e,n,a,s)}function br(e){return e instanceof wn||(e=en(e)),e?(e=e.rgb(),new $(e.r,e.g,e.b,e.opacity)):new $}function Nn(e,n,a,s){return arguments.length===1?br(e):new $(e,n,a,s??1)}function $(e,n,a,s){this.r=+e,this.g=+n,this.b=+a,this.opacity=+s}En($,Nn,ie(wn,{brighter:function(e){return e=e==null?Rn:Math.pow(Rn,e),new $(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?jn:Math.pow(jn,e),new $(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5\u003c=this.r\u0026\u0026this.r\u003c255.5\u0026\u0026-.5\u003c=this.g\u0026\u0026this.g\u003c255.5\u0026\u0026-.5\u003c=this.b\u0026\u0026this.b\u003c255.5\u0026\u00260\u003c=this.opacity\u0026\u0026this.opacity\u003c=1},hex:at,formatHex:at,formatRgb:rt,toString:rt}));function at(){return\"#\"+ce(this.r)+ce(this.g)+ce(this.b)}function rt(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?\"rgb(\":\"rgba(\")+Math.max(0,Math.min(255,Math.round(this.r)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.g)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?\")\":\", \"+e+\")\")}function ce(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e\u003c16?\"0\":\"\")+e.toString(16)}function st(e,n,a,s){return s\u003c=0?e=n=a=NaN:a\u003c=0||a\u003e=1?e=n=NaN:n\u003c=0\u0026\u0026(e=NaN),new W(e,n,a,s)}function ot(e){if(e instanceof W)return new W(e.h,e.s,e.l,e.opacity);if(e instanceof wn||(e=en(e)),!e)return new W;if(e instanceof W)return e;e=e.rgb();var n=e.r/255,a=e.g/255,s=e.b/255,c=Math.min(n,a,s),p=Math.max(n,a,s),m=NaN,d=p-c,h=(p+c)/2;return d?(n===p?m=(a-s)/d+(a\u003cs)*6:a===p?m=(s-n)/d+2:m=(n-a)/d+4,d/=h\u003c.5?p+c:2-p-c,m*=60):d=h\u003e0\u0026\u0026h\u003c1?0:m,new W(m,d,h,e.opacity)}function it(e,n,a,s){return arguments.length===1?ot(e):new W(e,n,a,s??1)}function W(e,n,a,s){this.h=+e,this.s=+n,this.l=+a,this.opacity=+s}En(W,it,ie(wn,{brighter:function(e){return e=e==null?Rn:Math.pow(Rn,e),new W(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?jn:Math.pow(jn,e),new W(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h\u003c0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a\u003c.5?a:1-a)*n,c=2*a-s;return new $(le(e\u003e=240?e-240:e+120,c,s),le(e,c,s),le(e\u003c120?e+240:e-120,c,s),this.opacity)},displayable:function(){return(0\u003c=this.s\u0026\u0026this.s\u003c=1||isNaN(this.s))\u0026\u00260\u003c=this.l\u0026\u0026this.l\u003c=1\u0026\u00260\u003c=this.opacity\u0026\u0026this.opacity\u003c=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?\"hsl(\":\"hsla(\")+(this.h||0)+\", \"+(this.s||0)*100+\"%, \"+(this.l||0)*100+\"%\"+(e===1?\")\":\", \"+e+\")\")}}));function le(e,n,a){return(e\u003c60?n+(a-n)*e/60:e\u003c180?a:e\u003c240?n+(a-n)*(240-e)/60:n)*255}function ue(e,n,a,s,c){var p=e*e,m=p*e;return((1-3*e+3*p-m)*n+(4-6*p+3*m)*a+(1+3*e+3*p-3*m)*s+m*c)/6}function ct(e){var n=e.length-1;return function(a){var s=a\u003c=0?a=0:a\u003e=1?(a=1,n-1):Math.floor(a*n),c=e[s],p=e[s+1],m=s\u003e0?e[s-1]:2*c-p,d=s\u003cn-1?e[s+2]:2*p-c;return ue((a-s/n)*n,m,c,p,d)}}function lt(e){var n=e.length;return function(a){var s=Math.floor(((a%=1)\u003c0?++a:a)*n),c=e[(s+n-1)%n],p=e[s%n],m=e[(s+1)%n],d=e[(s+2)%n];return ue((a-s/n)*n,c,p,m,d)}}var _n=e=\u003e()=\u003ee;function wr(e,n){return function(a){return e+a*n}}function jr(e,n,a){return e=Math.pow(e,a),n=Math.pow(n,a)-e,a=1/a,function(s){return Math.pow(e+s*n,a)}}function ut(e){return(e=+e)==1?Dn:function(n,a){return a-n?jr(n,a,e):_n(isNaN(n)?a:n)}}function Dn(e,n){var a=n-e;return a?wr(e,a):_n(isNaN(e)?n:e)}var pe=function e(n){var a=ut(n);function s(c,p){var m=a((c=Nn(c)).r,(p=Nn(p)).r),d=a(c.g,p.g),h=a(c.b,p.b),N=Dn(c.opacity,p.opacity);return function(b){return c.r=m(b),c.g=d(b),c.b=h(b),c.opacity=N(b),c+\"\"}}return s.gamma=e,s}(1);function pt(e){return function(n){var a=n.length,s=new Array(a),c=new Array(a),p=new Array(a),m,d;for(m=0;m\u003ca;++m)d=Nn(n[m]),s[m]=d.r||0,c[m]=d.g||0,p[m]=d.b||0;return s=e(s),c=e(c),p=e(p),d.opacity=1,function(h){return d.r=s(h),d.g=c(h),d.b=p(h),d+\"\"}}}var ro=pt(ct),so=pt(lt);function ft(e,n){n||(n=[]);var a=e?Math.min(n.length,e.length):0,s=n.slice(),c;return function(p){for(c=0;c\u003ca;++c)s[c]=e[c]*(1-p)+n[c]*p;return s}}function mt(e){return ArrayBuffer.isView(e)\u0026\u0026!(e instanceof DataView)}function dt(e,n){var a=n?n.length:0,s=e?Math.min(a,e.length):0,c=new Array(s),p=new Array(a),m;for(m=0;m\u003cs;++m)c[m]=on(e[m],n[m]);for(;m\u003ca;++m)p[m]=n[m];return function(d){for(m=0;m\u003cs;++m)p[m]=c[m](d);return p}}function ht(e,n){var a=new Date;return e=+e,n=+n,function(s){return a.setTime(e*(1-s)+n*s),a}}function tn(e,n){return e=+e,n=+n,function(a){return e*(1-a)+n*a}}function kt(e,n){var a={},s={},c;(e===null||typeof e!=\"object\")\u0026\u0026(e={}),(n===null||typeof n!=\"object\")\u0026\u0026(n={});for(c in n)c in e?a[c]=on(e[c],n[c]):s[c]=n[c];return function(p){for(c in a)s[c]=a[c](p);return s}}var fe=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,me=new RegExp(fe.source,\"g\");function vr(e){return function(){return e}}function _r(e){return function(n){return e(n)+\"\"}}function Nt(e,n){var a=fe.lastIndex=me.lastIndex=0,s,c,p,m=-1,d=[],h=[];for(e=e+\"\",n=n+\"\";(s=fe.exec(e))\u0026\u0026(c=me.exec(n));)(p=c.index)\u003ea\u0026\u0026(p=n.slice(a,p),d[m]?d[m]+=p:d[++m]=p),(s=s[0])===(c=c[0])?d[m]?d[m]+=c:d[++m]=c:(d[++m]=null,h.push({i:m,x:tn(s,c)})),a=me.lastIndex;return a\u003cn.length\u0026\u0026(p=n.slice(a),d[m]?d[m]+=p:d[++m]=p),d.length\u003c2?h[0]?_r(h[0].x):vr(n):(n=h.length,function(N){for(var b=0,g;b\u003cn;++b)d[(g=h[b]).i]=g.x(N);return d.join(\"\")})}function on(e,n){var a=typeof n,s;return n==null||a===\"boolean\"?_n(n):(a===\"number\"?tn:a===\"string\"?(s=en(n))?(n=s,pe):Nt:n instanceof en?pe:n instanceof Date?ht:mt(n)?ft:Array.isArray(n)?dt:typeof n.valueOf!=\"function\"\u0026\u0026typeof n.toString!=\"function\"||isNaN(n)?kt:tn)(e,n)}function de(e,n){return e=+e,n=+n,function(a){return Math.round(e*(1-a)+n*a)}}function he(e){return function(){return e}}function ke(e){return+e}var xt=[0,1];function gn(e){return e}function Ne(e,n){return(n-=e=+e)?function(a){return(a-e)/n}:he(isNaN(n)?NaN:.5)}function Mr(e,n){var a;return e\u003en\u0026\u0026(a=e,e=n,n=a),function(s){return Math.max(e,Math.min(n,s))}}function Ar(e,n,a){var s=e[0],c=e[1],p=n[0],m=n[1];return c\u003cs?(s=Ne(c,s),p=a(m,p)):(s=Ne(s,c),p=a(p,m)),function(d){return p(s(d))}}function Sr(e,n,a){var s=Math.min(e.length,n.length)-1,c=new Array(s),p=new Array(s),m=-1;for(e[s]\u003ce[0]\u0026\u0026(e=e.slice().reverse(),n=n.slice().reverse());++m\u003cs;)c[m]=Ne(e[m],e[m+1]),p[m]=a(n[m],n[m+1]);return function(d){var h=(0,gt.bisect)(e,d,1,s)-1;return p[h](c[h](d))}}function yt(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Pr(){var e=xt,n=xt,a=on,s,c,p,m=gn,d,h,N;function b(){var y=Math.min(e.length,n.length);return m!==gn\u0026\u0026(m=Mr(e[0],e[y-1])),d=y\u003e2?Sr:Ar,h=N=null,g}function g(y){return y==null||isNaN(y=+y)?p:(h||(h=d(e.map(s),n,a)))(s(m(y)))}return g.invert=function(y){return m(c((N||(N=d(n,e.map(s),tn)))(y)))},g.domain=function(y){return arguments.length?(e=Array.from(y,ke),b()):e.slice()},g.range=function(y){return arguments.length?(n=Array.from(y),b()):n.slice()},g.rangeRound=function(y){return n=Array.from(y),a=de,b()},g.clamp=function(y){return arguments.length?(m=y?!0:gn,b()):m!==gn},g.interpolate=function(y){return arguments.length?(a=y,b()):a},g.unknown=function(y){return arguments.length?(p=y,g):p},function(y,w){return s=y,c=w,b()}}function ge(){return Pr()(gn,gn)}var Pt=hn(Fn());function bt(e){return Math.abs(e=Math.round(e))\u003e=1e21?e.toLocaleString(\"en\").replace(/,/g,\"\"):e.toString(10)}function cn(e,n){if((a=(e=n?e.toExponential(n-1):e.toExponential()).indexOf(\"e\"))\u003c0)return null;var a,s=e.slice(0,a);return[s.length\u003e1?s[0]+s.slice(2):s,+e.slice(a+1)]}function K(e){return e=cn(Math.abs(e)),e?e[1]:NaN}function wt(e,n){return function(a,s){for(var c=a.length,p=[],m=0,d=e[0],h=0;c\u003e0\u0026\u0026d\u003e0\u0026\u0026(h+d+1\u003es\u0026\u0026(d=Math.max(1,s-h)),p.push(a.substring(c-=d,c+d)),!((h+=d+1)\u003es));)d=e[m=(m+1)%e.length];return p.reverse().join(n)}}function jt(e){return function(n){return n.replace(/[0-9]/g,function(a){return e[+a]})}}var Lr=/^(?:(.)?([\u003c\u003e=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;function an(e){if(!(n=Lr.exec(e)))throw new Error(\"invalid format: \"+e);var n;return new Bn({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]\u0026\u0026n[8].slice(1),trim:n[9],type:n[10]})}an.prototype=Bn.prototype;function Bn(e){this.fill=e.fill===void 0?\" \":e.fill+\"\",this.align=e.align===void 0?\"\u003e\":e.align+\"\",this.sign=e.sign===void 0?\"-\":e.sign+\"\",this.symbol=e.symbol===void 0?\"\":e.symbol+\"\",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?\"\":e.type+\"\"}Bn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?\"0\":\"\")+(this.width===void 0?\"\":Math.max(1,this.width|0))+(this.comma?\",\":\"\")+(this.precision===void 0?\"\":\".\"+Math.max(0,this.precision|0))+(this.trim?\"~\":\"\")+this.type};function vt(e){n:for(var n=e.length,a=1,s=-1,c;a\u003cn;++a)switch(e[a]){case\".\":s=c=a;break;case\"0\":s===0\u0026\u0026(s=a),c=a;break;default:if(!+e[a])break n;s\u003e0\u0026\u0026(s=0);break}return s\u003e0?e.slice(0,s)+e.slice(c+1):e}var xe;function _t(e,n){var a=cn(e,n);if(!a)return e+\"\";var s=a[0],c=a[1],p=c-(xe=Math.max(-8,Math.min(8,Math.floor(c/3)))*3)+1,m=s.length;return p===m?s:p\u003em?s+new Array(p-m+1).join(\"0\"):p\u003e0?s.slice(0,p)+\".\"+s.slice(p):\"0.\"+new Array(1-p).join(\"0\")+cn(e,Math.max(0,n+p-1))[0]}function ye(e,n){var a=cn(e,n);if(!a)return e+\"\";var s=a[0],c=a[1];return c\u003c0?\"0.\"+new Array(-c).join(\"0\")+s:s.length\u003ec+1?s.slice(0,c+1)+\".\"+s.slice(c+1):s+new Array(c-s.length+2).join(\"0\")}var be={\"%\":(e,n)=\u003e(e*100).toFixed(n),b:e=\u003eMath.round(e).toString(2),c:e=\u003ee+\"\",d:bt,e:(e,n)=\u003ee.toExponential(n),f:(e,n)=\u003ee.toFixed(n),g:(e,n)=\u003ee.toPrecision(n),o:e=\u003eMath.round(e).toString(8),p:(e,n)=\u003eye(e*100,n),r:ye,s:_t,X:e=\u003eMath.round(e).toString(16).toUpperCase(),x:e=\u003eMath.round(e).toString(16)};function we(e){return e}var Mt=Array.prototype.map,At=[\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\\xB5\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];function St(e){var n=e.grouping===void 0||e.thousands===void 0?we:wt(Mt.call(e.grouping,Number),e.thousands+\"\"),a=e.currency===void 0?\"\":e.currency[0]+\"\",s=e.currency===void 0?\"\":e.currency[1]+\"\",c=e.decimal===void 0?\".\":e.decimal+\"\",p=e.numerals===void 0?we:jt(Mt.call(e.numerals,String)),m=e.percent===void 0?\"%\":e.percent+\"\",d=e.minus===void 0?\"\\u2212\":e.minus+\"\",h=e.nan===void 0?\"NaN\":e.nan+\"\";function N(g){g=an(g);var y=g.fill,w=g.align,S=g.sign,O=g.symbol,T=g.zero,D=g.width,q=g.comma,I=g.precision,P=g.trim,_=g.type;_===\"n\"?(q=!0,_=\"g\"):be[_]||(I===void 0\u0026\u0026(I=12),P=!0,_=\"g\"),(T||y===\"0\"\u0026\u0026w===\"=\")\u0026\u0026(T=!0,y=\"0\",w=\"=\");var B=O===\"$\"?a:O===\"#\"\u0026\u0026/[boxX]/.test(_)?\"0\"+_.toLowerCase():\"\",R=O===\"$\"?s:/[%p]/.test(_)?m:\"\",H=be[_],Q=/[defgprs%]/.test(_);I=I===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function X(v){var z=B,F=R,V,xn,fn;if(_===\"c\")F=H(v)+F,v=\"\";else{v=+v;var rn=v\u003c0||1/v\u003c0;if(v=isNaN(v)?h:H(Math.abs(v),I),P\u0026\u0026(v=vt(v)),rn\u0026\u0026+v==0\u0026\u0026S!==\"+\"\u0026\u0026(rn=!1),z=(rn?S===\"(\"?S:d:S===\"-\"||S===\"(\"?\"\":S)+z,F=(_===\"s\"?At[8+xe/3]:\"\")+F+(rn\u0026\u0026S===\"(\"?\")\":\"\"),Q){for(V=-1,xn=v.length;++V\u003cxn;)if(fn=v.charCodeAt(V),48\u003efn||fn\u003e57){F=(fn===46?c+v.slice(V+1):v.slice(V))+F,v=v.slice(0,V);break}}}q\u0026\u0026!T\u0026\u0026(v=n(v,1/0));var mn=z.length+v.length+F.length,U=mn\u003cD?new Array(D-mn+1).join(y):\"\";switch(q\u0026\u0026T\u0026\u0026(v=n(U+v,U.length?D-F.length:1/0),U=\"\"),w){case\"\u003c\":v=z+v+F+U;break;case\"=\":v=z+U+v+F;break;case\"^\":v=U.slice(0,mn=U.length\u003e\u003e1)+z+v+F+U.slice(mn);break;default:v=U+z+v+F;break}return p(v)}return X.toString=function(){return g+\"\"},X}function b(g,y){var w=N((g=an(g),g.type=\"f\",g)),S=Math.max(-8,Math.min(8,Math.floor(K(y)/3)))*3,O=Math.pow(10,-S),T=At[8+S/3];return function(D){return w(O*D)+T}}return{format:N,formatPrefix:b}}var Tn,On,Hn;je({thousands:\",\",grouping:[3],currency:[\"$\",\"\"]});function je(e){return Tn=St(e),On=Tn.format,Hn=Tn.formatPrefix,Tn}function ve(e){return Math.max(0,-K(Math.abs(e)))}function _e(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(K(n)/3)))*3-K(Math.abs(e)))}function Me(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,K(n)-K(e))+1}function Ae(e,n,a,s){var c=(0,Pt.tickStep)(e,n,a),p;switch(s=an(s??\",f\"),s.type){case\"s\":{var m=Math.max(Math.abs(e),Math.abs(n));return s.precision==null\u0026\u0026!isNaN(p=_e(c,m))\u0026\u0026(s.precision=p),Hn(s,m)}case\"\":case\"e\":case\"g\":case\"p\":case\"r\":{s.precision==null\u0026\u0026!isNaN(p=Me(c,Math.max(Math.abs(e),Math.abs(n))))\u0026\u0026(s.precision=p-(s.type===\"e\"));break}case\"f\":case\"%\":{s.precision==null\u0026\u0026!isNaN(p=ve(c))\u0026\u0026(s.precision=p-(s.type===\"%\")*2);break}}return On(s)}function qr(e){var n=e.domain;return e.ticks=function(a){var s=n();return(0,Vn.ticks)(s[0],s[s.length-1],a??10)},e.tickFormat=function(a,s){var c=n();return Ae(c[0],c[c.length-1],a??10,s)},e.nice=function(a){a==null\u0026\u0026(a=10);var s=n(),c=0,p=s.length-1,m=s[c],d=s[p],h,N,b=10;for(d\u003cm\u0026\u0026(N=m,m=d,d=N,N=c,c=p,p=N);b-- \u003e0;){if(N=(0,Vn.tickIncrement)(m,d,a),N===h)return s[c]=m,s[p]=d,n(s);if(N\u003e0)m=Math.floor(m/N)*N,d=Math.ceil(d/N)*N;else if(N\u003c0)m=Math.ceil(m*N)/N,d=Math.floor(d*N)/N;else break;h=N}return e},e}function J(){var e=ge();return e.copy=function(){return yt(e,J())},Ke.apply(e,arguments),qr(e)}function Lt(e){return e}var Se=1,Pe=2,Le=3,Mn=4,qt=1e-6;function Ir(e){return\"translate(\"+e+\",0)\"}function Cr(e){return\"translate(0,\"+e+\")\"}function Fr(e){return n=\u003e+e(n)}function Er(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()\u0026\u0026(n=Math.round(n)),a=\u003e+e(a)+n}function Rr(){return!this.__axis}function It(e,n){var a=[],s=null,c=null,p=6,m=6,d=3,h=typeof window!=\"undefined\"\u0026\u0026window.devicePixelRatio\u003e1?0:.5,N=e===Se||e===Mn?-1:1,b=e===Mn||e===Pe?\"x\":\"y\",g=e===Se||e===Le?Ir:Cr;function y(w){var S=s??(n.ticks?n.ticks.apply(n,a):n.domain()),O=c??(n.tickFormat?n.tickFormat.apply(n,a):Lt),T=Math.max(p,0)+d,D=n.range(),q=+D[0]+h,I=+D[D.length-1]+h,P=(n.bandwidth?Er:Fr)(n.copy(),h),_=w.selection?w.selection():w,B=_.selectAll(\".domain\").data([null]),R=_.selectAll(\".tick\").data(S,n).order(),H=R.exit(),Q=R.enter().append(\"g\").attr(\"class\",\"tick\"),X=R.select(\"line\"),v=R.select(\"text\");B=B.merge(B.enter().insert(\"path\",\".tick\").attr(\"class\",\"domain\").attr(\"stroke\",\"currentColor\")),R=R.merge(Q),X=X.merge(Q.append(\"line\").attr(\"stroke\",\"currentColor\").attr(b+\"2\",N*p)),v=v.merge(Q.append(\"text\").attr(\"fill\",\"currentColor\").attr(b,N*T).attr(\"dy\",e===Se?\"0em\":e===Le?\"0.71em\":\"0.32em\")),w!==_\u0026\u0026(B=B.transition(w),R=R.transition(w),X=X.transition(w),v=v.transition(w),H=H.transition(w).attr(\"opacity\",qt).attr(\"transform\",function(z){return isFinite(z=P(z))?g(z+h):this.getAttribute(\"transform\")}),Q.attr(\"opacity\",qt).attr(\"transform\",function(z){var F=this.parentNode.__axis;return g((F\u0026\u0026isFinite(F=F(z))?F:P(z))+h)})),H.remove(),B.attr(\"d\",e===Mn||e===Pe?m?\"M\"+N*m+\",\"+q+\"H\"+h+\"V\"+I+\"H\"+N*m:\"M\"+h+\",\"+q+\"V\"+I:m?\"M\"+q+\",\"+N*m+\"V\"+h+\"H\"+I+\"V\"+N*m:\"M\"+q+\",\"+h+\"H\"+I),R.attr(\"opacity\",1).attr(\"transform\",function(z){return g(P(z)+h)}),X.attr(b+\"2\",N*p),v.attr(b,N*T).text(O),_.filter(Rr).attr(\"fill\",\"none\").attr(\"font-size\",10).attr(\"font-family\",\"sans-serif\").attr(\"text-anchor\",e===Pe?\"start\":e===Mn?\"end\":\"middle\"),_.each(function(){this.__axis=P})}return y.scale=function(w){return arguments.length?(n=w,y):n},y.ticks=function(){return a=Array.from(arguments),y},y.tickArguments=function(w){return arguments.length?(a=w==null?[]:Array.from(w),y):a.slice()},y.tickValues=function(w){return arguments.length?(s=w==null?null:Array.from(w),y):s\u0026\u0026s.slice()},y.tickFormat=function(w){return arguments.length?(c=w,y):c},y.tickSize=function(w){return arguments.length?(p=m=+w,y):p},y.tickSizeInner=function(w){return arguments.length?(p=+w,y):p},y.tickSizeOuter=function(w){return arguments.length?(m=+w,y):m},y.tickPadding=function(w){return arguments.length?(d=+w,y):d},y.offset=function(w){return arguments.length?(h=+w,y):h},y}function ln(e){return It(Le,e)}function un(e){return It(Mn,e)}var $n=\"http://www.w3.org/1999/xhtml\",qe={svg:\"http://www.w3.org/2000/svg\",xhtml:$n,xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"};function Xn(e){var n=e+=\"\",a=n.indexOf(\":\");return a\u003e=0\u0026\u0026(n=e.slice(0,a))!==\"xmlns\"\u0026\u0026(e=e.slice(a+1)),qe.hasOwnProperty(n)?{space:qe[n],local:e}:e}function zr(e){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===$n\u0026\u0026n.documentElement.namespaceURI===$n?n.createElement(e):n.createElementNS(a,e)}}function Dr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Yn(e){var n=Xn(e);return(n.local?Dr:zr)(n)}function Br(){}function Un(e){return e==null?Br:function(){return this.querySelector(e)}}function Ct(e){typeof e!=\"function\"\u0026\u0026(e=Un(e));for(var n=this._groups,a=n.length,s=new Array(a),c=0;c\u003ca;++c)for(var p=n[c],m=p.length,d=s[c]=new Array(m),h,N,b=0;b\u003cm;++b)(h=p[b])\u0026\u0026(N=e.call(h,h.__data__,b,p))\u0026\u0026(\"__data__\"in h\u0026\u0026(N.__data__=h.__data__),d[b]=N);return new C(s,this._parents)}function Ie(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Tr(){return[]}function Ft(e){return e==null?Tr:function(){return this.querySelectorAll(e)}}function Or(e){return function(){return Ie(e.apply(this,arguments))}}function Et(e){typeof e==\"function\"?e=Or(e):e=Ft(e);for(var n=this._groups,a=n.length,s=[],c=[],p=0;p\u003ca;++p)for(var m=n[p],d=m.length,h,N=0;N\u003cd;++N)(h=m[N])\u0026\u0026(s.push(e.call(h,h.__data__,N,m)),c.push(h));return new C(s,c)}function Rt(e){return function(){return this.matches(e)}}function Jn(e){return function(n){return n.matches(e)}}var Hr=Array.prototype.find;function Vr(e){return function(){return Hr.call(this.children,e)}}function $r(){return this.firstElementChild}function zt(e){return this.select(e==null?$r:Vr(typeof e==\"function\"?e:Jn(e)))}var Xr=Array.prototype.filter;function Yr(){return Array.from(this.children)}function Ur(e){return function(){return Xr.call(this.children,e)}}function Dt(e){return this.selectAll(e==null?Yr:Ur(typeof e==\"function\"?e:Jn(e)))}function Bt(e){typeof e!=\"function\"\u0026\u0026(e=Rt(e));for(var n=this._groups,a=n.length,s=new Array(a),c=0;c\u003ca;++c)for(var p=n[c],m=p.length,d=s[c]=[],h,N=0;N\u003cm;++N)(h=p[N])\u0026\u0026e.call(h,h.__data__,N,p)\u0026\u0026d.push(h);return new C(s,this._parents)}function Qn(e){return new Array(e.length)}function Tt(){return new C(this._enter||this._groups.map(Qn),this._parents)}function An(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}An.prototype={constructor:An,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ot(e){return function(){return e}}function Jr(e,n,a,s,c,p){for(var m=0,d,h=n.length,N=p.length;m\u003cN;++m)(d=n[m])?(d.__data__=p[m],s[m]=d):a[m]=new An(e,p[m]);for(;m\u003ch;++m)(d=n[m])\u0026\u0026(c[m]=d)}function Qr(e,n,a,s,c,p,m){var d,h,N=new Map,b=n.length,g=p.length,y=new Array(b),w;for(d=0;d\u003cb;++d)(h=n[d])\u0026\u0026(y[d]=w=m.call(h,h.__data__,d,n)+\"\",N.has(w)?c[d]=h:N.set(w,h));for(d=0;d\u003cg;++d)w=m.call(e,p[d],d,p)+\"\",(h=N.get(w))?(s[d]=h,h.__data__=p[d],N.delete(w)):a[d]=new An(e,p[d]);for(d=0;d\u003cb;++d)(h=n[d])\u0026\u0026N.get(y[d])===h\u0026\u0026(c[d]=h)}function Gr(e){return e.__data__}function Ht(e,n){if(!arguments.length)return Array.from(this,Gr);var a=n?Qr:Jr,s=this._parents,c=this._groups;typeof e!=\"function\"\u0026\u0026(e=Ot(e));for(var p=c.length,m=new Array(p),d=new Array(p),h=new Array(p),N=0;N\u003cp;++N){var b=s[N],g=c[N],y=g.length,w=Wr(e.call(b,b\u0026\u0026b.__data__,N,s)),S=w.length,O=d[N]=new Array(S),T=m[N]=new Array(S),D=h[N]=new Array(y);a(b,g,O,T,D,w,n);for(var q=0,I=0,P,_;q\u003cS;++q)if(P=O[q]){for(q\u003e=I\u0026\u0026(I=q+1);!(_=T[I])\u0026\u0026++I\u003cS;);P._next=_||null}}return m=new C(m,s),m._enter=d,m._exit=h,m}function Wr(e){return typeof e==\"object\"\u0026\u0026\"length\"in e?e:Array.from(e)}function Vt(){return new C(this._exit||this._groups.map(Qn),this._parents)}function $t(e,n,a){var s=this.enter(),c=this,p=this.exit();return typeof e==\"function\"?(s=e(s),s\u0026\u0026(s=s.selection())):s=s.append(e+\"\"),n!=null\u0026\u0026(c=n(c),c\u0026\u0026(c=c.selection())),a==null?p.remove():a(p),s\u0026\u0026c?s.merge(c).order():c}function Xt(e){for(var n=e.selection?e.selection():e,a=this._groups,s=n._groups,c=a.length,p=s.length,m=Math.min(c,p),d=new Array(c),h=0;h\u003cm;++h)for(var N=a[h],b=s[h],g=N.length,y=d[h]=new Array(g),w,S=0;S\u003cg;++S)(w=N[S]||b[S])\u0026\u0026(y[S]=w);for(;h\u003cc;++h)d[h]=a[h];return new C(d,this._parents)}function Yt(){for(var e=this._groups,n=-1,a=e.length;++n\u003ca;)for(var s=e[n],c=s.length-1,p=s[c],m;--c\u003e=0;)(m=s[c])\u0026\u0026(p\u0026\u0026m.compareDocumentPosition(p)^4\u0026\u0026p.parentNode.insertBefore(m,p),p=m);return this}function Ut(e){e||(e=Kr);function n(g,y){return g\u0026\u0026y?e(g.__data__,y.__data__):!g-!y}for(var a=this._groups,s=a.length,c=new Array(s),p=0;p\u003cs;++p){for(var m=a[p],d=m.length,h=c[p]=new Array(d),N,b=0;b\u003cd;++b)(N=m[b])\u0026\u0026(h[b]=N);h.sort(n)}return new C(c,this._parents).order()}function Kr(e,n){return e\u003cn?-1:e\u003en?1:e\u003e=n?0:NaN}function Jt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Qt(){return Array.from(this)}function Gt(){for(var e=this._groups,n=0,a=e.length;n\u003ca;++n)for(var s=e[n],c=0,p=s.length;c\u003cp;++c){var m=s[c];if(m)return m}return null}function Wt(){let e=0;for(let n of this)++e;return e}function Kt(){return!this.node()}function Zt(e){for(var n=this._groups,a=0,s=n.length;a\u003cs;++a)for(var c=n[a],p=0,m=c.length,d;p\u003cm;++p)(d=c[p])\u0026\u0026e.call(d,d.__data__,p,c);return this}function Zr(e){return function(){this.removeAttribute(e)}}function ns(e){return function(){this.removeAttributeNS(e.space,e.local)}}function es(e,n){return function(){this.setAttribute(e,n)}}function ts(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function as(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function rs(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function na(e,n){var a=Xn(e);if(arguments.length\u003c2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((n==null?a.local?ns:Zr:typeof n==\"function\"?a.local?rs:as:a.local?ts:es)(a,n))}function Gn(e){return e.ownerDocument\u0026\u0026e.ownerDocument.defaultView||e.document\u0026\u0026e||e.defaultView}function ss(e){return function(){this.style.removeProperty(e)}}function os(e,n,a){return function(){this.style.setProperty(e,n,a)}}function is(e,n,a){return function(){var s=n.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,a)}}function ea(e,n,a){return arguments.length\u003e1?this.each((n==null?ss:typeof n==\"function\"?is:os)(e,n,a??\"\")):cs(this.node(),e)}function cs(e,n){return e.style.getPropertyValue(n)||Gn(e).getComputedStyle(e,null).getPropertyValue(n)}function ls(e){return function(){delete this[e]}}function us(e,n){return function(){this[e]=n}}function ps(e,n){return function(){var a=n.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function ta(e,n){return arguments.length\u003e1?this.each((n==null?ls:typeof n==\"function\"?ps:us)(e,n)):this.node()[e]}function aa(e){return e.trim().split(/^|\\s+/)}function Ce(e){return e.classList||new ra(e)}function ra(e){this._node=e,this._names=aa(e.getAttribute(\"class\")||\"\")}ra.prototype={add:function(e){var n=this._names.indexOf(e);n\u003c0\u0026\u0026(this._names.push(e),this._node.setAttribute(\"class\",this._names.join(\" \")))},remove:function(e){var n=this._names.indexOf(e);n\u003e=0\u0026\u0026(this._names.splice(n,1),this._node.setAttribute(\"class\",this._names.join(\" \")))},contains:function(e){return this._names.indexOf(e)\u003e=0}};function sa(e,n){for(var a=Ce(e),s=-1,c=n.length;++s\u003cc;)a.add(n[s])}function oa(e,n){for(var a=Ce(e),s=-1,c=n.length;++s\u003cc;)a.remove(n[s])}function fs(e){return function(){sa(this,e)}}function ms(e){return function(){oa(this,e)}}function ds(e,n){return function(){(n.apply(this,arguments)?sa:oa)(this,e)}}function ia(e,n){var a=aa(e+\"\");if(arguments.length\u003c2){for(var s=Ce(this.node()),c=-1,p=a.length;++c\u003cp;)if(!s.contains(a[c]))return!1;return!0}return this.each((typeof n==\"function\"?ds:n?fs:ms)(a,n))}function hs(){this.textContent=\"\"}function ks(e){return function(){this.textContent=e}}function Ns(e){return function(){var n=e.apply(this,arguments);this.textContent=n??\"\"}}function ca(e){return arguments.length?this.each(e==null?hs:(typeof e==\"function\"?Ns:ks)(e)):this.node().textContent}function gs(){this.innerHTML=\"\"}function xs(e){return function(){this.innerHTML=e}}function ys(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??\"\"}}function la(e){return arguments.length?this.each(e==null?gs:(typeof e==\"function\"?ys:xs)(e)):this.node().innerHTML}function bs(){this.nextSibling\u0026\u0026this.parentNode.appendChild(this)}function ua(){return this.each(bs)}function ws(){this.previousSibling\u0026\u0026this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pa(){return this.each(ws)}function fa(e){var n=typeof e==\"function\"?e:Yn(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function js(){return null}function ma(e,n){var a=typeof e==\"function\"?e:Yn(e),s=n==null?js:typeof n==\"function\"?n:Un(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})}function vs(){var e=this.parentNode;e\u0026\u0026e.removeChild(this)}function da(){return this.each(vs)}function _s(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Ms(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function ha(e){return this.select(e?Ms:_s)}function ka(e){return arguments.length?this.property(\"__data__\",e):this.node().__data__}function As(e){return function(n){e.call(this,n,this.__data__)}}function Ss(e){return e.trim().split(/^|\\s+/).map(function(n){var a=\"\",s=n.indexOf(\".\");return s\u003e=0\u0026\u0026(a=n.slice(s+1),n=n.slice(0,s)),{type:n,name:a}})}function Ps(e){return function(){var n=this.__on;if(!!n){for(var a=0,s=-1,c=n.length,p;a\u003cc;++a)p=n[a],(!e.type||p.type===e.type)\u0026\u0026p.name===e.name?this.removeEventListener(p.type,p.listener,p.options):n[++s]=p;++s?n.length=s:delete this.__on}}}function Ls(e,n,a){return function(){var s=this.__on,c,p=As(n);if(s){for(var m=0,d=s.length;m\u003cd;++m)if((c=s[m]).type===e.type\u0026\u0026c.name===e.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=p,c.options=a),c.value=n;return}}this.addEventListener(e.type,p,a),c={type:e.type,name:e.name,value:n,listener:p,options:a},s?s.push(c):this.__on=[c]}}function Na(e,n,a){var s=Ss(e+\"\"),c,p=s.length,m;if(arguments.length\u003c2){var d=this.node().__on;if(d){for(var h=0,N=d.length,b;h\u003cN;++h)for(c=0,b=d[h];c\u003cp;++c)if((m=s[c]).type===b.type\u0026\u0026m.name===b.name)return b.value}return}for(d=n?Ls:Ps,c=0;c\u003cp;++c)this.each(d(s[c],n,a));return this}function ga(e,n,a){var s=Gn(e),c=s.CustomEvent;typeof c==\"function\"?c=new c(n,a):(c=s.document.createEvent(\"Event\"),a?(c.initEvent(n,a.bubbles,a.cancelable),c.detail=a.detail):c.initEvent(n,!1,!1)),e.dispatchEvent(c)}function qs(e,n){return function(){return ga(this,e,n)}}function Is(e,n){return function(){return ga(this,e,n.apply(this,arguments))}}function xa(e,n){return this.each((typeof n==\"function\"?Is:qs)(e,n))}function*ya(){for(var e=this._groups,n=0,a=e.length;n\u003ca;++n)for(var s=e[n],c=0,p=s.length,m;c\u003cp;++c)(m=s[c])\u0026\u0026(yield m)}var Fe=[null];function C(e,n){this._groups=e,this._parents=n}function Cs(){return new C([[document.documentElement]],Fe)}function Fs(){return this}C.prototype=Cs.prototype={constructor:C,select:Ct,selectAll:Et,selectChild:zt,selectChildren:Dt,filter:Bt,data:Ht,enter:Tt,exit:Vt,join:$t,merge:Xt,selection:Fs,order:Yt,sort:Ut,call:Jt,nodes:Qt,node:Gt,size:Wt,empty:Kt,each:Zt,attr:na,style:ea,property:ta,classed:ia,text:ca,html:la,raise:ua,lower:pa,append:fa,insert:ma,remove:da,clone:ha,datum:ka,on:Na,dispatch:xa,[Symbol.iterator]:ya};function Z(e){return typeof e==\"string\"?new C([[document.querySelector(e)]],[document.documentElement]):new C([[e]],Fe)}function ba({strokeWidth:e,functions:n,width:a,height:s,range:c,colors:p,grid:m,onHover:d,onMouseEnter:h,onMouseLeave:N,onClick:b,margin:g,hideAxes:y,hideXAxis:w,hideYAxis:S}){g=g||{top:20,right:30,bottom:30,left:50},a=a||500,s=s||300;let O=s-g.top-g.bottom,T=a-g.left-g.right;e=e||1,p=p||[\"lightsalmon\",\"lightseagreen\",\"indianred\",\"darkmagenta\",\"cornflowerblue\",\"aqua\"],n=n||[],c=c||{x:[-4,4],y:[-4,4]};let D=J().domain(c.x).range([g.left,a-g.right]),q=J().domain(c.y).range([s-g.top,g.bottom]),I=n.map(P=\u003e{let _=[[]];for(let B=g.left+1e-6;B\u003ca-g.right;B+=1){let R=D.invert(B),H=P(R);if(typeof H==\"number\"){let Q=q(H);R\u003e=c.x[0]\u0026\u0026R\u003c=c.x[1]\u0026\u0026H\u003e=c.y[0]\u0026\u0026H\u003c=c.y[1]\u0026\u0026_[0].unshift([B,Q])}}return _});return Y.default.createElement(\"svg\",{width:a,height:s,onClick:P=\u003eb\u0026\u0026b(P)},!y\u0026\u0026Y.default.createElement(Y.default.Fragment,null,!w\u0026\u0026Y.default.createElement(\"g\",{className:\"x-axis plot-axis\",ref:P=\u003eZ(P).attr(\"transform\",`translate(0,${s-g.top})`).call(ln(D).ticks(a/50))}),!S\u0026\u0026Y.default.createElement(\"g\",{className:\"y-axis plot-axis\",ref:P=\u003eZ(P).attr(\"transform\",`translate(${g.left},0)`).call(un(q).ticks(s/50))})),m\u0026\u0026Y.default.createElement(Y.default.Fragment,null,m.x\u0026\u0026Y.default.createElement(\"g\",{className:\"grid\",ref:P=\u003eZ(P).attr(\"transform\",`translate(0, ${q(c.y[1])})`).call(ln(D).ticks(m.x).tickSize(O).tickFormat(()=\u003e\"\"))}),m.y\u0026\u0026Y.default.createElement(\"g\",{className:\"grid\",ref:P=\u003eZ(P).attr(\"transform\",`translate(${D(c.x[0])}, 0)`).call(un(q).ticks(m.y).tickSize(-T).tickFormat(()=\u003e\"\"))})),Y.default.createElement(\"g\",null,I.map((P,_)=\u003eP.map((B,R)=\u003eY.default.createElement(\"path\",{onMouseEnter:()=\u003eh\u0026\u0026h(_),onMouseLeave:()=\u003eN\u0026\u0026N(_),key:_+\"-\"+R,d:\"M\"+B.join(\"L\"),stroke:p[_%p.length]||\"black\",strokeWidth:e,fill:\"none\"})))))}var pn=hn(oe());function wa({f:e,width:n,margin:a,height:s,range:c}){a=a||40,n=n||400,s=s||300,c=c||{x:[-1,1],y:[-1,1]};let p=[],m=J().domain(c.x).range([a,n-a]),d=J().domain(c.y).range([s-a,a]);for(let h=a+1e-6;h\u003cn-a;h+=1){let N=m.invert(h),b=e(N),g=d(b);p.push([h,g])}return pn.default.createElement(\"svg\",{width:n+20,height:s+20},pn.default.createElement(\"g\",null,pn.default.createElement(\"path\",{d:`M${p.join(\"L\")}`,stroke:\"steelblue\",fill:\"none\"}),pn.default.createElement(\"g\",{transform:`translate(${a},0)`,ref:h=\u003eZ(h).call(un(d))}),pn.default.createElement(\"g\",{transform:`translate(0,${d(0)})`,ref:h=\u003eZ(h).call(ln(m))})))}function ja({f:e,width:n,margin:a,height:s,range:c}){return a=a||40,n=n||400,s=s||300,c=c||{x:[-1,1],y:[-1,1]},pn.default.createElement(\"svg\",{ref:p=\u003e{let m=Z(p).attr(\"width\",n+20).attr(\"height\",s+20),d=J().domain(c.x).range([a,n-a]),h=J().domain(c.y).range([s-a,a]),N=m.append(\"g\"),b=[];for(let g=a+1e-6;g\u003cn-a;g+=1){let y=d.invert(g),w=e(y),S=h(w);b.push([g,S])}N.append(\"path\").attr(\"d\",\"M\"+b.join(\"L\")).style(\"stroke\",\"steelblue\").style(\"fill\",\"none\"),N.append(\"g\").attr(\"transform\",`translate(${a},0)`).call(un(h)),N.append(\"g\").attr(\"transform\",`translate(0,${h(0)})`).call(ln(d))}})}var Es={title:\"Plotting Functions with React and d3.js\",date:\"2020-04-18\",tags:[\"code\",\"d3\"],description:\"As the basis of many upcoming visualizations.\",image:\"./img/plot.png\"};function Rs(e){let n=Object.assign({p:\"p\",a:\"a\",pre:\"pre\",code:\"code\",span:\"span\",h2:\"h2\",h3:\"h3\",ul:\"ul\",li:\"li\"},e.components),{wrapper:a}=n,s=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[\"As the basis of many upcoming visualizations, I will use libraries of \",(0,t.jsx)(n.a,{href:\"https://github.com/d3/d3/blob/master/API.md\",children:\"the huge d3 ecosystem\"}),`.\nFor many applications, for example to animate vibrating strings, it want to plot functions:`]}),`\n`,(0,t.jsx)(ba,{strokeWidth:5,functions:[c=\u003eMath.sin(c),c=\u003eMath.cos(c)],range:{x:[-Math.PI,Math.PI],y:[-1,1]}}),`\n`,(0,t.jsx)(n.p,{children:\"The code:\"}),`\n`,(0,t.jsx)(n.pre,{className:\"language-js\",children:(0,t.jsxs)(n.code,{className:\"language-js\",children:[(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,t.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Plot\"}),\" functions\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token parameter\",children:\"x\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,t.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"sin\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token parameter\",children:\"x\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,t.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"cos\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" range\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" x\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token constant\",children:\"PI\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token constant\",children:\"PI\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,t.jsxs)(n.h2,{id:\"combining-d3-and-react\",children:[(0,t.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#combining-d3-and-react\",children:(0,t.jsx)(n.span,{className:\"icon icon-link\"})}),\"Combining d3 and react\"]}),`\n`,(0,t.jsx)(n.p,{children:`As d3 has its own API for handling the DOM, we could theoretically do the job without React.\nBut as I want to be able to use components in MDX files directly, React needs to be at least a wrapper for d3.`}),`\n`,(0,t.jsxs)(n.h3,{id:\"with-d3-selection\",children:[(0,t.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#with-d3-selection\",children:(0,t.jsx)(n.span,{className:\"icon icon-link\"})}),\"With d3-selection\"]}),`\n`,(0,t.jsxs)(n.p,{children:[\"So now let's just use React as a wrapper and let d3 handle the DOM inside the svg element, by using its jquery-like API \",(0,t.jsx)(n.a,{href:\"https://github.com/d3/d3-selection\",children:\"d3-selection\"}),\".\"]}),`\n`,(0,t.jsxs)(n.p,{children:[\"By using most of the code from \",(0,t.jsx)(n.a,{href:\"https://observablehq.com/@d3/continuous-scales#visualizeScale\",children:\"here\"}),\" and pasting it into the \",(0,t.jsx)(n.a,{href:\"https://reactjs.org/docs/refs-and-the-dom.html#callback-refs\",children:\"ref callback\"}),\", we can operate directly on the svg element:\"]}),`\n`,(0,t.jsx)(n.pre,{className:\"language-js\",children:(0,t.jsxs)(n.code,{className:\"language-js\",children:[(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,t.jsx)(n.span,{className:\"token imports\",children:(0,t.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"})}),\" \",(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,t.jsxs)(n.span,{className:\"token imports\",children:[(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" scaleLinear \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'d3-scale'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,t.jsxs)(n.span,{className:\"token imports\",children:[(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" select \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'d3-selection'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,t.jsxs)(n.span,{className:\"token imports\",children:[(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" axisBottom\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" axisLeft \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'d3-axis'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n\n`,(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,t.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:(0,t.jsx)(n.span,{className:\"token maybe-class-name\",children:\"FunctionPlot\"})}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsxs)(n.span,{className:\"token parameter\",children:[(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" f\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" width\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" height\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" range \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  margin `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" margin \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"40\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  width `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"400\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  height `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" height \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"300\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  range `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" range \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" x\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),`svg\n      ref`,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token parameter\",children:\"el\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n        `,(0,t.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" svg \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"select\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"el\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'width'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"20\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'height'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" height \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"20\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n          x `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"scaleLinear\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"domain\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"range\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token property-access\",children:\"x\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"range\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n          y `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"scaleLinear\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"domain\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"range\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token property-access\",children:\"y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"range\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"height \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n          g `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" svg\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"append\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'g'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n          line `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n        `,(0,t.jsx)(n.span,{className:\"token keyword control-flow\",children:\"for\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" i \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" margin \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1e-6\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+=\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n          `,(0,t.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,t.jsx)(n.span,{className:\"token constant\",children:\"X\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"invert\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"i\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token constant\",children:\"Y\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"f\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token constant\",children:\"X\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n            j `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token constant\",children:\"Y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n          line`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"push\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" j\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n        `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n        g`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"append\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'path'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n          `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'d'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'M'\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" line\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"join\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'L'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n          `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"style\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'stroke'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'steelblue'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n          `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"style\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'fill'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'none'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n        g`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"append\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'g'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'transform'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsxs)(n.span,{className:\"token template-string\",children:[(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"translate(\"}),(0,t.jsxs)(n.span,{className:\"token interpolation\",children:[(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"margin\",(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token string\",children:\",0)\"}),(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"call\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token function\",children:\"axisLeft\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"y\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n        g`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"append\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'g'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n          `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'transform'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsxs)(n.span,{className:\"token template-string\",children:[(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"translate(0,\"}),(0,t.jsxs)(n.span,{className:\"token interpolation\",children:[(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,t.jsx)(n.span,{className:\"token function\",children:\"y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token string\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n          `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"call\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token function\",children:\"axisBottom\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"svg\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,t.jsx)(n.p,{children:\"and using it:\"}),`\n`,(0,t.jsx)(n.pre,{className:\"language-js\",children:(0,t.jsxs)(n.code,{className:\"language-js\",children:[(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,t.jsx)(n.span,{className:\"token maybe-class-name\",children:\"FunctionPlot\"}),\" f\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token parameter\",children:\"x\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,t.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"sin\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" range\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" x\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"4\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"4\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,t.jsx)(ja,{f:c=\u003eMath.sin(c),range:{x:[-4,4],y:[-1,1]}}),`\n`,(0,t.jsx)(n.p,{children:\"Other d3 APIs used:\"}),`\n`,(0,t.jsxs)(n.ul,{children:[`\n`,(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:\"https://observablehq.com/@d3/introduction-to-d3s-scales?collection=@d3/d3-scale\",children:\"d3-scale\"}),\" for a convenient translation of the function value range to the pixels dimensions on screen\"]}),`\n`,(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:\"https://github.com/d3/d3-axis\",children:\"d3-axis\"}),\" for easy-to-use x and y axis\"]}),`\n`]}),`\n`,(0,t.jsxs)(n.h3,{id:\"with-jsx\",children:[(0,t.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#with-jsx\",children:(0,t.jsx)(n.span,{className:\"icon icon-link\"})}),\"With JSX\"]}),`\n`,(0,t.jsx)(n.p,{children:\"As React is already a pretty good lib to handle the DOM efficiently, we can (mostly) spare d3-selection and render the SVG elements in JSX:\"}),`\n`,(0,t.jsx)(n.pre,{className:\"language-js\",children:(0,t.jsxs)(n.code,{className:\"language-js\",children:[(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,t.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:(0,t.jsx)(n.span,{className:\"token maybe-class-name\",children:\"FunctionPlot\"})}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsxs)(n.span,{className:\"token parameter\",children:[(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" f\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" width\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" height\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" range \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  margin `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" margin \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"40\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  width `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"400\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  height `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" height \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"300\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  range `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" range \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" x\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" line \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n    x `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"scaleLinear\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"domain\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"range\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token property-access\",children:\"x\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"range\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n    y `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"scaleLinear\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"domain\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"range\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token property-access\",children:\"y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"range\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"height \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token keyword control-flow\",children:\"for\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" i \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" margin \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1e-6\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+=\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,t.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,t.jsx)(n.span,{className:\"token constant\",children:\"X\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"invert\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"i\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token constant\",children:\"Y\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"f\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token constant\",children:\"X\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n      j `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token constant\",children:\"Y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n    line`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"push\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" j\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"svg width\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"20\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" height\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"height \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"20\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"g\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n        `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"path d\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsxs)(n.span,{className:\"token template-string\",children:[(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"M\"}),(0,t.jsxs)(n.span,{className:\"token interpolation\",children:[(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"line\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"join\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'L'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" stroke\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token string\",children:'\"steelblue\"'}),\" fill\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token string\",children:'\"none\"'}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n        `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"g transform\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsxs)(n.span,{className:\"token template-string\",children:[(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"translate(\"}),(0,t.jsxs)(n.span,{className:\"token interpolation\",children:[(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"margin\",(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token string\",children:\",0)\"}),(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" ref\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token parameter\",children:\"g\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"select\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"g\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"call\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token function\",children:\"axisLeft\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"y\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n        `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"g transform\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsxs)(n.span,{className:\"token template-string\",children:[(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"translate(0,\"}),(0,t.jsxs)(n.span,{className:\"token interpolation\",children:[(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,t.jsx)(n.span,{className:\"token function\",children:\"y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token string\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" ref\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token parameter\",children:\"g\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"select\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"g\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"call\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token function\",children:\"axisBottom\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"g\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n    `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"svg\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,t.jsx)(n.p,{children:\"Now the .select / .append calls have been refactored to JSX. I like this code much more as it looks flatter and lets me manipulate the svg elements directly as JSX without using a wide API surface of chaining methods.\"}),`\n`,(0,t.jsx)(n.p,{children:\"The output is exactly the same:\"}),`\n`,(0,t.jsx)(wa,{f:c=\u003eMath.sin(c),range:{x:[-4,4],y:[-1,1]}}),`\n`,(0,t.jsxs)(n.p,{children:[`You may have noticed that the axes are still rendered using ref callback + d3-selection.\nThis is because the axes methods are generators that output a subtree of DOM nodes.\nIf we wanted to avoid using d3-selection completely, we could implement our own axis component using `,(0,t.jsx)(n.a,{href:\"https://observablehq.com/@d3/scale-ticks\",children:\"scale.ticks\"}),\".\"]}),`\n`,(0,t.jsx)(n.p,{children:\"But for my use case, the above approach is perfectly fine.\"}),`\n`,(0,t.jsx)(n.p,{children:\"I am really excited by d3 and the way it is organized in small modules, letting me pick only the parts I need! It will be a big part of upcoming visualizations on this blog.\"}),`\n`,(0,t.jsxs)(n.h2,{id:\"more-d3-resources\",children:[(0,t.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#more-d3-resources\",children:(0,t.jsx)(n.span,{className:\"icon icon-link\"})}),\"More d3 Resources\"]}),`\n`,(0,t.jsxs)(n.ul,{children:[`\n`,(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:\"https://observablehq.com/collection/@d3/learn-d3\",children:\"https://observablehq.com/collection/@d3/learn-d3\"})}),`\n`,(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:\"https://medium.com/@enjalot/how-do-you-learn-d3-js-ccffc151419b\",children:\"https://medium.com/@enjalot/how-do-you-learn-d3-js-ccffc151419b\"})}),`\n`,(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:\"https://medium.com/@enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a\",children:\"https://medium.com/@enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a\"})}),`\n`,(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:\"https://bost.ocks.org/mike/\",children:\"https://bost.ocks.org/mike/\"})}),`\n`]})]});return a?(0,t.jsx)(a,Object.assign({},e,{children:s})):s}var zs=Rs;return Ds;})();\n;return Component.default;"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"plotting-functions"},"buildId":"3g4JzCtv87FmuTIoVbGJn","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>