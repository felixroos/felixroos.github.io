<!DOCTYPE html><html lang="en"><head><script>!function(){try{var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem("theme");if(e){d.add(e)}else{d.add('light');}}catch(t){}}();</script><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="HandheldFriendly" content="true"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-touch-fullscreen" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/><meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/><link rel="alternate" type="application/rss+xml" title="RSS Feed for felixroos.github.io" href="/rss.xml"/><link rel="alternate" type="application/atom+xml" title="Atom Feed for felixroos.github.io" href="/atom.xml"/><link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon-180x180.png"/><link rel="shortcut icon" type="image/x-icon" href="favicon/favicon-32x32.ico"/><link rel="icon" type="image/png" sizes="96x96" href="favicon/favicon-96x96.png"/><meta name="msapplication-square310x310logo" content="favicon/mstile-310x310.png"/><meta name="msapplication-TileColor" content="#FFFFFF"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:url" content="https://felixroos.github.io/"/><meta property="og:type" content="website"/><meta property="og:image" content="/logo.png"/><meta property="og:image:alt" content="Loophole Letters Logo"/><meta property="og:image:width" content="1024"/><meta property="og:image:height" content="1024"/><meta property="og:locale" content="en"/><meta property="og:site_name" content="Loophole Letters Blog"/><link rel="canonical" href="https://felixroos.github.io/plotting-functions"/><link rel="preload" as="image" imagesrcset="/_next/static/media/logo_cropped.c537dc4a.png 640w, /_next/static/media/logo_cropped.c537dc4a.png 750w, /_next/static/media/logo_cropped.c537dc4a.png 828w, /_next/static/media/logo_cropped.c537dc4a.png 1080w, /_next/static/media/logo_cropped.c537dc4a.png 1200w, /_next/static/media/logo_cropped.c537dc4a.png 1920w, /_next/static/media/logo_cropped.c537dc4a.png 2048w, /_next/static/media/logo_cropped.c537dc4a.png 3840w" imagesizes="100vw"/><title>Plotting Functions with React and d3.js | Loophole Letters</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="As the basis of many upcoming visualizations."/><meta property="og:title" content="Plotting Functions with React and d3.js | Loophole Letters"/><meta property="og:description" content="As the basis of many upcoming visualizations."/><meta name="next-head-count" content="32"/><link rel="preload" href="/_next/static/css/6cad85acb85b21e4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6cad85acb85b21e4.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-e146e0a21859bb55.js" defer=""></script><script src="/_next/static/chunks/pages/_app-1431f857cc9f55f4.js" defer=""></script><script src="/_next/static/chunks/674-06001bd0b5ea765c.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-900ba3868c5d9c28.js" defer=""></script><script src="/_next/static/FC8Jkl4TPDRYg8Mdw4RDr/_buildManifest.js" defer=""></script><script src="/_next/static/FC8Jkl4TPDRYg8Mdw4RDr/_ssgManifest.js" defer=""></script><script src="/_next/static/FC8Jkl4TPDRYg8Mdw4RDr/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><header class="z-[1999] sticky top-0 bg-slate-900 dark:bg-slate-800 font-semibold p-2 text-white flex justify-center shadow-xl border-b border-gray-500 dark:border-gray-800"><div class="max-w-3xl w-full p-2 flex justify-between items-center"><h1 class="sm:text-3xl text-2xl"><a href="/" class="flex items-bottom"><div class="h-8 w-8 mr-3 relative"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="Logo" sizes="100vw" srcSet="/_next/static/media/logo_cropped.c537dc4a.png 640w, /_next/static/media/logo_cropped.c537dc4a.png 750w, /_next/static/media/logo_cropped.c537dc4a.png 828w, /_next/static/media/logo_cropped.c537dc4a.png 1080w, /_next/static/media/logo_cropped.c537dc4a.png 1200w, /_next/static/media/logo_cropped.c537dc4a.png 1920w, /_next/static/media/logo_cropped.c537dc4a.png 2048w, /_next/static/media/logo_cropped.c537dc4a.png 3840w" src="/_next/static/media/logo_cropped.c537dc4a.png" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover"/><noscript><img alt="Logo" sizes="100vw" srcSet="/_next/static/media/logo_cropped.c537dc4a.png 640w, /_next/static/media/logo_cropped.c537dc4a.png 750w, /_next/static/media/logo_cropped.c537dc4a.png 828w, /_next/static/media/logo_cropped.c537dc4a.png 1080w, /_next/static/media/logo_cropped.c537dc4a.png 1200w, /_next/static/media/logo_cropped.c537dc4a.png 1920w, /_next/static/media/logo_cropped.c537dc4a.png 2048w, /_next/static/media/logo_cropped.c537dc4a.png 3840w" src="/_next/static/media/logo_cropped.c537dc4a.png" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div>loophole letters</a> </h1></div></header><div class="flex justify-center min-h-full dark:bg-slate-900 py-4"> <main class="max-w-3xl p-2"><article class="prose font-serif max-w-none prose-headings:font-sans prose-headings:font-black prose-headings:text-slate-900 dark:prose-headings:text-gray-200 dark:text-gray-400 dark:prose-strong:text-gray-400 dark:prose-code:text-slate-400 dark:prose-a:text-gray-300 prose-a:text-slate-900 prose-blockquote:text-slate-800 dark:prose-blockquote:text-slate-400"><div class="border-b-4 border-dotted pb-2 border-slate-900 mb-4"><div class="md:flex justify-between"><h1 class="mb-4 ">Plotting Functions with React and d3.js</h1><div class="flex space-x-2 items-start pb-4 md:pb-0"><div class="text-sm bg-slate-200 dark:bg-slate-700 rounded-md p-2 font-serif text-slate-900 dark:text-white">code</div><div class="text-sm bg-slate-200 dark:bg-slate-700 rounded-md p-2 font-serif text-slate-900 dark:text-white">d3</div></div></div><p class="italic p-0 m-0">April 18, 2020</p></div><div><p>As the basis of many upcoming visualizations, I will use libraries of <a target="_blank" href="https://github.com/d3/d3/blob/master/API.md">the huge d3 ecosystem</a>.
For many applications, for example to animate vibrating strings, it want to plot functions:</p>
<svg width="500" height="300"><g class="x-axis plot-axis"></g><g class="y-axis plot-axis"></g><g><path d="M469.000001,153.13007599287843L468.000001,151.2605685979838L467.000001,149.39189807429824L466.000001,147.5244826235193L465.000001,145.65874016646364L464.000001,143.79508824953834L463.000001,141.9339439512949L462.000001,140.07572378908893L461.000001,138.22084362586477L460.000001,136.36971857708753L459.000001,134.52276291784094L458.000001,132.68038999011452L457.000001,130.84301211029893L456.000001,129.01104047691175L455.000001,127.1848850785716L454.000001,125.36495460224492L453.000001,123.55165634178312L452.000001,121.7453961067719L451.000001,119.94657813171216L450.000001,118.15560498555396L449.000001,116.37287748160306L448.000001,114.59879458782058L447.000001,112.83375333753486L446.000001,111.07814874058725L445.000001,109.33237369493047L444.000001,107.59681889869887L443.000001,105.87187276277243L442.000001,104.15792132385099L441.000001,102.45534815806104L440.000001,100.76453429511304L439.000001,99.08585813302776L438.000001,97.41969535345243L437.000001,95.76641883758494L436.000001,94.12639858272362L435.000001,92.50000161946376L434.000001,90.8875919295572L433.000001,89.28953036445492L432.000001,87.70617456454923L431.000001,86.13787887913551L430.000001,84.58499428711016L429.000001,83.04786831842242L428.000001,81.52684497629909L427.000001,80.02226466025705L426.000001,78.53446408992352L425.000001,77.06377622967975L424.000001,75.61053021414402L423.000001,74.17505127451304L422.000001,72.75766066577624L421.000001,71.35867559482031L420.000001,69.9784091494389L419.000001,68.61717022826522L418.000001,67.2752634716412L417.000001,65.95298919344086L416.000001,64.65064331386017L415.000001,63.36851729319176L414.000001,62.106898066597L413.000001,60.86606797989117L412.000001,59.646304726355126L411.000001,58.4478812845888L410.000001,57.27106585741945L409.000001,56.11612181187911L408.000001,54.983307620263574L407.000001,53.87287680228742L406.000001,52.78507786834749L405.000001,51.72015426390672L404.000001,50.67834431501209L403.000001,49.65988117495843L402.000001,48.66499277210887L401.000001,47.69390175888613L400.000001,46.746825461943004L399.000001,45.823975833525736L398.000001,44.92555940404006L397.000001,44.05177723583012L396.000001,43.20282487818156L395.000001,42.37889232355832L394.000001,41.5801639650831L393.000001,40.80681855527066L392.000001,40.059029166023805L391.000001,39.33696314990035L390.000001,38.64078210266056L389.000001,37.97064182710222L388.000001,37.32669229819272L387.000001,36.709077629505124L386.000001,36.11793604096622L385.000001,35.5533998279233L384.000001,35.01559533153689L383.000001,34.504642910506064L382.000001,34.020656914132836L381.000001,33.563745656730845L380.000001,33.13401139338523L379.000001,32.73155029706826L378.000001,32.35645243711613L377.000001,32.00880175907192L376.000001,31.68867606589862L375.000001,31.39614700056734L374.000001,31.131280030023774L373.000001,30.894134430537044L372.000001,30.68476327443362L371.000001,30.503213418220238L370.000001,30.349525492097435L369.000001,30.223733890866637L368.000001,30.12586676623272L367.000001,30.055946020503903L366.000001,30.01398730168986L365.000001,30L364.000001,30.01398724574181L363.000001,30.055945908620295L362.000001,30.125866598438662L361.000001,30.22373366719963L360.000001,30.34952521260756L359.000001,30.50321308297002L358.000001,30.68476288349806L357.000001,30.894133984003673L356.000001,31.131279527992554L355.000001,31.39614644315056L354.000001,31.688675453221045L353.000001,32.00880109127069L352.000001,32.356451714340736L351.000001,32.731549519480374L350.000001,33.13401056115889L349.000001,33.56374477005231L348.000001,34.02065597320056L347.000001,34.50464191553063L346.000001,35.0155942827409L345.000001,35.55339872554153L344.000001,36.1179348852454L343.000001,36.70907642070384L342.000001,37.326691036581515L341.000001,37.97064051296348L340.000001,38.64078073628838L339.000001,39.33696173160048L338.000001,40.05902769611361L337.000001,40.80681703407915L336.000001,41.58016239295073L335.000001,42.37889070083692L334.000001,43.20282320523428L333.000001,44.051775513031416L332.000001,44.92555763177544L331.000001,45.823974012191826L330.000001,46.74682359194735L329.000001,47.69389984064735L328.000001,48.66499080605621L327.000001,49.65987916153178L326.000001,50.678342254662255L325.000001,51.7201521570946L324.000001,52.78507571554472L323.000001,53.872874603975745L322.000001,54.98330537693491L321.000001,56.11611952403561L320.000001,57.2710635255731L319.000001,58.44787890926137L318.000001,59.64630230807825L317.000001,60.86606551920606L316.000001,62.10689556405441L315.000001,63.368514749351654L314.000001,64.65064072929192L313.000001,65.95298656872292L312.000001,67.27526080736092L311.000001,68.6171675250187L310.000001,69.97840640783132L309.000001,71.35867281546518L308.000001,72.75765784929561L307.000001,74.17504842153707L306.000001,75.61052732531135L305.000001,77.06377330563683L304.000001,78.53446113132482L303.000001,80.02226166776458L302.000001,81.52684195058261L301.000001,83.04786526015914L300.000001,84.58499119698432L299.000001,86.13787575783888L298.000001,87.70617141278022L297.000001,89.28952718291892L296.000001,90.88758871896627L295.000001,92.49999838053633L294.000001,94.12639531618458L293.000001,95.7664155441654L292.000001,97.41969203388942L291.000001,99.08585478806408L290.000001,100.76453092549737L289.000001,102.45534476454752L288.000001,104.15791790719891L287.000001,105.87186932374661L286.000001,107.596815438069L285.000001,109.33237021347084L284.000001,111.07814523907709L283.000001,112.83374981675772L282.000001,114.59879104856444L281.000001,116.37287392466008L280.000001,118.15560141171999L279.000001,119.94657454178717L278.000001,121.74539250155925L277.000001,123.55165272208968L276.000001,125.36495096888065L275.000001,127.18488143234974L274.000001,129.01103681864834L273.000001,130.84300844081272L272.000001,132.6803863102264L271.000001,134.52275922837472L270.000001,136.36971487886888L269.000001,138.22083991972136L268.000001,140.07572007585003L267.000001,141.93394023179172L266.000001,143.79508452460328L265.000001,145.6587364369302L264.000001,147.52447889022216L263.000001,149.39189433807292L262.000001,151.2605648596665L261.000001,153.13007225330563L260.000001,154.99999813000437L259.000001,156.8699240071216L258.000001,158.73943140201612L257.000001,160.6081019257017L256.000001,162.47551737648072L255.000001,164.3412598335363L254.000001,166.20491175046163L253.000001,168.0660560487051L252.000001,169.92427621091113L251.000001,171.7791563741352L250.000001,173.6302814229125L249.000001,175.4772370821591L248.000001,177.31961000988557L247.000001,179.15698788970093L246.000001,180.98895952308817L245.000001,182.81511492142835L244.000001,184.6350453977551L243.000001,186.4483436582168L242.000001,188.25460389322808L241.000001,190.0534218682878L240.000001,191.84439501444606L239.000001,193.62712251839687L238.000001,195.40120541217942L237.000001,197.1662466624652L236.000001,198.92185125941276L235.000001,200.66762630506955L234.000001,202.4031811013011L233.000001,204.12812723722755L232.000001,205.84207867614904L231.000001,207.5446518419389L230.000001,209.23546570488696L229.000001,210.91414186697222L228.000001,212.5803046465475L227.000001,214.23358116241505L226.000001,215.8736014172764L225.000001,217.49999838053628L224.000001,219.11240807044277L223.000001,220.71046963554508L222.000001,222.29382543545074L221.000001,223.86212112086446L220.000001,225.4150057128898L219.000001,226.9521316815775L218.000001,228.47315502370083L217.000001,229.97773533974302L216.000001,231.4655359100764L215.000001,232.93622377032023L214.000001,234.389469785856L213.000001,235.824948725487L212.000001,237.24233933422371L211.000001,238.64132440517974L210.000001,240.02159085056118L209.000001,241.3828297717349L208.000001,242.7247365283587L207.000001,244.04701080655911L206.000001,245.3493566861398L205.000001,246.63148270680824L204.000001,247.89310193340293L203.000001,249.13393202010883L202.000001,250.35369527364486L201.000001,251.55211871541118L200.000001,252.7289341425805L199.000001,253.8838781881209L198.000001,255.01669237973644L197.000001,256.1271231977126L196.000001,257.2149221316525L195.000001,258.27984573609325L194.000001,259.32165568498783L193.000001,260.3401188250416L192.000001,261.335007227891L191.000001,262.30609824111383L190.000001,263.253174538057L189.000001,264.17602416647424L188.000001,265.0744405959599L187.000001,265.9482227641699L186.000001,266.79717512181844L185.000001,267.6211076764417L184.000001,268.41983603491695L183.000001,269.19318144472936L182.000001,269.9409708339763L181.000001,270.6630368500996L180.000001,271.3592178973394L179.000001,272.0293581728978L178.000001,272.6733077018073L177.000001,273.29092237049485L176.000001,273.88206395903376L175.000001,274.4466001720767L174.000001,274.98440466846307L173.000001,275.4953570894939L172.000001,275.9793430858672L171.000001,276.4362543432692L170.000001,276.86598860661474L169.000001,277.2684497029317L168.000001,277.64354756288384L167.000001,277.99119824092804L166.000001,278.3113239341014L165.000001,278.60385299943266L164.000001,278.8687199699762L163.000001,279.10586556946294L162.000001,279.31523672556636L161.000001,279.49678658177976L160.000001,279.6504745079026L159.000001,279.77626610913336L158.000001,279.8741332337673L157.000001,279.9440539794961L156.000001,279.9860126983101L155.000001,280L154.000001,279.9860127542582L153.000001,279.9440540913797L152.000001,279.8741334015613L151.000001,279.7762663328004L150.000001,279.65047478739245L149.000001,279.49678691702997L148.000001,279.3152371165019L147.000001,279.1058660159963L146.000001,278.86872047200745L145.000001,278.60385355684946L144.000001,278.3113245467789L143.000001,277.9911989087293L142.000001,277.6435482856593L141.000001,277.2684504805197L140.000001,276.86598943884115L139.000001,276.4362552299477L138.000001,275.9793440267994L137.000001,275.4953580844694L136.000001,274.98440571725905L135.000001,274.4466012744585L134.000001,273.8820651147546L133.000001,273.29092357929613L132.000001,272.6733089634185L131.000001,272.0293594870366L130.000001,271.3592192637116L129.000001,270.66303826839953L128.000001,269.9409723038864L127.000001,269.19318296592087L126.000001,268.41983760704926L125.000001,267.6211092991631L124.000001,266.7971767947658L123.000001,265.94822448696857L122.000001,265.0744423682246L121.000001,264.1760259878082L120.000001,263.25317640805264L119.000001,262.3061001593527L118.000001,261.3350091939438L117.000001,260.34012083846824L116.000001,259.3216577453378L115.000001,258.2798478429054L114.000001,257.21492428445526L113.000001,256.12712539602427L112.000001,255.01669462306512L111.000001,253.88388047596436L110.000001,252.72893647442692L109.000001,251.55212109073864L108.000001,250.35369769192175L107.000001,249.13393448079387L106.000001,247.8931044359456L105.000001,246.63148525064835L104.000001,245.34935927070805L103.000001,244.04701343127707L102.000001,242.72473919263905L101.000001,241.38283247498129L100.000001,240.02159359216873L99.000001,238.64132718453484L98.000001,237.24234215070442L97.000001,235.82495157846293L96.000001,234.3894726746887L95.000001,232.9362266943631L94.000001,231.46553886867517L93.000001,229.97773833223548L92.000001,228.47315804941735L91.000001,226.9521347398409L90.000001,225.41500880301572L89.000001,223.86212424216114L88.000001,222.29382858721982L87.000001,220.71047281708104L86.000001,219.11241128103373L85.000001,217.50000161946372L84.000001,215.87360468381536L83.000001,214.2335844558346L82.000001,212.5803079661106L81.000001,210.91414521193596L80.000001,209.23546907450262L79.000001,207.54465523545247L78.000001,205.84208209280106L77.000001,204.12813067625336L76.000001,202.40318456193103L75.000001,200.66762978652918L74.000001,198.92185476092294L73.000001,197.16625018324234L72.000001,195.4012089514355L71.000001,193.62712607533996L70.000001,191.84439858828L69.000001,190.0534254582129L68.000001,188.25460749844072L67.000001,186.44834727791033L66.000001,184.63504903111937L65.000001,182.81511856765025L64.000001,180.9889631813517L63.000001,179.1569915591873L62.000001,177.31961368977358L61.000001,175.47724077162533L60.000001,173.63028512113107L59.000001,171.77916008027864L58.000001,169.92427992414997L57.000001,168.06605976820836L56.000001,166.20491547539677L55.000001,164.3412635630698L54.000001,162.4755211097779L53.000001,160.60810566192703L52.000001,158.7394351403335L51.000001,156.8699277466944L50.000001,155.0000018699956" stroke="lightsalmon" stroke-width="5" fill="none"></path><path d="M469.000001,279.9860127542582L468.000001,279.9440540913797L467.000001,279.8741334015613L466.000001,279.7762663328004L465.000001,279.65047478739245L464.000001,279.49678691702997L463.000001,279.3152371165019L462.000001,279.1058660159963L461.000001,278.86872047200745L460.000001,278.60385355684946L459.000001,278.3113245467789L458.000001,277.99119890872936L457.000001,277.6435482856593L456.000001,277.2684504805196L455.000001,276.8659894388411L454.000001,276.4362552299477L453.000001,275.9793440267994L452.000001,275.4953580844694L451.000001,274.98440571725905L450.000001,274.4466012744585L449.000001,273.8820651147546L448.000001,273.29092357929613L447.000001,272.6733089634185L446.000001,272.0293594870366L445.000001,271.3592192637116L444.000001,270.66303826839953L443.000001,269.9409723038864L442.000001,269.19318296592087L441.000001,268.41983760704926L440.000001,267.62110929916304L439.000001,266.79717679476573L438.000001,265.94822448696857L437.000001,265.0744423682246L436.000001,264.1760259878082L435.000001,263.25317640805264L434.000001,262.3061001593527L433.000001,261.3350091939438L432.000001,260.34012083846824L431.000001,259.32165774533775L430.000001,258.2798478429054L429.000001,257.21492428445526L428.000001,256.12712539602427L427.000001,255.01669462306512L426.000001,253.88388047596436L425.000001,252.7289364744269L424.000001,251.55212109073864L423.000001,250.35369769192175L422.000001,249.13393448079387L421.000001,247.89310443594556L420.000001,246.63148525064835L419.000001,245.3493592707081L418.000001,244.047013431277L417.000001,242.72473919263902L416.000001,241.38283247498129L415.000001,240.02159359216873L414.000001,238.6413271845348L413.000001,237.2423421507044L412.000001,235.82495157846293L411.000001,234.3894726746887L410.000001,232.9362266943631L409.000001,231.46553886867514L408.000001,229.97773833223548L407.000001,228.47315804941735L406.000001,226.95213473984086L405.000001,225.41500880301567L404.000001,223.8621242421611L403.000001,222.2938285872198L402.000001,220.71047281708104L401.000001,219.11241128103376L400.000001,217.50000161946372L399.000001,215.87360468381536L398.000001,214.2335844558346L397.000001,212.58030796611055L396.000001,210.91414521193593L395.000001,209.23546907450256L394.000001,207.54465523545247L393.000001,205.84208209280104L392.000001,204.12813067625342L391.000001,202.40318456193094L390.000001,200.66762978652915L389.000001,198.9218547609229L388.000001,197.16625018324234L387.000001,195.40120895143554L386.000001,193.6271260753399L385.000001,191.84439858827997L384.000001,190.05342545821284L383.000001,188.2546074984407L382.000001,186.4483472779103L381.000001,184.63504903111937L380.000001,182.81511856765025L379.000001,180.98896318135166L378.000001,179.15699155918728L377.000001,177.31961368977358L376.000001,175.47724077162528L375.000001,173.63028512113107L374.000001,171.77916008027864L373.000001,169.92427992414997L372.000001,168.0660597682083L371.000001,166.20491547539675L370.000001,164.3412635630698L369.000001,162.4755211097779L368.000001,160.60810566192706L367.000001,158.73943514033346L366.000001,156.86992774669437L365.000001,155.00000186999563L364.000001,153.1300759928784L363.000001,151.26056859798382L362.000001,149.39189807429824L361.000001,147.5244826235193L360.000001,145.65874016646364L359.000001,143.79508824953834L358.000001,141.9339439512949L357.000001,140.07572378908893L356.000001,138.22084362586477L355.000001,136.36971857708753L354.000001,134.52276291784094L353.000001,132.6803899901145L352.000001,130.84301211029896L351.000001,129.01104047691175L350.000001,127.1848850785716L349.000001,125.36495460224495L348.000001,123.55165634178314L347.000001,121.7453961067719L346.000001,119.94657813171216L345.000001,118.15560498555396L344.000001,116.37287748160308L343.000001,114.59879458782058L342.000001,112.83375333753486L341.000001,111.07814874058728L340.000001,109.33237369493047L339.000001,107.5968188986989L338.000001,105.87187276277243L337.000001,104.15792132385097L336.000001,102.45534815806107L335.000001,100.76453429511307L334.000001,99.08585813302778L333.000001,97.4196953534525L332.000001,95.76641883758494L331.000001,94.12639858272362L330.000001,92.50000161946372L329.000001,90.88759192955723L328.000001,89.28953036445495L327.000001,87.70617456454923L326.000001,86.13787887913551L325.000001,84.58499428711013L324.000001,83.04786831842246L323.000001,81.52684497629909L322.000001,80.022264660257L321.000001,78.53446408992357L320.000001,77.06377622967975L319.000001,75.61053021414402L318.000001,74.17505127451304L317.000001,72.7576606657763L316.000001,71.35867559482031L315.000001,69.9784091494389L314.000001,68.61717022826517L313.000001,67.27526347164124L312.000001,65.95298919344086L311.000001,64.6506433138602L310.000001,63.368517293191736L309.000001,62.106898066597026L308.000001,60.86606797989117L307.000001,59.646304726355126L306.000001,58.447881284588775L305.000001,57.2710658574195L304.000001,56.11612181187911L303.000001,54.98330762026352L302.000001,53.87287680228745L301.000001,52.78507786834749L300.000001,51.72015426390672L299.000001,50.67834431501211L298.000001,49.6598811749584L297.000001,48.66499277210892L296.000001,47.69390175888613L295.000001,46.746825461942976L294.000001,45.823975833525765L293.000001,44.92555940404009L292.000001,44.05177723583012L291.000001,43.20282487818153L290.000001,42.37889232355832L289.000001,41.5801639650831L288.000001,40.80681855527066L287.000001,40.059029166023805L286.000001,39.33696314990035L285.000001,38.64078210266056L284.000001,37.97064182710222L283.000001,37.32669229819272L282.000001,36.709077629505124L281.000001,36.11793604096622L280.000001,35.5533998279233L279.000001,35.01559533153689L278.000001,34.50464291050612L277.000001,34.020656914132836L276.000001,33.56374565673087L275.000001,33.13401139338526L274.000001,32.73155029706826L273.000001,32.35645243711613L272.000001,32.00880175907192L271.000001,31.68867606589862L270.000001,31.39614700056734L269.000001,31.131280030023774L268.000001,30.894134430537044L267.000001,30.68476327443362L266.000001,30.503213418220238L265.000001,30.349525492097435L264.000001,30.223733890866605L263.000001,30.12586676623272L262.000001,30.055946020503903L261.000001,30.01398730168986L260.000001,30L259.000001,30.01398724574181L258.000001,30.055945908620295L257.000001,30.125866598438662L256.000001,30.22373366719963L255.000001,30.34952521260756L254.000001,30.50321308297002L253.000001,30.68476288349806L252.000001,30.894133984003673L251.000001,31.131279527992554L250.000001,31.39614644315056L249.000001,31.688675453221045L248.000001,32.00880109127069L247.000001,32.35645171434071L246.000001,32.731549519480346L245.000001,33.13401056115886L244.000001,33.56374477005234L243.000001,34.02065597320056L242.000001,34.50464191553063L241.000001,35.0155942827409L240.000001,35.55339872554153L239.000001,36.11793488524537L238.000001,36.70907642070384L237.000001,37.326691036581515L236.000001,37.97064051296348L235.000001,38.64078073628838L234.000001,39.33696173160048L233.000001,40.05902769611361L232.000001,40.80681703407915L231.000001,41.58016239295073L230.000001,42.37889070083692L229.000001,43.20282320523428L228.000001,44.05177551303139L227.000001,44.92555763177544L226.000001,45.823974012191826L225.000001,46.746823591947376L224.000001,47.69389984064735L223.000001,48.66499080605621L222.000001,49.659879161531805L221.000001,50.678342254662226L220.000001,51.72015215709458L219.000001,52.785075715544664L218.000001,53.87287460397569L217.000001,54.983305376934936L216.000001,56.11611952403558L215.000001,57.2710635255731L214.000001,58.44787890926134L213.000001,59.64630230807827L212.000001,60.86606551920606L211.000001,62.10689556405444L210.000001,63.36851474935171L209.000001,64.65064072929198L208.000001,65.95298656872292L207.000001,67.27526080736092L206.000001,68.6171675250187L205.000001,69.9784064078313L204.000001,71.35867281546516L203.000001,72.75765784929558L202.000001,74.17504842153707L201.000001,75.6105273253113L200.000001,77.06377330563686L199.000001,78.53446113132482L198.000001,80.02226166776452L197.000001,81.52684195058266L196.000001,83.04786526015914L195.000001,84.58499119698435L194.000001,86.13787575783883L193.000001,87.70617141278017L192.000001,89.28952718291892L191.000001,90.88758871896627L190.000001,92.4999983805363L189.000001,94.12639531618461L188.000001,95.7664155441654L187.000001,97.41969203388942L186.000001,99.08585478806405L185.000001,100.76453092549741L184.000001,102.45534476454759L183.000001,104.157917907199L182.000001,105.87186932374665L181.000001,107.59681543806899L180.000001,109.33237021347081L179.000001,111.07814523907709L178.000001,112.83374981675767L177.000001,114.59879104856446L176.000001,116.37287392466007L175.000001,118.15560141171999L174.000001,119.94657454178713L173.000001,121.74539250155931L172.000001,123.55165272208968L171.000001,125.36495096888069L170.000001,127.1848814323498L169.000001,129.01103681864834L168.000001,130.8430084408126L167.000001,132.68038631022637L166.000001,134.52275922837467L165.000001,136.36971487886893L164.000001,138.22083991972136L163.000001,140.07572007585003L162.000001,141.93394023179172L161.000001,143.79508452460328L160.000001,145.6587364369302L159.000001,147.5244788902221L158.000001,149.39189433807297L157.000001,151.26056485966654L156.000001,153.13007225330568L155.000001,154.99999813000437L154.000001,156.86992400712154L153.000001,158.73943140201615L152.000001,160.6081019257017L151.000001,162.47551737648067L150.000001,164.34125983353633L149.000001,166.20491175046163L148.000001,168.06605604870506L147.000001,169.92427621091107L146.000001,171.77915637413525L145.000001,173.63028142291245L144.000001,175.4772370821591L143.000001,177.3196100098855L142.000001,179.15698788970093L141.000001,180.98895952308817L140.000001,182.81511492142837L139.000001,184.63504539775502L138.000001,186.44834365821683L137.000001,188.25460389322808L136.000001,190.05342186828778L135.000001,191.84439501444604L134.000001,193.6271225183969L133.000001,195.40120541217942L132.000001,197.16624666246514L131.000001,198.92185125941273L130.000001,200.66762630506958L129.000001,202.40318110130107L128.000001,204.12812723722755L127.000001,205.84207867614896L126.000001,207.54465184193893L125.000001,209.23546570488696L124.000001,210.91414186697222L123.000001,212.58030464654752L122.000001,214.23358116241505L121.000001,215.8736014172764L120.000001,217.49999838053623L119.000001,219.11240807044277L118.000001,220.71046963554505L117.000001,222.2938254354507L116.000001,223.86212112086443L115.000001,225.4150057128898L114.000001,226.95213168157755L113.000001,228.4731550237009L112.000001,229.97773533974294L111.000001,231.46553591007643L110.000001,232.93622377032023L109.000001,234.389469785856L108.000001,235.82494872548696L107.000001,237.24233933422374L106.000001,238.64132440517966L105.000001,240.02159085056107L104.000001,241.38282977173486L103.000001,242.72473652835876L102.000001,244.04701080655914L101.000001,245.3493566861398L100.000001,246.6314827068082L99.000001,247.893101933403L98.000001,249.13393202010883L97.000001,250.35369527364483L96.000001,251.55211871541118L95.000001,252.72893414258053L94.000001,253.88387818812086L93.000001,255.01669237973644L92.000001,256.12712319771254L91.000001,257.2149221316525L90.000001,258.2798457360933L89.000001,259.3216556849879L88.000001,260.3401188250416L87.000001,261.3350072278911L86.000001,262.30609824111383L85.000001,263.253174538057L84.000001,264.17602416647424L83.000001,265.0744405959599L82.000001,265.9482227641699L81.000001,266.79717512181844L80.000001,267.6211076764417L79.000001,268.4198360349169L78.000001,269.1931814447293L77.000001,269.9409708339762L76.000001,270.6630368500996L75.000001,271.3592178973394L74.000001,272.02935817289773L73.000001,272.6733077018073L72.000001,273.29092237049485L71.000001,273.88206395903376L70.000001,274.4466001720767L69.000001,274.98440466846307L68.000001,275.4953570894939L67.000001,275.97934308586713L66.000001,276.4362543432691L65.000001,276.86598860661474L64.000001,277.2684497029317L63.000001,277.6435475628839L62.000001,277.99119824092804L61.000001,278.3113239341014L60.000001,278.60385299943266L59.000001,278.8687199699762L58.000001,279.10586556946294L57.000001,279.31523672556636L56.000001,279.49678658177976L55.000001,279.6504745079026L54.000001,279.77626610913336L53.000001,279.8741332337673L52.000001,279.9440539794961L51.000001,279.9860126983101L50.000001,280" stroke="lightseagreen" stroke-width="5" fill="none"></path></g></svg>
<p>The code:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Plot</span> functions<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">sin</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">cos</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">}</span> range<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<h2 id="combining-d3-and-react"><a aria-hidden="true" tabindex="-1" href="/plotting-functions#combining-d3-and-react"><span class="icon icon-link"></span></a>Combining d3 and react</h2>
<p>As d3 has its own API for handling the DOM, we could theoretically do the job without React.
But as I want to be able to use components in MDX files directly, React needs to be at least a wrapper for d3.</p>
<h3 id="with-d3-selection"><a aria-hidden="true" tabindex="-1" href="/plotting-functions#with-d3-selection"><span class="icon icon-link"></span></a>With d3-selection</h3>
<p>So now let&#x27;s just use React as a wrapper and let d3 handle the DOM inside the svg element, by using its jquery-like API <a target="_blank" href="https://github.com/d3/d3-selection">d3-selection</a>.</p>
<p>By using most of the code from <a target="_blank" href="https://observablehq.com/@d3/continuous-scales#visualizeScale">here</a> and pasting it into the <a target="_blank" href="https://reactjs.org/docs/refs-and-the-dom.html#callback-refs">ref callback</a>, we can operate directly on the svg element:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">React</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> scaleLinear <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;d3-scale&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> select <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;d3-selection&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> axisBottom<span class="token punctuation">,</span> axisLeft <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&#x27;d3-axis&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">FunctionPlot</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> f<span class="token punctuation">,</span> width<span class="token punctuation">,</span> margin<span class="token punctuation">,</span> height<span class="token punctuation">,</span> range <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  margin <span class="token operator">=</span> margin <span class="token operator">||</span> <span class="token number">40</span><span class="token punctuation">;</span>
  width <span class="token operator">=</span> width <span class="token operator">||</span> <span class="token number">400</span><span class="token punctuation">;</span>
  height <span class="token operator">=</span> height <span class="token operator">||</span> <span class="token number">300</span><span class="token punctuation">;</span>
  range <span class="token operator">=</span> range <span class="token operator">||</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>svg
      ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> svg <span class="token operator">=</span> <span class="token function">select</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">&#x27;width&#x27;</span><span class="token punctuation">,</span> width <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">&#x27;height&#x27;</span><span class="token punctuation">,</span> height <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          x <span class="token operator">=</span> <span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token method function property-access">domain</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token method function property-access">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span>margin<span class="token punctuation">,</span> width <span class="token operator">-</span> margin<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          y <span class="token operator">=</span> <span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token method function property-access">domain</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span><span class="token property-access">y</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token method function property-access">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span>height <span class="token operator">-</span> margin<span class="token punctuation">,</span> margin<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          g <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">&#x27;g&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          line <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> margin <span class="token operator">+</span> <span class="token number">1e-6</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> width <span class="token operator">-</span> margin<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token constant">X</span> <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token method function property-access">invert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token constant">Y</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token constant">X</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            j <span class="token operator">=</span> <span class="token function">y</span><span class="token punctuation">(</span><span class="token constant">Y</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          line<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        g<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">&#x27;path&#x27;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">&#x27;d&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;M&#x27;</span> <span class="token operator">+</span> line<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span><span class="token string">&#x27;L&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">&#x27;stroke&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;steelblue&#x27;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token method function property-access">style</span><span class="token punctuation">(</span><span class="token string">&#x27;fill&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;none&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        g<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">&#x27;g&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">&#x27;transform&#x27;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>margin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,0)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token function">axisLeft</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        g<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">&#x27;g&#x27;</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token method function property-access">attr</span><span class="token punctuation">(</span><span class="token string">&#x27;transform&#x27;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(0,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>svg<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>and using it:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">FunctionPlot</span> f<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">sin</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">}</span> range<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<svg></svg>
<p>Other d3 APIs used:</p>
<ul>
<li><a target="_blank" href="https://observablehq.com/@d3/introduction-to-d3s-scales?collection=@d3/d3-scale">d3-scale</a> for a convenient translation of the function value range to the pixels dimensions on screen</li>
<li><a target="_blank" href="https://github.com/d3/d3-axis">d3-axis</a> for easy-to-use x and y axis</li>
</ul>
<h3 id="with-jsx"><a aria-hidden="true" tabindex="-1" href="/plotting-functions#with-jsx"><span class="icon icon-link"></span></a>With JSX</h3>
<p>As React is already a pretty good lib to handle the DOM efficiently, we can (mostly) spare d3-selection and render the SVG elements in JSX:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">FunctionPlot</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> f<span class="token punctuation">,</span> width<span class="token punctuation">,</span> margin<span class="token punctuation">,</span> height<span class="token punctuation">,</span> range <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  margin <span class="token operator">=</span> margin <span class="token operator">||</span> <span class="token number">40</span><span class="token punctuation">;</span>
  width <span class="token operator">=</span> width <span class="token operator">||</span> <span class="token number">400</span><span class="token punctuation">;</span>
  height <span class="token operator">=</span> height <span class="token operator">||</span> <span class="token number">300</span><span class="token punctuation">;</span>
  range <span class="token operator">=</span> range <span class="token operator">||</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> line <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    x <span class="token operator">=</span> <span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">domain</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span><span class="token property-access">x</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span>margin<span class="token punctuation">,</span> width <span class="token operator">-</span> margin<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    y <span class="token operator">=</span> <span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">domain</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span><span class="token property-access">y</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span>height <span class="token operator">-</span> margin<span class="token punctuation">,</span> margin<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> margin <span class="token operator">+</span> <span class="token number">1e-6</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> width <span class="token operator">-</span> margin<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token constant">X</span> <span class="token operator">=</span> x<span class="token punctuation">.</span><span class="token method function property-access">invert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token constant">Y</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token constant">X</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      j <span class="token operator">=</span> <span class="token function">y</span><span class="token punctuation">(</span><span class="token constant">Y</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    line<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>svg width<span class="token operator">=</span><span class="token punctuation">{</span>width <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">}</span> height<span class="token operator">=</span><span class="token punctuation">{</span>height <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>g<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>path d<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">M</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>line<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span><span class="token string">&#x27;L&#x27;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> stroke<span class="token operator">=</span><span class="token string">&quot;steelblue&quot;</span> fill<span class="token operator">=</span><span class="token string">&quot;none&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>g transform<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>margin<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,0)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">g</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">select</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token function">axisLeft</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>g transform<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(0,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">g</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">select</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>g<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>svg<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now the .select / .append calls have been refactored to JSX. I like this code much more as it looks flatter and lets me manipulate the svg elements directly as JSX without using a wide API surface of chaining methods.</p>
<p>The output is exactly the same:</p>
<svg width="420" height="320"><g><path d="M40.000001,66.7517273136479L41.000001,68.57507381752689L42.000001,70.44930824977422L43.000001,72.37325927487859L44.000001,74.34572448607673L45.000001,76.3654711568181L46.000001,78.43123701117901L47.000001,80.54173101274421L48.000001,82.6956341714621L49.000001,84.89160036797124L50.000001,87.12825719488048L51.000001,89.40420681447925L52.000001,91.71802683234085L53.000001,94.06827118627203L54.000001,96.45347105005555L55.000001,98.87213575141797L56.000001,101.32275370365188L57.000001,103.80379335030831L58.000001,106.31370412236927L59.000001,108.85091740730353L60.000001,111.41384752939776L61.000001,114.00089274075253L62.000001,116.61043622232289L63.000001,119.240847094377L64.000001,121.89048143574358L65.000001,124.55768331120848L66.000001,127.24078580642065L67.000001,129.93811206965947L68.000001,132.64797635981202L69.000001,135.36868509990703L70.000001,138.09853793554473L71.000001,140.8358287975633L72.000001,143.57884696827685L73.000001,146.3258781506176L74.000001,149.07520553951645L75.000001,151.82511089484976L76.000001,154.5738756152836L77.000001,157.31978181234405L78.000001,160.0611133840409L79.000001,162.7961570873762L80.000001,165.52320360906478L81.000001,168.2405486337997L82.000001,170.94649390939406L83.000001,173.63934830813275L84.000001,176.317428883673L85.000001,178.97906192283023L86.000001,181.62258399159475L87.000001,184.24634297472423L88.000001,186.84869910826094L89.000001,189.42802600433203L90.000001,191.98271166758806L91.000001,194.511159502648L92.000001,197.0117893119197L93.000001,199.4830382831711L94.000001,201.9233619662381L95.000001,204.33123523825458L96.000001,206.7051532568051L97.000001,209.04363240040263L98.000001,211.34521119570303L99.000001,213.60845123087898L100.000001,215.83193805458015L101.000001,218.01428205991925L102.000001,220.15411935293136L103.000001,222.250112604963L104.000001,224.3009518884593L105.000001,226.3053554956257L106.000001,228.26207073945383L107.000001,230.16987473661018L108.000001,232.0275751716982L109.000001,233.83401104241682L110.000001,235.58805338514878L111.000001,237.28860598052637L112.000001,238.93460603853296L113.000001,240.52502486271186L114.000001,242.0588684930683L115.000001,243.53517832726212L116.000001,244.95303171970286L117.000001,246.31154255817341L118.000001,247.60986181762115L119.000001,248.84717809077105L120.000001,250.02271809522875L121.000001,251.13574715675696L122.000001,252.1855696684229L123.000001,253.17152952532987L124.000001,254.0930105346619L125.000001,254.94943680078345L126.000001,255.7402730851561L127.000001,256.4650251408451L128.000001,257.1232400214072L129.000001,257.7145063639679L130.000001,258.23845464630966L131.000001,258.6947574178113L132.000001,259.0831295040939L133.000001,259.4033281852456L134.000001,259.6551533475135L135.000001,259.83844760836854L136.000001,259.95309641486426L137.000001,259.9990281152284L138.000001,259.97621400364346L139.000001,259.88466833818654L140.000001,259.72444833191867L141.000001,259.4956541171283L142.000001,259.1984286827521L143.000001,258.8329577850115L144.000001,258.39946983132097L145.000001,257.8982357375409L146.000001,257.3295687586641L147.000001,256.69382429304136L148.000001,255.99139966026942L149.000001,255.22273385287878L150.000001,254.38830726197796L151.000001,253.4886413770245L152.000001,252.52429845991102L153.000001,251.49588119357017L154.000001,250.4040323053168L155.000001,249.24943416516504L156.000001,248.03280835936854L157.000001,246.75491523945306L158.000001,245.41655344702144L159.000001,244.01855941462827L160.000001,242.56180684303723L161.000001,241.0472061551862L162.000001,239.47570392720257L163.000001,237.84828229682444L164.000001,236.16595834959574L165.000001,234.4297834832216L166.000001,232.64084275047853L167.000001,230.80025418109196L168.000001,228.90916808300403L169.000001,226.96876632346851L170.000001,224.98026159042232L171.000001,222.94489663459507L172.000001,220.86394349282997L173.000001,218.73870269310288L174.000001,216.5705024417339L175.000001,214.36069779330225L176.000001,212.11066980378098L177.000001,209.82182466742182L178.000001,207.49559283793008L179.000001,205.13342813447693L180.000001,202.73680683311022L181.000001,200.30722674413013L182.000001,197.84620627600577L183.000001,195.3552834864202L184.000001,192.83601512103382L185.000001,190.28997564056925L186.000001,187.7187562368247L187.000001,185.1239638382306L188.000001,182.507220105572L189.000001,179.87016041850313L190.000001,177.21443285348835L191.000001,174.54169715380823L192.000001,171.85362369227363L193.000001,169.15189242729758L194.000001,166.43819185297545L195.000001,163.71421794383144L196.000001,160.98167309488966L197.000001,158.2422650577324L198.000001,155.4977058732114L199.000001,152.7497108014777L200.000001,149.99999724999995L201.000001,147.250283700241L202.000001,144.50228863366215L203.000001,141.75772945772914L204.000001,139.01832143258747L205.000001,136.28577659908134L206.000001,133.56180270878363L207.000001,130.84810215670646L208.000001,128.14637091736023L209.000001,125.45829748482421L210.000001,122.7855618174933L211.000001,120.12983428815834L212.000001,117.4927746400773L213.000001,114.87603094969046L214.000001,112.28123859662541L215.000001,109.71001924163879L216.000001,107.16397981313074L217.000001,104.64471150286676L218.000001,102.15378877153519L219.000001,99.69276836475991L220.000001,97.26318834018561L221.000001,94.86656710624142L222.000001,92.50440247318505L223.000001,90.17817071702052L224.000001,87.88932565687321L225.000001,85.63929774640057L226.000001,83.42949317980523L227.000001,81.2612930130089L228.000001,79.13605230053804L229.000001,77.05509924865817L230.000001,75.01973438528884L231.000001,73.0312297472158L232.000001,71.09082808510905L233.000001,69.19974208684475L234.000001,67.3591536196142L235.000001,65.57021299129566L236.000001,63.834038231549464L237.000001,62.15171439308533L238.000001,60.524292873540446L239.000001,58.95279075838955L240.000001,57.43819018530006L241.000001,55.98143773032782L242.000001,54.58344381633778L243.000001,53.24508214401958L244.000001,51.9671891458528L245.000001,50.75056346336413L246.000001,49.59596544800226L247.000001,48.504116685942925L248.000001,47.47569954712134L249.000001,46.51135675877267L250.000001,45.611691003749044L251.000001,44.77726454386197L252.000001,44.00859886848702L253.000001,43.306174368650275L254.000001,42.67043003679916L255.000001,42.101763192446704L256.000001,41.600529233859795L257.000001,41.167041415946585L258.000001,40.80157065448269L259.000001,40.50434535679743L260.000001,40.27555127902674L261.000001,40.11533141002167L262.000001,40.02378588198499L263.000001,40.00097190789177L264.000001,40.04690374573314L265.000001,40.16155268960568L266.000001,40.34484708765142L267.000001,40.59667238683803L268.000001,40.91687120455083L269.000001,41.30524342695169L270.000001,41.76154633404362L271.000001,42.28549475136303L272.000001,42.87676122820432L273.000001,43.53497624226603L274.000001,44.259728430590215L275.000001,45.050564846650865L276.000001,45.90699124343072L277.000001,46.828472382309805L278.000001,47.814432367571676L279.000001,48.86425500632004L280.000001,49.977284193578875L281.000001,51.152824322336706L282.000001,52.39014071827864L283.000001,53.68846009893355L284.000001,55.04697105695071L285.000001,56.464824567202726L286.000001,57.941134517398844L287.000001,59.47497826187619L288.000001,61.06539719822315L289.000001,62.711397366374975L290.000001,64.41195006980618L291.000001,66.16599251843238L292.000001,67.97242849281989L293.000001,69.83012902928658L294.000001,71.73793312546809L295.000001,73.69464846590594L296.000001,75.6990521672061L297.000001,77.74989154230161L298.000001,79.84588488334052L299.000001,81.98572226271241L300.000001,84.16806635170978L301.000001,86.39155325631529L302.000001,88.65479336959139L303.000001,90.95637224013873L304.000001,93.29485145608304L305.000001,95.668769544035L306.000001,98.07664288246394L307.000001,100.51696662891322L308.000001,102.98821566047707L309.000001,105.48884552695355L310.000001,108.01729341607509L311.000001,110.5719791302154L312.000001,113.15130607396192L313.000001,115.75366225193537L314.000001,118.37742127623503L315.000001,121.02094338287763L316.000001,123.68257645659688L317.000001,126.36065706336173L318.000001,129.05351148996803L319.000001,131.75945679005557L320.000001,134.476801835894L321.000001,137.203848375283L322.000001,139.93889209290484L323.000001,142.6802236754653L324.000001,145.4261298799597L325.000001,148.17489460439322L326.000001,150.92479996028916L327.000001,153.67412734631353L328.000001,156.42115852234434L329.000001,159.1641766833166L330.000001,161.90146753216857L331.000001,164.63132035122234L332.000001,167.35202907132668L333.000001,170.0618933380943L334.000001,172.7592195745686L335.000001,175.44232203965328L336.000001,178.10952388164645L337.000001,180.75915818621817L338.000001,183.38956901817724L339.000001,185.99911245637745L340.000001,188.58615762111407L341.000001,191.1490876933711L342.000001,193.6863009252805L343.000001,196.19621164116194L344.000001,198.6772512285194L345.000001,201.1278691183719L346.000001,203.5465337543094L347.000001,205.93173354966538L348.000001,208.2819778322093L349.000001,210.5957977757684L350.000001,212.87174731819607L351.000001,215.10840406511343L352.000001,217.3043701788603L353.000001,219.45827325209711L354.000001,221.56876716551577L355.000001,223.63453292911998L356.000001,225.65427950655092L357.000001,227.6267446219434L358.000001,229.5506955488068L359.000001,231.4249298804391" stroke="steelblue" fill="none"></path><g transform="translate(40,0)"></g><g transform="translate(0,150)"></g></g></svg>
<p>You may have noticed that the axes are still rendered using ref callback + d3-selection.
This is because the axes methods are generators that output a subtree of DOM nodes.
If we wanted to avoid using d3-selection completely, we could implement our own axis component using <a target="_blank" href="https://observablehq.com/@d3/scale-ticks">scale.ticks</a>.</p>
<p>But for my use case, the above approach is perfectly fine.</p>
<p>I am really excited by d3 and the way it is organized in small modules, letting me pick only the parts I need! It will be a big part of upcoming visualizations on this blog.</p>
<h2 id="more-d3-resources"><a aria-hidden="true" tabindex="-1" href="/plotting-functions#more-d3-resources"><span class="icon icon-link"></span></a>More d3 Resources</h2>
<ul>
<li><a target="_blank" href="https://observablehq.com/collection/@d3/learn-d3">https://observablehq.com/collection/@d3/learn-d3</a></li>
<li><a target="_blank" href="https://medium.com/@enjalot/how-do-you-learn-d3-js-ccffc151419b">https://medium.com/@enjalot/how-do-you-learn-d3-js-ccffc151419b</a></li>
<li><a target="_blank" href="https://medium.com/@enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a">https://medium.com/@enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a</a></li>
<li><a target="_blank" href="https://bost.ocks.org/mike/">https://bost.ocks.org/mike/</a></li>
</ul></div></article></main></div><div class="py-4 font-serif bg-slate-900 dark:bg-slate-800 text-white flex justify-center items-center"><p class="leading-none"><a class="underline" href="https://github.com/felixroos">Felix Roos</a> <!-- -->2021</p></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Plotting Functions with React and d3.js","date":"2020-04-18","tags":["code","d3"],"description":"As the basis of many upcoming visualizations.","image":"./img/plot.png"},"code":"var Component=(()=\u003e{var mr=Object.create;var Fn=Object.defineProperty;var dr=Object.getOwnPropertyDescriptor;var hr=Object.getOwnPropertyNames;var kr=Object.getPrototypeOf,Nr=Object.prototype.hasOwnProperty;var Ze=e=\u003eFn(e,\"__esModule\",{value:!0});var ce=(e,n)=\u003e()=\u003e(n||e((n={exports:{}}).exports,n),n.exports),gr=(e,n)=\u003e{Ze(e);for(var a in n)Fn(e,a,{get:n[a],enumerable:!0})},xr=(e,n,a)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let o of hr(n))!Nr.call(e,o)\u0026\u0026o!==\"default\"\u0026\u0026Fn(e,o,{get:()=\u003en[o],enumerable:!(a=dr(n,o))||a.enumerable});return e},sn=e=\u003exr(Ze(Fn(e!=null?mr(kr(e)):{},\"default\",e\u0026\u0026e.__esModule\u0026\u0026\"default\"in e?{get:()=\u003ee.default,enumerable:!0}:{value:e,enumerable:!0})),e);var et=ce((ns,nt)=\u003e{nt.exports=_jsx_runtime});var le=ce((es,tt)=\u003e{tt.exports=React});var vn=ce((Rn,at)=\u003e{(function(e,n){typeof Rn==\"object\"\u0026\u0026typeof at!=\"undefined\"?n(Rn):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\"],n):(e=typeof globalThis!=\"undefined\"?globalThis:e||self,n(e.d3=e.d3||{}))})(Rn,function(e){\"use strict\";function n(r,s){return r\u003cs?-1:r\u003es?1:r\u003e=s?0:NaN}function a(r){let s=r,c=r;r.length===1\u0026\u0026(s=(k,b)=\u003er(k)-b,c=o(r));function u(k,b,v,_){for(v==null\u0026\u0026(v=0),_==null\u0026\u0026(_=k.length);v\u003c_;){let A=v+_\u003e\u003e\u003e1;c(k[A],b)\u003c0?v=A+1:_=A}return v}function l(k,b,v,_){for(v==null\u0026\u0026(v=0),_==null\u0026\u0026(_=k.length);v\u003c_;){let A=v+_\u003e\u003e\u003e1;c(k[A],b)\u003e0?_=A:v=A+1}return v}function m(k,b,v,_){v==null\u0026\u0026(v=0),_==null\u0026\u0026(_=k.length);let A=u(k,b,v,_-1);return A\u003ev\u0026\u0026s(k[A-1],b)\u003e-s(k[A],b)?A-1:A}return{left:u,center:m,right:l}}function o(r){return(s,c)=\u003en(r(s),c)}function i(r){return r===null?NaN:+r}function*p(r,s){if(s===void 0)for(let c of r)c!=null\u0026\u0026(c=+c)\u003e=c\u0026\u0026(yield c);else{let c=-1;for(let u of r)(u=s(u,++c,r))!=null\u0026\u0026(u=+u)\u003e=u\u0026\u0026(yield u)}}let f=a(n),d=f.right,h=f.left,N=a(i).center;function y(r,s){let c=0;if(s===void 0)for(let u of r)u!=null\u0026\u0026(u=+u)\u003e=u\u0026\u0026++c;else{let u=-1;for(let l of r)(l=s(l,++u,r))!=null\u0026\u0026(l=+l)\u003e=l\u0026\u0026++c}return c}function w(r){return r.length|0}function g(r){return!(r\u003e0)}function x(r){return typeof r!=\"object\"||\"length\"in r?r:Array.from(r)}function M(r){return s=\u003er(...s)}function C(...r){let s=typeof r[r.length-1]==\"function\"\u0026\u0026M(r.pop());r=r.map(x);let c=r.map(w),u=r.length-1,l=new Array(u+1).fill(0),m=[];if(u\u003c0||c.some(g))return m;for(;;){m.push(l.map((b,v)=\u003er[v][b]));let k=u;for(;++l[k]===c[k];){if(k===0)return s?m.map(s):m;l[k--]=0}}}function L(r,s){var c=0,u=0;return Float64Array.from(r,s===void 0?l=\u003ec+=+l||0:l=\u003ec+=+s(l,u++,r)||0)}function D(r,s){return s\u003cr?-1:s\u003er?1:s\u003e=r?0:NaN}function P(r,s){let c=0,u,l=0,m=0;if(s===void 0)for(let k of r)k!=null\u0026\u0026(k=+k)\u003e=k\u0026\u0026(u=k-l,l+=u/++c,m+=u*(k-l));else{let k=-1;for(let b of r)(b=s(b,++k,r))!=null\u0026\u0026(b=+b)\u003e=b\u0026\u0026(u=b-l,l+=u/++c,m+=u*(b-l))}if(c\u003e1)return m/(c-1)}function F(r,s){let c=P(r,s);return c\u0026\u0026Math.sqrt(c)}function O(r,s){let c,u;if(s===void 0)for(let l of r)l!=null\u0026\u0026(c===void 0?l\u003e=l\u0026\u0026(c=u=l):(c\u003el\u0026\u0026(c=l),u\u003cl\u0026\u0026(u=l)));else{let l=-1;for(let m of r)(m=s(m,++l,r))!=null\u0026\u0026(c===void 0?m\u003e=m\u0026\u0026(c=u=m):(c\u003em\u0026\u0026(c=m),u\u003cm\u0026\u0026(u=m)))}return[c,u]}class S{constructor(){this._partials=new Float64Array(32),this._n=0}add(s){let c=this._partials,u=0;for(let l=0;l\u003cthis._n\u0026\u0026l\u003c32;l++){let m=c[l],k=s+m,b=Math.abs(s)\u003cMath.abs(m)?s-(k-m):m-(k-s);b\u0026\u0026(c[u++]=b),s=k}return c[u]=s,this._n=u+1,this}valueOf(){let s=this._partials,c=this._n,u,l,m,k=0;if(c\u003e0){for(k=s[--c];c\u003e0\u0026\u0026(u=k,l=s[--c],k=u+l,m=l-(k-u),!m););c\u003e0\u0026\u0026(m\u003c0\u0026\u0026s[c-1]\u003c0||m\u003e0\u0026\u0026s[c-1]\u003e0)\u0026\u0026(l=m*2,u=k+l,l==u-k\u0026\u0026(k=u))}return k}}function V(r,s){let c=new S;if(s===void 0)for(let u of r)(u=+u)\u0026\u0026c.add(u);else{let u=-1;for(let l of r)(l=+s(l,++u,r))\u0026\u0026c.add(l)}return+c}function $(r,s){let c=new S,u=-1;return Float64Array.from(r,s===void 0?l=\u003ec.add(+l||0):l=\u003ec.add(+s(l,++u,r)||0))}class E extends Map{constructor(s,c=R){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:c}}),s!=null)for(let[u,l]of s)this.set(u,l)}get(s){return super.get(T(this,s))}has(s){return super.has(T(this,s))}set(s,c){return super.set(j(this,s),c)}delete(s){return super.delete(q(this,s))}}class H extends Set{constructor(s,c=R){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:c}}),s!=null)for(let u of s)this.add(u)}has(s){return super.has(T(this,s))}add(s){return super.add(j(this,s))}delete(s){return super.delete(q(this,s))}}function T({_intern:r,_key:s},c){let u=s(c);return r.has(u)?r.get(u):c}function j({_intern:r,_key:s},c){let u=s(c);return r.has(u)?r.get(u):(r.set(u,c),c)}function q({_intern:r,_key:s},c){let u=s(c);return r.has(u)\u0026\u0026(c=r.get(c),r.delete(u)),c}function R(r){return r!==null\u0026\u0026typeof r==\"object\"?r.valueOf():r}function X(r){return r}function bn(r,...s){return hn(r,X,X,s)}function mn(r,...s){return hn(r,Array.from,X,s)}function rn(r,s,...c){return hn(r,X,s,c)}function dn(r,s,...c){return hn(r,Array.from,s,c)}function J(r,...s){return hn(r,X,Oe,s)}function Ia(r,...s){return hn(r,Array.from,Oe,s)}function Oe(r){if(r.length!==1)throw new Error(\"duplicate key\");return r[0]}function hn(r,s,c,u){return function l(m,k){if(k\u003e=u.length)return c(m);let b=new E,v=u[k++],_=-1;for(let A of m){let I=v(A,++_,m),B=b.get(I);B?B.push(A):b.set(I,[A])}for(let[A,I]of b)b.set(A,l(I,k));return s(b)}(r,0)}function He(r,s){return Array.from(s,c=\u003er[c])}function ne(r,...s){if(typeof r[Symbol.iterator]!=\"function\")throw new TypeError(\"values is not iterable\");r=Array.from(r);let[c=n]=s;if(c.length===1||s.length\u003e1){let u=Uint32Array.from(r,(l,m)=\u003em);return s.length\u003e1?(s=s.map(l=\u003er.map(l)),u.sort((l,m)=\u003e{for(let k of s){let b=n(k[l],k[m]);if(b)return b}})):(c=r.map(c),u.sort((l,m)=\u003en(c[l],c[m]))),He(r,u)}return r.sort(c)}function qa(r,s,c){return(s.length===1?ne(rn(r,s,c),([u,l],[m,k])=\u003en(l,k)||n(u,m)):ne(bn(r,c),([u,l],[m,k])=\u003es(l,k)||n(u,m))).map(([u])=\u003eu)}var Ca=Array.prototype,Ea=Ca.slice;function In(r){return function(){return r}}var ee=Math.sqrt(50),te=Math.sqrt(10),ae=Math.sqrt(2);function Ve(r,s,c){var u,l=-1,m,k,b;if(s=+s,r=+r,c=+c,r===s\u0026\u0026c\u003e0)return[r];if((u=s\u003cr)\u0026\u0026(m=r,r=s,s=m),(b=qn(r,s,c))===0||!isFinite(b))return[];if(b\u003e0){let v=Math.round(r/b),_=Math.round(s/b);for(v*b\u003cr\u0026\u0026++v,_*b\u003es\u0026\u0026--_,k=new Array(m=_-v+1);++l\u003cm;)k[l]=(v+l)*b}else{b=-b;let v=Math.round(r*b),_=Math.round(s*b);for(v/b\u003cr\u0026\u0026++v,_/b\u003es\u0026\u0026--_,k=new Array(m=_-v+1);++l\u003cm;)k[l]=(v+l)/b}return u\u0026\u0026k.reverse(),k}function qn(r,s,c){var u=(s-r)/Math.max(0,c),l=Math.floor(Math.log(u)/Math.LN10),m=u/Math.pow(10,l);return l\u003e=0?(m\u003e=ee?10:m\u003e=te?5:m\u003e=ae?2:1)*Math.pow(10,l):-Math.pow(10,-l)/(m\u003e=ee?10:m\u003e=te?5:m\u003e=ae?2:1)}function Fa(r,s,c){var u=Math.abs(s-r)/Math.max(0,c),l=Math.pow(10,Math.floor(Math.log(u)/Math.LN10)),m=u/l;return m\u003e=ee?l*=10:m\u003e=te?l*=5:m\u003e=ae\u0026\u0026(l*=2),s\u003cr?-l:l}function $e(r,s,c){let u;for(;;){let l=qn(r,s,c);if(l===u||l===0||!isFinite(l))return[r,s];l\u003e0?(r=Math.floor(r/l)*l,s=Math.ceil(s/l)*l):l\u003c0\u0026\u0026(r=Math.ceil(r*l)/l,s=Math.floor(s*l)/l),u=l}}function Xe(r){return Math.ceil(Math.log(y(r))/Math.LN2)+1}function Ye(){var r=X,s=O,c=Xe;function u(l){Array.isArray(l)||(l=Array.from(l));var m,k=l.length,b,v=new Array(k);for(m=0;m\u003ck;++m)v[m]=r(l[m],m,l);var _=s(v),A=_[0],I=_[1],B=c(v,A,I);if(!Array.isArray(B)){let fr=I,ie=+B;if(s===O\u0026\u0026([A,I]=$e(A,I,ie)),B=Ve(A,I,ie),B[B.length-1]\u003e=I)if(fr\u003e=I\u0026\u0026s===O){let on=qn(A,I,ie);isFinite(on)\u0026\u0026(on\u003e0?I=(Math.floor(I/on)+1)*on:on\u003c0\u0026\u0026(I=(Math.ceil(I*-on)+1)/-on))}else B.pop()}for(var nn=B.length;B[0]\u003c=A;)B.shift(),--nn;for(;B[nn-1]\u003eI;)B.pop(),--nn;var jn=new Array(nn+1),se;for(m=0;m\u003c=nn;++m)se=jn[m]=[],se.x0=m\u003e0?B[m-1]:A,se.x1=m\u003cnn?B[m]:I;for(m=0;m\u003ck;++m)b=v[m],A\u003c=b\u0026\u0026b\u003c=I\u0026\u0026jn[d(B,b,0,nn)].push(l[m]);return jn}return u.value=function(l){return arguments.length?(r=typeof l==\"function\"?l:In(l),u):r},u.domain=function(l){return arguments.length?(s=typeof l==\"function\"?l:In([l[0],l[1]]),u):s},u.thresholds=function(l){return arguments.length?(c=typeof l==\"function\"?l:Array.isArray(l)?In(Ea.call(l)):In(l),u):c},u}function re(r,s){let c;if(s===void 0)for(let u of r)u!=null\u0026\u0026(c\u003cu||c===void 0\u0026\u0026u\u003e=u)\u0026\u0026(c=u);else{let u=-1;for(let l of r)(l=s(l,++u,r))!=null\u0026\u0026(c\u003cl||c===void 0\u0026\u0026l\u003e=l)\u0026\u0026(c=l)}return c}function Cn(r,s){let c;if(s===void 0)for(let u of r)u!=null\u0026\u0026(c\u003eu||c===void 0\u0026\u0026u\u003e=u)\u0026\u0026(c=u);else{let u=-1;for(let l of r)(l=s(l,++u,r))!=null\u0026\u0026(c\u003el||c===void 0\u0026\u0026l\u003e=l)\u0026\u0026(c=l)}return c}function oe(r,s,c=0,u=r.length-1,l=n){for(;u\u003ec;){if(u-c\u003e600){let v=u-c+1,_=s-c+1,A=Math.log(v),I=.5*Math.exp(2*A/3),B=.5*Math.sqrt(A*I*(v-I)/v)*(_-v/2\u003c0?-1:1),nn=Math.max(c,Math.floor(s-_*I/v+B)),jn=Math.min(u,Math.floor(s+(v-_)*I/v+B));oe(r,s,nn,jn,l)}let m=r[s],k=c,b=u;for(wn(r,c,s),l(r[u],m)\u003e0\u0026\u0026wn(r,c,u);k\u003cb;){for(wn(r,k,b),++k,--b;l(r[k],m)\u003c0;)++k;for(;l(r[b],m)\u003e0;)--b}l(r[c],m)===0?wn(r,c,b):(++b,wn(r,b,u)),b\u003c=s\u0026\u0026(c=b+1),s\u003c=b\u0026\u0026(u=b-1)}return r}function wn(r,s,c){let u=r[s];r[s]=r[c],r[c]=u}function En(r,s,c){if(r=Float64Array.from(p(r,c)),!!(u=r.length)){if((s=+s)\u003c=0||u\u003c2)return Cn(r);if(s\u003e=1)return re(r);var u,l=(u-1)*s,m=Math.floor(l),k=re(oe(r,m).subarray(0,m+1)),b=Cn(r.subarray(m+1));return k+(b-k)*(l-m)}}function Ra(r,s,c=i){if(!!(u=r.length)){if((s=+s)\u003c=0||u\u003c2)return+c(r[0],0,r);if(s\u003e=1)return+c(r[u-1],u-1,r);var u,l=(u-1)*s,m=Math.floor(l),k=+c(r[m],m,r),b=+c(r[m+1],m+1,r);return k+(b-k)*(l-m)}}function za(r,s,c){return Math.ceil((c-s)/(2*(En(r,.75)-En(r,.25))*Math.pow(y(r),-1/3)))}function Da(r,s,c){return Math.ceil((c-s)/(3.5*F(r)*Math.pow(y(r),-1/3)))}function Ue(r,s){let c,u=-1,l=-1;if(s===void 0)for(let m of r)++l,m!=null\u0026\u0026(c\u003cm||c===void 0\u0026\u0026m\u003e=m)\u0026\u0026(c=m,u=l);else for(let m of r)(m=s(m,++l,r))!=null\u0026\u0026(c\u003cm||c===void 0\u0026\u0026m\u003e=m)\u0026\u0026(c=m,u=l);return u}function Ba(r,s){let c=0,u=0;if(s===void 0)for(let l of r)l!=null\u0026\u0026(l=+l)\u003e=l\u0026\u0026(++c,u+=l);else{let l=-1;for(let m of r)(m=s(m,++l,r))!=null\u0026\u0026(m=+m)\u003e=m\u0026\u0026(++c,u+=m)}if(c)return u/c}function Ta(r,s){return En(r,.5,s)}function*Oa(r){for(let s of r)yield*s}function Ha(r){return Array.from(Oa(r))}function Je(r,s){let c,u=-1,l=-1;if(s===void 0)for(let m of r)++l,m!=null\u0026\u0026(c\u003em||c===void 0\u0026\u0026m\u003e=m)\u0026\u0026(c=m,u=l);else for(let m of r)(m=s(m,++l,r))!=null\u0026\u0026(c\u003em||c===void 0\u0026\u0026m\u003e=m)\u0026\u0026(c=m,u=l);return u}function Va(r,s=$a){let c=[],u,l=!1;for(let m of r)l\u0026\u0026c.push(s(u,m)),u=m,l=!0;return c}function $a(r,s){return[r,s]}function Xa(r,s,c){r=+r,s=+s,c=(l=arguments.length)\u003c2?(s=r,r=0,1):l\u003c3?1:+c;for(var u=-1,l=Math.max(0,Math.ceil((s-r)/c))|0,m=new Array(l);++u\u003cl;)m[u]=r+u*c;return m}function Ya(r,s=n){let c,u=!1;if(s.length===1){let l;for(let m of r){let k=s(m);(u?n(k,l)\u003c0:n(k,k)===0)\u0026\u0026(c=m,l=k,u=!0)}}else for(let l of r)(u?s(l,c)\u003c0:s(l,l)===0)\u0026\u0026(c=l,u=!0);return c}function Qe(r,s=n){if(s.length===1)return Je(r,s);let c,u=-1,l=-1;for(let m of r)++l,(u\u003c0?s(m,m)===0:s(m,c)\u003c0)\u0026\u0026(c=m,u=l);return u}function Ua(r,s=n){let c,u=!1;if(s.length===1){let l;for(let m of r){let k=s(m);(u?n(k,l)\u003e0:n(k,k)===0)\u0026\u0026(c=m,l=k,u=!0)}}else for(let l of r)(u?s(l,c)\u003e0:s(l,l)===0)\u0026\u0026(c=l,u=!0);return c}function Ja(r,s=n){if(s.length===1)return Ue(r,s);let c,u=-1,l=-1;for(let m of r)++l,(u\u003c0?s(m,m)===0:s(m,c)\u003e0)\u0026\u0026(c=m,u=l);return u}function Qa(r,s){let c=Qe(r,s);return c\u003c0?void 0:c}var Ga=Ge(Math.random);function Ge(r){return function(c,u=0,l=c.length){let m=l-(u=+u);for(;m;){let k=r()*m--|0,b=c[m+u];c[m+u]=c[k+u],c[k+u]=b}return c}}function Wa(r,s){let c=0;if(s===void 0)for(let u of r)(u=+u)\u0026\u0026(c+=u);else{let u=-1;for(let l of r)(l=+s(l,++u,r))\u0026\u0026(c+=l)}return c}function We(r){if(!(m=r.length))return[];for(var s=-1,c=Cn(r,Ka),u=new Array(c);++s\u003cc;)for(var l=-1,m,k=u[s]=new Array(m);++l\u003cm;)k[l]=r[l][s];return u}function Ka(r){return r.length}function Za(){return We(arguments)}function nr(r,s){if(typeof s!=\"function\")throw new TypeError(\"test is not a function\");let c=-1;for(let u of r)if(!s(u,++c,r))return!1;return!0}function er(r,s){if(typeof s!=\"function\")throw new TypeError(\"test is not a function\");let c=-1;for(let u of r)if(s(u,++c,r))return!0;return!1}function tr(r,s){if(typeof s!=\"function\")throw new TypeError(\"test is not a function\");let c=[],u=-1;for(let l of r)s(l,++u,r)\u0026\u0026c.push(l);return c}function ar(r,s){if(typeof r[Symbol.iterator]!=\"function\")throw new TypeError(\"values is not iterable\");if(typeof s!=\"function\")throw new TypeError(\"mapper is not a function\");return Array.from(r,(c,u)=\u003es(c,u,r))}function rr(r,s,c){if(typeof s!=\"function\")throw new TypeError(\"reducer is not a function\");let u=r[Symbol.iterator](),l,m,k=-1;if(arguments.length\u003c3){if({done:l,value:c}=u.next(),l)return;++k}for(;{done:l,value:m}=u.next(),!l;)c=s(c,m,++k,r);return c}function or(r){if(typeof r[Symbol.iterator]!=\"function\")throw new TypeError(\"values is not iterable\");return Array.from(r).reverse()}function sr(r,...s){r=new Set(r);for(let c of s)for(let u of c)r.delete(u);return r}function ir(r,s){let c=s[Symbol.iterator](),u=new Set;for(let l of r){if(u.has(l))return!1;let m,k;for(;({value:m,done:k}=c.next())\u0026\u0026!k;){if(Object.is(l,m))return!1;u.add(m)}}return!0}function cr(r){return r instanceof Set?r:new Set(r)}function lr(r,...s){r=new Set(r),s=s.map(cr);n:for(let c of r)for(let u of s)if(!u.has(c)){r.delete(c);continue n}return r}function Ke(r,s){let c=r[Symbol.iterator](),u=new Set;for(let l of s){if(u.has(l))continue;let m,k;for(;{value:m,done:k}=c.next();){if(k)return!1;if(u.add(m),Object.is(l,m))break}}return!0}function ur(r,s){return Ke(s,r)}function pr(...r){let s=new Set;for(let c of r)for(let u of c)s.add(u);return s}e.Adder=S,e.InternMap=E,e.InternSet=H,e.ascending=n,e.bin=Ye,e.bisect=d,e.bisectCenter=N,e.bisectLeft=h,e.bisectRight=d,e.bisector=a,e.count=y,e.cross=C,e.cumsum=L,e.descending=D,e.deviation=F,e.difference=sr,e.disjoint=ir,e.every=nr,e.extent=O,e.fcumsum=$,e.filter=tr,e.fsum=V,e.greatest=Ua,e.greatestIndex=Ja,e.group=bn,e.groupSort=qa,e.groups=mn,e.histogram=Ye,e.index=J,e.indexes=Ia,e.intersection=lr,e.least=Ya,e.leastIndex=Qe,e.map=ar,e.max=re,e.maxIndex=Ue,e.mean=Ba,e.median=Ta,e.merge=Ha,e.min=Cn,e.minIndex=Je,e.nice=$e,e.pairs=Va,e.permute=He,e.quantile=En,e.quantileSorted=Ra,e.quickselect=oe,e.range=Xa,e.reduce=rr,e.reverse=or,e.rollup=rn,e.rollups=dn,e.scan=Qa,e.shuffle=Ga,e.shuffler=Ge,e.some=er,e.sort=ne,e.subset=ur,e.sum=Wa,e.superset=Ke,e.thresholdFreedmanDiaconis=za,e.thresholdScott=Da,e.thresholdSturges=Xe,e.tickIncrement=qn,e.tickStep=Fa,e.ticks=Ve,e.transpose=We,e.union=pr,e.variance=P,e.zip=Za,Object.defineProperty(e,\"__esModule\",{value:!0})})});var Ko={};gr(Ko,{default:()=\u003eWo,frontmatter:()=\u003eQo});var t=sn(et());var U=sn(le());function zn(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}var Yn=sn(vn());var jt=sn(vn());function Dn(e,n,a){e.prototype=n.prototype=a,a.constructor=e}function ue(e,n){var a=Object.create(e.prototype);for(var o in n)a[o]=n[o];return a}function Mn(){}var _n=.7,Bn=1/_n,kn=\"\\\\s*([+-]?\\\\d+)\\\\s*\",An=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",G=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",yr=/^#([0-9a-f]{3,8})$/,br=new RegExp(\"^rgb\\\\(\"+[kn,kn,kn]+\"\\\\)$\"),wr=new RegExp(\"^rgb\\\\(\"+[G,G,G]+\"\\\\)$\"),jr=new RegExp(\"^rgba\\\\(\"+[kn,kn,kn,An]+\"\\\\)$\"),vr=new RegExp(\"^rgba\\\\(\"+[G,G,G,An]+\"\\\\)$\"),Mr=new RegExp(\"^hsl\\\\(\"+[An,G,G]+\"\\\\)$\"),_r=new RegExp(\"^hsla\\\\(\"+[An,G,G,An]+\"\\\\)$\"),rt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dn(Mn,en,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:ot,formatHex:ot,formatHsl:Ar,formatRgb:st,toString:st});function ot(){return this.rgb().formatHex()}function Ar(){return pt(this).formatHsl()}function st(){return this.rgb().formatRgb()}function en(e){var n,a;return e=(e+\"\").trim().toLowerCase(),(n=yr.exec(e))?(a=n[1].length,n=parseInt(n[1],16),a===6?it(n):a===3?new Y(n\u003e\u003e8\u002615|n\u003e\u003e4\u0026240,n\u003e\u003e4\u002615|n\u0026240,(n\u002615)\u003c\u003c4|n\u002615,1):a===8?Tn(n\u003e\u003e24\u0026255,n\u003e\u003e16\u0026255,n\u003e\u003e8\u0026255,(n\u0026255)/255):a===4?Tn(n\u003e\u003e12\u002615|n\u003e\u003e8\u0026240,n\u003e\u003e8\u002615|n\u003e\u003e4\u0026240,n\u003e\u003e4\u002615|n\u0026240,((n\u002615)\u003c\u003c4|n\u002615)/255):null):(n=br.exec(e))?new Y(n[1],n[2],n[3],1):(n=wr.exec(e))?new Y(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=jr.exec(e))?Tn(n[1],n[2],n[3],n[4]):(n=vr.exec(e))?Tn(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Mr.exec(e))?ut(n[1],n[2]/100,n[3]/100,1):(n=_r.exec(e))?ut(n[1],n[2]/100,n[3]/100,n[4]):rt.hasOwnProperty(e)?it(rt[e]):e===\"transparent\"?new Y(NaN,NaN,NaN,0):null}function it(e){return new Y(e\u003e\u003e16\u0026255,e\u003e\u003e8\u0026255,e\u0026255,1)}function Tn(e,n,a,o){return o\u003c=0\u0026\u0026(e=n=a=NaN),new Y(e,n,a,o)}function Sr(e){return e instanceof Mn||(e=en(e)),e?(e=e.rgb(),new Y(e.r,e.g,e.b,e.opacity)):new Y}function Nn(e,n,a,o){return arguments.length===1?Sr(e):new Y(e,n,a,o??1)}function Y(e,n,a,o){this.r=+e,this.g=+n,this.b=+a,this.opacity=+o}Dn(Y,Nn,ue(Mn,{brighter:function(e){return e=e==null?Bn:Math.pow(Bn,e),new Y(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?_n:Math.pow(_n,e),new Y(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5\u003c=this.r\u0026\u0026this.r\u003c255.5\u0026\u0026-.5\u003c=this.g\u0026\u0026this.g\u003c255.5\u0026\u0026-.5\u003c=this.b\u0026\u0026this.b\u003c255.5\u0026\u00260\u003c=this.opacity\u0026\u0026this.opacity\u003c=1},hex:ct,formatHex:ct,formatRgb:lt,toString:lt}));function ct(){return\"#\"+pe(this.r)+pe(this.g)+pe(this.b)}function lt(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?\"rgb(\":\"rgba(\")+Math.max(0,Math.min(255,Math.round(this.r)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.g)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?\")\":\", \"+e+\")\")}function pe(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e\u003c16?\"0\":\"\")+e.toString(16)}function ut(e,n,a,o){return o\u003c=0?e=n=a=NaN:a\u003c=0||a\u003e=1?e=n=NaN:n\u003c=0\u0026\u0026(e=NaN),new W(e,n,a,o)}function pt(e){if(e instanceof W)return new W(e.h,e.s,e.l,e.opacity);if(e instanceof Mn||(e=en(e)),!e)return new W;if(e instanceof W)return e;e=e.rgb();var n=e.r/255,a=e.g/255,o=e.b/255,i=Math.min(n,a,o),p=Math.max(n,a,o),f=NaN,d=p-i,h=(p+i)/2;return d?(n===p?f=(a-o)/d+(a\u003co)*6:a===p?f=(o-n)/d+2:f=(n-a)/d+4,d/=h\u003c.5?p+i:2-p-i,f*=60):d=h\u003e0\u0026\u0026h\u003c1?0:f,new W(f,d,h,e.opacity)}function ft(e,n,a,o){return arguments.length===1?pt(e):new W(e,n,a,o??1)}function W(e,n,a,o){this.h=+e,this.s=+n,this.l=+a,this.opacity=+o}Dn(W,ft,ue(Mn,{brighter:function(e){return e=e==null?Bn:Math.pow(Bn,e),new W(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?_n:Math.pow(_n,e),new W(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h\u003c0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,o=a+(a\u003c.5?a:1-a)*n,i=2*a-o;return new Y(fe(e\u003e=240?e-240:e+120,i,o),fe(e,i,o),fe(e\u003c120?e+240:e-120,i,o),this.opacity)},displayable:function(){return(0\u003c=this.s\u0026\u0026this.s\u003c=1||isNaN(this.s))\u0026\u00260\u003c=this.l\u0026\u0026this.l\u003c=1\u0026\u00260\u003c=this.opacity\u0026\u0026this.opacity\u003c=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?\"hsl(\":\"hsla(\")+(this.h||0)+\", \"+(this.s||0)*100+\"%, \"+(this.l||0)*100+\"%\"+(e===1?\")\":\", \"+e+\")\")}}));function fe(e,n,a){return(e\u003c60?n+(a-n)*e/60:e\u003c180?a:e\u003c240?n+(a-n)*(240-e)/60:n)*255}function me(e,n,a,o,i){var p=e*e,f=p*e;return((1-3*e+3*p-f)*n+(4-6*p+3*f)*a+(1+3*e+3*p-3*f)*o+f*i)/6}function mt(e){var n=e.length-1;return function(a){var o=a\u003c=0?a=0:a\u003e=1?(a=1,n-1):Math.floor(a*n),i=e[o],p=e[o+1],f=o\u003e0?e[o-1]:2*i-p,d=o\u003cn-1?e[o+2]:2*p-i;return me((a-o/n)*n,f,i,p,d)}}function dt(e){var n=e.length;return function(a){var o=Math.floor(((a%=1)\u003c0?++a:a)*n),i=e[(o+n-1)%n],p=e[o%n],f=e[(o+1)%n],d=e[(o+2)%n];return me((a-o/n)*n,i,p,f,d)}}var Sn=e=\u003e()=\u003ee;function Pr(e,n){return function(a){return e+a*n}}function Lr(e,n,a){return e=Math.pow(e,a),n=Math.pow(n,a)-e,a=1/a,function(o){return Math.pow(e+o*n,a)}}function ht(e){return(e=+e)==1?On:function(n,a){return a-n?Lr(n,a,e):Sn(isNaN(n)?a:n)}}function On(e,n){var a=n-e;return a?Pr(e,a):Sn(isNaN(e)?n:e)}var de=function e(n){var a=ht(n);function o(i,p){var f=a((i=Nn(i)).r,(p=Nn(p)).r),d=a(i.g,p.g),h=a(i.b,p.b),N=On(i.opacity,p.opacity);return function(y){return i.r=f(y),i.g=d(y),i.b=h(y),i.opacity=N(y),i+\"\"}}return o.gamma=e,o}(1);function kt(e){return function(n){var a=n.length,o=new Array(a),i=new Array(a),p=new Array(a),f,d;for(f=0;f\u003ca;++f)d=Nn(n[f]),o[f]=d.r||0,i[f]=d.g||0,p[f]=d.b||0;return o=e(o),i=e(i),p=e(p),d.opacity=1,function(h){return d.r=o(h),d.g=i(h),d.b=p(h),d+\"\"}}}var gs=kt(mt),xs=kt(dt);function Nt(e,n){n||(n=[]);var a=e?Math.min(n.length,e.length):0,o=n.slice(),i;return function(p){for(i=0;i\u003ca;++i)o[i]=e[i]*(1-p)+n[i]*p;return o}}function gt(e){return ArrayBuffer.isView(e)\u0026\u0026!(e instanceof DataView)}function xt(e,n){var a=n?n.length:0,o=e?Math.min(a,e.length):0,i=new Array(o),p=new Array(a),f;for(f=0;f\u003co;++f)i[f]=cn(e[f],n[f]);for(;f\u003ca;++f)p[f]=n[f];return function(d){for(f=0;f\u003co;++f)p[f]=i[f](d);return p}}function yt(e,n){var a=new Date;return e=+e,n=+n,function(o){return a.setTime(e*(1-o)+n*o),a}}function tn(e,n){return e=+e,n=+n,function(a){return e*(1-a)+n*a}}function bt(e,n){var a={},o={},i;(e===null||typeof e!=\"object\")\u0026\u0026(e={}),(n===null||typeof n!=\"object\")\u0026\u0026(n={});for(i in n)i in e?a[i]=cn(e[i],n[i]):o[i]=n[i];return function(p){for(i in a)o[i]=a[i](p);return o}}var he=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,ke=new RegExp(he.source,\"g\");function Ir(e){return function(){return e}}function qr(e){return function(n){return e(n)+\"\"}}function wt(e,n){var a=he.lastIndex=ke.lastIndex=0,o,i,p,f=-1,d=[],h=[];for(e=e+\"\",n=n+\"\";(o=he.exec(e))\u0026\u0026(i=ke.exec(n));)(p=i.index)\u003ea\u0026\u0026(p=n.slice(a,p),d[f]?d[f]+=p:d[++f]=p),(o=o[0])===(i=i[0])?d[f]?d[f]+=i:d[++f]=i:(d[++f]=null,h.push({i:f,x:tn(o,i)})),a=ke.lastIndex;return a\u003cn.length\u0026\u0026(p=n.slice(a),d[f]?d[f]+=p:d[++f]=p),d.length\u003c2?h[0]?qr(h[0].x):Ir(n):(n=h.length,function(N){for(var y=0,w;y\u003cn;++y)d[(w=h[y]).i]=w.x(N);return d.join(\"\")})}function cn(e,n){var a=typeof n,o;return n==null||a===\"boolean\"?Sn(n):(a===\"number\"?tn:a===\"string\"?(o=en(n))?(n=o,de):wt:n instanceof en?de:n instanceof Date?yt:gt(n)?Nt:Array.isArray(n)?xt:typeof n.valueOf!=\"function\"\u0026\u0026typeof n.toString!=\"function\"||isNaN(n)?bt:tn)(e,n)}function Ne(e,n){return e=+e,n=+n,function(a){return Math.round(e*(1-a)+n*a)}}function ge(e){return function(){return e}}function xe(e){return+e}var vt=[0,1];function gn(e){return e}function ye(e,n){return(n-=e=+e)?function(a){return(a-e)/n}:ge(isNaN(n)?NaN:.5)}function Cr(e,n){var a;return e\u003en\u0026\u0026(a=e,e=n,n=a),function(o){return Math.max(e,Math.min(n,o))}}function Er(e,n,a){var o=e[0],i=e[1],p=n[0],f=n[1];return i\u003co?(o=ye(i,o),p=a(f,p)):(o=ye(o,i),p=a(p,f)),function(d){return p(o(d))}}function Fr(e,n,a){var o=Math.min(e.length,n.length)-1,i=new Array(o),p=new Array(o),f=-1;for(e[o]\u003ce[0]\u0026\u0026(e=e.slice().reverse(),n=n.slice().reverse());++f\u003co;)i[f]=ye(e[f],e[f+1]),p[f]=a(n[f],n[f+1]);return function(d){var h=(0,jt.bisect)(e,d,1,o)-1;return p[h](i[h](d))}}function Hn(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function be(){var e=vt,n=vt,a=cn,o,i,p,f=gn,d,h,N;function y(){var g=Math.min(e.length,n.length);return f!==gn\u0026\u0026(f=Cr(e[0],e[g-1])),d=g\u003e2?Fr:Er,h=N=null,w}function w(g){return g==null||isNaN(g=+g)?p:(h||(h=d(e.map(o),n,a)))(o(f(g)))}return w.invert=function(g){return f(i((N||(N=d(n,e.map(o),tn)))(g)))},w.domain=function(g){return arguments.length?(e=Array.from(g,xe),y()):e.slice()},w.range=function(g){return arguments.length?(n=Array.from(g),y()):n.slice()},w.rangeRound=function(g){return n=Array.from(g),a=Ne,y()},w.clamp=function(g){return arguments.length?(f=g?!0:gn,y()):f!==gn},w.interpolate=function(g){return arguments.length?(a=g,y()):a},w.unknown=function(g){return arguments.length?(p=g,w):p},function(g,x){return o=g,i=x,y()}}function we(){return be()(gn,gn)}var Ct=sn(vn());function Mt(e){return Math.abs(e=Math.round(e))\u003e=1e21?e.toLocaleString(\"en\").replace(/,/g,\"\"):e.toString(10)}function ln(e,n){if((a=(e=n?e.toExponential(n-1):e.toExponential()).indexOf(\"e\"))\u003c0)return null;var a,o=e.slice(0,a);return[o.length\u003e1?o[0]+o.slice(2):o,+e.slice(a+1)]}function K(e){return e=ln(Math.abs(e)),e?e[1]:NaN}function _t(e,n){return function(a,o){for(var i=a.length,p=[],f=0,d=e[0],h=0;i\u003e0\u0026\u0026d\u003e0\u0026\u0026(h+d+1\u003eo\u0026\u0026(d=Math.max(1,o-h)),p.push(a.substring(i-=d,i+d)),!((h+=d+1)\u003eo));)d=e[f=(f+1)%e.length];return p.reverse().join(n)}}function At(e){return function(n){return n.replace(/[0-9]/g,function(a){return e[+a]})}}var Rr=/^(?:(.)?([\u003c\u003e=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;function an(e){if(!(n=Rr.exec(e)))throw new Error(\"invalid format: \"+e);var n;return new Vn({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]\u0026\u0026n[8].slice(1),trim:n[9],type:n[10]})}an.prototype=Vn.prototype;function Vn(e){this.fill=e.fill===void 0?\" \":e.fill+\"\",this.align=e.align===void 0?\"\u003e\":e.align+\"\",this.sign=e.sign===void 0?\"-\":e.sign+\"\",this.symbol=e.symbol===void 0?\"\":e.symbol+\"\",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?\"\":e.type+\"\"}Vn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?\"0\":\"\")+(this.width===void 0?\"\":Math.max(1,this.width|0))+(this.comma?\",\":\"\")+(this.precision===void 0?\"\":\".\"+Math.max(0,this.precision|0))+(this.trim?\"~\":\"\")+this.type};function St(e){n:for(var n=e.length,a=1,o=-1,i;a\u003cn;++a)switch(e[a]){case\".\":o=i=a;break;case\"0\":o===0\u0026\u0026(o=a),i=a;break;default:if(!+e[a])break n;o\u003e0\u0026\u0026(o=0);break}return o\u003e0?e.slice(0,o)+e.slice(i+1):e}var je;function Pt(e,n){var a=ln(e,n);if(!a)return e+\"\";var o=a[0],i=a[1],p=i-(je=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,f=o.length;return p===f?o:p\u003ef?o+new Array(p-f+1).join(\"0\"):p\u003e0?o.slice(0,p)+\".\"+o.slice(p):\"0.\"+new Array(1-p).join(\"0\")+ln(e,Math.max(0,n+p-1))[0]}function ve(e,n){var a=ln(e,n);if(!a)return e+\"\";var o=a[0],i=a[1];return i\u003c0?\"0.\"+new Array(-i).join(\"0\")+o:o.length\u003ei+1?o.slice(0,i+1)+\".\"+o.slice(i+1):o+new Array(i-o.length+2).join(\"0\")}var Me={\"%\":(e,n)=\u003e(e*100).toFixed(n),b:e=\u003eMath.round(e).toString(2),c:e=\u003ee+\"\",d:Mt,e:(e,n)=\u003ee.toExponential(n),f:(e,n)=\u003ee.toFixed(n),g:(e,n)=\u003ee.toPrecision(n),o:e=\u003eMath.round(e).toString(8),p:(e,n)=\u003eve(e*100,n),r:ve,s:Pt,X:e=\u003eMath.round(e).toString(16).toUpperCase(),x:e=\u003eMath.round(e).toString(16)};function _e(e){return e}var Lt=Array.prototype.map,It=[\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\\xB5\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];function qt(e){var n=e.grouping===void 0||e.thousands===void 0?_e:_t(Lt.call(e.grouping,Number),e.thousands+\"\"),a=e.currency===void 0?\"\":e.currency[0]+\"\",o=e.currency===void 0?\"\":e.currency[1]+\"\",i=e.decimal===void 0?\".\":e.decimal+\"\",p=e.numerals===void 0?_e:At(Lt.call(e.numerals,String)),f=e.percent===void 0?\"%\":e.percent+\"\",d=e.minus===void 0?\"\\u2212\":e.minus+\"\",h=e.nan===void 0?\"NaN\":e.nan+\"\";function N(w){w=an(w);var g=w.fill,x=w.align,M=w.sign,C=w.symbol,L=w.zero,D=w.width,P=w.comma,F=w.precision,O=w.trim,S=w.type;S===\"n\"?(P=!0,S=\"g\"):Me[S]||(F===void 0\u0026\u0026(F=12),O=!0,S=\"g\"),(L||g===\"0\"\u0026\u0026x===\"=\")\u0026\u0026(L=!0,g=\"0\",x=\"=\");var V=C===\"$\"?a:C===\"#\"\u0026\u0026/[boxX]/.test(S)?\"0\"+S.toLowerCase():\"\",$=C===\"$\"?o:/[%p]/.test(S)?f:\"\",E=Me[S],H=/[defgprs%]/.test(S);F=F===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,F)):Math.max(0,Math.min(20,F));function T(j){var q=V,R=$,X,bn,mn;if(S===\"c\")R=E(j)+R,j=\"\";else{j=+j;var rn=j\u003c0||1/j\u003c0;if(j=isNaN(j)?h:E(Math.abs(j),F),O\u0026\u0026(j=St(j)),rn\u0026\u0026+j==0\u0026\u0026M!==\"+\"\u0026\u0026(rn=!1),q=(rn?M===\"(\"?M:d:M===\"-\"||M===\"(\"?\"\":M)+q,R=(S===\"s\"?It[8+je/3]:\"\")+R+(rn\u0026\u0026M===\"(\"?\")\":\"\"),H){for(X=-1,bn=j.length;++X\u003cbn;)if(mn=j.charCodeAt(X),48\u003emn||mn\u003e57){R=(mn===46?i+j.slice(X+1):j.slice(X))+R,j=j.slice(0,X);break}}}P\u0026\u0026!L\u0026\u0026(j=n(j,1/0));var dn=q.length+j.length+R.length,J=dn\u003cD?new Array(D-dn+1).join(g):\"\";switch(P\u0026\u0026L\u0026\u0026(j=n(J+j,J.length?D-R.length:1/0),J=\"\"),x){case\"\u003c\":j=q+j+R+J;break;case\"=\":j=q+J+j+R;break;case\"^\":j=J.slice(0,dn=J.length\u003e\u003e1)+q+j+R+J.slice(dn);break;default:j=J+q+j+R;break}return p(j)}return T.toString=function(){return w+\"\"},T}function y(w,g){var x=N((w=an(w),w.type=\"f\",w)),M=Math.max(-8,Math.min(8,Math.floor(K(g)/3)))*3,C=Math.pow(10,-M),L=It[8+M/3];return function(D){return x(C*D)+L}}return{format:N,formatPrefix:y}}var $n,xn,Xn;Ae({thousands:\",\",grouping:[3],currency:[\"$\",\"\"]});function Ae(e){return $n=qt(e),xn=$n.format,Xn=$n.formatPrefix,$n}function Se(e){return Math.max(0,-K(Math.abs(e)))}function Pe(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(K(n)/3)))*3-K(Math.abs(e)))}function Le(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,K(n)-K(e))+1}function Ie(e,n,a,o){var i=(0,Ct.tickStep)(e,n,a),p;switch(o=an(o??\",f\"),o.type){case\"s\":{var f=Math.max(Math.abs(e),Math.abs(n));return o.precision==null\u0026\u0026!isNaN(p=Pe(i,f))\u0026\u0026(o.precision=p),Xn(o,f)}case\"\":case\"e\":case\"g\":case\"p\":case\"r\":{o.precision==null\u0026\u0026!isNaN(p=Le(i,Math.max(Math.abs(e),Math.abs(n))))\u0026\u0026(o.precision=p-(o.type===\"e\"));break}case\"f\":case\"%\":{o.precision==null\u0026\u0026!isNaN(p=Se(i))\u0026\u0026(o.precision=p-(o.type===\"%\")*2);break}}return xn(o)}function zr(e){var n=e.domain;return e.ticks=function(a){var o=n();return(0,Yn.ticks)(o[0],o[o.length-1],a??10)},e.tickFormat=function(a,o){var i=n();return Ie(i[0],i[i.length-1],a??10,o)},e.nice=function(a){a==null\u0026\u0026(a=10);var o=n(),i=0,p=o.length-1,f=o[i],d=o[p],h,N,y=10;for(d\u003cf\u0026\u0026(N=f,f=d,d=N,N=i,i=p,p=N);y-- \u003e0;){if(N=(0,Yn.tickIncrement)(f,d,a),N===h)return o[i]=f,o[p]=d,n(o);if(N\u003e0)f=Math.floor(f/N)*N,d=Math.ceil(d/N)*N;else if(N\u003c0)f=Math.ceil(f*N)/N,d=Math.floor(d*N)/N;else break;h=N}return e},e}function Q(){var e=we();return e.copy=function(){return Hn(e,Q())},zn.apply(e,arguments),zr(e)}var Ce=sn(vn());function qe(e,n){e=e.slice();var a=0,o=e.length-1,i=e[a],p=e[o],f;return p\u003ci\u0026\u0026(f=a,a=o,o=f,f=i,i=p,p=f),e[a]=n.floor(i),e[o]=n.ceil(p),e}function Et(e){return Math.log(e)}function Ft(e){return Math.exp(e)}function Dr(e){return-Math.log(-e)}function Br(e){return-Math.exp(-e)}function Tr(e){return isFinite(e)?+(\"1e\"+e):e\u003c0?0:e}function Or(e){return e===10?Tr:e===Math.E?Math.exp:function(n){return Math.pow(e,n)}}function Hr(e){return e===Math.E?Math.log:e===10\u0026\u0026Math.log10||e===2\u0026\u0026Math.log2||(e=Math.log(e),function(n){return Math.log(n)/e})}function Rt(e){return function(n){return-e(-n)}}function Vr(e){var n=e(Et,Ft),a=n.domain,o=10,i,p;function f(){return i=Hr(o),p=Or(o),a()[0]\u003c0?(i=Rt(i),p=Rt(p),e(Dr,Br)):e(Et,Ft),n}return n.base=function(d){return arguments.length?(o=+d,f()):o},n.domain=function(d){return arguments.length?(a(d),f()):a()},n.ticks=function(d){var h=a(),N=h[0],y=h[h.length-1],w;(w=y\u003cN)\u0026\u0026(g=N,N=y,y=g);var g=i(N),x=i(y),M,C,L,D=d==null?10:+d,P=[];if(!(o%1)\u0026\u0026x-g\u003cD){if(g=Math.floor(g),x=Math.ceil(x),N\u003e0){for(;g\u003c=x;++g)for(C=1,M=p(g);C\u003co;++C)if(L=M*C,!(L\u003cN)){if(L\u003ey)break;P.push(L)}}else for(;g\u003c=x;++g)for(C=o-1,M=p(g);C\u003e=1;--C)if(L=M*C,!(L\u003cN)){if(L\u003ey)break;P.push(L)}P.length*2\u003cD\u0026\u0026(P=(0,Ce.ticks)(N,y,D))}else P=(0,Ce.ticks)(g,x,Math.min(x-g,D)).map(p);return w?P.reverse():P},n.tickFormat=function(d,h){if(h==null\u0026\u0026(h=o===10?\".0e\":\",\"),typeof h!=\"function\"\u0026\u0026(h=xn(h)),d===1/0)return h;d==null\u0026\u0026(d=10);var N=Math.max(1,o*d/n.ticks().length);return function(y){var w=y/p(Math.round(i(y)));return w*o\u003co-.5\u0026\u0026(w*=o),w\u003c=N?h(y):\"\"}},n.nice=function(){return a(qe(a(),{floor:function(d){return p(Math.floor(i(d)))},ceil:function(d){return p(Math.ceil(i(d)))}}))},n}function yn(){var e=Vr(be()).domain([1,10]);return e.copy=function(){return Hn(e,yn()).base(e.base())},zn.apply(e,arguments),e}function zt(e){return e}var Ee=1,Fe=2,Re=3,Pn=4,Dt=1e-6;function $r(e){return\"translate(\"+e+\",0)\"}function Xr(e){return\"translate(0,\"+e+\")\"}function Yr(e){return n=\u003e+e(n)}function Ur(e,n){return n=Math.max(0,e.bandwidth()-n*2)/2,e.round()\u0026\u0026(n=Math.round(n)),a=\u003e+e(a)+n}function Jr(){return!this.__axis}function Bt(e,n){var a=[],o=null,i=null,p=6,f=6,d=3,h=typeof window!=\"undefined\"\u0026\u0026window.devicePixelRatio\u003e1?0:.5,N=e===Ee||e===Pn?-1:1,y=e===Pn||e===Fe?\"x\":\"y\",w=e===Ee||e===Re?$r:Xr;function g(x){var M=o??(n.ticks?n.ticks.apply(n,a):n.domain()),C=i??(n.tickFormat?n.tickFormat.apply(n,a):zt),L=Math.max(p,0)+d,D=n.range(),P=+D[0]+h,F=+D[D.length-1]+h,O=(n.bandwidth?Ur:Yr)(n.copy(),h),S=x.selection?x.selection():x,V=S.selectAll(\".domain\").data([null]),$=S.selectAll(\".tick\").data(M,n).order(),E=$.exit(),H=$.enter().append(\"g\").attr(\"class\",\"tick\"),T=$.select(\"line\"),j=$.select(\"text\");V=V.merge(V.enter().insert(\"path\",\".tick\").attr(\"class\",\"domain\").attr(\"stroke\",\"currentColor\")),$=$.merge(H),T=T.merge(H.append(\"line\").attr(\"stroke\",\"currentColor\").attr(y+\"2\",N*p)),j=j.merge(H.append(\"text\").attr(\"fill\",\"currentColor\").attr(y,N*L).attr(\"dy\",e===Ee?\"0em\":e===Re?\"0.71em\":\"0.32em\")),x!==S\u0026\u0026(V=V.transition(x),$=$.transition(x),T=T.transition(x),j=j.transition(x),E=E.transition(x).attr(\"opacity\",Dt).attr(\"transform\",function(q){return isFinite(q=O(q))?w(q+h):this.getAttribute(\"transform\")}),H.attr(\"opacity\",Dt).attr(\"transform\",function(q){var R=this.parentNode.__axis;return w((R\u0026\u0026isFinite(R=R(q))?R:O(q))+h)})),E.remove(),V.attr(\"d\",e===Pn||e===Fe?f?\"M\"+N*f+\",\"+P+\"H\"+h+\"V\"+F+\"H\"+N*f:\"M\"+h+\",\"+P+\"V\"+F:f?\"M\"+P+\",\"+N*f+\"V\"+h+\"H\"+F+\"V\"+N*f:\"M\"+P+\",\"+h+\"H\"+F),$.attr(\"opacity\",1).attr(\"transform\",function(q){return w(O(q)+h)}),T.attr(y+\"2\",N*p),j.attr(y,N*L).text(C),S.filter(Jr).attr(\"fill\",\"none\").attr(\"font-size\",10).attr(\"font-family\",\"sans-serif\").attr(\"text-anchor\",e===Fe?\"start\":e===Pn?\"end\":\"middle\"),S.each(function(){this.__axis=O})}return g.scale=function(x){return arguments.length?(n=x,g):n},g.ticks=function(){return a=Array.from(arguments),g},g.tickArguments=function(x){return arguments.length?(a=x==null?[]:Array.from(x),g):a.slice()},g.tickValues=function(x){return arguments.length?(o=x==null?null:Array.from(x),g):o\u0026\u0026o.slice()},g.tickFormat=function(x){return arguments.length?(i=x,g):i},g.tickSize=function(x){return arguments.length?(p=f=+x,g):p},g.tickSizeInner=function(x){return arguments.length?(p=+x,g):p},g.tickSizeOuter=function(x){return arguments.length?(f=+x,g):f},g.tickPadding=function(x){return arguments.length?(d=+x,g):d},g.offset=function(x){return arguments.length?(h=+x,g):h},g}function un(e){return Bt(Re,e)}function pn(e){return Bt(Pn,e)}var Un=\"http://www.w3.org/1999/xhtml\",ze={svg:\"http://www.w3.org/2000/svg\",xhtml:Un,xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"};function Jn(e){var n=e+=\"\",a=n.indexOf(\":\");return a\u003e=0\u0026\u0026(n=e.slice(0,a))!==\"xmlns\"\u0026\u0026(e=e.slice(a+1)),ze.hasOwnProperty(n)?{space:ze[n],local:e}:e}function Qr(e){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===Un\u0026\u0026n.documentElement.namespaceURI===Un?n.createElement(e):n.createElementNS(a,e)}}function Gr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Qn(e){var n=Jn(e);return(n.local?Gr:Qr)(n)}function Wr(){}function Gn(e){return e==null?Wr:function(){return this.querySelector(e)}}function Tt(e){typeof e!=\"function\"\u0026\u0026(e=Gn(e));for(var n=this._groups,a=n.length,o=new Array(a),i=0;i\u003ca;++i)for(var p=n[i],f=p.length,d=o[i]=new Array(f),h,N,y=0;y\u003cf;++y)(h=p[y])\u0026\u0026(N=e.call(h,h.__data__,y,p))\u0026\u0026(\"__data__\"in h\u0026\u0026(N.__data__=h.__data__),d[y]=N);return new z(o,this._parents)}function De(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Kr(){return[]}function Ot(e){return e==null?Kr:function(){return this.querySelectorAll(e)}}function Zr(e){return function(){return De(e.apply(this,arguments))}}function Ht(e){typeof e==\"function\"?e=Zr(e):e=Ot(e);for(var n=this._groups,a=n.length,o=[],i=[],p=0;p\u003ca;++p)for(var f=n[p],d=f.length,h,N=0;N\u003cd;++N)(h=f[N])\u0026\u0026(o.push(e.call(h,h.__data__,N,f)),i.push(h));return new z(o,i)}function Vt(e){return function(){return this.matches(e)}}function Wn(e){return function(n){return n.matches(e)}}var no=Array.prototype.find;function eo(e){return function(){return no.call(this.children,e)}}function to(){return this.firstElementChild}function $t(e){return this.select(e==null?to:eo(typeof e==\"function\"?e:Wn(e)))}var ao=Array.prototype.filter;function ro(){return Array.from(this.children)}function oo(e){return function(){return ao.call(this.children,e)}}function Xt(e){return this.selectAll(e==null?ro:oo(typeof e==\"function\"?e:Wn(e)))}function Yt(e){typeof e!=\"function\"\u0026\u0026(e=Vt(e));for(var n=this._groups,a=n.length,o=new Array(a),i=0;i\u003ca;++i)for(var p=n[i],f=p.length,d=o[i]=[],h,N=0;N\u003cf;++N)(h=p[N])\u0026\u0026e.call(h,h.__data__,N,p)\u0026\u0026d.push(h);return new z(o,this._parents)}function Kn(e){return new Array(e.length)}function Ut(){return new z(this._enter||this._groups.map(Kn),this._parents)}function Ln(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Ln.prototype={constructor:Ln,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Jt(e){return function(){return e}}function so(e,n,a,o,i,p){for(var f=0,d,h=n.length,N=p.length;f\u003cN;++f)(d=n[f])?(d.__data__=p[f],o[f]=d):a[f]=new Ln(e,p[f]);for(;f\u003ch;++f)(d=n[f])\u0026\u0026(i[f]=d)}function io(e,n,a,o,i,p,f){var d,h,N=new Map,y=n.length,w=p.length,g=new Array(y),x;for(d=0;d\u003cy;++d)(h=n[d])\u0026\u0026(g[d]=x=f.call(h,h.__data__,d,n)+\"\",N.has(x)?i[d]=h:N.set(x,h));for(d=0;d\u003cw;++d)x=f.call(e,p[d],d,p)+\"\",(h=N.get(x))?(o[d]=h,h.__data__=p[d],N.delete(x)):a[d]=new Ln(e,p[d]);for(d=0;d\u003cy;++d)(h=n[d])\u0026\u0026N.get(g[d])===h\u0026\u0026(i[d]=h)}function co(e){return e.__data__}function Qt(e,n){if(!arguments.length)return Array.from(this,co);var a=n?io:so,o=this._parents,i=this._groups;typeof e!=\"function\"\u0026\u0026(e=Jt(e));for(var p=i.length,f=new Array(p),d=new Array(p),h=new Array(p),N=0;N\u003cp;++N){var y=o[N],w=i[N],g=w.length,x=lo(e.call(y,y\u0026\u0026y.__data__,N,o)),M=x.length,C=d[N]=new Array(M),L=f[N]=new Array(M),D=h[N]=new Array(g);a(y,w,C,L,D,x,n);for(var P=0,F=0,O,S;P\u003cM;++P)if(O=C[P]){for(P\u003e=F\u0026\u0026(F=P+1);!(S=L[F])\u0026\u0026++F\u003cM;);O._next=S||null}}return f=new z(f,o),f._enter=d,f._exit=h,f}function lo(e){return typeof e==\"object\"\u0026\u0026\"length\"in e?e:Array.from(e)}function Gt(){return new z(this._exit||this._groups.map(Kn),this._parents)}function Wt(e,n,a){var o=this.enter(),i=this,p=this.exit();return typeof e==\"function\"?(o=e(o),o\u0026\u0026(o=o.selection())):o=o.append(e+\"\"),n!=null\u0026\u0026(i=n(i),i\u0026\u0026(i=i.selection())),a==null?p.remove():a(p),o\u0026\u0026i?o.merge(i).order():i}function Kt(e){for(var n=e.selection?e.selection():e,a=this._groups,o=n._groups,i=a.length,p=o.length,f=Math.min(i,p),d=new Array(i),h=0;h\u003cf;++h)for(var N=a[h],y=o[h],w=N.length,g=d[h]=new Array(w),x,M=0;M\u003cw;++M)(x=N[M]||y[M])\u0026\u0026(g[M]=x);for(;h\u003ci;++h)d[h]=a[h];return new z(d,this._parents)}function Zt(){for(var e=this._groups,n=-1,a=e.length;++n\u003ca;)for(var o=e[n],i=o.length-1,p=o[i],f;--i\u003e=0;)(f=o[i])\u0026\u0026(p\u0026\u0026f.compareDocumentPosition(p)^4\u0026\u0026p.parentNode.insertBefore(f,p),p=f);return this}function na(e){e||(e=uo);function n(w,g){return w\u0026\u0026g?e(w.__data__,g.__data__):!w-!g}for(var a=this._groups,o=a.length,i=new Array(o),p=0;p\u003co;++p){for(var f=a[p],d=f.length,h=i[p]=new Array(d),N,y=0;y\u003cd;++y)(N=f[y])\u0026\u0026(h[y]=N);h.sort(n)}return new z(i,this._parents).order()}function uo(e,n){return e\u003cn?-1:e\u003en?1:e\u003e=n?0:NaN}function ea(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ta(){return Array.from(this)}function aa(){for(var e=this._groups,n=0,a=e.length;n\u003ca;++n)for(var o=e[n],i=0,p=o.length;i\u003cp;++i){var f=o[i];if(f)return f}return null}function ra(){let e=0;for(let n of this)++e;return e}function oa(){return!this.node()}function sa(e){for(var n=this._groups,a=0,o=n.length;a\u003co;++a)for(var i=n[a],p=0,f=i.length,d;p\u003cf;++p)(d=i[p])\u0026\u0026e.call(d,d.__data__,p,i);return this}function po(e){return function(){this.removeAttribute(e)}}function fo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mo(e,n){return function(){this.setAttribute(e,n)}}function ho(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function ko(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function No(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function ia(e,n){var a=Jn(e);if(arguments.length\u003c2){var o=this.node();return a.local?o.getAttributeNS(a.space,a.local):o.getAttribute(a)}return this.each((n==null?a.local?fo:po:typeof n==\"function\"?a.local?No:ko:a.local?ho:mo)(a,n))}function Zn(e){return e.ownerDocument\u0026\u0026e.ownerDocument.defaultView||e.document\u0026\u0026e||e.defaultView}function go(e){return function(){this.style.removeProperty(e)}}function xo(e,n,a){return function(){this.style.setProperty(e,n,a)}}function yo(e,n,a){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,a)}}function ca(e,n,a){return arguments.length\u003e1?this.each((n==null?go:typeof n==\"function\"?yo:xo)(e,n,a??\"\")):bo(this.node(),e)}function bo(e,n){return e.style.getPropertyValue(n)||Zn(e).getComputedStyle(e,null).getPropertyValue(n)}function wo(e){return function(){delete this[e]}}function jo(e,n){return function(){this[e]=n}}function vo(e,n){return function(){var a=n.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function la(e,n){return arguments.length\u003e1?this.each((n==null?wo:typeof n==\"function\"?vo:jo)(e,n)):this.node()[e]}function ua(e){return e.trim().split(/^|\\s+/)}function Be(e){return e.classList||new pa(e)}function pa(e){this._node=e,this._names=ua(e.getAttribute(\"class\")||\"\")}pa.prototype={add:function(e){var n=this._names.indexOf(e);n\u003c0\u0026\u0026(this._names.push(e),this._node.setAttribute(\"class\",this._names.join(\" \")))},remove:function(e){var n=this._names.indexOf(e);n\u003e=0\u0026\u0026(this._names.splice(n,1),this._node.setAttribute(\"class\",this._names.join(\" \")))},contains:function(e){return this._names.indexOf(e)\u003e=0}};function fa(e,n){for(var a=Be(e),o=-1,i=n.length;++o\u003ci;)a.add(n[o])}function ma(e,n){for(var a=Be(e),o=-1,i=n.length;++o\u003ci;)a.remove(n[o])}function Mo(e){return function(){fa(this,e)}}function _o(e){return function(){ma(this,e)}}function Ao(e,n){return function(){(n.apply(this,arguments)?fa:ma)(this,e)}}function da(e,n){var a=ua(e+\"\");if(arguments.length\u003c2){for(var o=Be(this.node()),i=-1,p=a.length;++i\u003cp;)if(!o.contains(a[i]))return!1;return!0}return this.each((typeof n==\"function\"?Ao:n?Mo:_o)(a,n))}function So(){this.textContent=\"\"}function Po(e){return function(){this.textContent=e}}function Lo(e){return function(){var n=e.apply(this,arguments);this.textContent=n??\"\"}}function ha(e){return arguments.length?this.each(e==null?So:(typeof e==\"function\"?Lo:Po)(e)):this.node().textContent}function Io(){this.innerHTML=\"\"}function qo(e){return function(){this.innerHTML=e}}function Co(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??\"\"}}function ka(e){return arguments.length?this.each(e==null?Io:(typeof e==\"function\"?Co:qo)(e)):this.node().innerHTML}function Eo(){this.nextSibling\u0026\u0026this.parentNode.appendChild(this)}function Na(){return this.each(Eo)}function Fo(){this.previousSibling\u0026\u0026this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ga(){return this.each(Fo)}function xa(e){var n=typeof e==\"function\"?e:Qn(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Ro(){return null}function ya(e,n){var a=typeof e==\"function\"?e:Qn(e),o=n==null?Ro:typeof n==\"function\"?n:Gn(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),o.apply(this,arguments)||null)})}function zo(){var e=this.parentNode;e\u0026\u0026e.removeChild(this)}function ba(){return this.each(zo)}function Do(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Bo(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function wa(e){return this.select(e?Bo:Do)}function ja(e){return arguments.length?this.property(\"__data__\",e):this.node().__data__}function To(e){return function(n){e.call(this,n,this.__data__)}}function Oo(e){return e.trim().split(/^|\\s+/).map(function(n){var a=\"\",o=n.indexOf(\".\");return o\u003e=0\u0026\u0026(a=n.slice(o+1),n=n.slice(0,o)),{type:n,name:a}})}function Ho(e){return function(){var n=this.__on;if(!!n){for(var a=0,o=-1,i=n.length,p;a\u003ci;++a)p=n[a],(!e.type||p.type===e.type)\u0026\u0026p.name===e.name?this.removeEventListener(p.type,p.listener,p.options):n[++o]=p;++o?n.length=o:delete this.__on}}}function Vo(e,n,a){return function(){var o=this.__on,i,p=To(n);if(o){for(var f=0,d=o.length;f\u003cd;++f)if((i=o[f]).type===e.type\u0026\u0026i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=p,i.options=a),i.value=n;return}}this.addEventListener(e.type,p,a),i={type:e.type,name:e.name,value:n,listener:p,options:a},o?o.push(i):this.__on=[i]}}function va(e,n,a){var o=Oo(e+\"\"),i,p=o.length,f;if(arguments.length\u003c2){var d=this.node().__on;if(d){for(var h=0,N=d.length,y;h\u003cN;++h)for(i=0,y=d[h];i\u003cp;++i)if((f=o[i]).type===y.type\u0026\u0026f.name===y.name)return y.value}return}for(d=n?Vo:Ho,i=0;i\u003cp;++i)this.each(d(o[i],n,a));return this}function Ma(e,n,a){var o=Zn(e),i=o.CustomEvent;typeof i==\"function\"?i=new i(n,a):(i=o.document.createEvent(\"Event\"),a?(i.initEvent(n,a.bubbles,a.cancelable),i.detail=a.detail):i.initEvent(n,!1,!1)),e.dispatchEvent(i)}function $o(e,n){return function(){return Ma(this,e,n)}}function Xo(e,n){return function(){return Ma(this,e,n.apply(this,arguments))}}function _a(e,n){return this.each((typeof n==\"function\"?Xo:$o)(e,n))}function*Aa(){for(var e=this._groups,n=0,a=e.length;n\u003ca;++n)for(var o=e[n],i=0,p=o.length,f;i\u003cp;++i)(f=o[i])\u0026\u0026(yield f)}var Te=[null];function z(e,n){this._groups=e,this._parents=n}function Yo(){return new z([[document.documentElement]],Te)}function Uo(){return this}z.prototype=Yo.prototype={constructor:z,select:Tt,selectAll:Ht,selectChild:$t,selectChildren:Xt,filter:Yt,data:Qt,enter:Ut,exit:Gt,join:Wt,merge:Kt,selection:Uo,order:Zt,sort:na,call:ea,nodes:ta,node:aa,size:ra,empty:oa,each:sa,attr:ia,style:ca,property:la,classed:da,text:ha,html:ka,raise:Na,lower:ga,append:xa,insert:ya,remove:ba,clone:wa,datum:ja,on:va,dispatch:_a,[Symbol.iterator]:Aa};function Z(e){return typeof e==\"string\"?new z([[document.querySelector(e)]],[document.documentElement]):new z([[e]],Te)}var Jo=[\"lightsalmon\",\"lightseagreen\",\"indianred\",\"darkmagenta\",\"cornflowerblue\",\"aqua\"];function Sa({strokeWidth:e,functions:n,width:a,height:o,range:i,colors:p,logX:f,logY:d,grid:h,onHover:N,onMouseEnter:y,onMouseLeave:w,onClick:g,margin:x,hideAxes:M,hideXAxis:C,hideYAxis:L}){x=x||{top:20,right:30,bottom:30,left:50},a=a||500,o=o||300;let D=o-x.top-x.bottom,P=a-x.left-x.right;e=e||1,p=p||Jo,n=n||[],i=i||{x:[-4,4],y:[-4,4]};let F=f?yn().base(f||10):Q(),O=d?yn().base(d||10):Q(),S=F.domain(i.x).range([x.left,a-x.right]),V=O.domain(i.y).range([o-x.top,x.bottom]),$=n.map(E=\u003e{let H=[[]];for(let T=x.left+1e-6;T\u003ca-x.right;T+=1){let j=S.invert(T),q=E(j);if(typeof q==\"number\"){let R=V(q);j\u003e=i.x[0]\u0026\u0026j\u003c=i.x[1]\u0026\u0026q\u003e=i.y[0]\u0026\u0026q\u003c=i.y[1]\u0026\u0026H[0].unshift([T,R])}}return H});return U.default.createElement(\"svg\",{width:a,height:o,onClick:E=\u003eg\u0026\u0026g(E)},!M\u0026\u0026U.default.createElement(U.default.Fragment,null,!C\u0026\u0026U.default.createElement(\"g\",{className:\"x-axis plot-axis\",ref:E=\u003eZ(E).attr(\"transform\",`translate(0,${o-x.top})`).call(un(S).ticks(a/50))}),!L\u0026\u0026U.default.createElement(\"g\",{className:\"y-axis plot-axis\",ref:E=\u003eZ(E).attr(\"transform\",`translate(${x.left},0)`).call(pn(V).ticks(o/50))})),h\u0026\u0026U.default.createElement(U.default.Fragment,null,h.x\u0026\u0026U.default.createElement(\"g\",{className:\"grid\",ref:E=\u003eZ(E).attr(\"transform\",`translate(0, ${V(i.y[1])})`).call(un(S).ticks(h.x).tickSize(D).tickFormat(()=\u003e\"\"))}),h.y\u0026\u0026U.default.createElement(\"g\",{className:\"grid\",ref:E=\u003eZ(E).attr(\"transform\",`translate(${S(i.x[0])}, 0)`).call(pn(V).ticks(h.y).tickSize(-P).tickFormat(()=\u003e\"\"))})),U.default.createElement(\"g\",null,$.map((E,H)=\u003eE.map((T,j)=\u003eU.default.createElement(\"path\",{onMouseEnter:()=\u003ey\u0026\u0026y(H),onMouseLeave:()=\u003ew\u0026\u0026w(H),key:H+\"-\"+j,d:\"M\"+T.join(\"L\"),stroke:p[H%p.length]||\"black\",strokeWidth:e,fill:\"none\"})))))}var fn=sn(le());function Pa({f:e,width:n,margin:a,height:o,range:i}){a=a||40,n=n||400,o=o||300,i=i||{x:[-1,1],y:[-1,1]};let p=[],f=Q().domain(i.x).range([a,n-a]),d=Q().domain(i.y).range([o-a,a]);for(let h=a+1e-6;h\u003cn-a;h+=1){let N=f.invert(h),y=e(N),w=d(y);p.push([h,w])}return fn.default.createElement(\"svg\",{width:n+20,height:o+20},fn.default.createElement(\"g\",null,fn.default.createElement(\"path\",{d:`M${p.join(\"L\")}`,stroke:\"steelblue\",fill:\"none\"}),fn.default.createElement(\"g\",{transform:`translate(${a},0)`,ref:h=\u003eZ(h).call(pn(d))}),fn.default.createElement(\"g\",{transform:`translate(0,${d(0)})`,ref:h=\u003eZ(h).call(un(f))})))}function La({f:e,width:n,margin:a,height:o,range:i}){return a=a||40,n=n||400,o=o||300,i=i||{x:[-1,1],y:[-1,1]},fn.default.createElement(\"svg\",{ref:p=\u003e{let f=Z(p).attr(\"width\",n+20).attr(\"height\",o+20),d=Q().domain(i.x).range([a,n-a]),h=Q().domain(i.y).range([o-a,a]),N=f.append(\"g\"),y=[];for(let w=a+1e-6;w\u003cn-a;w+=1){let g=d.invert(w),x=e(g),M=h(x);y.push([w,M])}N.append(\"path\").attr(\"d\",\"M\"+y.join(\"L\")).style(\"stroke\",\"steelblue\").style(\"fill\",\"none\"),N.append(\"g\").attr(\"transform\",`translate(${a},0)`).call(pn(h)),N.append(\"g\").attr(\"transform\",`translate(0,${h(0)})`).call(un(d))}})}var Qo={title:\"Plotting Functions with React and d3.js\",date:\"2020-04-18\",tags:[\"code\",\"d3\"],description:\"As the basis of many upcoming visualizations.\",image:\"./img/plot.png\"};function Go(e){let n=Object.assign({p:\"p\",a:\"a\",pre:\"pre\",code:\"code\",span:\"span\",h2:\"h2\",h3:\"h3\",ul:\"ul\",li:\"li\"},e.components),{wrapper:a}=n,o=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[\"As the basis of many upcoming visualizations, I will use libraries of \",(0,t.jsx)(n.a,{href:\"https://github.com/d3/d3/blob/master/API.md\",children:\"the huge d3 ecosystem\"}),`.\nFor many applications, for example to animate vibrating strings, it want to plot functions:`]}),`\n`,(0,t.jsx)(Sa,{strokeWidth:5,functions:[i=\u003eMath.sin(i),i=\u003eMath.cos(i)],range:{x:[-Math.PI,Math.PI],y:[-1,1]}}),`\n`,(0,t.jsx)(n.p,{children:\"The code:\"}),`\n`,(0,t.jsx)(n.pre,{className:\"language-js\",children:(0,t.jsxs)(n.code,{className:\"language-js\",children:[(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,t.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Plot\"}),\" functions\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token parameter\",children:\"x\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,t.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"sin\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token parameter\",children:\"x\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,t.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"cos\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" range\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" x\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token constant\",children:\"PI\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token constant\",children:\"PI\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,t.jsxs)(n.h2,{id:\"combining-d3-and-react\",children:[(0,t.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#combining-d3-and-react\",children:(0,t.jsx)(n.span,{className:\"icon icon-link\"})}),\"Combining d3 and react\"]}),`\n`,(0,t.jsx)(n.p,{children:`As d3 has its own API for handling the DOM, we could theoretically do the job without React.\nBut as I want to be able to use components in MDX files directly, React needs to be at least a wrapper for d3.`}),`\n`,(0,t.jsxs)(n.h3,{id:\"with-d3-selection\",children:[(0,t.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#with-d3-selection\",children:(0,t.jsx)(n.span,{className:\"icon icon-link\"})}),\"With d3-selection\"]}),`\n`,(0,t.jsxs)(n.p,{children:[\"So now let's just use React as a wrapper and let d3 handle the DOM inside the svg element, by using its jquery-like API \",(0,t.jsx)(n.a,{href:\"https://github.com/d3/d3-selection\",children:\"d3-selection\"}),\".\"]}),`\n`,(0,t.jsxs)(n.p,{children:[\"By using most of the code from \",(0,t.jsx)(n.a,{href:\"https://observablehq.com/@d3/continuous-scales#visualizeScale\",children:\"here\"}),\" and pasting it into the \",(0,t.jsx)(n.a,{href:\"https://reactjs.org/docs/refs-and-the-dom.html#callback-refs\",children:\"ref callback\"}),\", we can operate directly on the svg element:\"]}),`\n`,(0,t.jsx)(n.pre,{className:\"language-js\",children:(0,t.jsxs)(n.code,{className:\"language-js\",children:[(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,t.jsx)(n.span,{className:\"token imports\",children:(0,t.jsx)(n.span,{className:\"token maybe-class-name\",children:\"React\"})}),\" \",(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'react'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,t.jsxs)(n.span,{className:\"token imports\",children:[(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" scaleLinear \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'d3-scale'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,t.jsxs)(n.span,{className:\"token imports\",children:[(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" select \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'d3-selection'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,t.jsxs)(n.span,{className:\"token imports\",children:[(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" axisBottom\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" axisLeft \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'d3-axis'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n\n`,(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,t.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:(0,t.jsx)(n.span,{className:\"token maybe-class-name\",children:\"FunctionPlot\"})}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsxs)(n.span,{className:\"token parameter\",children:[(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" f\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" width\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" height\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" range \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  margin `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" margin \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"40\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  width `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"400\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  height `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" height \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"300\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  range `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" range \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" x\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),`svg\n      ref`,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token parameter\",children:\"el\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n        `,(0,t.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" svg \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"select\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"el\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'width'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"20\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'height'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" height \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"20\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n          x `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"scaleLinear\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"domain\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"range\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token property-access\",children:\"x\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"range\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n          y `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"scaleLinear\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"domain\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"range\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token property-access\",children:\"y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"range\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"height \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n          g `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" svg\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"append\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'g'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n          line `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n        `,(0,t.jsx)(n.span,{className:\"token keyword control-flow\",children:\"for\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" i \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" margin \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1e-6\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+=\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n          `,(0,t.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,t.jsx)(n.span,{className:\"token constant\",children:\"X\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"invert\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"i\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n            `,(0,t.jsx)(n.span,{className:\"token constant\",children:\"Y\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"f\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token constant\",children:\"X\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n            j `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token constant\",children:\"Y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n          line`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"push\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" j\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n        `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n        g`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"append\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'path'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n          `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'d'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'M'\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" line\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"join\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'L'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n          `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"style\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'stroke'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'steelblue'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n          `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"style\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'fill'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token string\",children:\"'none'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n        g`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"append\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'g'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'transform'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsxs)(n.span,{className:\"token template-string\",children:[(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"translate(\"}),(0,t.jsxs)(n.span,{className:\"token interpolation\",children:[(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"margin\",(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token string\",children:\",0)\"}),(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"call\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token function\",children:\"axisLeft\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"y\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n        g`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"append\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'g'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n          `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'transform'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsxs)(n.span,{className:\"token template-string\",children:[(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"translate(0,\"}),(0,t.jsxs)(n.span,{className:\"token interpolation\",children:[(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,t.jsx)(n.span,{className:\"token function\",children:\"y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token string\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n          `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"call\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token function\",children:\"axisBottom\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"svg\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,t.jsx)(n.p,{children:\"and using it:\"}),`\n`,(0,t.jsx)(n.pre,{className:\"language-js\",children:(0,t.jsxs)(n.code,{className:\"language-js\",children:[(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,t.jsx)(n.span,{className:\"token maybe-class-name\",children:\"FunctionPlot\"}),\" f\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token parameter\",children:\"x\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,t.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"sin\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" range\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" x\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"4\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"4\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,t.jsx)(La,{f:i=\u003eMath.sin(i),range:{x:[-4,4],y:[-1,1]}}),`\n`,(0,t.jsx)(n.p,{children:\"Other d3 APIs used:\"}),`\n`,(0,t.jsxs)(n.ul,{children:[`\n`,(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:\"https://observablehq.com/@d3/introduction-to-d3s-scales?collection=@d3/d3-scale\",children:\"d3-scale\"}),\" for a convenient translation of the function value range to the pixels dimensions on screen\"]}),`\n`,(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:\"https://github.com/d3/d3-axis\",children:\"d3-axis\"}),\" for easy-to-use x and y axis\"]}),`\n`]}),`\n`,(0,t.jsxs)(n.h3,{id:\"with-jsx\",children:[(0,t.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#with-jsx\",children:(0,t.jsx)(n.span,{className:\"icon icon-link\"})}),\"With JSX\"]}),`\n`,(0,t.jsx)(n.p,{children:\"As React is already a pretty good lib to handle the DOM efficiently, we can (mostly) spare d3-selection and render the SVG elements in JSX:\"}),`\n`,(0,t.jsx)(n.pre,{className:\"language-js\",children:(0,t.jsxs)(n.code,{className:\"language-js\",children:[(0,t.jsx)(n.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,t.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:(0,t.jsx)(n.span,{className:\"token maybe-class-name\",children:\"FunctionPlot\"})}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsxs)(n.span,{className:\"token parameter\",children:[(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" f\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" width\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" height\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" range \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n  margin `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" margin \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"40\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  width `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"400\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  height `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" height \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"300\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  range `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" range \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" x\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" y\",(0,t.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" line \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n    x `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"scaleLinear\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"domain\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"range\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token property-access\",children:\"x\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"range\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n    y `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"scaleLinear\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"domain\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"range\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token property-access\",children:\"y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"range\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"height \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token keyword control-flow\",children:\"for\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" i \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" margin \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1e-6\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\" width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\" margin\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" i \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+=\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,t.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,t.jsx)(n.span,{className:\"token constant\",children:\"X\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"invert\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"i\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token constant\",children:\"Y\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"f\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token constant\",children:\"X\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n      j `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token constant\",children:\"Y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n    line`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"push\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"i\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" j\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"svg width\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"width \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"20\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" height\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"height \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"+\"}),\" \",(0,t.jsx)(n.span,{className:\"token number\",children:\"20\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"g\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n        `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"path d\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsxs)(n.span,{className:\"token template-string\",children:[(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"M\"}),(0,t.jsxs)(n.span,{className:\"token interpolation\",children:[(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"line\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"join\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"'L'\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" stroke\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token string\",children:'\"steelblue\"'}),\" fill\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token string\",children:'\"none\"'}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n        `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"g transform\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsxs)(n.span,{className:\"token template-string\",children:[(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"translate(\"}),(0,t.jsxs)(n.span,{className:\"token interpolation\",children:[(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"margin\",(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token string\",children:\",0)\"}),(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" ref\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token parameter\",children:\"g\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"select\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"g\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"call\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token function\",children:\"axisLeft\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"y\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n        `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"g transform\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsxs)(n.span,{className:\"token template-string\",children:[(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,t.jsx)(n.span,{className:\"token string\",children:\"translate(0,\"}),(0,t.jsxs)(n.span,{className:\"token interpolation\",children:[(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,t.jsx)(n.span,{className:\"token function\",children:\"y\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,t.jsx)(n.span,{className:\"token string\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" ref\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token parameter\",children:\"g\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,t.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,t.jsx)(n.span,{className:\"token function\",children:\"select\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"g\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,t.jsx)(n.span,{className:\"token method function property-access\",children:\"call\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,t.jsx)(n.span,{className:\"token function\",children:\"axisBottom\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"x\",(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n      `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"g\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n    `,(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,t.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"svg\",(0,t.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),`\n  `,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,t.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,t.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,t.jsx)(n.p,{children:\"Now the .select / .append calls have been refactored to JSX. I like this code much more as it looks flatter and lets me manipulate the svg elements directly as JSX without using a wide API surface of chaining methods.\"}),`\n`,(0,t.jsx)(n.p,{children:\"The output is exactly the same:\"}),`\n`,(0,t.jsx)(Pa,{f:i=\u003eMath.sin(i),range:{x:[-4,4],y:[-1,1]}}),`\n`,(0,t.jsxs)(n.p,{children:[`You may have noticed that the axes are still rendered using ref callback + d3-selection.\nThis is because the axes methods are generators that output a subtree of DOM nodes.\nIf we wanted to avoid using d3-selection completely, we could implement our own axis component using `,(0,t.jsx)(n.a,{href:\"https://observablehq.com/@d3/scale-ticks\",children:\"scale.ticks\"}),\".\"]}),`\n`,(0,t.jsx)(n.p,{children:\"But for my use case, the above approach is perfectly fine.\"}),`\n`,(0,t.jsx)(n.p,{children:\"I am really excited by d3 and the way it is organized in small modules, letting me pick only the parts I need! It will be a big part of upcoming visualizations on this blog.\"}),`\n`,(0,t.jsxs)(n.h2,{id:\"more-d3-resources\",children:[(0,t.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#more-d3-resources\",children:(0,t.jsx)(n.span,{className:\"icon icon-link\"})}),\"More d3 Resources\"]}),`\n`,(0,t.jsxs)(n.ul,{children:[`\n`,(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:\"https://observablehq.com/collection/@d3/learn-d3\",children:\"https://observablehq.com/collection/@d3/learn-d3\"})}),`\n`,(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:\"https://medium.com/@enjalot/how-do-you-learn-d3-js-ccffc151419b\",children:\"https://medium.com/@enjalot/how-do-you-learn-d3-js-ccffc151419b\"})}),`\n`,(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:\"https://medium.com/@enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a\",children:\"https://medium.com/@enjalot/the-hitchhikers-guide-to-d3-js-a8552174733a\"})}),`\n`,(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:\"https://bost.ocks.org/mike/\",children:\"https://bost.ocks.org/mike/\"})}),`\n`]})]});return a?(0,t.jsx)(a,Object.assign({},e,{children:o})):o}var Wo=Go;return Ko;})();\n;return Component.default;"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"plotting-functions"},"buildId":"FC8Jkl4TPDRYg8Mdw4RDr","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>