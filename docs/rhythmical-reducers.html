<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Loophole Letters</title><meta content="This is where felixroos writes about music and coding and stuff that he finds interesting." name="description"/><meta property="og:url" content="https://felixroos.github.io/rhythmical-reducers"/><link rel="canonical" href="https://felixroos.github.io/rhythmical-reducers"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"/><meta property="og:type" content="website"/><meta property="og:site_name" content="Loophole Letters"/><meta property="og:description" content="This is where felixroos writes about music and coding and stuff that he finds interesting."/><meta property="og:title" content="Loophole Letters"/><meta property="og:image" content="https://felixroos.github.io/images/site-preview.png"/><meta name="next-head-count" content="12"/><link rel="preload" href="/_next/static/css/824406bfec680877c871.css" as="style"/><link rel="stylesheet" href="/_next/static/css/824406bfec680877c871.css" data-n-g=""/><link rel="preload" href="/_next/static/css/3dd4d340904c9260f6d8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3dd4d340904c9260f6d8.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-ddd010a953737b6e3536.js" defer=""></script><script src="/_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="/_next/static/chunks/main-222191e14496d29481e0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-99b66f93221fbb7f4a73.js" defer=""></script><script src="/_next/static/chunks/404-d5935ede064e9f79c1b7.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bslug%5D-451cfbeca75d2f1e006e.js" defer=""></script><script src="/_next/static/G3PuGP-3UQ_TjRSvK8pry/_buildManifest.js" defer=""></script><script src="/_next/static/G3PuGP-3UQ_TjRSvK8pry/_ssgManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css-global 1ob364s">html{--theme-ui-colors-primary:#307AC6;--theme-ui-colors-secondary:#27a727;--theme-ui-colors-background:#fff;--theme-ui-colors-text:#1b1e21;--theme-ui-colors-blue:#4169e1;--theme-ui-colors-cyan:#41b9e1;--theme-ui-colors-gray:#667788;--theme-ui-colors-green:#27a727;--theme-ui-colors-purple:#6941e1;--theme-ui-colors-orange:#fba100;--theme-ui-colors-pink:#e141b9;--theme-ui-colors-red:#ee5555;--theme-ui-colors-white:#fff;--theme-ui-colors-yellow:#FFDD22;--theme-ui-colors-lite:#eee;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}html.theme-ui-__default{--theme-ui-colors-primary:#307AC6;--theme-ui-colors-secondary:#27a727;--theme-ui-colors-background:#fff;--theme-ui-colors-text:#1b1e21;--theme-ui-colors-blue:#4169e1;--theme-ui-colors-cyan:#41b9e1;--theme-ui-colors-gray:#667788;--theme-ui-colors-green:#27a727;--theme-ui-colors-purple:#6941e1;--theme-ui-colors-orange:#fba100;--theme-ui-colors-pink:#e141b9;--theme-ui-colors-red:#ee5555;--theme-ui-colors-white:#fff;--theme-ui-colors-yellow:#FFDD22;--theme-ui-colors-lite:#eee;}html.theme-ui-dark{--theme-ui-colors-text:#fff;--theme-ui-colors-background:#292C34;--theme-ui-colors-lite:#333;--theme-ui-colors-primary:#85DEFB;}</style><style data-emotion="css-global 0"></style><style data-emotion="css 1td7120">.css-1td7120{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:100vh;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:auto;position:relative;max-width:800px;}</style><div class="css-1td7120"><style data-emotion="css eim2bq">.css-eim2bq{box-sizing:border-box;margin:0;min-width:0;padding:16px;position:absolute;top:0;right:0;opacity:0;-webkit-transition:opacity .25s ease-in-out;transition:opacity .25s ease-in-out;}</style><div class="css-eim2bq"><style data-emotion="css jakyet">.css-jakyet{box-sizing:border-box;margin:0;min-width:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;display:inline-block;text-align:center;line-height:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:inherit;padding-left:16px;padding-right:16px;padding-top:8px;padding-bottom:8px;color:var(--theme-ui-colors-white);background-color:var(--theme-ui-colors-primary);border:0;border-radius:4px;color:var(--theme-ui-colors-background);background-color:var(--theme-ui-colors-primary);background-color:var(--theme-ui-colors-gray);padding-top:4px;padding-bottom:4px;padding-left:8px;padding-right:8px;font-size:16px;cursor:pointer;}.css-jakyet:hover{background-color:var(--theme-ui-colors-text);}</style><button class="css-jakyet">light<!-- --> mode</button></div><style data-emotion="css 1doo0ju">.css-1doo0ju{box-sizing:border-box;margin:0;min-width:0;padding-top:32px;}</style><header class="css-1doo0ju"><style data-emotion="css 1n35gdr">.css-1n35gdr{box-sizing:border-box;margin:0;min-width:0;font-family:Montserrat,sans-serif;font-weight:900;line-height:1.1;font-size:30px;padding-bottom:32px;padding-left:16px;padding-right:16px;font-weight:900;}@media screen and (min-width: 32em){.css-1n35gdr{padding-left:32px;padding-right:32px;}}</style><h1 class="css-1n35gdr"><style data-emotion="css 1ie6k50">.css-1ie6k50{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-text);}</style><a href="/" class="css-1ie6k50">♾️ loophole letters</a></h1></header><style data-emotion="css td0gup">.css-td0gup{box-sizing:border-box;margin:0;min-width:0;padding-left:16px;padding-right:16px;padding-bottom:0;}@media screen and (min-width: 32em){.css-td0gup{padding-left:32px;padding-right:32px;}}</style><main class="css-td0gup"><style data-emotion="css vurnku">.css-vurnku{box-sizing:border-box;margin:0;min-width:0;}</style><article class="css-vurnku"><style data-emotion="css 1hep91p">.css-1hep91p{box-sizing:border-box;margin:0;min-width:0;float:right;}</style><div class="css-1hep91p"><style data-emotion="css 1f7qs6g">.css-1f7qs6g{box-sizing:border-box;margin:0;min-width:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;display:inline-block;text-align:center;line-height:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:inherit;padding-left:16px;padding-right:16px;padding-top:8px;padding-bottom:8px;color:var(--theme-ui-colors-white);background-color:var(--theme-ui-colors-primary);border:0;border-radius:4px;color:var(--theme-ui-colors-primary);border:1px solid var(--theme-ui-colors-primary);background-color:var(--theme-ui-colors-background);display:inline;margin-right:4px;}</style><button class="css-1f7qs6g">rhythmical</button><button class="css-1f7qs6g">code</button></div><style data-emotion="css 108j34h">.css-108j34h{box-sizing:border-box;margin:0;min-width:0;font-family:Montserrat,sans-serif;font-weight:900;line-height:1.1;font-size:40px;}</style><h2 class="css-108j34h">Rhythmical Mutations</h2><style data-emotion="css 188b938">.css-188b938{box-sizing:border-box;margin:0;min-width:0;font-family:'Merriweather','Georgia',serif;font-weight:400;line-height:1.75;margin-bottom:32px;color:var(--theme-ui-colors-gray);font-style:italic;}</style><p class="css-188b938">August 02, 2020</p><div class="css-vurnku"><style data-emotion="css 1i3mtem">.css-1i3mtem{font-size:16px;font-weight:400;line-height:1.75;font-family:'Merriweather','Georgia',serif;}</style><p class="css-1i3mtem">So far, rhythmical knows two ways of data transformation/mutation:</p>
<ol>
<style data-emotion="css 58pxoz">.css-58pxoz{font-family:'Merriweather','Georgia',serif;margin-bottom:14px;}</style><li class="css-58pxoz"><style data-emotion="css 1e6egy8">.css-1e6egy8{color:var(--theme-ui-colors-primary);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;}</style><a class="css-1e6egy8">plugins</a> as preprocessors</li>
<li class="css-58pxoz"><a class="css-1e6egy8">reducers</a> as postprocessors</li>
</ol>
<p class="css-1i3mtem">In this post, I want to develop the idea of mutation to allow more flexibility.</p>
<!-- -->
<style data-emotion="css 12ewxln">.css-12ewxln{box-sizing:border-box;margin:0;min-width:0;font-family:Montserrat,sans-serif;font-weight:900;line-height:1.1;margin-bottom:8px;margin-top:32px;}</style><h2 id="reducers" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Reducers</h2>
<p class="css-1i3mtem">With reducers, flat rhythmical events can be mutated after rendering:</p>
<pre class="language-js"><code class="language-js"><span class="token function">renderRhythmObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
  sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;d4&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;eb4&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;e4&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;f4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;_&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span><span class="token function">tieReducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// appends &quot;_&quot; event to &quot;f4&quot; event</span>
</code></pre>
<p class="css-1i3mtem">or</p>
<pre class="language-js"><code class="language-js"><span class="token function">renderRhythmObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
  sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;F&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span><span class="token function">voicings</span><span class="token punctuation">(</span>triads<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;C3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// generates notes in range for each chord symbol (implemented in last post)</span>
</code></pre>
<p class="css-1i3mtem">As a reducer runs, the previous state of the events is lost, for example, the chord symbols will be vanished after the voicing reducer.</p>
<h3 id="bass-reducer" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Bass Reducer</h3>
<p class="css-1i3mtem">As another example, I want to introduce this simple reducer:</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// reduces events to bass notes</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> bassNotes<span class="token operator">:</span> <span class="token function-variable function"><span class="token maybe-class-name">EventReducer</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">events<span class="token punctuation">,</span> event<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> event<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">!==</span> <span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> events<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> bassNote <span class="token operator">=</span> <span class="token function">getBassNote</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> events<span class="token punctuation">.</span><span class="token method function property-access">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token spread operator">...</span>event<span class="token punctuation">,</span> value<span class="token operator">:</span> bassNote <span class="token operator">+</span> <span class="token string">&#x27;2&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// returns bass note of given chord</span>
<span class="token keyword">function</span> <span class="token function">getBassNote</span><span class="token punctuation">(</span><span class="token parameter">chord<span class="token operator">:</span> string<span class="token punctuation">,</span> ignoreSlash <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>chord<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ignoreSlash <span class="token operator">&amp;&amp;</span> chord<span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> chord<span class="token punctuation">.</span><span class="token method function property-access">split</span><span class="token punctuation">(</span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> match <span class="token operator">=</span> chord<span class="token punctuation">.</span><span class="token method function property-access">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^([A-G][b|#]?)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>match <span class="token operator">||</span> <span class="token operator">!</span>match<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword control-flow">return</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p class="css-1i3mtem">It takes chord symbols and returns only the bass note in a fixed octave:</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="12.5" ry="12.5" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="174" width="300" height="24.5"></rect></g><g><rect rx="12.5" ry="12.5" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="50.5" width="150" height="24.5"></rect><rect rx="12.5" ry="12.5" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="1" width="150" height="24.5"></rect><rect rx="12.5" ry="12.5" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="174" width="300" height="24.5"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<details><summary>show source</summary><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  fold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythmObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;F&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span>bassNotes<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></details>
<p class="css-1i3mtem">I will improve this later, adding a range option + error handling..</p>
<h3 id="voicing-reducer" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Voicing Reducer</h3>
<p class="css-1i3mtem">Another reducer that works with chord symbols is the voicing reducer introduced <a class="css-1e6egy8">in the last post</a>.
I now removed the hard coded bass note from it.</p>
<p class="css-1i3mtem">If we run the voicings reducer on the same rhythm object, we get:</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="7.6923076923076925" ry="7.6923076923076925" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="122.5" width="300" height="15"></rect><rect rx="7.6923076923076925" ry="7.6923076923076925" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="77" width="300" height="15"></rect><rect rx="7.6923076923076925" ry="7.6923076923076925" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="1" width="300" height="15"></rect></g><g><rect rx="7.6923076923076925" ry="7.6923076923076925" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="183.5" width="150" height="15"></rect><rect rx="7.6923076923076925" ry="7.6923076923076925" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="107.5" width="150" height="15"></rect><rect rx="7.6923076923076925" ry="7.6923076923076925" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="46.5" width="150" height="15"></rect><rect rx="7.6923076923076925" ry="7.6923076923076925" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="153" width="150" height="15"></rect><rect rx="7.6923076923076925" ry="7.6923076923076925" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="77" width="150" height="15"></rect><rect rx="7.6923076923076925" ry="7.6923076923076925" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="16" width="150" height="15"></rect><rect rx="7.6923076923076925" ry="7.6923076923076925" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="122.5" width="300" height="15"></rect><rect rx="7.6923076923076925" ry="7.6923076923076925" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="77" width="300" height="15"></rect><rect rx="7.6923076923076925" ry="7.6923076923076925" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="1" width="300" height="15"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<details><summary>show source</summary><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  fold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythmObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;F&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span><span class="token function">voicings</span><span class="token punctuation">(</span>triads<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;C3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></details>
<h3 id="running-two-reducers-on-the-same-array" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Running two reducers on the same array</h3>
<p class="css-1i3mtem">To get chords + bassline, we could combine both reducers like this:</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="64" width="300" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="40.5" width="300" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="1" width="300" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="191" width="300" height="7.5"></rect></g><g><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="96" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="56" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="24.5" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="80" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="40.5" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="8.5" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="64" width="300" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="40.5" width="300" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="1" width="300" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="151" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="135.5" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="191" width="300" height="7.5"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<details><summary>show source</summary><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  fold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> events <span class="token operator">=</span> <span class="token function">renderRhythmObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;F&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span><span class="token spread operator">...</span>events<span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span><span class="token function">voicings</span><span class="token punctuation">(</span>triads<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;C3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token spread operator">...</span>events<span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span>bassNotes<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></details>
<p class="css-1i3mtem">But this is kind of ugly if we want to use a single function call (like needed for MDX), which requires wrapping it in an <a target="_blank" href="https://flaviocopes.com/javascript-iife/" class="css-1e6egy8">IIFE</a>.. It would be nice to have something like this:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  fold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythmObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;F&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">voicings</span><span class="token punctuation">(</span>triads<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;C3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bassNotes<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<p class="css-1i3mtem">The parallel reducer will run both reducers on the same events in parallel.</p>
<h3 id="parallel-reducer" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>parallel reducer</h3>
<p class="css-1i3mtem">The implementation is pretty straightforward:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">parallel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">reducers<span class="token operator">:</span> <span class="token maybe-class-name">EventReducer</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function-variable function"><span class="token maybe-class-name">EventReducer</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">reducers</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token parameter">events<span class="token punctuation">,</span> event<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    reducers<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
      events <span class="token operator">=</span> <span class="token function">r</span><span class="token punctuation">(</span>events<span class="token punctuation">,</span> event<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> events<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p class="css-1i3mtem">That&#x27;s it!</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="64" width="300" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="40.5" width="300" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="1" width="300" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="191" width="300" height="7.5"></rect></g><g><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="96" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="56" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="24.5" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="151" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="80" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="40.5" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="8.5" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="135.5" width="150" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="64" width="300" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="40.5" width="300" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="1" width="300" height="7.5"></rect><rect rx="4" ry="4" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="191" width="300" height="7.5"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<details><summary>show source</summary><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  fold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythmObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;F&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">voicings</span><span class="token punctuation">(</span>triads<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;C3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bassNotes<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></details>
<br/>
<p class="css-1i3mtem">Let&#x27;s try a more sophisticated example:</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="0" y="70.5" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="0" y="54.5" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="0" y="33" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="0" y="17" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="0" y="156" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="33" y="81" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="33" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="33" y="43.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="33" y="33" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="33" y="161.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="49.5" y="81" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="49.5" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="49.5" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="49.5" y="27.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="49.5" y="134.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="66" y="86.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="66" y="70.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="66" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="66" y="33" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="66" y="172" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="83" y="75.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="83" y="59.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="83" y="43.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="83" y="22" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="83" y="193.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="99.5" y="86.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="99.5" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="99.5" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="99.5" y="27.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="99.5" y="166.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="116" y="86.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="116" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="116" y="59.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="116" y="38" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="116" y="140" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="132.5" y="91.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="132.5" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="132.5" y="59.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="132.5" y="38" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="132.5" y="177.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="149.5" y="91.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="149.5" y="75.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="149.5" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="149.5" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="149.5" y="150.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="166" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="166" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="166" y="38" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="166" y="22" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="166" y="188" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="182.5" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="182.5" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="182.5" y="43.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="182.5" y="22" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="182.5" y="188" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="199" y="75.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="199" y="54.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="199" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="199" y="27.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="199" y="193.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="215.5" y="70.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="215.5" y="54.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="215.5" y="38" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="215.5" y="22" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="215.5" y="134.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="232.5" y="86.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="232.5" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="232.5" y="59.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="232.5" y="38" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="232.5" y="140" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="249" y="91.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="249" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="249" y="59.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="249" y="38" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="249" y="177.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="265.5" y="91.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="265.5" y="75.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="265.5" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="265.5" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="265.5" y="150.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="282" y="75.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="282" y="59.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="282" y="38" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="282" y="27.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="282" y="156" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="290.5" y="75.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="290.5" y="59.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="290.5" y="43.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="290.5" y="22" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="290.5" y="193.5" width="8" height="5"></rect></g><g><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="299" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="299" y="27.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="299" y="22" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="299" y="1" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="299" y="166.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="315.5" y="59.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="315.5" y="38" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="315.5" y="22" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="315.5" y="1" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="315.5" y="140" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="332" y="59.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="332" y="38" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="332" y="27.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="332" y="1" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="332" y="177.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="348.5" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="348.5" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="348.5" y="27.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="348.5" y="11.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="348.5" y="150.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="365" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="365" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="365" y="38" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="365" y="22" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="365" y="188" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="382" y="65" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="382" y="43.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="382" y="38" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="382" y="17" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="382" y="182.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="390" y="70.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="390" y="43.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="390" y="38" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="390" y="17" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="390" y="156" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="398.5" y="70.5" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="398.5" y="54.5" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="398.5" y="43.5" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="398.5" y="27.5" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="398.5" y="193.5" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="431.5" y="75.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="431.5" y="54.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="431.5" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="431.5" y="27.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="431.5" y="193.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="448.5" y="86.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="448.5" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="448.5" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="448.5" y="27.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="448.5" y="166.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="465" y="86.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="465" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="465" y="54.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="465" y="27.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="465" y="140" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="481.5" y="91.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="481.5" y="75.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="481.5" y="54.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="481.5" y="38" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="481.5" y="177.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="498" y="91.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="498" y="75.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="498" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="498" y="49" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="498" y="150.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="514.5" y="91.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="514.5" y="70.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="514.5" y="65" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="514.5" y="43.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="514.5" y="145" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="65" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="43.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="33" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="6" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="182.5" width="8" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="531.5" y="70.5" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="531.5" y="54.5" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="531.5" y="33" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="531.5" y="17" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="531.5" y="156" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="564.5" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="564.5" y="43.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="564.5" y="27.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="564.5" y="6" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="564.5" y="145" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="581" y="65" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="581" y="43.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="581" y="33" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="581" y="6" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="581" y="182.5" width="16.5" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="598" y="70.5" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="598" y="54.5" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="598" y="33" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="598" y="17" width="33" height="5"></rect><rect rx="2.7027027027027026" ry="2.7027027027027026" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="598" y="156" width="33" height="5"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<details><summary>show source</summary><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  fold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythmObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    duration<span class="token operator">:</span> <span class="token number">64</span><span class="token punctuation">,</span>
    sequential<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span><span class="token string">&#x27;Fm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Bbm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Eb7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Ab^7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">&#x27;Db^7&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;Dm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C^7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;_&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">&#x27;Cm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Fm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Bb7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Eb^7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">&#x27;Ab^7&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;Am7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;G^7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;_&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">&#x27;Am7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G^7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;_&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">&#x27;F#m7b5&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B7b9&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;E^7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;C7b13&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">&#x27;Fm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Bbm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Eb7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Ab^7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">&#x27;Db^7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;DbmM7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Cm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Bo7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">&#x27;Bbm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Eb7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Ab^7&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;Gm7b5&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;C7b9&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span><span class="token function">tieReducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">voicings</span><span class="token punctuation">(</span>lefthand<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G5&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bassNotes<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></details>
<br/>
<p class="css-1i3mtem">To make the parallel reducer work with voicings, I had to adjust the voicings reducer (see comments):</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">voicings</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dictionary<span class="token punctuation">,</span> range<span class="token punctuation">,</span> sorter <span class="token operator">=</span> topNoteSort</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">events<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> event<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">!==</span> <span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> events
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> voicings <span class="token operator">=</span> <span class="token function">voicingsInRange</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">,</span> dictionary<span class="token punctuation">,</span> range<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> tonic<span class="token punctuation">,</span> aliases <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token maybe-class-name">Chord</span><span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> symbol <span class="token operator">=</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span>dictionary<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token parameter">_symbol</span> <span class="token arrow operator">=&gt;</span> aliases<span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span>_symbol<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>symbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">no voicings found for chord &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>event<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> events<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> notes<span class="token punctuation">;</span>
  <span class="token comment">// here we filter the events for having a chord set (skips bass notes)</span>
  <span class="token keyword">const</span> lastVoiced <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token arrow operator">=&gt;</span> <span class="token operator">!</span><span class="token operator">!</span>e<span class="token punctuation">.</span><span class="token property-access">chord</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lastVoiced<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    notes <span class="token operator">=</span> voicings<span class="token punctuation">[</span><span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">ceil</span><span class="token punctuation">(</span>voicings<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
    notes <span class="token operator">=</span> voicings<span class="token punctuation">.</span><span class="token method function property-access">sort</span><span class="token punctuation">(</span><span class="token function">sorter</span><span class="token punctuation">(</span>lastVoiced<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// here we pass the chord symbol that generated the note</span>
  <span class="token keyword control-flow">return</span> events<span class="token punctuation">.</span><span class="token method function property-access">concat</span><span class="token punctuation">(</span>notes<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">note</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token spread operator">...</span>event<span class="token punctuation">,</span> value<span class="token operator">:</span> note<span class="token punctuation">,</span> chord<span class="token operator">:</span> event<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p class="css-1i3mtem">In general, to make a reducer work in parallel, we need to add some filterable property (like chord property above).
Without filtering, other events from parallel reducers will pollute the array (like bass notes in a voicing reducer).</p>
<h3 id="track-reducer" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>track reducer</h3>
<p class="css-1i3mtem">What if we want to run reducers only on a certain set of events? For example, if we add a melody, we want the voicing reducer to ignore that part. For this case, I wrote this track reducer:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">track</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">track<span class="token punctuation">,</span> reducer <span class="token operator">=</span> idleReducer</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">trackFilter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> track<span class="token operator">:</span> t <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> t <span class="token operator">===</span> track<span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token parameter">events<span class="token punctuation">,</span> event<span class="token punctuation">,</span> <span class="token spread operator">...</span>args</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token function">trackFilter</span><span class="token punctuation">(</span>event <span class="token keyword module">as</span> any<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">reducer</span><span class="token punctuation">(</span>events<span class="token punctuation">,</span> event<span class="token punctuation">,</span> <span class="token spread operator">...</span>args<span class="token punctuation">)</span> <span class="token operator">:</span> events<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// if no reducer passed to track, all events are used as is</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">idleReducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">events<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> events<span class="token punctuation">.</span><span class="token method function property-access">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p class="css-1i3mtem">In Action:</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="1" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="194" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="116.5" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="102" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="78" width="300" height="4.5"></rect></g><g><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="34.5" width="75" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="373.5" y="20" width="37.5" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="411" y="34.5" width="37.5" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="25" width="75" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="523" y="10.5" width="75" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="1" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="170" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="136" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="112" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="92.5" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="160" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="126.5" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="102" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="83" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="194" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="116.5" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="102" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="78" width="300" height="4.5"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<details><summary>show source</summary><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  fold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythmObject</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      parallel<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          track<span class="token operator">:</span> <span class="token string">&#x27;melody&#x27;</span><span class="token punctuation">,</span>
          sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;C5&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;B4&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D5&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;E5&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          track<span class="token operator">:</span> <span class="token string">&#x27;chords&#x27;</span><span class="token punctuation">,</span>
          sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;F&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">inheritProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;track&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span>
    <span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">track</span><span class="token punctuation">(</span><span class="token string">&#x27;melody&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">track</span><span class="token punctuation">(</span><span class="token string">&#x27;chords&#x27;</span><span class="token punctuation">,</span> bassNotes<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">track</span><span class="token punctuation">(</span><span class="token string">&#x27;chords&#x27;</span><span class="token punctuation">,</span> <span class="token function">voicings</span><span class="token punctuation">(</span>triads<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;C3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></details>
<p class="css-1i3mtem">Now the bassNotes and voicings reducers only run on events on the chords track, while the melody track stays as it is.</p>
<h3 id="mutation-inheritance" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Mutation Inheritance</h3>
<p class="css-1i3mtem">We could also inherit mutation functions:</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="1" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="116.5" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="102" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="78" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="194" width="300" height="4.5"></rect></g><g><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="34.5" width="75" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="373.5" y="20" width="37.5" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="411" y="34.5" width="37.5" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="25" width="75" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="523" y="10.5" width="75" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="1" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="136" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="112" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="92.5" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="170" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="126.5" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="102" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="83" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="160" width="150" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="116.5" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="102" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="78" width="300" height="4.5"></rect><rect rx="2.4390243902439024" ry="2.4390243902439024" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="194" width="300" height="4.5"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<details><summary>show source</summary><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  fold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythmObject</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      parallel<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;C5&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;B4&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D5&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;E5&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;F&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          reducer<span class="token operator">:</span> <span class="token function">parallel</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">voicings</span><span class="token punctuation">(</span>triads<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;C3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bassNotes<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">inheritProperty</span><span class="token punctuation">(</span><span class="token string">&#x27;reducer&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span><span class="token function">applyReducers</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token maybe-class-name">Note</span><span class="token punctuation">.</span><span class="token method function property-access">midi</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment">// filter out chords</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></details>
<br/>
<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">applyReducers</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">keepEventsWithoutReducer<span class="token operator">:</span> boolean</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function-variable function"><span class="token maybe-class-name">EventReducer</span></span> <span class="token operator">=</span>
  <span class="token punctuation">(</span><span class="token parameter">keepEventsWithoutReducer <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
  <span class="token punctuation">(</span><span class="token parameter">events<span class="token punctuation">,</span> event<span class="token punctuation">,</span> <span class="token spread operator">...</span>args</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token property-access">reducer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      events <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token method function property-access">reducer</span><span class="token punctuation">(</span>events<span class="token punctuation">,</span> event<span class="token punctuation">,</span> <span class="token spread operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>keepEventsWithoutReducer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> events<span class="token punctuation">.</span><span class="token method function property-access">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> events<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p class="css-1i3mtem">Pro</p>
<style data-emotion="css zoser8">.css-zoser8{padding-top:8px;}</style><ul class="css-zoser8">
<li class="css-58pxoz">no track reducer filter magic needed</li>
<li class="css-58pxoz">much shorter</li>
</ul>
<p class="css-1i3mtem">Contra</p>
<ul class="css-zoser8">
<li class="css-58pxoz">JS in JSON =&gt; not serializable</li>
<li class="css-58pxoz">chords pollute final event array =&gt; need to filter non usable events</li>
</ul>
<h3 id="thoughts-on-reducers" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Thoughts on Reducers</h3>
<p class="css-1i3mtem">Reducers are a handy way of postprocessing events. On the other hand, it starts to get a little bit magical and untransparent when having different purpose tracks and nesting...
Also, it seems kind of odd that there are now two hierarchial structures: the rhythmical object and the postprocessing tree.</p>
<h2 id="plugins" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Plugins</h2>
<p class="css-1i3mtem">As opposed to reducers, plugins (previously called <a class="css-1e6egy8">features</a>) are applied while the rhythmical tree is processed.
It would be nice if some of the above reducer functionality could be added as plugins, for example:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythmObject</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      parallel<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;C5&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;B4&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D5&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;E5&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          plugin<span class="token operator">:</span> <span class="token string">&#x27;chords&#x27;</span><span class="token punctuation">,</span>
          sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;F&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">inherit</span><span class="token punctuation">(</span><span class="token string">&#x27;plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">chords</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dictionary<span class="token operator">:</span> triads <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<p class="css-1i3mtem">The above snippet would produce the same output as this notation:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythmObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    parallel<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;C5&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;B4&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D5&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;E5&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        sequential<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;C3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;F3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A3&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;E3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;C4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<p class="css-1i3mtem">which can be rendered normally:</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="1" width="300" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="164.5" width="300" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="144" width="300" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="110" width="300" height="6.5"></rect></g><g><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="48.5" width="75" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="373.5" y="28" width="37.5" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="411" y="48.5" width="37.5" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="35" width="75" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="523" y="14.5" width="75" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="1" width="300" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="192" width="150" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="158" width="150" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="130.5" width="150" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="178.5" width="150" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="144" width="150" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="117" width="150" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="164.5" width="300" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="144" width="300" height="6.5"></rect><rect rx="3.4482758620689653" ry="3.4482758620689653" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="110" width="300" height="6.5"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<h3 id="back-to-the-basics" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>back to the basics</h3>
<p class="css-1i3mtem">For the above ideas to work, I first needed to add more flexibility to the <a target="_blank" href="https://felixroos.github.io/blog/rhythmical-objects/#flattening-nested-objects" class="css-1e6egy8">flatObject</a> method:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> flatObject<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>agnostic<span class="token operator">:</span> <span class="token maybe-class-name">AgnosticChild</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> props<span class="token operator">:</span> <span class="token maybe-class-name">FlatObjectProps</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">ValueChild</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> getChildren<span class="token operator">:</span> <span class="token maybe-class-name">ChildrenResolver</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token property-access">getChildren</span> <span class="token operator">||</span> getChildrenWithPath<span class="token punctuation">;</span>
  <span class="token comment">// this function decides if the given child should be flattened or not</span>
  <span class="token keyword">const</span> <span class="token function-variable function">isDeep</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">child<span class="token operator">:</span> <span class="token maybe-class-name">ValueChild</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> boolean <span class="token operator">=</span>
    props<span class="token punctuation">.</span><span class="token property-access">isDeep</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> child<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> child<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> flat<span class="token operator">:</span> <span class="token maybe-class-name">ValueChild</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> children <span class="token operator">=</span> <span class="token function">getChildren</span><span class="token punctuation">(</span>agnostic<span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  children<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">child<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> props<span class="token punctuation">.</span><span class="token property-access">mapChild</span> <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this function will mutate the child</span>
      child <span class="token operator">=</span> props<span class="token punctuation">.</span><span class="token method function property-access">mapChild</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        child<span class="token punctuation">,</span>
        isLeaf<span class="token operator">:</span> <span class="token operator">!</span><span class="token function">isDeep</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">,</span>
        index<span class="token punctuation">,</span>
        props<span class="token punctuation">,</span>
        siblings<span class="token operator">:</span> children<span class="token punctuation">,</span>
        parent<span class="token operator">:</span> agnostic<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token function">isDeep</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      flat <span class="token operator">=</span> flat<span class="token punctuation">.</span><span class="token method function property-access">concat</span><span class="token punctuation">(</span><span class="token function">flatObject</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
      flat<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> flat<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<ul class="css-zoser8">
<li class="css-58pxoz">isDeep can now be passed as a function to override the exit condition of the recursion</li>
<li class="css-58pxoz">mapChild can be used to manipulate children before the exit condition runs</li>
</ul>
<h3 id="new-renderrhythm-method" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>new renderRhythm method</h3>
<p class="css-1i3mtem">renderRhythmObject is now replaced by renderRhythm, which uses isDeep and mapChild:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> renderRhythm<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>agnostic<span class="token operator">:</span> <span class="token maybe-class-name">AgnosticChild</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> rhythmPlugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token function">toObject</span><span class="token punctuation">(</span>agnostic<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> totalDuration <span class="token operator">=</span> root<span class="token punctuation">.</span><span class="token property-access">duration</span> <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// outer duration</span>
  <span class="token keyword control-flow">return</span> <span class="token function">flatObject</span><span class="token punctuation">(</span>agnostic<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    getChildren<span class="token operator">:</span> rhythmChildren<span class="token punctuation">,</span>
    <span class="token comment">// dont stop recursion if child has parallel or sequential props</span>
    <span class="token function-variable function">isDeep</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
      <span class="token punctuation">[</span><span class="token string">&#x27;value&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;parallel&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;sequential&#x27;</span><span class="token punctuation">]</span> <span class="token comment">// this spares the sequential child mess from earlier</span>
        <span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">deep<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> deep <span class="token operator">||</span> <span class="token punctuation">(</span>child<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> child<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// apply features to children</span>
    mapChild<span class="token operator">:</span> <span class="token function">renderRhythmPlugins</span><span class="token punctuation">(</span>rhythmPlugins<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> path <span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>time<span class="token punctuation">,</span> duration<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getTimeDuration</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> totalDuration<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span>event<span class="token punctuation">,</span> time<span class="token punctuation">,</span> duration<span class="token punctuation">,</span> path <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">renderRhythmPlugins</span><span class="token punctuation">(</span><span class="token parameter">rhythmPlugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    rhythmPlugins<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">plugin</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
      props<span class="token punctuation">.</span><span class="token property-access">child</span> <span class="token operator">=</span> <span class="token function">plugin</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> props<span class="token punctuation">.</span><span class="token property-access">child</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> rhythmChildren<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>agnostic<span class="token operator">:</span> <span class="token maybe-class-name">AgnosticChild</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> parent <span class="token operator">=</span> <span class="token function">toObject</span><span class="token punctuation">(</span><span class="token function">applyFeatures</span><span class="token punctuation">(</span>agnostic<span class="token punctuation">,</span> <span class="token punctuation">[</span>sequentialParent<span class="token punctuation">,</span> parallelParent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> children <span class="token operator">=</span> <span class="token function">toArray</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> children<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="inherit-plugin" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>inherit plugin</h3>
<p class="css-1i3mtem">Now, plugins look much sexier than the old features. The <a target="_blank" href="https://felixroos.github.io/blog/rhythmical-objects/#inheritance" class="css-1e6egy8">inherit</a> plugin can be implemented like this:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">inherit</span><span class="token punctuation">(</span><span class="token parameter">property</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> child<span class="token punctuation">,</span> parent <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span>child<span class="token punctuation">,</span> <span class="token punctuation">[</span>property<span class="token punctuation">]</span><span class="token operator">:</span> child<span class="token punctuation">[</span>property<span class="token punctuation">]</span> <span class="token operator">??</span> parent<span class="token punctuation">[</span>property<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<details><summary>compare this to the old inheritProperty feature</summary><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">inheritProperty</span><span class="token punctuation">(</span><span class="token parameter">property</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token parameter">_parent</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> parent <span class="token operator">=</span> <span class="token function">toObject</span><span class="token punctuation">(</span>_parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>parent<span class="token punctuation">[</span>property<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token operator">!</span>parent<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> parent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
      <span class="token spread operator">...</span>parent<span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token function">toArray</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> childObj <span class="token operator">=</span> <span class="token function">toObject</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
          <span class="token spread operator">...</span>childObj<span class="token punctuation">,</span>
          <span class="token punctuation">[</span>property<span class="token punctuation">]</span><span class="token operator">:</span> childObj<span class="token punctuation">[</span>property<span class="token punctuation">]</span> <span class="token operator">||</span> parent<span class="token punctuation">[</span>property<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></details>
<br/>
<h3 id="chords-plugin" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>chords plugin</h3>
<p class="css-1i3mtem">Chord voicings can be resolved like this:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">chords</span> <span class="token operator">=</span>
  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> dictionary<span class="token punctuation">,</span> range <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> child<span class="token punctuation">,</span> isLeaf<span class="token punctuation">,</span> props<span class="token punctuation">,</span> parent <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLeaf <span class="token operator">||</span> parent<span class="token punctuation">.</span><span class="token property-access">chord</span> <span class="token operator">||</span> child<span class="token punctuation">.</span><span class="token property-access">plugin</span> <span class="token operator">!==</span> <span class="token string">&#x27;chords&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// prevent infinite loop</span>
      <span class="token keyword control-flow">return</span> child<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token function">voicingsInRange</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">,</span> child<span class="token punctuation">.</span><span class="token property-access">dictionary</span> <span class="token operator">||</span> dictionary<span class="token punctuation">,</span> child<span class="token punctuation">.</span><span class="token property-access">range</span> <span class="token operator">||</span> range<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span><span class="token property-access">lastVoicing</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// if not the first =&gt; voice leading</span>
      <span class="token keyword">const</span> diff <span class="token operator">=</span> <span class="token punctuation">(</span>
        voicing <span class="token comment">// returns distance between top notes</span>
      <span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
        <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">abs</span><span class="token punctuation">(</span><span class="token maybe-class-name">Note</span><span class="token punctuation">.</span><span class="token method function property-access">midi</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span><span class="token property-access">lastVoicing</span><span class="token punctuation">[</span>props<span class="token punctuation">.</span><span class="token property-access">lastVoicing</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token maybe-class-name">Note</span><span class="token punctuation">.</span><span class="token method function property-access">midi</span><span class="token punctuation">(</span>voicing<span class="token punctuation">[</span>voicing<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      options <span class="token operator">=</span> options<span class="token punctuation">.</span><span class="token method function property-access">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">diff</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">diff</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sort by min top note distance</span>
    <span class="token punctuation">}</span>
    props<span class="token punctuation">.</span><span class="token property-access">lastVoicing</span> <span class="token operator">=</span> options<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// pick best voicing</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
      <span class="token spread operator">...</span>child<span class="token punctuation">,</span>
      chord<span class="token operator">:</span> child<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">,</span> <span class="token comment">// this is needed to stop the plugin from running again on its children</span>
      value<span class="token operator">:</span> options<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&#x27;parallel&#x27;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p class="css-1i3mtem">In action:</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="darksalmon" x="0" y="48" width="300" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="189.5" width="300" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="161" width="300" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="114" width="300" height="9"></rect></g><g><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="darksalmon" x="299" y="29" width="75" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="darksalmon" x="373.5" y="1" width="75" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="darksalmon" x="448.5" y="38.5" width="75" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="darksalmon" x="523" y="1" width="75" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="darksalmon" x="598" y="48" width="300" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="180" width="150" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="142" width="150" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="114" width="150" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="180" width="150" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="151.5" width="150" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="114" width="150" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="189.5" width="300" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="161" width="300" height="9"></rect><rect rx="4.761904761904762" ry="4.761904761904762" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="114" width="300" height="9"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<details><summary>show source</summary><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  fold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythm</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      parallel<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;A4&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;C5&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Ab4&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;C5&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;G4&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          color<span class="token operator">:</span> <span class="token string">&#x27;darksalmon&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;F&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Fm&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          plugin<span class="token operator">:</span> <span class="token string">&#x27;chords&#x27;</span><span class="token punctuation">,</span>
          velocity<span class="token operator">:</span> <span class="token number">0.6</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">inherit</span><span class="token punctuation">(</span><span class="token string">&#x27;plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">inherit</span><span class="token punctuation">(</span><span class="token string">&#x27;color&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">inherit</span><span class="token punctuation">(</span><span class="token string">&#x27;velocity&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">chords</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dictionary<span class="token operator">:</span> triads <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></details>
<br/>
<h3 id="thoughts-on-plugins" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Thoughts on Plugins</h3>
<p class="css-1i3mtem">Comparing the above snippet with the reducer version, I like it much more.
The good thing about plugins is that the structural information of the object is not yet lost.
Being able to add a plugin anywhere in the tree spares all the indirect track selection stuff from earlier.</p>
<p class="css-1i3mtem">The only thing that is not yet solved is running two plugins on the same source, like voicings and bass notes.</p>
<h2 id="multiple-mutation-data-flow" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Multiple Mutation Data Flow</h2>
<p class="css-1i3mtem">There are different scenarios how data can flow through multiple mutations:</p>
<ol>
<li class="css-58pxoz">sequential: data flows out of one plugin into the nexxt</li>
<li class="css-58pxoz">parallel: data flows from the source into each plugin</li>
</ol>
<p class="css-1i3mtem">So this is basically polyphony for mutation functions!</p>
<h3 id="sequential-mutation" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>sequential mutation</h3>
<p class="css-1i3mtem">This applies one mutation after the other.
For example, we could first apply a voicing plugin and then use the generated notes as an input of a pattern plugin:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythm</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      duration<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;E-&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;E-&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B-&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B-&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      mutate<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// those mutations are applied sequentially</span>
        <span class="token string">&#x27;chords&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">chords</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dictionary<span class="token operator">:</span> triads <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> patternPlugin<span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<p class="css-1i3mtem">After only the chord mutation, it could sound like this:</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="0" y="185.5" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="0" y="133" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="0" y="67" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="0" y="27" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="74.5" y="185.5" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="74.5" y="133" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="74.5" y="67" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="74.5" y="27" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="149.5" y="185.5" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="149.5" y="133" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="149.5" y="93" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="149.5" y="27" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="224" y="185.5" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="224" y="133" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="224" y="93" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="224" y="27" width="75" height="13"></rect></g><g><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="159" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="119.5" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="67" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="1" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="373.5" y="159" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="373.5" y="119.5" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="373.5" y="67" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="373.5" y="1" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="185.5" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="119.5" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="67" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="27" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="185.5" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="119.5" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="67" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="27" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="598" y="185.5" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="598" y="133" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="598" y="67" width="75" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="598" y="27" width="75" height="13"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<p class="css-1i3mtem">Now only the pattern mutation is left:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    duration<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    sequential<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;E3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;E4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;E3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;E4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;F#3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;F#3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;F#3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;F#3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    mutate<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<p class="css-1i3mtem">After the pattern mutation:</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="0" y="185.5" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="0" y="27" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="18.5" y="67" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="37" y="133" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="37" y="27" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="56" y="67" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="74.5" y="185.5" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="74.5" y="27" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="93" y="67" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="112" y="133" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="112" y="27" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="130.5" y="67" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="149.5" y="185.5" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="149.5" y="27" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="168" y="93" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="186.5" y="133" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="186.5" y="27" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="205.5" y="93" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="224" y="185.5" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="224" y="27" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="242.5" y="93" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="261.5" y="133" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="261.5" y="27" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="280" y="93" width="18.5" height="13"></rect></g><g><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="159" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="1" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="317.5" y="67" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="336" y="119.5" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="336" y="1" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="355" y="67" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="373.5" y="159" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="373.5" y="1" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="392" y="67" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="411" y="119.5" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="411" y="1" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="429.5" y="67" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="185.5" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="27" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="467" y="67" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="485.5" y="119.5" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="485.5" y="27" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="504.5" y="67" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="185.5" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="27" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="541.5" y="67" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="560.5" y="119.5" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="560.5" y="27" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(55, 135, 192)" x="579" y="67" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="598" y="185.5" width="18.5" height="13"></rect><rect rx="6.666666666666667" ry="6.666666666666667" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="598" y="27" width="18.5" height="13"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    duration<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    sequential<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;E3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;E4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;E4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;E3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;E4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;E4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;F#3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;F#3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;B3&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;A3&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;F#3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;A3&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;D3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;A3&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;F#3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D4&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#x27;A3&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<h4 id="how-musicians-think" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>How musicians think</h4>
<p class="css-1i3mtem">If we look again at the notation:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythm</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;E-&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;E-&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B-&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B-&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      mutate<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// those mutations are applied sequentially</span>
        <span class="token string">&#x27;chords&#x27;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">chords</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dictionary<span class="token operator">:</span> triads <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> patternPlugin<span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<p class="css-1i3mtem">This is structurally similar to how a musician would remember a piece of music by creating &quot;chunks&quot;:</p>
<ul class="css-zoser8">
<li class="css-58pxoz">the info needed to play (render) the piece are abtract chunks of information (chord symbols)</li>
<li class="css-58pxoz">each abstract chunk has a recipe (mutation) that is applied to get to the notes</li>
<li class="css-58pxoz">by using mutations in a certain order, interesting results could be achieved quickly, which is good for algorithmic composition</li>
</ul>
<h3 id="parallel-mutation" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Parallel Mutation</h3>
<p class="css-1i3mtem">Parallel mutation will pass the same data to each plugin. For example to render chords and bass notes for a set of chord symbols:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  fold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythm</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      sequential<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;F&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Fm&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      mutate<span class="token operator">:</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;chords&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;bass&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">chords</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dictionary<span class="token operator">:</span> triads <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">bass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> octave<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<p class="css-1i3mtem">after mutation:</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="46" width="300" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="19" width="300" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="82" width="300" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="0" y="190" width="300" height="9"></rect></g><g><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="37" width="150" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="1" width="150" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="299" y="82" width="150" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="37" width="150" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="10" width="150" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="448.5" y="82" width="150" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="46" width="300" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="19" width="300" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="82" width="300" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="145" width="150" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="145" width="150" height="9"></rect><rect rx="4.545454545454546" ry="4.545454545454546" stroke="black" stroke-width="1" fill="rgb(109, 174, 213)" x="598" y="190" width="300" height="9"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  fold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    duration<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    parallel<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;F3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;A3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;C3&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;F3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Ab3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;C3&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> parallel<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;E3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;C3&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#x27;F2&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;F2&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C2&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<p class="css-1i3mtem">As this post now exceeds the limit of 1000 lines, I will stop here and implement polyphonic mutation in another post.</p>
<h2 id="conclusion" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>Conclusion</h2>
<p class="css-1i3mtem">With reducers and plugins, many musical abstractions can be achieved.
Some are more practical using reducers (like micro time adjustems e.g. swing), others are easier implemented using plugins (anything that needs structural info).</p>
<p class="css-1i3mtem">I cannot wait to finish the mutation data flow and play around with it!
When it&#x27;s done, many possibilities are open, like grooves, arpeggios, patterns, melodies etc..</p>
<svg width="600" height="200"><g style="transform:translateX(0px);will-change:transform"><g><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="140.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="105.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="59" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="0" y="24" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="16.5" y="140.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="16.5" y="105.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="16.5" y="59" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="16.5" y="24" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="33" y="164" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="33" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="33" y="82.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="33" y="59" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="49.5" y="164" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="49.5" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="49.5" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="49.5" y="47.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="66" y="175.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="66" y="140.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="66" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="66" y="59" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="83" y="152" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="83" y="117" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="83" y="82.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="83" y="35.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="99.5" y="175.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="99.5" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="99.5" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="99.5" y="47.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="116" y="175.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="116" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="116" y="117" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="116" y="70.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="132.5" y="187" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="132.5" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="132.5" y="117" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="132.5" y="70.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="149.5" y="187" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="149.5" y="152" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="149.5" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="149.5" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="166" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="166" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="166" y="70.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="166" y="35.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="182.5" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="182.5" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="182.5" y="82.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="182.5" y="35.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="199" y="152" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="199" y="105.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="199" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="199" y="47.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="215.5" y="140.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="215.5" y="105.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="215.5" y="70.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="215.5" y="35.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="232.5" y="175.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="232.5" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="232.5" y="117" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="232.5" y="70.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="249" y="187" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="249" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="249" y="117" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="249" y="70.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="265.5" y="187" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="265.5" y="152" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="265.5" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="265.5" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="282" y="152" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="282" y="117" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="282" y="70.5" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="282" y="47.5" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="290.5" y="152" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="290.5" y="117" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="290.5" y="82.5" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="290.5" y="35.5" width="8" height="11.5"></rect></g><g><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="175.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="299" y="47.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="315.5" y="175.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="315.5" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="315.5" y="117" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="315.5" y="70.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="332" y="187" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="332" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="332" y="117" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="332" y="70.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="348.5" y="187" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="348.5" y="152" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="348.5" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="348.5" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="365" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="365" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="365" y="70.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="365" y="35.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="382" y="129" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="382" y="82.5" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="382" y="70.5" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="382" y="24" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="390" y="140.5" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="390" y="82.5" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="390" y="70.5" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="390" y="24" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="398.5" y="140.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="398.5" y="105.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="398.5" y="82.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="398.5" y="47.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="415" y="140.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="415" y="105.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="415" y="82.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="415" y="47.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="431.5" y="152" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="431.5" y="105.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="431.5" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="431.5" y="47.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="175.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="448.5" y="47.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="465" y="175.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="465" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="465" y="105.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="465" y="47.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="481.5" y="187" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="481.5" y="152" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="481.5" y="105.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="481.5" y="70.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="498" y="187" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="498" y="152" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="498" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="498" y="94" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="514.5" y="187" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="514.5" y="140.5" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="514.5" y="129" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="514.5" y="82.5" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="129" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="82.5" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="59" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(8, 48, 107)" x="523" y="1" width="8" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="531.5" y="140.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="531.5" y="105.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="531.5" y="59" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="531.5" y="24" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="548" y="140.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="548" y="105.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="548" y="59" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="548" y="24" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="564.5" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="564.5" y="82.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="564.5" y="47.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="564.5" y="1" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="581" y="129" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="581" y="82.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="581" y="59" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="581" y="1" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="140.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="105.5" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="59" width="16.5" height="11.5"></rect><rect rx="5.882352941176471" ry="5.882352941176471" stroke="black" stroke-width="1" fill="rgb(34, 113, 180)" x="598" y="24" width="16.5" height="11.5"></rect></g><g></g></g><line x1="299" x2="299" y1="0" y2="200" stroke-width="2" stroke="black"></line></svg><div style="float:right"><button class="MuiButtonBase-root MuiFab-root MuiFab-primary" tabindex="0" type="button"><span class="MuiFab-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M8 5v14l11-7z"></path></svg></span></button></div><div style="clear:both"></div>
<details><summary>show source</summary><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token maybe-class-name">Player</span>
  instruments<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> tinypiano <span class="token punctuation">}</span><span class="token punctuation">}</span>
  fold<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
  events<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">renderRhythm</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      duration<span class="token operator">:</span> <span class="token number">64</span><span class="token punctuation">,</span>
      plugin<span class="token operator">:</span> <span class="token string">&#x27;chords&#x27;</span><span class="token punctuation">,</span>
      sequential<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token string">&#x27;Fm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Bbm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Eb7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Ab^7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">&#x27;Db^7&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;Dm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;C^7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;C^7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">&#x27;Cm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Fm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Bb7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Eb^7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">&#x27;Ab^7&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;Am7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#x27;G^7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G^7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">&#x27;Am7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;D7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G^7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G^7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">&#x27;F#m7b5&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;B7b9&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;E^7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;C7b13&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">&#x27;Fm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Bbm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Eb7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Ab^7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">&#x27;Db^7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;DbmM7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Cm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Bo7&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token string">&#x27;Bbm7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Eb7&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;Ab^7&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#x27;Gm7b5&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;C7b9&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">inherit</span><span class="token punctuation">(</span><span class="token string">&#x27;plugin&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">chords</span><span class="token punctuation">(</span><span class="token punctuation">{</span> dictionary<span class="token operator">:</span> lefthand<span class="token punctuation">,</span> range<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;G3&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;G5&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></details>
<br/>
<h3 id="tbd" class="css-12ewxln"><a aria-hidden="true" tabindex="-1" class="css-1e6egy8"><span class="icon icon-link"></span></a>TBD</h3>
<ul class="css-zoser8">
<li class="css-58pxoz">find way to implement tieReducer as plugin (cannot use ties in above)</li>
<li class="css-58pxoz">implement polyphonic mutations</li>
</ul></div></article></main><style data-emotion="css btp6j1">.css-btp6j1{box-sizing:border-box;margin:0;min-width:0;padding:32px;color:#666;text-align:center;font-size:18px;}</style><div class="css-btp6j1"><style data-emotion="css i57cvr">.css-i57cvr{box-sizing:border-box;margin:0;min-width:0;margin-left:16px;margin-right:16px;display:inline-block;}</style><span class="css-i57cvr">Created by <a href="https://github.com/felixroos" class="css-1e6egy8">Felix Roos</a></span></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Rhythmical Mutations","date":"2020-08-02","image":"./img/pianoroll-color.png","tags":["rhythmical","code"],"description":"In this post, I want to develop the idea of mutation to allow more flexibility."},"code":"var Component=(()=\u003e{var ZF=Object.create;var Sc=Object.defineProperty;var KF=Object.getOwnPropertyDescriptor;var QF=Object.getOwnPropertyNames;var JF=Object.getPrototypeOf,e7=Object.prototype.hasOwnProperty;var t7=(r,e,a)=\u003ee in r?Sc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a;var jN=r=\u003eSc(r,\"__esModule\",{value:!0});var v=(r,e)=\u003e()=\u003e(e||r((e={exports:{}}).exports,e),e.exports),n7=(r,e)=\u003e{jN(r);for(var a in e)Sc(r,a,{get:e[a],enumerable:!0})},r7=(r,e,a)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let s of QF(e))!e7.call(r,s)\u0026\u0026s!==\"default\"\u0026\u0026Sc(r,s,{get:()=\u003ee[s],enumerable:!(a=KF(e,s))||a.enumerable});return r},nt=r=\u003er7(jN(Sc(r!=null?ZF(JF(r)):{},\"default\",r\u0026\u0026r.__esModule\u0026\u0026\"default\"in r?{get:()=\u003er.default,enumerable:!0}:{value:r,enumerable:!0})),r);var DN=(r,e,a)=\u003e(t7(r,typeof e!=\"symbol\"?e+\"\":e,a),a);var FN=v((qpe,IN)=\u003e{IN.exports=_jsx_runtime});var WN=v((Tpe,VN)=\u003e{var a7=function(){return!1};VN.exports=a7});var km=v((Spe,LN)=\u003e{var s7=function(){return!0};LN.exports=s7});var Nm=v((Mpe,BN)=\u003e{BN.exports={\"@@functional/placeholder\":!0}});var Mc=v((Ppe,zN)=\u003e{function i7(r){return r!=null\u0026\u0026typeof r==\"object\"\u0026\u0026r[\"@@functional/placeholder\"]===!0}zN.exports=i7});var Ve=v((Ope,GN)=\u003e{var o7=Mc();function c7(r){return function e(a){return arguments.length===0||o7(a)?e:r.apply(this,arguments)}}GN.exports=c7});var ne=v((Cpe,UN)=\u003e{var bm=Ve(),Pc=Mc();function u7(r){return function e(a,s){switch(arguments.length){case 0:return e;case 1:return Pc(a)?e:bm(function(o){return r(a,o)});default:return Pc(a)\u0026\u0026Pc(s)?e:Pc(a)?bm(function(o){return r(o,s)}):Pc(s)?bm(function(o){return r(a,o)}):r(a,s)}}}UN.exports=u7});var Oc=v((Ape,$N)=\u003e{var l7=ne(),p7=l7(function(e,a){return Number(e)+Number(a)});$N.exports=p7});var br=v((Rpe,HN)=\u003e{function h7(r,e){r=r||[],e=e||[];var a,s=r.length,o=e.length,u=[];for(a=0;a\u003cs;)u[u.length]=r[a],a+=1;for(a=0;a\u003co;)u[u.length]=e[a],a+=1;return u}HN.exports=h7});var xr=v((Epe,YN)=\u003e{function d7(r,e){switch(r){case 0:return function(){return e.apply(this,arguments)};case 1:return function(a){return e.apply(this,arguments)};case 2:return function(a,s){return e.apply(this,arguments)};case 3:return function(a,s,o){return e.apply(this,arguments)};case 4:return function(a,s,o,u){return e.apply(this,arguments)};case 5:return function(a,s,o,u,h){return e.apply(this,arguments)};case 6:return function(a,s,o,u,h,f){return e.apply(this,arguments)};case 7:return function(a,s,o,u,h,f,y){return e.apply(this,arguments)};case 8:return function(a,s,o,u,h,f,y,k){return e.apply(this,arguments)};case 9:return function(a,s,o,u,h,f,y,k,q){return e.apply(this,arguments)};case 10:return function(a,s,o,u,h,f,y,k,q,x){return e.apply(this,arguments)};default:throw new Error(\"First argument to _arity must be a non-negative integer no greater than ten\")}}YN.exports=d7});var Cc=v((jpe,KN)=\u003e{var f7=xr(),XN=Mc();function ZN(r,e,a){return function(){for(var s=[],o=0,u=r,h=0;h\u003ce.length||o\u003carguments.length;){var f;h\u003ce.length\u0026\u0026(!XN(e[h])||o\u003e=arguments.length)?f=e[h]:(f=arguments[o],o+=1),s[h]=f,XN(f)||(u-=1),h+=1}return u\u003c=0?a.apply(this,s):f7(u,ZN(r,s,a))}}KN.exports=ZN});var hn=v((Dpe,QN)=\u003e{var m7=xr(),v7=Ve(),g7=ne(),y7=Cc(),_7=g7(function(e,a){return e===1?v7(a):m7(e,y7(e,[],a))});QN.exports=_7});var eb=v((Ipe,JN)=\u003e{var k7=br(),N7=Ve(),b7=hn(),x7=N7(function(e){return b7(e.length,function(){var a=0,s=arguments[0],o=arguments[arguments.length-1],u=Array.prototype.slice.call(arguments,0);return u[0]=function(){var h=s.apply(this,k7(arguments,[a,o]));return a+=1,h},e.apply(this,u)})});JN.exports=x7});var Xe=v((Fpe,tb)=\u003e{var Sp=Ve(),lo=ne(),wn=Mc();function w7(r){return function e(a,s,o){switch(arguments.length){case 0:return e;case 1:return wn(a)?e:lo(function(u,h){return r(a,u,h)});case 2:return wn(a)\u0026\u0026wn(s)?e:wn(a)?lo(function(u,h){return r(u,s,h)}):wn(s)?lo(function(u,h){return r(a,u,h)}):Sp(function(u){return r(a,s,u)});default:return wn(a)\u0026\u0026wn(s)\u0026\u0026wn(o)?e:wn(a)\u0026\u0026wn(s)?lo(function(u,h){return r(u,h,o)}):wn(a)\u0026\u0026wn(o)?lo(function(u,h){return r(u,s,h)}):wn(s)\u0026\u0026wn(o)?lo(function(u,h){return r(a,u,h)}):wn(a)?Sp(function(u){return r(u,s,o)}):wn(s)?Sp(function(u){return r(a,u,o)}):wn(o)?Sp(function(u){return r(a,s,u)}):r(a,s,o)}}}tb.exports=w7});var xm=v((Vpe,nb)=\u003e{var q7=br(),T7=Xe(),S7=T7(function(e,a,s){if(e\u003e=s.length||e\u003c-s.length)return s;var o=e\u003c0?s.length:0,u=o+e,h=q7(s);return h[u]=a(s[u]),h});nb.exports=S7});var ra=v((Wpe,rb)=\u003e{rb.exports=Array.isArray||function(e){return e!=null\u0026\u0026e.length\u003e=0\u0026\u0026Object.prototype.toString.call(e)===\"[object Array]\"}});var Mp=v((Lpe,ab)=\u003e{function M7(r){return r!=null\u0026\u0026typeof r[\"@@transducer/step\"]==\"function\"}ab.exports=M7});var Yt=v((Bpe,sb)=\u003e{var P7=ra(),O7=Mp();function C7(r,e,a){return function(){if(arguments.length===0)return a();var s=Array.prototype.slice.call(arguments,0),o=s.pop();if(!P7(o)){for(var u=0;u\u003cr.length;){if(typeof o[r[u]]==\"function\")return o[r[u]].apply(o,s);u+=1}if(O7(o)){var h=e.apply(null,s);return h(o)}}return a.apply(this,arguments)}}sb.exports=C7});var Ma=v((zpe,ib)=\u003e{function A7(r){return r\u0026\u0026r[\"@@transducer/reduced\"]?r:{\"@@transducer/value\":r,\"@@transducer/reduced\":!0}}ib.exports=A7});var Jt=v((Gpe,ob)=\u003e{ob.exports={init:function(){return this.xf[\"@@transducer/init\"]()},result:function(r){return this.xf[\"@@transducer/result\"](r)}}});var ub=v((Upe,cb)=\u003e{var R7=ne(),E7=Ma(),j7=Jt(),D7=function(){function r(e,a){this.xf=a,this.f=e,this.all=!0}return r.prototype[\"@@transducer/init\"]=j7.init,r.prototype[\"@@transducer/result\"]=function(e){return this.all\u0026\u0026(e=this.xf[\"@@transducer/step\"](e,!0)),this.xf[\"@@transducer/result\"](e)},r.prototype[\"@@transducer/step\"]=function(e,a){return this.f(a)||(this.all=!1,e=E7(this.xf[\"@@transducer/step\"](e,!1))),e},r}(),I7=R7(function(e,a){return new D7(e,a)});cb.exports=I7});var wm=v(($pe,lb)=\u003e{var F7=ne(),V7=Yt(),W7=ub(),L7=F7(V7([\"all\"],W7,function(e,a){for(var s=0;s\u003ca.length;){if(!e(a[s]))return!1;s+=1}return!0}));lb.exports=L7});var zs=v((Hpe,pb)=\u003e{var B7=ne(),z7=B7(function(e,a){return a\u003ee?a:e});pb.exports=z7});var Ac=v((Ype,hb)=\u003e{function G7(r,e){for(var a=0,s=e.length,o=Array(s);a\u003cs;)o[a]=r(e[a]),a+=1;return o}hb.exports=G7});var po=v((Xpe,db)=\u003e{function U7(r){return Object.prototype.toString.call(r)===\"[object String]\"}db.exports=U7});var Rc=v((Zpe,fb)=\u003e{var $7=Ve(),H7=ra(),Y7=po(),X7=$7(function(e){return H7(e)?!0:!e||typeof e!=\"object\"||Y7(e)?!1:e.nodeType===1?!!e.length:e.length===0?!0:e.length\u003e0?e.hasOwnProperty(0)\u0026\u0026e.hasOwnProperty(e.length-1):!1});fb.exports=X7});var qm=v((Kpe,mb)=\u003e{var Z7=function(){function r(e){this.f=e}return r.prototype[\"@@transducer/init\"]=function(){throw new Error(\"init not implemented on XWrap\")},r.prototype[\"@@transducer/result\"]=function(e){return e},r.prototype[\"@@transducer/step\"]=function(e,a){return this.f(e,a)},r}();function K7(r){return new Z7(r)}mb.exports=K7});var Tm=v((Qpe,vb)=\u003e{var Q7=xr(),J7=ne(),eV=J7(function(e,a){return Q7(e.length,function(){return e.apply(a,arguments)})});vb.exports=eV});var Gn=v((Jpe,kb)=\u003e{var tV=Rc(),nV=qm(),rV=Tm();function aV(r,e,a){for(var s=0,o=a.length;s\u003co;){if(e=r[\"@@transducer/step\"](e,a[s]),e\u0026\u0026e[\"@@transducer/reduced\"]){e=e[\"@@transducer/value\"];break}s+=1}return r[\"@@transducer/result\"](e)}function gb(r,e,a){for(var s=a.next();!s.done;){if(e=r[\"@@transducer/step\"](e,s.value),e\u0026\u0026e[\"@@transducer/reduced\"]){e=e[\"@@transducer/value\"];break}s=a.next()}return r[\"@@transducer/result\"](e)}function yb(r,e,a,s){return r[\"@@transducer/result\"](a[s](rV(r[\"@@transducer/step\"],r),e))}var _b=typeof Symbol!=\"undefined\"?Symbol.iterator:\"@@iterator\";function sV(r,e,a){if(typeof r==\"function\"\u0026\u0026(r=nV(r)),tV(a))return aV(r,e,a);if(typeof a[\"fantasy-land/reduce\"]==\"function\")return yb(r,e,a,\"fantasy-land/reduce\");if(a[_b]!=null)return gb(r,e,a[_b]());if(typeof a.next==\"function\")return gb(r,e,a);if(typeof a.reduce==\"function\")return yb(r,e,a,\"reduce\");throw new TypeError(\"reduce: list must be array or iterable\")}kb.exports=sV});var xb=v((ehe,bb)=\u003e{var iV=ne(),Nb=Jt(),oV=function(){function r(e,a){this.xf=a,this.f=e}return r.prototype[\"@@transducer/init\"]=Nb.init,r.prototype[\"@@transducer/result\"]=Nb.result,r.prototype[\"@@transducer/step\"]=function(e,a){return this.xf[\"@@transducer/step\"](e,this.f(a))},r}(),cV=iV(function(e,a){return new oV(e,a)});bb.exports=cV});var Un=v((the,wb)=\u003e{function uV(r,e){return Object.prototype.hasOwnProperty.call(e,r)}wb.exports=uV});var Sm=v((nhe,Tb)=\u003e{var lV=Un(),qb=Object.prototype.toString,pV=function(){return qb.call(arguments)===\"[object Arguments]\"?function(e){return qb.call(e)===\"[object Arguments]\"}:function(e){return lV(\"callee\",e)}}();Tb.exports=pV});var wr=v((rhe,Cb)=\u003e{var Sb=Ve(),Mb=Un(),hV=Sm(),dV=!{toString:null}.propertyIsEnumerable(\"toString\"),Pb=[\"constructor\",\"valueOf\",\"isPrototypeOf\",\"toString\",\"propertyIsEnumerable\",\"hasOwnProperty\",\"toLocaleString\"],Ob=function(){\"use strict\";return arguments.propertyIsEnumerable(\"length\")}(),fV=function(e,a){for(var s=0;s\u003ce.length;){if(e[s]===a)return!0;s+=1}return!1},mV=typeof Object.keys==\"function\"\u0026\u0026!Ob?Sb(function(e){return Object(e)!==e?[]:Object.keys(e)}):Sb(function(e){if(Object(e)!==e)return[];var a,s,o=[],u=Ob\u0026\u0026hV(e);for(a in e)Mb(a,e)\u0026\u0026(!u||a!==\"length\")\u0026\u0026(o[o.length]=a);if(dV)for(s=Pb.length-1;s\u003e=0;)a=Pb[s],Mb(a,e)\u0026\u0026!fV(o,a)\u0026\u0026(o[o.length]=a),s-=1;return o});Cb.exports=mV});var cr=v((ahe,Ab)=\u003e{var vV=ne(),gV=Yt(),yV=Ac(),_V=Gn(),kV=xb(),NV=hn(),bV=wr(),xV=vV(gV([\"fantasy-land/map\",\"map\"],kV,function(e,a){switch(Object.prototype.toString.call(a)){case\"[object Function]\":return NV(a.length,function(){return e.call(this,a.apply(this,arguments))});case\"[object Object]\":return _V(function(s,o){return s[o]=e(a[o]),s},{},bV(a));default:return yV(e,a)}}));Ab.exports=xV});var Ec=v((she,Rb)=\u003e{Rb.exports=Number.isInteger||function(e){return e\u003c\u003c0===e}});var Gs=v((ihe,Eb)=\u003e{var wV=ne(),qV=po(),TV=wV(function(e,a){var s=e\u003c0?a.length+e:e;return qV(a)?a.charAt(s):a[s]});Eb.exports=TV});var Mm=v((ohe,jb)=\u003e{var SV=ne(),MV=Ec(),PV=Gs(),OV=SV(function(e,a){return e.map(function(s){for(var o=a,u=0,h;u\u003cs.length;){if(o==null)return;h=s[u],o=MV(h)?PV(h,o):o[h],u+=1}return o})});jb.exports=OV});var as=v((che,Db)=\u003e{var CV=ne(),AV=Mm(),RV=CV(function(e,a){return AV([e],a)[0]});Db.exports=RV});var jc=v((uhe,Ib)=\u003e{var EV=ne(),jV=as(),DV=EV(function(e,a){return jV([e],a)});Ib.exports=DV});var ho=v((lhe,Fb)=\u003e{var IV=ne(),FV=cr(),VV=jc(),WV=IV(function(e,a){return FV(VV(e),a)});Fb.exports=WV});var Lr=v((phe,Vb)=\u003e{var LV=Xe(),BV=Gn(),zV=LV(BV);Vb.exports=zV});var Lb=v((hhe,Wb)=\u003e{var GV=Ve(),UV=hn(),$V=zs(),HV=ho(),YV=Lr(),XV=GV(function(e){return UV(YV($V,0,HV(\"length\",e)),function(){for(var a=0,s=e.length;a\u003cs;){if(!e[a].apply(this,arguments))return!1;a+=1}return!0})});Wb.exports=XV});var fo=v((dhe,Bb)=\u003e{var ZV=Ve(),KV=ZV(function(e){return function(){return e}});Bb.exports=KV});var Pm=v((fhe,zb)=\u003e{var QV=ne(),JV=QV(function(e,a){return e\u0026\u0026a});zb.exports=JV});var Ub=v((mhe,Gb)=\u003e{var e4=ne(),t4=Ma(),n4=Jt(),r4=function(){function r(e,a){this.xf=a,this.f=e,this.any=!1}return r.prototype[\"@@transducer/init\"]=n4.init,r.prototype[\"@@transducer/result\"]=function(e){return this.any||(e=this.xf[\"@@transducer/step\"](e,!1)),this.xf[\"@@transducer/result\"](e)},r.prototype[\"@@transducer/step\"]=function(e,a){return this.f(a)\u0026\u0026(this.any=!0,e=t4(this.xf[\"@@transducer/step\"](e,!0))),e},r}(),a4=e4(function(e,a){return new r4(e,a)});Gb.exports=a4});var Hb=v((vhe,$b)=\u003e{var s4=ne(),i4=Yt(),o4=Ub(),c4=s4(i4([\"any\"],o4,function(e,a){for(var s=0;s\u003ca.length;){if(e(a[s]))return!0;s+=1}return!1}));$b.exports=c4});var Xb=v((ghe,Yb)=\u003e{var u4=Ve(),l4=hn(),p4=zs(),h4=ho(),d4=Lr(),f4=u4(function(e){return l4(d4(p4,0,h4(\"length\",e)),function(){for(var a=0,s=e.length;a\u003cs;){if(e[a].apply(this,arguments))return!0;a+=1}return!1})});Yb.exports=f4});var Pp=v((yhe,Zb)=\u003e{var m4=br(),v4=ne(),g4=Gn(),y4=cr(),_4=v4(function(e,a){return typeof a[\"fantasy-land/ap\"]==\"function\"?a[\"fantasy-land/ap\"](e):typeof e.ap==\"function\"?e.ap(a):typeof e==\"function\"?function(s){return e(s)(a(s))}:g4(function(s,o){return m4(s,y4(o,a))},[],e)});Zb.exports=_4});var Qb=v((_he,Kb)=\u003e{function k4(r,e){for(var a=0,s=e.length-(r-1),o=new Array(s\u003e=0?s:0);a\u003cs;)o[a]=Array.prototype.slice.call(e,a,a+r),a+=1;return o}Kb.exports=k4});var ex=v((khe,Jb)=\u003e{var N4=br(),b4=ne(),x4=Jt(),w4=function(){function r(e,a){this.xf=a,this.pos=0,this.full=!1,this.acc=new Array(e)}return r.prototype[\"@@transducer/init\"]=x4.init,r.prototype[\"@@transducer/result\"]=function(e){return this.acc=null,this.xf[\"@@transducer/result\"](e)},r.prototype[\"@@transducer/step\"]=function(e,a){return this.store(a),this.full?this.xf[\"@@transducer/step\"](e,this.getCopy()):e},r.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length\u0026\u0026(this.pos=0,this.full=!0)},r.prototype.getCopy=function(){return N4(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},r}(),q4=b4(function(e,a){return new w4(e,a)});Jb.exports=q4});var nx=v((Nhe,tx)=\u003e{var T4=Qb(),S4=ne(),M4=Yt(),P4=ex(),O4=S4(M4([],P4,T4));tx.exports=O4});var ax=v((bhe,rx)=\u003e{var C4=br(),A4=ne(),R4=A4(function(e,a){return C4(a,[e])});rx.exports=R4});var Om=v((xhe,sx)=\u003e{var E4=ne(),j4=E4(function(e,a){return e.apply(this,a)});sx.exports=j4});var Cm=v((whe,ix)=\u003e{var D4=Ve(),I4=wr(),F4=D4(function(e){for(var a=I4(e),s=a.length,o=[],u=0;u\u003cs;)o[u]=e[a[u]],u+=1;return o});ix.exports=F4});var ux=v((qhe,cx)=\u003e{var V4=Ve(),W4=Om(),L4=hn(),B4=zs(),z4=ho(),G4=Lr(),U4=wr(),$4=Cm();function ox(r,e){return U4(e).reduce(function(a,s){return a[s]=r(e[s]),a},{})}var H4=V4(function r(e){return e=ox(function(a){return typeof a==\"function\"?a:r(a)},e),L4(G4(B4,0,z4(\"length\",$4(e))),function(){var a=arguments;return ox(function(s){return W4(s,a)},e)})});cx.exports=H4});var px=v((The,lx)=\u003e{var Y4=ne(),X4=Y4(function(e,a){return a(e)});lx.exports=X4});var dx=v((She,hx)=\u003e{var Z4=Xe(),K4=Z4(function(e,a,s){var o=e(a),u=e(s);return o\u003cu?-1:o\u003eu?1:0});hx.exports=K4});var mo=v((Mhe,fx)=\u003e{var Q4=Xe(),J4=Q4(function(e,a,s){var o={};for(var u in s)o[u]=s[u];return o[e]=a,o});fx.exports=J4});var Op=v((Phe,mx)=\u003e{var eW=Ve(),tW=eW(function(e){return e==null});mx.exports=tW});var Am=v((Ohe,gx)=\u003e{var nW=Xe(),rW=Un(),aW=ra(),vx=Ec(),sW=mo(),iW=Op(),oW=nW(function r(e,a,s){if(e.length===0)return a;var o=e[0];if(e.length\u003e1){var u=!iW(s)\u0026\u0026rW(o,s)?s[o]:vx(e[1])?[]:{};a=r(Array.prototype.slice.call(e,1),a,u)}if(vx(o)\u0026\u0026aW(s)){var h=[].concat(s);return h[o]=a,h}else return sW(o,a,s)});gx.exports=oW});var Dc=v((Che,yx)=\u003e{var cW=ne(),uW=cW(function(e,a){switch(e){case 0:return function(){return a.call(this)};case 1:return function(s){return a.call(this,s)};case 2:return function(s,o){return a.call(this,s,o)};case 3:return function(s,o,u){return a.call(this,s,o,u)};case 4:return function(s,o,u,h){return a.call(this,s,o,u,h)};case 5:return function(s,o,u,h,f){return a.call(this,s,o,u,h,f)};case 6:return function(s,o,u,h,f,y){return a.call(this,s,o,u,h,f,y)};case 7:return function(s,o,u,h,f,y,k){return a.call(this,s,o,u,h,f,y,k)};case 8:return function(s,o,u,h,f,y,k,q){return a.call(this,s,o,u,h,f,y,k,q)};case 9:return function(s,o,u,h,f,y,k,q,x){return a.call(this,s,o,u,h,f,y,k,q,x)};case 10:return function(s,o,u,h,f,y,k,q,x,M){return a.call(this,s,o,u,h,f,y,k,q,x,M)};default:throw new Error(\"First argument to nAry must be a non-negative integer no greater than ten\")}});yx.exports=uW});var kx=v((Ahe,_x)=\u003e{var lW=Ve(),pW=Dc(),hW=lW(function(e){return pW(2,e)});_x.exports=hW});var vo=v((Rhe,Nx)=\u003e{function dW(r){var e=Object.prototype.toString.call(r);return e===\"[object Function]\"||e===\"[object AsyncFunction]\"||e===\"[object GeneratorFunction]\"||e===\"[object AsyncGeneratorFunction]\"}Nx.exports=dW});var Rm=v((Ehe,xx)=\u003e{var fW=ne(),mW=Gn(),vW=Pp(),bx=hn(),gW=cr(),yW=fW(function(e,a){var s=bx(e,a);return bx(e,function(){return mW(vW,gW(s,arguments[0]),Array.prototype.slice.call(arguments,1))})});xx.exports=yW});var Ic=v((jhe,wx)=\u003e{var _W=Ve(),kW=Rm(),NW=_W(function(e){return kW(e.length,e)});wx.exports=NW});var Tx=v((Dhe,qx)=\u003e{var bW=ne(),xW=vo(),wW=Pm(),qW=Ic(),TW=bW(function(e,a){return xW(e)?function(){return e.apply(this,arguments)\u0026\u0026a.apply(this,arguments)}:qW(wW)(e,a)});qx.exports=TW});var ss=v((Ihe,Sx)=\u003e{var SW=Ve(),MW=hn(),PW=SW(function(e){return MW(e.length,e)});Sx.exports=PW});var Em=v((Fhe,Mx)=\u003e{var OW=ss(),CW=OW(function(e){return e.apply(this,Array.prototype.slice.call(arguments,1))});Mx.exports=CW});var jm=v((Vhe,Px)=\u003e{var AW=Rc();function RW(r){return function e(a){for(var s,o,u,h=[],f=0,y=a.length;f\u003cy;){if(AW(a[f]))for(s=r?e(a[f]):a[f],u=0,o=s.length;u\u003co;)h[h.length]=s[u],u+=1;else h[h.length]=a[f];f+=1}return h}}Px.exports=RW});var Cx=v((Whe,Ox)=\u003e{function EW(r){return{\"@@transducer/value\":r,\"@@transducer/reduced\":!0}}Ox.exports=EW});var jx=v((Lhe,Ex)=\u003e{var jW=Cx(),DW=Rc(),Ax=Gn(),Rx=Jt(),IW=function(r){return{\"@@transducer/init\":Rx.init,\"@@transducer/result\":function(e){return r[\"@@transducer/result\"](e)},\"@@transducer/step\":function(e,a){var s=r[\"@@transducer/step\"](e,a);return s[\"@@transducer/reduced\"]?jW(s):s}}},FW=function(e){var a=IW(e);return{\"@@transducer/init\":Rx.init,\"@@transducer/result\":function(s){return a[\"@@transducer/result\"](s)},\"@@transducer/step\":function(s,o){return DW(o)?Ax(a,s,o):Ax(a,s,[o])}}};Ex.exports=FW});var Ix=v((Bhe,Dx)=\u003e{var VW=ne(),WW=jx(),LW=cr(),BW=VW(function(e,a){return LW(e,WW(a))});Dx.exports=BW});var Cp=v((zhe,Fx)=\u003e{var zW=ne(),GW=Yt(),UW=jm(),$W=Ix(),HW=cr(),YW=zW(GW([\"fantasy-land/chain\",\"chain\"],$W,function(e,a){return typeof a==\"function\"?function(s){return e(a(s))(s)}:UW(!1)(HW(e,a))}));Fx.exports=YW});var Wx=v((Ghe,Vx)=\u003e{var XW=Xe(),ZW=XW(function(e,a,s){if(e\u003ea)throw new Error(\"min must not be greater than max in clamp(min, max, value)\");return s\u003ce?e:s\u003ea?a:s});Vx.exports=ZW});var Dm=v((Uhe,Lx)=\u003e{function KW(r){return new RegExp(r.source,(r.global?\"g\":\"\")+(r.ignoreCase?\"i\":\"\")+(r.multiline?\"m\":\"\")+(r.sticky?\"y\":\"\")+(r.unicode?\"u\":\"\"))}Lx.exports=KW});var Ap=v(($he,Bx)=\u003e{var QW=Ve(),JW=QW(function(e){return e===null?\"Null\":e===void 0?\"Undefined\":Object.prototype.toString.call(e).slice(8,-1)});Bx.exports=JW});var Rp=v((Hhe,Gx)=\u003e{var eL=Dm(),tL=Ap();function zx(r,e,a,s){var o=function(h){for(var f=e.length,y=0;y\u003cf;){if(r===e[y])return a[y];y+=1}e[y+1]=r,a[y+1]=h;for(var k in r)h[k]=s?zx(r[k],e,a,!0):r[k];return h};switch(tL(r)){case\"Object\":return o({});case\"Array\":return o([]);case\"Date\":return new Date(r.valueOf());case\"RegExp\":return eL(r);default:return r}}Gx.exports=zx});var $x=v((Yhe,Ux)=\u003e{var nL=Rp(),rL=Ve(),aL=rL(function(e){return e!=null\u0026\u0026typeof e.clone==\"function\"?e.clone():nL(e,[],[],!0)});Ux.exports=aL});var Yx=v((Xhe,Hx)=\u003e{var sL=Ve(),iL=sL(function(e){return function(a,s){return e(a,s)?-1:e(s,a)?1:0}});Hx.exports=iL});var Im=v((Zhe,Xx)=\u003e{var oL=Ve(),cL=oL(function(e){return!e});Xx.exports=cL});var Fm=v((Khe,Zx)=\u003e{var uL=Ic(),lL=Im(),pL=uL(lL);Zx.exports=pL});var Qx=v((Qhe,Kx)=\u003e{function hL(r,e){return function(){return e.call(this,r.apply(this,arguments))}}Kx.exports=hL});var go=v((Jhe,Jx)=\u003e{var dL=ra();function fL(r,e){return function(){var a=arguments.length;if(a===0)return e();var s=arguments[a-1];return dL(s)||typeof s[r]!=\"function\"?e.apply(this,arguments):s[r].apply(s,Array.prototype.slice.call(arguments,0,a-1))}}Jx.exports=fL});var qr=v((ede,e1)=\u003e{var mL=go(),vL=Xe(),gL=vL(mL(\"slice\",function(e,a,s){return Array.prototype.slice.call(s,e,a)}));e1.exports=gL});var yo=v((tde,t1)=\u003e{var yL=go(),_L=Ve(),kL=qr(),NL=_L(yL(\"tail\",kL(1,1/0)));t1.exports=NL});var Fc=v((nde,n1)=\u003e{var bL=xr(),xL=Qx(),wL=Lr(),qL=yo();function TL(){if(arguments.length===0)throw new Error(\"pipe requires at least one argument\");return bL(arguments[0].length,wL(xL,arguments[0],qL(arguments)))}n1.exports=TL});var _o=v((rde,r1)=\u003e{var SL=Ve(),ML=po(),PL=SL(function(e){return ML(e)?e.split(\"\").reverse().join(\"\"):Array.prototype.slice.call(e,0).reverse()});r1.exports=PL});var Ep=v((ade,a1)=\u003e{var OL=Fc(),CL=_o();function AL(){if(arguments.length===0)throw new Error(\"compose requires at least one argument\");return OL.apply(this,CL(arguments))}a1.exports=AL});var Vm=v((sde,i1)=\u003e{var RL=Cp(),s1=Ep(),EL=cr();function jL(){if(arguments.length===0)throw new Error(\"composeK requires at least one argument\");var r=Array.prototype.slice.call(arguments),e=r.pop();return s1(s1.apply(this,EL(RL,r)),e)}i1.exports=jL});var c1=v((ide,o1)=\u003e{function DL(r,e){return function(){var a=this;return r.apply(a,arguments).then(function(s){return e.call(a,s)})}}o1.exports=DL});var Wm=v((ode,u1)=\u003e{var IL=xr(),FL=c1(),VL=Lr(),WL=yo();function LL(){if(arguments.length===0)throw new Error(\"pipeP requires at least one argument\");return IL(arguments[0].length,VL(FL,arguments[0],WL(arguments)))}u1.exports=LL});var p1=v((cde,l1)=\u003e{var BL=Wm(),zL=_o();function GL(){if(arguments.length===0)throw new Error(\"composeP requires at least one argument\");return BL.apply(this,zL(arguments))}l1.exports=GL});var jp=v((ude,h1)=\u003e{var UL=Gs(),$L=UL(0);h1.exports=$L});var Dp=v((lde,d1)=\u003e{function HL(r){return r}d1.exports=HL});var ko=v((pde,f1)=\u003e{var YL=Ve(),XL=Dp(),ZL=YL(XL);f1.exports=ZL});var Lm=v((hde,m1)=\u003e{var KL=xr(),QL=ne(),JL=jp(),e6=Gn(),t6=yo(),n6=ko(),r6=QL(function(e,a){if(a.length\u003c=0)return n6;var s=JL(a),o=t6(a);return KL(s.length,function(){return e6(function(u,h){return e.call(this,h,u)},s.apply(this,arguments),o)})});m1.exports=r6});var g1=v((dde,v1)=\u003e{var a6=ne(),s6=Lm(),i6=_o(),o6=a6(function(e,a){return s6.apply(this,[e,i6(a)])});v1.exports=o6});var _1=v((fde,y1)=\u003e{function c6(r){for(var e=[],a;!(a=r.next()).done;)e.push(a.value);return e}y1.exports=c6});var Vc=v((mde,k1)=\u003e{function u6(r,e,a){for(var s=0,o=a.length;s\u003co;){if(r(e,a[s]))return!0;s+=1}return!1}k1.exports=u6});var b1=v((vde,N1)=\u003e{function l6(r){var e=String(r).match(/^function (\\w*)/);return e==null?\"\":e[1]}N1.exports=l6});var Bm=v((gde,x1)=\u003e{function p6(r,e){return r===e?r!==0||1/r==1/e:r!==r\u0026\u0026e!==e}x1.exports=typeof Object.is==\"function\"?Object.is:p6});var O1=v((yde,P1)=\u003e{var w1=_1(),q1=Vc(),h6=b1(),d6=Un(),zm=Bm(),T1=wr(),S1=Ap();function M1(r,e,a,s){var o=w1(r),u=w1(e);function h(f,y){return Gm(f,y,a.slice(),s.slice())}return!q1(function(f,y){return!q1(h,y,f)},u,o)}function Gm(r,e,a,s){if(zm(r,e))return!0;var o=S1(r);if(o!==S1(e)||r==null||e==null)return!1;if(typeof r[\"fantasy-land/equals\"]==\"function\"||typeof e[\"fantasy-land/equals\"]==\"function\")return typeof r[\"fantasy-land/equals\"]==\"function\"\u0026\u0026r[\"fantasy-land/equals\"](e)\u0026\u0026typeof e[\"fantasy-land/equals\"]==\"function\"\u0026\u0026e[\"fantasy-land/equals\"](r);if(typeof r.equals==\"function\"||typeof e.equals==\"function\")return typeof r.equals==\"function\"\u0026\u0026r.equals(e)\u0026\u0026typeof e.equals==\"function\"\u0026\u0026e.equals(r);switch(o){case\"Arguments\":case\"Array\":case\"Object\":if(typeof r.constructor==\"function\"\u0026\u0026h6(r.constructor)===\"Promise\")return r===e;break;case\"Boolean\":case\"Number\":case\"String\":if(!(typeof r==typeof e\u0026\u0026zm(r.valueOf(),e.valueOf())))return!1;break;case\"Date\":if(!zm(r.valueOf(),e.valueOf()))return!1;break;case\"Error\":return r.name===e.name\u0026\u0026r.message===e.message;case\"RegExp\":if(!(r.source===e.source\u0026\u0026r.global===e.global\u0026\u0026r.ignoreCase===e.ignoreCase\u0026\u0026r.multiline===e.multiline\u0026\u0026r.sticky===e.sticky\u0026\u0026r.unicode===e.unicode))return!1;break}for(var u=a.length-1;u\u003e=0;){if(a[u]===r)return s[u]===e;u-=1}switch(o){case\"Map\":return r.size!==e.size?!1:M1(r.entries(),e.entries(),a.concat([r]),s.concat([e]));case\"Set\":return r.size!==e.size?!1:M1(r.values(),e.values(),a.concat([r]),s.concat([e]));case\"Arguments\":case\"Array\":case\"Object\":case\"Boolean\":case\"Number\":case\"String\":case\"Date\":case\"Error\":case\"RegExp\":case\"Int8Array\":case\"Uint8Array\":case\"Uint8ClampedArray\":case\"Int16Array\":case\"Uint16Array\":case\"Int32Array\":case\"Uint32Array\":case\"Float32Array\":case\"Float64Array\":case\"ArrayBuffer\":break;default:return!1}var h=T1(r);if(h.length!==T1(e).length)return!1;var f=a.concat([r]),y=s.concat([e]);for(u=h.length-1;u\u003e=0;){var k=h[u];if(!(d6(k,e)\u0026\u0026Gm(e[k],r[k],f,y)))return!1;u-=1}return!0}P1.exports=Gm});var $n=v((_de,C1)=\u003e{var f6=ne(),m6=O1(),v6=f6(function(e,a){return m6(e,a,[],[])});C1.exports=v6});var Um=v((kde,A1)=\u003e{var g6=$n();function y6(r,e,a){var s,o;if(typeof r.indexOf==\"function\")switch(typeof e){case\"number\":if(e===0){for(s=1/e;a\u003cr.length;){if(o=r[a],o===0\u0026\u00261/o===s)return a;a+=1}return-1}else if(e!==e){for(;a\u003cr.length;){if(o=r[a],typeof o==\"number\"\u0026\u0026o!==o)return a;a+=1}return-1}return r.indexOf(e,a);case\"string\":case\"boolean\":case\"function\":case\"undefined\":return r.indexOf(e,a);case\"object\":if(e===null)return r.indexOf(e,a)}for(;a\u003cr.length;){if(g6(r[a],e))return a;a+=1}return-1}A1.exports=y6});var Us=v((Nde,R1)=\u003e{var _6=Um();function k6(r,e){return _6(e,r,0)\u003e=0}R1.exports=k6});var j1=v((bde,E1)=\u003e{function N6(r){var e=r.replace(/\\\\/g,\"\\\\\\\\\").replace(/[\\b]/g,\"\\\\b\").replace(/\\f/g,\"\\\\f\").replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/\\t/g,\"\\\\t\").replace(/\\v/g,\"\\\\v\").replace(/\\0/g,\"\\\\0\");return'\"'+e.replace(/\"/g,'\\\\\"')+'\"'}E1.exports=N6});var I1=v((xde,D1)=\u003e{var Wc=function(e){return(e\u003c10?\"0\":\"\")+e},b6=typeof Date.prototype.toISOString==\"function\"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+\"-\"+Wc(e.getUTCMonth()+1)+\"-\"+Wc(e.getUTCDate())+\"T\"+Wc(e.getUTCHours())+\":\"+Wc(e.getUTCMinutes())+\":\"+Wc(e.getUTCSeconds())+\".\"+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+\"Z\"};D1.exports=b6});var $m=v((wde,F1)=\u003e{function x6(r){return function(){return!r.apply(this,arguments)}}F1.exports=x6});var Ip=v((qde,V1)=\u003e{function w6(r,e){for(var a=0,s=e.length,o=[];a\u003cs;)r(e[a])\u0026\u0026(o[o.length]=e[a]),a+=1;return o}V1.exports=w6});var Fp=v((Tde,W1)=\u003e{function q6(r){return Object.prototype.toString.call(r)===\"[object Object]\"}W1.exports=q6});var z1=v((Sde,B1)=\u003e{var T6=ne(),L1=Jt(),S6=function(){function r(e,a){this.xf=a,this.f=e}return r.prototype[\"@@transducer/init\"]=L1.init,r.prototype[\"@@transducer/result\"]=L1.result,r.prototype[\"@@transducer/step\"]=function(e,a){return this.f(a)?this.xf[\"@@transducer/step\"](e,a):e},r}(),M6=T6(function(e,a){return new S6(e,a)});B1.exports=M6});var Vp=v((Mde,G1)=\u003e{var P6=ne(),O6=Yt(),C6=Ip(),A6=Fp(),R6=Gn(),E6=z1(),j6=wr(),D6=P6(O6([\"filter\"],E6,function(r,e){return A6(e)?R6(function(a,s){return r(e[s])\u0026\u0026(a[s]=e[s]),a},{},j6(e)):C6(r,e)}));G1.exports=D6});var Lc=v((Pde,U1)=\u003e{var I6=$m(),F6=ne(),V6=Vp(),W6=F6(function(e,a){return V6(I6(e),a)});U1.exports=W6});var Xm=v((Ode,Y1)=\u003e{var L6=Us(),Hm=Ac(),Ym=j1(),B6=I1(),$1=wr(),z6=Lc();function H1(r,e){var a=function(h){var f=e.concat([r]);return L6(h,f)?\"\u003cCircular\u003e\":H1(h,f)},s=function(u,h){return Hm(function(f){return Ym(f)+\": \"+a(u[f])},h.slice().sort())};switch(Object.prototype.toString.call(r)){case\"[object Arguments]\":return\"(function() { return arguments; }(\"+Hm(a,r).join(\", \")+\"))\";case\"[object Array]\":return\"[\"+Hm(a,r).concat(s(r,z6(function(u){return/^\\d+$/.test(u)},$1(r)))).join(\", \")+\"]\";case\"[object Boolean]\":return typeof r==\"object\"?\"new Boolean(\"+a(r.valueOf())+\")\":r.toString();case\"[object Date]\":return\"new Date(\"+(isNaN(r.valueOf())?a(NaN):Ym(B6(r)))+\")\";case\"[object Null]\":return\"null\";case\"[object Number]\":return typeof r==\"object\"?\"new Number(\"+a(r.valueOf())+\")\":1/r==-1/0?\"-0\":r.toString(10);case\"[object String]\":return typeof r==\"object\"?\"new String(\"+a(r.valueOf())+\")\":Ym(r);case\"[object Undefined]\":return\"undefined\";default:if(typeof r.toString==\"function\"){var o=r.toString();if(o!==\"[object Object]\")return o}return\"{\"+s(r,$1(r)).join(\", \")+\"}\"}}Y1.exports=H1});var Bc=v((Cde,X1)=\u003e{var G6=Ve(),U6=Xm(),$6=G6(function(e){return U6(e,[])});X1.exports=$6});var Wp=v((Ade,J1)=\u003e{var H6=ne(),Z1=ra(),K1=vo(),Q1=po(),Zm=Bc(),Y6=H6(function(e,a){if(Z1(e)){if(Z1(a))return e.concat(a);throw new TypeError(Zm(a)+\" is not an array\")}if(Q1(e)){if(Q1(a))return e+a;throw new TypeError(Zm(a)+\" is not a string\")}if(e!=null\u0026\u0026K1(e[\"fantasy-land/concat\"]))return e[\"fantasy-land/concat\"](a);if(e!=null\u0026\u0026K1(e.concat))return e.concat(a);throw new TypeError(Zm(e)+' does not have a method named \"concat\" or \"fantasy-land/concat\"')});J1.exports=Y6});var Km=v((Rde,ew)=\u003e{var X6=xr(),Z6=Ve(),K6=cr(),Q6=zs(),J6=Lr(),eB=Z6(function(e){var a=J6(Q6,0,K6(function(s){return s[0].length},e));return X6(a,function(){for(var s=0;s\u003ce.length;){if(e[s][0].apply(this,arguments))return e[s][1].apply(this,arguments);s+=1}})});ew.exports=eB});var Qm=v((Ede,tw)=\u003e{var tB=ne(),nB=ss(),rB=Dc(),aB=tB(function(e,a){if(e\u003e10)throw new Error(\"Constructor with greater than ten arguments\");return e===0?function(){return new a}:nB(rB(e,function(s,o,u,h,f,y,k,q,x,M){switch(arguments.length){case 1:return new a(s);case 2:return new a(s,o);case 3:return new a(s,o,u);case 4:return new a(s,o,u,h);case 5:return new a(s,o,u,h,f);case 6:return new a(s,o,u,h,f,y);case 7:return new a(s,o,u,h,f,y,k);case 8:return new a(s,o,u,h,f,y,k,q);case 9:return new a(s,o,u,h,f,y,k,q,x);case 10:return new a(s,o,u,h,f,y,k,q,x,M)}}))});tw.exports=aB});var rw=v((jde,nw)=\u003e{var sB=Ve(),iB=Qm(),oB=sB(function(e){return iB(e.length,e)});nw.exports=oB});var sw=v((Dde,aw)=\u003e{var cB=Us(),uB=ne(),lB=uB(cB);aw.exports=lB});var Lp=v((Ide,iw)=\u003e{var pB=ne(),hB=Ac(),dB=hn(),fB=zs(),mB=ho(),vB=Lr(),gB=pB(function(e,a){return dB(vB(fB,0,mB(\"length\",a)),function(){var s=arguments,o=this;return e.apply(o,hB(function(u){return u.apply(o,s)},a))})});iw.exports=gB});var cw=v((Fde,ow)=\u003e{var yB=Cc(),_B=Un(),kB=Jt(),NB=function(){function r(e,a,s,o){this.valueFn=e,this.valueAcc=a,this.keyFn=s,this.xf=o,this.inputs={}}return r.prototype[\"@@transducer/init\"]=kB.init,r.prototype[\"@@transducer/result\"]=function(e){var a;for(a in this.inputs)if(_B(a,this.inputs)\u0026\u0026(e=this.xf[\"@@transducer/step\"](e,this.inputs[a]),e[\"@@transducer/reduced\"])){e=e[\"@@transducer/value\"];break}return this.inputs=null,this.xf[\"@@transducer/result\"](e)},r.prototype[\"@@transducer/step\"]=function(e,a){var s=this.keyFn(a);return this.inputs[s]=this.inputs[s]||[s,this.valueAcc],this.inputs[s][1]=this.valueFn(this.inputs[s][1],a),e},r}(),bB=yB(4,[],function(e,a,s,o){return new NB(e,a,s,o)});ow.exports=bB});var zc=v((Vde,uw)=\u003e{var xB=Rp(),wB=Cc(),qB=Yt(),TB=Un(),SB=Gn(),MB=cw(),PB=wB(4,[],qB([],MB,function(e,a,s,o){return SB(function(u,h){var f=s(h);return u[f]=e(TB(f,u)?u[f]:xB(a,[],[],!1),h),u},{},o)}));uw.exports=PB});var pw=v((Wde,lw)=\u003e{var OB=zc(),CB=OB(function(r,e){return r+1},0);lw.exports=CB});var dw=v((Lde,hw)=\u003e{var AB=Oc(),RB=AB(-1);hw.exports=RB});var Jm=v((Bde,fw)=\u003e{var EB=ne(),jB=EB(function(e,a){return a==null||a!==a?e:a});fw.exports=jB});var vw=v((zde,mw)=\u003e{var DB=Xe(),IB=DB(function(e,a,s){var o=e(a),u=e(s);return o\u003eu?-1:o\u003cu?1:0});mw.exports=IB});var ev=v((Gde,_w)=\u003e{var gw=Us(),FB=function(){function r(){this._nativeSet=typeof Set==\"function\"?new Set:null,this._items={}}return r.prototype.add=function(e){return!yw(e,!0,this)},r.prototype.has=function(e){return yw(e,!1,this)},r}();function yw(r,e,a){var s=typeof r,o,u;switch(s){case\"string\":case\"number\":return r===0\u0026\u00261/r==-1/0?a._items[\"-0\"]?!0:(e\u0026\u0026(a._items[\"-0\"]=!0),!1):a._nativeSet!==null?e?(o=a._nativeSet.size,a._nativeSet.add(r),u=a._nativeSet.size,u===o):a._nativeSet.has(r):s in a._items?r in a._items[s]?!0:(e\u0026\u0026(a._items[s][r]=!0),!1):(e\u0026\u0026(a._items[s]={},a._items[s][r]=!0),!1);case\"boolean\":if(s in a._items){var h=r?1:0;return a._items[s][h]?!0:(e\u0026\u0026(a._items[s][h]=!0),!1)}else return e\u0026\u0026(a._items[s]=r?[!1,!0]:[!0,!1]),!1;case\"function\":return a._nativeSet!==null?e?(o=a._nativeSet.size,a._nativeSet.add(r),u=a._nativeSet.size,u===o):a._nativeSet.has(r):s in a._items?gw(r,a._items[s])?!0:(e\u0026\u0026a._items[s].push(r),!1):(e\u0026\u0026(a._items[s]=[r]),!1);case\"undefined\":return a._items[s]?!0:(e\u0026\u0026(a._items[s]=!0),!1);case\"object\":if(r===null)return a._items.null?!0:(e\u0026\u0026(a._items.null=!0),!1);default:return s=Object.prototype.toString.call(r),s in a._items?gw(r,a._items[s])?!0:(e\u0026\u0026a._items[s].push(r),!1):(e\u0026\u0026(a._items[s]=[r]),!1)}}_w.exports=FB});var tv=v((Ude,kw)=\u003e{var VB=ne(),WB=ev(),LB=VB(function(e,a){for(var s=[],o=0,u=e.length,h=a.length,f=new WB,y=0;y\u003ch;y+=1)f.add(a[y]);for(;o\u003cu;)f.add(e[o])\u0026\u0026(s[s.length]=e[o]),o+=1;return s});kw.exports=LB});var nv=v(($de,bw)=\u003e{var Nw=Vc(),BB=Xe(),zB=BB(function(e,a,s){for(var o=[],u=0,h=a.length;u\u003ch;)!Nw(e,a[u],s)\u0026\u0026!Nw(e,a[u],o)\u0026\u0026o.push(a[u]),u+=1;return o});bw.exports=zB});var rv=v((Hde,xw)=\u003e{var GB=ne(),UB=GB(function(e,a){var s={};for(var o in a)s[o]=a[o];return delete s[e],s});xw.exports=UB});var av=v((Yde,ww)=\u003e{var $B=Xe(),HB=$B(function(e,a,s){var o=Array.prototype.slice.call(s,0);return o.splice(e,a),o});ww.exports=HB});var Bp=v((Xde,qw)=\u003e{var YB=Xe(),XB=xm(),ZB=fo(),KB=YB(function(e,a,s){return XB(e,ZB(a),s)});qw.exports=KB});var Pw=v((Zde,Mw)=\u003e{var QB=ne(),Tw=Ec(),Sw=ra(),JB=mo(),e9=rv(),t9=av(),n9=Bp(),r9=QB(function r(e,a){switch(e.length){case 0:return a;case 1:return Tw(e[0])\u0026\u0026Sw(a)?t9(e[0],1,a):e9(e[0],a);default:var s=e[0],o=Array.prototype.slice.call(e,1);return a[s]==null?a:Tw(s)\u0026\u0026Sw(a)?n9(s,r(o,a[s]),a):JB(s,r(o,a[s]),a)}});Mw.exports=r9});var Cw=v((Kde,Ow)=\u003e{var a9=ne(),s9=a9(function(e,a){return e/a});Ow.exports=s9});var Ew=v((Qde,Rw)=\u003e{var i9=ne(),Aw=Jt(),o9=function(){function r(e,a){this.xf=a,this.n=e}return r.prototype[\"@@transducer/init\"]=Aw.init,r.prototype[\"@@transducer/result\"]=Aw.result,r.prototype[\"@@transducer/step\"]=function(e,a){return this.n\u003e0?(this.n-=1,e):this.xf[\"@@transducer/step\"](e,a)},r}(),c9=i9(function(e,a){return new o9(e,a)});Rw.exports=c9});var sv=v((Jde,jw)=\u003e{var u9=ne(),l9=Yt(),p9=Ew(),h9=qr(),d9=u9(l9([\"drop\"],p9,function(e,a){return h9(Math.max(0,e),1/0,a)}));jw.exports=d9});var Fw=v((efe,Iw)=\u003e{var f9=ne(),m9=Ma(),Dw=Jt(),v9=function(){function r(e,a){this.xf=a,this.n=e,this.i=0}return r.prototype[\"@@transducer/init\"]=Dw.init,r.prototype[\"@@transducer/result\"]=Dw.result,r.prototype[\"@@transducer/step\"]=function(e,a){this.i+=1;var s=this.n===0?e:this.xf[\"@@transducer/step\"](e,a);return this.n\u003e=0\u0026\u0026this.i\u003e=this.n?m9(s):s},r}(),g9=f9(function(e,a){return new v9(e,a)});Iw.exports=g9});var zp=v((tfe,Vw)=\u003e{var y9=ne(),_9=Yt(),k9=Fw(),N9=qr(),b9=y9(_9([\"take\"],k9,function(e,a){return N9(0,e\u003c0?1/0:e,a)}));Vw.exports=b9});var Lw=v((nfe,Ww)=\u003e{var x9=zp();function w9(r,e){return x9(r\u003ce.length?e.length-r:0,e)}Ww.exports=w9});var zw=v((rfe,Bw)=\u003e{var q9=ne(),T9=Jt(),S9=function(){function r(e,a){this.xf=a,this.pos=0,this.full=!1,this.acc=new Array(e)}return r.prototype[\"@@transducer/init\"]=T9.init,r.prototype[\"@@transducer/result\"]=function(e){return this.acc=null,this.xf[\"@@transducer/result\"](e)},r.prototype[\"@@transducer/step\"]=function(e,a){return this.full\u0026\u0026(e=this.xf[\"@@transducer/step\"](e,this.acc[this.pos])),this.store(a),e},r.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length\u0026\u0026(this.pos=0,this.full=!0)},r}(),M9=q9(function(e,a){return new S9(e,a)});Bw.exports=M9});var Uw=v((afe,Gw)=\u003e{var P9=ne(),O9=Yt(),C9=Lw(),A9=zw(),R9=P9(O9([],A9,C9));Gw.exports=R9});var Hw=v((sfe,$w)=\u003e{var E9=qr();function j9(r,e){for(var a=e.length-1;a\u003e=0\u0026\u0026r(e[a]);)a-=1;return E9(0,a+1,e)}$w.exports=j9});var Xw=v((ife,Yw)=\u003e{var D9=ne(),I9=Gn(),F9=Jt(),V9=function(){function r(e,a){this.f=e,this.retained=[],this.xf=a}return r.prototype[\"@@transducer/init\"]=F9.init,r.prototype[\"@@transducer/result\"]=function(e){return this.retained=null,this.xf[\"@@transducer/result\"](e)},r.prototype[\"@@transducer/step\"]=function(e,a){return this.f(a)?this.retain(e,a):this.flush(e,a)},r.prototype.flush=function(e,a){return e=I9(this.xf[\"@@transducer/step\"],e,this.retained),this.retained=[],this.xf[\"@@transducer/step\"](e,a)},r.prototype.retain=function(e,a){return this.retained.push(a),e},r}(),W9=D9(function(e,a){return new V9(e,a)});Yw.exports=W9});var Kw=v((ofe,Zw)=\u003e{var L9=ne(),B9=Yt(),z9=Hw(),G9=Xw(),U9=L9(B9([],G9,z9));Zw.exports=U9});var iv=v((cfe,Jw)=\u003e{var $9=ne(),Qw=Jt(),H9=function(){function r(e,a){this.xf=a,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return r.prototype[\"@@transducer/init\"]=Qw.init,r.prototype[\"@@transducer/result\"]=Qw.result,r.prototype[\"@@transducer/step\"]=function(e,a){var s=!1;return this.seenFirstValue?this.pred(this.lastValue,a)\u0026\u0026(s=!0):this.seenFirstValue=!0,this.lastValue=a,s?e:this.xf[\"@@transducer/step\"](e,a)},r}(),Y9=$9(function(e,a){return new H9(e,a)});Jw.exports=Y9});var Gp=v((ufe,eq)=\u003e{var X9=Gs(),Z9=X9(-1);eq.exports=Z9});var ov=v((lfe,tq)=\u003e{var K9=ne(),Q9=Yt(),J9=iv(),ez=Gp(),tz=K9(Q9([],J9,function(e,a){var s=[],o=1,u=a.length;if(u!==0)for(s[0]=a[0];o\u003cu;)e(ez(s),a[o])||(s[s.length]=a[o]),o+=1;return s}));tq.exports=tz});var aq=v((pfe,rq)=\u003e{var nz=Ve(),rz=Yt(),az=iv(),sz=ov(),nq=$n(),iz=nz(rz([],az(nq),sz(nq)));rq.exports=iz});var oq=v((hfe,iq)=\u003e{var oz=ne(),sq=Jt(),cz=function(){function r(e,a){this.xf=a,this.f=e}return r.prototype[\"@@transducer/init\"]=sq.init,r.prototype[\"@@transducer/result\"]=sq.result,r.prototype[\"@@transducer/step\"]=function(e,a){if(this.f){if(this.f(a))return e;this.f=null}return this.xf[\"@@transducer/step\"](e,a)},r}(),uz=oz(function(e,a){return new cz(e,a)});iq.exports=uz});var uq=v((dfe,cq)=\u003e{var lz=ne(),pz=Yt(),hz=oq(),dz=qr(),fz=lz(pz([\"dropWhile\"],hz,function(e,a){for(var s=0,o=a.length;s\u003co\u0026\u0026e(a[s]);)s+=1;return dz(s,1/0,a)}));cq.exports=fz});var Up=v((ffe,lq)=\u003e{var mz=ne(),vz=mz(function(e,a){return e||a});lq.exports=vz});var cv=v((mfe,pq)=\u003e{var gz=ne(),yz=vo(),_z=Ic(),kz=Up(),Nz=gz(function(e,a){return yz(e)?function(){return e.apply(this,arguments)||a.apply(this,arguments)}:_z(kz)(e,a)});pq.exports=Nz});var uv=v((vfe,hq)=\u003e{var bz=Ve(),xz=Sm(),wz=ra(),qz=Fp(),Tz=po(),Sz=bz(function(e){return e!=null\u0026\u0026typeof e[\"fantasy-land/empty\"]==\"function\"?e[\"fantasy-land/empty\"]():e!=null\u0026\u0026e.constructor!=null\u0026\u0026typeof e.constructor[\"fantasy-land/empty\"]==\"function\"?e.constructor[\"fantasy-land/empty\"]():e!=null\u0026\u0026typeof e.empty==\"function\"?e.empty():e!=null\u0026\u0026e.constructor!=null\u0026\u0026typeof e.constructor.empty==\"function\"?e.constructor.empty():wz(e)?[]:Tz(e)?\"\":qz(e)?{}:xz(e)?function(){return arguments}():void 0});hq.exports=Sz});var lv=v((gfe,dq)=\u003e{var Mz=ne(),Pz=sv(),Oz=Mz(function(e,a){return Pz(e\u003e=0?a.length-e:0,a)});dq.exports=Oz});var mq=v((yfe,fq)=\u003e{var Cz=ne(),Az=$n(),Rz=lv(),Ez=Cz(function(r,e){return Az(Rz(r.length,e),r)});fq.exports=Ez});var gq=v((_fe,vq)=\u003e{var jz=Xe(),Dz=$n(),Iz=jz(function(e,a,s){return Dz(e(a),e(s))});vq.exports=Iz});var _q=v((kfe,yq)=\u003e{var Fz=Xe(),Vz=$n(),Wz=Fz(function(e,a,s){return Vz(a[e],s[e])});yq.exports=Wz});var Nq=v((Nfe,kq)=\u003e{var Lz=ne(),Bz=Lz(function r(e,a){var s=a instanceof Array?[]:{},o,u,h;for(u in a)o=e[u],h=typeof o,s[u]=h===\"function\"?o(a[u]):o\u0026\u0026h===\"object\"?r(o,a[u]):a[u];return s});kq.exports=Bz});var xq=v((bfe,bq)=\u003e{var zz=ne(),Gz=Ma(),Uz=Jt(),$z=function(){function r(e,a){this.xf=a,this.f=e,this.found=!1}return r.prototype[\"@@transducer/init\"]=Uz.init,r.prototype[\"@@transducer/result\"]=function(e){return this.found||(e=this.xf[\"@@transducer/step\"](e,void 0)),this.xf[\"@@transducer/result\"](e)},r.prototype[\"@@transducer/step\"]=function(e,a){return this.f(a)\u0026\u0026(this.found=!0,e=Gz(this.xf[\"@@transducer/step\"](e,a))),e},r}(),Hz=zz(function(e,a){return new $z(e,a)});bq.exports=Hz});var qq=v((xfe,wq)=\u003e{var Yz=ne(),Xz=Yt(),Zz=xq(),Kz=Yz(Xz([\"find\"],Zz,function(e,a){for(var s=0,o=a.length;s\u003co;){if(e(a[s]))return a[s];s+=1}}));wq.exports=Kz});var Sq=v((wfe,Tq)=\u003e{var Qz=ne(),Jz=Ma(),e8=Jt(),t8=function(){function r(e,a){this.xf=a,this.f=e,this.idx=-1,this.found=!1}return r.prototype[\"@@transducer/init\"]=e8.init,r.prototype[\"@@transducer/result\"]=function(e){return this.found||(e=this.xf[\"@@transducer/step\"](e,-1)),this.xf[\"@@transducer/result\"](e)},r.prototype[\"@@transducer/step\"]=function(e,a){return this.idx+=1,this.f(a)\u0026\u0026(this.found=!0,e=Jz(this.xf[\"@@transducer/step\"](e,this.idx))),e},r}(),n8=Qz(function(e,a){return new t8(e,a)});Tq.exports=n8});var Pq=v((qfe,Mq)=\u003e{var r8=ne(),a8=Yt(),s8=Sq(),i8=r8(a8([],s8,function(e,a){for(var s=0,o=a.length;s\u003co;){if(e(a[s]))return s;s+=1}return-1}));Mq.exports=i8});var Cq=v((Tfe,Oq)=\u003e{var o8=ne(),c8=Jt(),u8=function(){function r(e,a){this.xf=a,this.f=e}return r.prototype[\"@@transducer/init\"]=c8.init,r.prototype[\"@@transducer/result\"]=function(e){return this.xf[\"@@transducer/result\"](this.xf[\"@@transducer/step\"](e,this.last))},r.prototype[\"@@transducer/step\"]=function(e,a){return this.f(a)\u0026\u0026(this.last=a),e},r}(),l8=o8(function(e,a){return new u8(e,a)});Oq.exports=l8});var Rq=v((Sfe,Aq)=\u003e{var p8=ne(),h8=Yt(),d8=Cq(),f8=p8(h8([],d8,function(e,a){for(var s=a.length-1;s\u003e=0;){if(e(a[s]))return a[s];s-=1}}));Aq.exports=f8});var jq=v((Mfe,Eq)=\u003e{var m8=ne(),v8=Jt(),g8=function(){function r(e,a){this.xf=a,this.f=e,this.idx=-1,this.lastIdx=-1}return r.prototype[\"@@transducer/init\"]=v8.init,r.prototype[\"@@transducer/result\"]=function(e){return this.xf[\"@@transducer/result\"](this.xf[\"@@transducer/step\"](e,this.lastIdx))},r.prototype[\"@@transducer/step\"]=function(e,a){return this.idx+=1,this.f(a)\u0026\u0026(this.lastIdx=this.idx),e},r}(),y8=m8(function(e,a){return new g8(e,a)});Eq.exports=y8});var Iq=v((Pfe,Dq)=\u003e{var _8=ne(),k8=Yt(),N8=jq(),b8=_8(k8([],N8,function(e,a){for(var s=a.length-1;s\u003e=0;){if(e(a[s]))return s;s-=1}return-1}));Dq.exports=b8});var Vq=v((Ofe,Fq)=\u003e{var x8=Ve(),w8=jm(),q8=x8(w8(!0));Fq.exports=q8});var Gc=v((Cfe,Wq)=\u003e{var T8=Ve(),S8=hn(),M8=T8(function(e){return S8(e.length,function(a,s){var o=Array.prototype.slice.call(arguments,0);return o[0]=s,o[1]=a,e.apply(this,o)})});Wq.exports=M8});var Bq=v((Afe,Lq)=\u003e{var P8=go(),O8=ne(),C8=O8(P8(\"forEach\",function(e,a){for(var s=a.length,o=0;o\u003cs;)e(a[o]),o+=1;return a}));Lq.exports=C8});var Gq=v((Rfe,zq)=\u003e{var A8=ne(),R8=wr(),E8=A8(function(e,a){for(var s=R8(a),o=0;o\u003cs.length;){var u=s[o];e(a[u],u,a),o+=1}return a});zq.exports=E8});var $q=v((Efe,Uq)=\u003e{var j8=Ve(),D8=j8(function(e){for(var a={},s=0;s\u003ce.length;)a[e[s][0]]=e[s][1],s+=1;return a});Uq.exports=D8});var Yq=v((jfe,Hq)=\u003e{var I8=go(),F8=ne(),V8=zc(),W8=F8(I8(\"groupBy\",V8(function(r,e){return r==null\u0026\u0026(r=[]),r.push(e),r},null)));Hq.exports=W8});var Zq=v((Dfe,Xq)=\u003e{var L8=ne(),B8=L8(function(r,e){for(var a=[],s=0,o=e.length;s\u003co;){for(var u=s+1;u\u003co\u0026\u0026r(e[u-1],e[u]);)u+=1;a.push(e.slice(s,u)),s=u}return a});Xq.exports=B8});var Qq=v((Ife,Kq)=\u003e{var z8=ne(),G8=z8(function(e,a){return e\u003ea});Kq.exports=G8});var eT=v((Ffe,Jq)=\u003e{var U8=ne(),$8=U8(function(e,a){return e\u003e=a});Jq.exports=$8});var pv=v((Vfe,nT)=\u003e{var H8=ne(),Y8=Un(),tT=Op(),X8=H8(function(e,a){if(e.length===0||tT(a))return!1;for(var s=a,o=0;o\u003ce.length;)if(!tT(s)\u0026\u0026Y8(e[o],s))s=s[e[o]],o+=1;else return!1;return!0});nT.exports=X8});var hv=v((Wfe,rT)=\u003e{var Z8=ne(),K8=pv(),Q8=Z8(function(e,a){return K8([e],a)});rT.exports=Q8});var sT=v((Lfe,aT)=\u003e{var J8=ne(),eG=J8(function(e,a){return e in a});aT.exports=eG});var oT=v((Bfe,iT)=\u003e{var tG=Bm(),nG=ne(),rG=nG(tG);iT.exports=rG});var dv=v((zfe,cT)=\u003e{var aG=Xe(),sG=hn(),iG=aG(function(e,a,s){return sG(Math.max(e.length,a.length,s.length),function(){return e.apply(this,arguments)?a.apply(this,arguments):s.apply(this,arguments)})});cT.exports=iG});var lT=v((Gfe,uT)=\u003e{var oG=Oc(),cG=oG(1);uT.exports=cG});var hT=v((Ufe,pT)=\u003e{var uG=Us(),lG=ne(),pG=lG(uG);pT.exports=pG});var fT=v(($fe,dT)=\u003e{var hG=zc(),dG=hG(function(r,e){return e},null);dT.exports=dG});var vT=v((Hfe,mT)=\u003e{var fG=ne(),mG=Um(),vG=ra(),gG=fG(function(e,a){return typeof a.indexOf==\"function\"\u0026\u0026!vG(a)?a.indexOf(e):mG(a,e,0)});mT.exports=gG});var fv=v((Yfe,gT)=\u003e{var yG=qr(),_G=yG(0,-1);gT.exports=_G});var _T=v((Xfe,yT)=\u003e{var kG=Vc(),NG=Xe(),bG=Ip(),xG=NG(function(e,a,s){return bG(function(o){return kG(e,o,s)},a)});yT.exports=xG});var NT=v((Zfe,kT)=\u003e{var wG=Xe(),qG=wG(function(e,a,s){e=e\u003cs.length\u0026\u0026e\u003e=0?e:s.length;var o=Array.prototype.slice.call(s,0);return o.splice(e,0,a),o});kT.exports=qG});var xT=v((Kfe,bT)=\u003e{var TG=Xe(),SG=TG(function(e,a,s){return e=e\u003cs.length\u0026\u0026e\u003e=0?e:s.length,[].concat(Array.prototype.slice.call(s,0,e),a,Array.prototype.slice.call(s,e))});bT.exports=SG});var mv=v((Qfe,wT)=\u003e{var MG=ev(),PG=ne(),OG=PG(function(e,a){for(var s=new MG,o=[],u=0,h,f;u\u003ca.length;)f=a[u],h=e(f),s.add(h)\u0026\u0026o.push(f),u+=1;return o});wT.exports=OG});var $p=v((Jfe,qT)=\u003e{var CG=ko(),AG=mv(),RG=AG(CG);qT.exports=RG});var ST=v((eme,TT)=\u003e{var EG=Us(),jG=ne(),DG=Ip(),IG=Gc(),FG=$p(),VG=jG(function(e,a){var s,o;return e.length\u003ea.length?(s=e,o=a):(s=a,o=e),FG(DG(IG(EG)(s),o))});TT.exports=VG});var PT=v((tme,MT)=\u003e{var WG=go(),LG=ne(),BG=LG(WG(\"intersperse\",function(e,a){for(var s=[],o=0,u=a.length;o\u003cu;)o===u-1?s.push(a[o]):s.push(a[o],e),o+=1;return s}));MT.exports=BG});var No=v((nme,OT)=\u003e{var zG=Un();function GG(r){if(r==null)throw new TypeError(\"Cannot convert undefined or null to object\");for(var e=Object(r),a=1,s=arguments.length;a\u003cs;){var o=arguments[a];if(o!=null)for(var u in o)zG(u,o)\u0026\u0026(e[u]=o[u]);a+=1}return e}OT.exports=typeof Object.assign==\"function\"?Object.assign:GG});var vv=v((rme,CT)=\u003e{var UG=ne(),$G=UG(function(e,a){var s={};return s[e]=a,s});CT.exports=$G});var ET=v((ame,RT)=\u003e{var HG=No(),gv=Dp(),AT=Rc(),YG=Mp(),XG=vv(),ZG={\"@@transducer/init\":Array,\"@@transducer/step\":function(r,e){return r.push(e),r},\"@@transducer/result\":gv},KG={\"@@transducer/init\":String,\"@@transducer/step\":function(r,e){return r+e},\"@@transducer/result\":gv},QG={\"@@transducer/init\":Object,\"@@transducer/step\":function(r,e){return HG(r,AT(e)?XG(e[0],e[1]):e)},\"@@transducer/result\":gv};function JG(r){if(YG(r))return r;if(AT(r))return ZG;if(typeof r==\"string\")return KG;if(typeof r==\"object\")return QG;throw new Error(\"Cannot create transformer for \"+r)}RT.exports=JG});var IT=v((sme,DT)=\u003e{var eU=Rp(),tU=Xe(),nU=Mp(),jT=Gn(),rU=ET(),aU=tU(function(e,a,s){return nU(e)?jT(a(e),e[\"@@transducer/init\"](),s):jT(a(rU(e)),eU(e,[],[],!1),s)});DT.exports=aU});var VT=v((ime,FT)=\u003e{var sU=Ve(),iU=Un(),oU=wr(),cU=sU(function(e){for(var a=oU(e),s=a.length,o=0,u={};o\u003cs;){var h=a[o],f=e[h],y=iU(f,u)?u[f]:u[f]=[];y[y.length]=h,o+=1}return u});FT.exports=cU});var LT=v((ome,WT)=\u003e{var uU=Ve(),lU=wr(),pU=uU(function(e){for(var a=lU(e),s=a.length,o=0,u={};o\u003cs;){var h=a[o];u[e[h]]=h,o+=1}return u});WT.exports=pU});var bo=v((cme,BT)=\u003e{var hU=ne(),dU=vo(),fU=hn(),mU=Bc(),vU=hU(function(e,a){return fU(e+1,function(){var s=arguments[e];if(s!=null\u0026\u0026dU(s[a]))return s[a].apply(s,Array.prototype.slice.call(arguments,0,e));throw new TypeError(mU(s)+' does not have a method named \"'+a+'\"')})});BT.exports=vU});var yv=v((ume,zT)=\u003e{var gU=ne(),yU=gU(function(e,a){return a!=null\u0026\u0026a.constructor===e||a instanceof e});zT.exports=yU});var UT=v((lme,GT)=\u003e{var _U=Ve(),kU=uv(),NU=$n(),bU=_U(function(e){return e!=null\u0026\u0026NU(e,kU(e))});GT.exports=bU});var HT=v((pme,$T)=\u003e{var xU=bo(),wU=xU(1,\"join\");$T.exports=wU});var Hp=v((hme,YT)=\u003e{var qU=Ve(),TU=Lp(),SU=qU(function(e){return TU(function(){return Array.prototype.slice.call(arguments,0)},e)});YT.exports=SU});var ZT=v((dme,XT)=\u003e{var MU=Ve(),PU=MU(function(e){var a,s=[];for(a in e)s[s.length]=a;return s});XT.exports=PU});var QT=v((fme,KT)=\u003e{var OU=ne(),CU=ra(),AU=$n(),RU=OU(function(e,a){if(typeof a.lastIndexOf==\"function\"\u0026\u0026!CU(a))return a.lastIndexOf(e);for(var s=a.length-1;s\u003e=0;){if(AU(a[s],e))return s;s-=1}return-1});KT.exports=RU});var _v=v((mme,JT)=\u003e{function EU(r){return Object.prototype.toString.call(r)===\"[object Number]\"}JT.exports=EU});var kv=v((vme,eS)=\u003e{var jU=Ve(),DU=_v(),IU=jU(function(e){return e!=null\u0026\u0026DU(e.length)?e.length:NaN});eS.exports=IU});var Uc=v((gme,tS)=\u003e{var FU=ne(),VU=cr(),WU=FU(function(e,a){return function(s){return function(o){return VU(function(u){return a(u,o)},s(e(o)))}}});tS.exports=WU});var rS=v((yme,nS)=\u003e{var LU=Ve(),BU=Uc(),zU=Gs(),GU=Bp(),UU=LU(function(e){return BU(zU(e),GU(e))});nS.exports=UU});var sS=v((_me,aS)=\u003e{var $U=Ve(),HU=Am(),YU=Uc(),XU=as(),ZU=$U(function(e){return YU(XU(e),HU(e))});aS.exports=ZU});var oS=v((kme,iS)=\u003e{var KU=Ve(),QU=mo(),JU=Uc(),e$=jc(),t$=KU(function(e){return JU(e$(e),QU(e))});iS.exports=t$});var uS=v((Nme,cS)=\u003e{var n$=ne(),r$=n$(function(e,a){return e\u003ca});cS.exports=r$});var pS=v((bme,lS)=\u003e{var a$=ne(),s$=a$(function(e,a){return e\u003c=a});lS.exports=s$});var dS=v((xme,hS)=\u003e{var i$=Xe(),o$=i$(function(e,a,s){for(var o=0,u=s.length,h=[],f=[a];o\u003cu;)f=e(f[0],s[o]),h[o]=f[1],o+=1;return[f[0],h]});hS.exports=o$});var mS=v((wme,fS)=\u003e{var c$=Xe(),u$=c$(function(e,a,s){for(var o=s.length-1,u=[],h=[a];o\u003e=0;)h=e(h[0],s[o]),u[o]=h[1],o-=1;return[h[0],u]});fS.exports=u$});var gS=v((qme,vS)=\u003e{var l$=ne(),p$=Gn(),h$=wr(),d$=l$(function(e,a){return p$(function(s,o){return s[o]=e(a[o],o,a),s},{},h$(a))});vS.exports=d$});var _S=v((Tme,yS)=\u003e{var f$=ne(),m$=f$(function(e,a){return a.match(e)||[]});yS.exports=m$});var bS=v((Sme,NS)=\u003e{var v$=ne(),kS=Ec(),g$=v$(function(e,a){return kS(e)?!kS(a)||a\u003c1?NaN:(e%a+a)%a:NaN});NS.exports=g$});var wS=v((Mme,xS)=\u003e{var y$=Xe(),_$=y$(function(e,a,s){return e(s)\u003ee(a)?s:a});xS.exports=_$});var Nv=v((Pme,qS)=\u003e{var k$=Oc(),N$=Lr(),b$=N$(k$,0);qS.exports=b$});var bv=v((Ome,TS)=\u003e{var x$=Ve(),w$=Nv(),q$=x$(function(e){return w$(e)/e.length});TS.exports=q$});var MS=v((Cme,SS)=\u003e{var T$=Ve(),S$=bv(),M$=T$(function(e){var a=e.length;if(a===0)return NaN;var s=2-a%2,o=(a-s)/2;return S$(Array.prototype.slice.call(e,0).sort(function(u,h){return u\u003ch?-1:u\u003eh?1:0}).slice(o,o+s))});SS.exports=M$});var OS=v((Ame,PS)=\u003e{var P$=xr(),O$=ne(),C$=Un(),A$=O$(function(e,a){var s={};return P$(a.length,function(){var o=e.apply(this,arguments);return C$(o,s)||(s[o]=a.apply(this,arguments)),s[o]})});PS.exports=A$});var xv=v((Rme,CS)=\u003e{var R$=No(),E$=ne(),j$=E$(function(e,a){return R$({},e,a)});CS.exports=j$});var RS=v((Eme,AS)=\u003e{var D$=No(),I$=Ve(),F$=I$(function(e){return D$.apply(null,[{}].concat(e))});AS.exports=F$});var Xp=v((jme,ES)=\u003e{var V$=Xe(),Yp=Un(),W$=V$(function(e,a,s){var o={},u;for(u in a)Yp(u,a)\u0026\u0026(o[u]=Yp(u,s)?e(u,a[u],s[u]):a[u]);for(u in s)Yp(u,s)\u0026\u0026!Yp(u,o)\u0026\u0026(o[u]=s[u]);return o});ES.exports=W$});var $c=v((Dme,DS)=\u003e{var L$=Xe(),jS=Fp(),B$=Xp(),z$=L$(function r(e,a,s){return B$(function(o,u,h){return jS(u)\u0026\u0026jS(h)?r(e,u,h):e(o,u,h)},a,s)});DS.exports=z$});var FS=v((Ime,IS)=\u003e{var G$=ne(),U$=$c(),$$=G$(function(e,a){return U$(function(s,o,u){return o},e,a)});IS.exports=$$});var WS=v((Fme,VS)=\u003e{var H$=ne(),Y$=$c(),X$=H$(function(e,a){return Y$(function(s,o,u){return u},e,a)});VS.exports=X$});var BS=v((Vme,LS)=\u003e{var Z$=Xe(),K$=$c(),Q$=Z$(function(e,a,s){return K$(function(o,u,h){return e(u,h)},a,s)});LS.exports=Q$});var GS=v((Wme,zS)=\u003e{var J$=No(),eH=ne(),tH=eH(function(e,a){return J$({},a,e)});zS.exports=tH});var $S=v((Lme,US)=\u003e{var nH=No(),rH=ne(),aH=rH(function(e,a){return nH({},e,a)});US.exports=aH});var YS=v((Bme,HS)=\u003e{var sH=Xe(),iH=Xp(),oH=sH(function(e,a,s){return iH(function(o,u,h){return e(u,h)},a,s)});HS.exports=oH});var ZS=v((zme,XS)=\u003e{var cH=ne(),uH=cH(function(e,a){return a\u003ce?a:e});XS.exports=uH});var QS=v((Gme,KS)=\u003e{var lH=Xe(),pH=lH(function(e,a,s){return e(s)\u003ce(a)?s:a});KS.exports=pH});var eM=v((Ume,JS)=\u003e{var hH=ne(),dH=hH(function(e,a){return e%a});JS.exports=dH});var nM=v(($me,tM)=\u003e{var fH=Xe(),mH=fH(function(r,e,a){var s=a.length,o=a.slice(),u=r\u003c0?s+r:r,h=e\u003c0?s+e:e,f=o.splice(u,1);return u\u003c0||u\u003e=a.length||h\u003c0||h\u003e=a.length?a:[].concat(o.slice(0,h)).concat(f).concat(o.slice(h,a.length))});tM.exports=mH});var wv=v((Hme,rM)=\u003e{var vH=ne(),gH=vH(function(e,a){return e*a});rM.exports=gH});var sM=v((Yme,aM)=\u003e{var yH=Ve(),_H=yH(function(e){return-e});aM.exports=_H});var oM=v((Xme,iM)=\u003e{var kH=$m(),NH=ne(),bH=wm(),xH=NH(function(e,a){return bH(kH(e),a)});iM.exports=xH});var uM=v((Zme,cM)=\u003e{var wH=Ve(),qH=hn(),TH=Gs(),SH=wH(function(e){var a=e\u003c0?1:e+1;return qH(a,function(){return TH(e,arguments)})});cM.exports=SH});var pM=v((Kme,lM)=\u003e{var MH=Xe(),PH=MH(function(e,a,s){return e(a(s))});lM.exports=PH});var dM=v((Qme,hM)=\u003e{function OH(r){return[r]}hM.exports=OH});var qv=v((Jme,fM)=\u003e{var CH=Ve(),AH=dM(),RH=CH(AH);fM.exports=RH});var vM=v((eve,mM)=\u003e{var EH=ne(),jH=EH(function(e,a){for(var s={},o={},u=0,h=e.length;u\u003ch;)o[e[u]]=1,u+=1;for(var f in a)o.hasOwnProperty(f)||(s[f]=a[f]);return s});mM.exports=jH});var yM=v((tve,gM)=\u003e{var DH=xr(),IH=Ve(),FH=IH(function(e){var a=!1,s;return DH(e.length,function(){return a||(a=!0,s=e.apply(this,arguments)),s})});gM.exports=FH});var Tv=v((nve,_M)=\u003e{var VH=vo(),WH=Xm();function LH(r,e){if(e==null||!VH(e.then))throw new TypeError(\"`\"+r+\"` expected a Promise, received \"+WH(e,[]))}_M.exports=LH});var NM=v((rve,kM)=\u003e{var BH=ne(),zH=Tv(),GH=BH(function(e,a){return zH(\"otherwise\",a),a.then(null,e)});kM.exports=GH});var Sv=v((ave,xM)=\u003e{var UH=Xe(),bM=function(r){return{value:r,map:function(e){return bM(e(r))}}},$H=UH(function(e,a,s){return e(function(o){return bM(a(o))})(s).value});xM.exports=$H});var qM=v((sve,wM)=\u003e{var HH=ne(),YH=HH(function(e,a){return[e,a]});wM.exports=YH});var Mv=v((ive,TM)=\u003e{var XH=xr(),ZH=ne();function KH(r){return ZH(function(e,a){return XH(Math.max(0,e.length-a.length),function(){return e.apply(this,r(a,arguments))})})}TM.exports=KH});var MM=v((ove,SM)=\u003e{var QH=br(),JH=Mv(),eY=JH(QH);SM.exports=eY});var OM=v((cve,PM)=\u003e{var tY=br(),nY=Mv(),rY=Gc(),aY=nY(rY(tY));PM.exports=aY});var AM=v((uve,CM)=\u003e{var sY=Vp(),iY=Hp(),oY=Lc(),cY=iY([sY,oY]);CM.exports=cY});var EM=v((lve,RM)=\u003e{var uY=Xe(),lY=$n(),pY=as(),hY=uY(function(e,a,s){return lY(pY(e,s),a)});RM.exports=hY});var Pv=v((pve,jM)=\u003e{var dY=Xe(),fY=Jm(),mY=as(),vY=dY(function(e,a,s){return fY(e,mY(a,s))});jM.exports=vY});var IM=v((hve,DM)=\u003e{var gY=Xe(),yY=as(),_Y=gY(function(e,a,s){return e(yY(a,s))});DM.exports=_Y});var VM=v((dve,FM)=\u003e{var kY=ne(),NY=kY(function(e,a){for(var s={},o=0;o\u003ce.length;)e[o]in a\u0026\u0026(s[e[o]]=a[e[o]]),o+=1;return s});FM.exports=NY});var Ov=v((fve,WM)=\u003e{var bY=ne(),xY=bY(function(e,a){for(var s={},o=0,u=e.length;o\u003cu;){var h=e[o];s[h]=a[h],o+=1}return s});WM.exports=xY});var BM=v((mve,LM)=\u003e{var wY=ne(),qY=wY(function(e,a){var s={};for(var o in a)e(a[o],o,a)\u0026\u0026(s[o]=a[o]);return s});LM.exports=qY});var GM=v((vve,zM)=\u003e{var TY=Vm(),SY=_o();function MY(){if(arguments.length===0)throw new Error(\"pipeK requires at least one argument\");return TY.apply(this,SY(arguments))}zM.exports=MY});var Cv=v((gve,UM)=\u003e{var PY=br(),OY=ne(),CY=OY(function(e,a){return PY([e],a)});UM.exports=CY});var HM=v((yve,$M)=\u003e{var AY=wv(),RY=Lr(),EY=RY(AY,1);$M.exports=EY});var Av=v((_ve,YM)=\u003e{var jY=ne(),DY=hn(),IY=jY(function(e,a){return DY(a.length,function(){for(var s=[],o=0;o\u003ca.length;)s.push(a[o].call(this,arguments[o])),o+=1;return e.apply(this,s.concat(Array.prototype.slice.call(arguments,a.length)))})});YM.exports=IY});var ZM=v((kve,XM)=\u003e{var FY=Ac(),VY=ko(),WY=Ov(),LY=Av(),BY=LY(FY,[WY,VY]);XM.exports=BY});var QM=v((Nve,KM)=\u003e{var zY=Xe(),GY=$n(),UY=zY(function(e,a,s){return GY(a,s[e])});KM.exports=UY});var eP=v((bve,JM)=\u003e{var $Y=Xe(),HY=yv(),YY=$Y(function(e,a,s){return HY(e,s[a])});JM.exports=YY});var nP=v((xve,tP)=\u003e{var XY=Xe(),ZY=Pv(),KY=XY(function(e,a,s){return ZY(e,[a],s)});tP.exports=KY});var aP=v((wve,rP)=\u003e{var QY=Xe(),JY=QY(function(e,a,s){return e(s[a])});rP.exports=JY});var iP=v((qve,sP)=\u003e{var eX=ne(),tX=as(),nX=eX(function(e,a){return e.map(function(s){return tX([s],a)})});sP.exports=nX});var uP=v((Tve,cP)=\u003e{var rX=ne(),oP=_v(),aX=rX(function(e,a){if(!(oP(e)\u0026\u0026oP(a)))throw new TypeError(\"Both arguments to range must be numbers\");for(var s=[],o=e;o\u003ca;)s.push(o),o+=1;return s});cP.exports=aX});var Rv=v((Sve,lP)=\u003e{var sX=Xe(),iX=sX(function(e,a,s){for(var o=s.length-1;o\u003e=0;)a=e(s[o],a),o-=1;return a});lP.exports=iX});var hP=v((Mve,pP)=\u003e{var oX=Cc(),cX=Gn(),uX=Ma(),lX=oX(4,[],function(e,a,s,o){return cX(function(u,h){return e(u,h)?a(u,h):uX(u)},s,o)});pP.exports=lX});var fP=v((Pve,dP)=\u003e{var pX=Ve(),hX=Ma(),dX=pX(hX);dP.exports=dX});var Ev=v((Ove,mP)=\u003e{var fX=ne(),mX=fX(function(e,a){var s=Number(a),o=0,u;if(s\u003c0||isNaN(s))throw new RangeError(\"n must be a non-negative number\");for(u=new Array(s);o\u003cs;)u[o]=e(o),o+=1;return u});mP.exports=mX});var gP=v((Cve,vP)=\u003e{var vX=ne(),gX=fo(),yX=Ev(),_X=vX(function(e,a){return yX(gX(e),a)});vP.exports=_X});var _P=v((Ave,yP)=\u003e{var kX=Xe(),NX=kX(function(e,a,s){return s.replace(e,a)});yP.exports=NX});var NP=v((Rve,kP)=\u003e{var bX=Xe(),xX=bX(function(e,a,s){for(var o=0,u=s.length,h=[a];o\u003cu;)a=e(a,s[o]),h[o+1]=a,o+=1;return h});kP.exports=xX});var jv=v((Eve,bP)=\u003e{var wX=ne(),qX=Pp(),TX=cr(),SX=Cv(),MX=Rv(),PX=wX(function(e,a){return typeof a.sequence==\"function\"?a.sequence(e):MX(function(s,o){return qX(TX(SX,s),o)},e([]),a)});bP.exports=PX});var wP=v((jve,xP)=\u003e{var OX=Xe(),CX=fo(),AX=Sv(),RX=OX(function(e,a,s){return AX(e,CX(a),s)});xP.exports=RX});var TP=v((Dve,qP)=\u003e{var EX=ne(),jX=EX(function(e,a){return Array.prototype.slice.call(a,0).sort(e)});qP.exports=jX});var MP=v((Ive,SP)=\u003e{var DX=ne(),IX=DX(function(e,a){return Array.prototype.slice.call(a,0).sort(function(s,o){var u=e(s),h=e(o);return u\u003ch?-1:u\u003eh?1:0})});SP.exports=IX});var OP=v((Fve,PP)=\u003e{var FX=ne(),VX=FX(function(e,a){return Array.prototype.slice.call(a,0).sort(function(s,o){for(var u=0,h=0;u===0\u0026\u0026h\u003ce.length;)u=e[h](s,o),h+=1;return u})});PP.exports=VX});var AP=v((Vve,CP)=\u003e{var WX=bo(),LX=WX(1,\"split\");CP.exports=LX});var jP=v((Wve,EP)=\u003e{var BX=ne(),zX=kv(),RP=qr(),GX=BX(function(e,a){return[RP(0,e,a),RP(e,zX(a),a)]});EP.exports=GX});var IP=v((Lve,DP)=\u003e{var UX=ne(),$X=qr(),HX=UX(function(e,a){if(e\u003c=0)throw new Error(\"First argument to splitEvery must be a positive integer\");for(var s=[],o=0;o\u003ca.length;)s.push($X(o,o+=e,a));return s});DP.exports=HX});var VP=v((Bve,FP)=\u003e{var YX=ne(),XX=YX(function(e,a){for(var s=0,o=a.length,u=[];s\u003co\u0026\u0026!e(a[s]);)u.push(a[s]),s+=1;return[u,Array.prototype.slice.call(a,s)]});FP.exports=XX});var LP=v((zve,WP)=\u003e{var ZX=ne(),KX=$n(),QX=zp(),JX=ZX(function(r,e){return KX(QX(r.length,e),r)});WP.exports=JX});var zP=v((Gve,BP)=\u003e{var eZ=ne(),tZ=eZ(function(e,a){return Number(e)-Number(a)});BP.exports=tZ});var $P=v((Uve,UP)=\u003e{var nZ=ne(),rZ=Wp(),GP=tv(),aZ=nZ(function(e,a){return rZ(GP(e,a),GP(a,e))});UP.exports=aZ});var XP=v(($ve,YP)=\u003e{var sZ=Xe(),iZ=Wp(),HP=nv(),oZ=sZ(function(e,a,s){return iZ(HP(e,a,s),HP(e,s,a))});YP.exports=oZ});var KP=v((Hve,ZP)=\u003e{var cZ=ne(),uZ=qr(),lZ=cZ(function(e,a){for(var s=a.length-1;s\u003e=0\u0026\u0026e(a[s]);)s-=1;return uZ(s+1,1/0,a)});ZP.exports=lZ});var eO=v((Yve,JP)=\u003e{var pZ=ne(),hZ=Ma(),QP=Jt(),dZ=function(){function r(e,a){this.xf=a,this.f=e}return r.prototype[\"@@transducer/init\"]=QP.init,r.prototype[\"@@transducer/result\"]=QP.result,r.prototype[\"@@transducer/step\"]=function(e,a){return this.f(a)?this.xf[\"@@transducer/step\"](e,a):hZ(e)},r}(),fZ=pZ(function(e,a){return new dZ(e,a)});JP.exports=fZ});var nO=v((Xve,tO)=\u003e{var mZ=ne(),vZ=Yt(),gZ=eO(),yZ=qr(),_Z=mZ(vZ([\"takeWhile\"],gZ,function(e,a){for(var s=0,o=a.length;s\u003co\u0026\u0026e(a[s]);)s+=1;return yZ(0,s,a)}));tO.exports=_Z});var sO=v((Zve,aO)=\u003e{var kZ=ne(),rO=Jt(),NZ=function(){function r(e,a){this.xf=a,this.f=e}return r.prototype[\"@@transducer/init\"]=rO.init,r.prototype[\"@@transducer/result\"]=rO.result,r.prototype[\"@@transducer/step\"]=function(e,a){return this.f(a),this.xf[\"@@transducer/step\"](e,a)},r}(),bZ=kZ(function(e,a){return new NZ(e,a)});aO.exports=bZ});var oO=v((Kve,iO)=\u003e{var xZ=ne(),wZ=Yt(),qZ=sO(),TZ=xZ(wZ([],qZ,function(e,a){return e(a),a}));iO.exports=TZ});var uO=v((Qve,cO)=\u003e{function SZ(r){return Object.prototype.toString.call(r)===\"[object RegExp]\"}cO.exports=SZ});var pO=v((Jve,lO)=\u003e{var MZ=Dm(),PZ=ne(),OZ=uO(),CZ=Bc(),AZ=PZ(function(e,a){if(!OZ(e))throw new TypeError(\"\\u2018test\\u2019 requires a value of type RegExp as its first argument; received \"+CZ(e));return MZ(e).test(a)});lO.exports=AZ});var dO=v((ege,hO)=\u003e{var RZ=ne(),EZ=Tv(),jZ=RZ(function(e,a){return EZ(\"andThen\",a),a.then(e)});hO.exports=jZ});var mO=v((tge,fO)=\u003e{var DZ=bo(),IZ=DZ(0,\"toLowerCase\");fO.exports=IZ});var gO=v((nge,vO)=\u003e{var FZ=Ve(),VZ=Un(),WZ=FZ(function(e){var a=[];for(var s in e)VZ(s,e)\u0026\u0026(a[a.length]=[s,e[s]]);return a});vO.exports=WZ});var _O=v((rge,yO)=\u003e{var LZ=Ve(),BZ=LZ(function(e){var a=[];for(var s in e)a[a.length]=[s,e[s]];return a});yO.exports=BZ});var NO=v((age,kO)=\u003e{var zZ=bo(),GZ=zZ(0,\"toUpperCase\");kO.exports=GZ});var xO=v((sge,bO)=\u003e{var UZ=Gn(),$Z=qm(),HZ=hn(),YZ=HZ(4,function(e,a,s,o){return UZ(e(typeof a==\"function\"?$Z(a):a),s,o)});bO.exports=YZ});var qO=v((ige,wO)=\u003e{var XZ=Ve(),ZZ=XZ(function(e){for(var a=0,s=[];a\u003ce.length;){for(var o=e[a],u=0;u\u003co.length;)typeof s[u]==\"undefined\"\u0026\u0026(s[u]=[]),s[u].push(o[u]),u+=1;a+=1}return s});wO.exports=ZZ});var SO=v((oge,TO)=\u003e{var KZ=Xe(),QZ=cr(),JZ=jv(),eK=KZ(function(e,a,s){return typeof s[\"fantasy-land/traverse\"]==\"function\"?s[\"fantasy-land/traverse\"](a,e):JZ(e,QZ(a,s))});TO.exports=eK});var OO=v((cge,PO)=\u003e{var MO=Ve(),Hc=`\t\n\\v\\f\\r \\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF`,tK=\"\\u200B\",nK=typeof String.prototype.trim==\"function\",rK=MO(!nK||Hc.trim()||!tK.trim()?function(e){var a=new RegExp(\"^[\"+Hc+\"][\"+Hc+\"]*\"),s=new RegExp(\"[\"+Hc+\"][\"+Hc+\"]*$\");return e.replace(a,\"\").replace(s,\"\")}:function(e){return e.trim()});PO.exports=rK});var AO=v((uge,CO)=\u003e{var aK=xr(),sK=br(),iK=ne(),oK=iK(function(e,a){return aK(e.length,function(){try{return e.apply(this,arguments)}catch(s){return a.apply(this,sK([s],arguments))}})});CO.exports=oK});var EO=v((lge,RO)=\u003e{var cK=Ve(),uK=cK(function(e){return function(){return e(Array.prototype.slice.call(arguments,0))}});RO.exports=uK});var DO=v((pge,jO)=\u003e{var lK=Ve(),pK=Dc(),hK=lK(function(e){return pK(1,e)});jO.exports=hK});var FO=v((hge,IO)=\u003e{var dK=ne(),fK=hn(),mK=dK(function(e,a){return fK(e,function(){for(var s=1,o=a,u=0,h;s\u003c=e\u0026\u0026typeof o==\"function\";)h=s===e?arguments.length:u+o.length,o=o.apply(this,Array.prototype.slice.call(arguments,u,h)),s+=1,u=h;return o})});IO.exports=mK});var WO=v((dge,VO)=\u003e{var vK=ne(),gK=vK(function(e,a){for(var s=e(a),o=[];s\u0026\u0026s.length;)o[o.length]=s[0],s=e(s[1]);return o});VO.exports=gK});var BO=v((fge,LO)=\u003e{var yK=br(),_K=ne(),kK=Ep(),NK=$p(),bK=_K(kK(NK,yK));LO.exports=bK});var Dv=v((mge,zO)=\u003e{var xK=Vc(),wK=ne(),qK=wK(function(e,a){for(var s=0,o=a.length,u=[],h;s\u003co;)h=a[s],xK(e,h,u)||(u[u.length]=h),s+=1;return u});zO.exports=qK});var UO=v((vge,GO)=\u003e{var TK=br(),SK=Xe(),MK=Dv(),PK=SK(function(e,a,s){return MK(e,TK(a,s))});GO.exports=PK});var Iv=v((gge,$O)=\u003e{var OK=Xe(),CK=OK(function(e,a,s){return e(s)?s:a(s)});$O.exports=CK});var Fv=v((yge,HO)=\u003e{var AK=Dp(),RK=Cp(),EK=RK(AK);HO.exports=EK});var Zp=v((_ge,YO)=\u003e{var jK=Xe(),DK=jK(function(e,a,s){for(var o=s;!e(o);)o=a(o);return o});YO.exports=DK});var ZO=v((kge,XO)=\u003e{var IK=Ve(),FK=IK(function(e){var a,s=[];for(a in e)s[s.length]=e[a];return s});XO.exports=FK});var QO=v((Nge,KO)=\u003e{var VK=ne(),WK=function(r){return{value:r,\"fantasy-land/map\":function(){return this}}},LK=VK(function(e,a){return e(WK)(a).value});KO.exports=LK});var Vv=v((bge,JO)=\u003e{var BK=Xe(),zK=BK(function(e,a,s){return e(s)?a(s):s});JO.exports=zK});var Wv=v((xge,eC)=\u003e{var GK=ne(),UK=Un(),$K=GK(function(e,a){for(var s in e)if(UK(s,e)\u0026\u0026!e[s](a[s]))return!1;return!0});eC.exports=$K});var nC=v((wge,tC)=\u003e{var HK=ne(),YK=$n(),XK=cr(),ZK=Wv(),KK=HK(function(e,a){return ZK(XK(YK,e),a)});tC.exports=KK});var aC=v((qge,rC)=\u003e{var QK=Us(),JK=ne(),eQ=Gc(),tQ=Lc(),nQ=JK(function(r,e){return tQ(eQ(QK)(r),e)});rC.exports=nQ});var iC=v((Tge,sC)=\u003e{var rQ=ne(),aQ=rQ(function(e,a){return Boolean(!e^!a)});sC.exports=aQ});var cC=v((Sge,oC)=\u003e{var sQ=ne(),iQ=sQ(function(e,a){for(var s=0,o=e.length,u,h=a.length,f=[];s\u003co;){for(u=0;u\u003ch;)f[f.length]=[e[s],a[u]],u+=1;s+=1}return f});oC.exports=iQ});var lC=v((Mge,uC)=\u003e{var oQ=ne(),cQ=oQ(function(e,a){for(var s=[],o=0,u=Math.min(e.length,a.length);o\u003cu;)s[o]=[e[o],a[o]],o+=1;return s});uC.exports=cQ});var hC=v((Pge,pC)=\u003e{var uQ=ne(),lQ=uQ(function(e,a){for(var s=0,o=Math.min(e.length,a.length),u={};s\u003co;)u[e[s]]=a[s],s+=1;return u});pC.exports=lQ});var fC=v((Oge,dC)=\u003e{var pQ=Xe(),hQ=pQ(function(e,a,s){for(var o=[],u=0,h=Math.min(a.length,s.length);u\u003ch;)o[u]=e(a[u],s[u]),u+=1;return o});dC.exports=hQ});var vC=v((Cge,mC)=\u003e{var dQ=hn(),fQ=Ve(),mQ=fQ(function(e){return dQ(e.length,function(){var s=arguments;return function(){return e.apply(this,s)}})});mC.exports=mQ});var Kp=v((Age,O)=\u003e{O.exports={};O.exports.F=WN();O.exports.T=km();O.exports.__=Nm();O.exports.add=Oc();O.exports.addIndex=eb();O.exports.adjust=xm();O.exports.all=wm();O.exports.allPass=Lb();O.exports.always=fo();O.exports.and=Pm();O.exports.any=Hb();O.exports.anyPass=Xb();O.exports.ap=Pp();O.exports.aperture=nx();O.exports.append=ax();O.exports.apply=Om();O.exports.applySpec=ux();O.exports.applyTo=px();O.exports.ascend=dx();O.exports.assoc=mo();O.exports.assocPath=Am();O.exports.binary=kx();O.exports.bind=Tm();O.exports.both=Tx();O.exports.call=Em();O.exports.chain=Cp();O.exports.clamp=Wx();O.exports.clone=$x();O.exports.comparator=Yx();O.exports.complement=Fm();O.exports.compose=Ep();O.exports.composeK=Vm();O.exports.composeP=p1();O.exports.composeWith=g1();O.exports.concat=Wp();O.exports.cond=Km();O.exports.construct=rw();O.exports.constructN=Qm();O.exports.contains=sw();O.exports.converge=Lp();O.exports.countBy=pw();O.exports.curry=ss();O.exports.curryN=hn();O.exports.dec=dw();O.exports.defaultTo=Jm();O.exports.descend=vw();O.exports.difference=tv();O.exports.differenceWith=nv();O.exports.dissoc=rv();O.exports.dissocPath=Pw();O.exports.divide=Cw();O.exports.drop=sv();O.exports.dropLast=Uw();O.exports.dropLastWhile=Kw();O.exports.dropRepeats=aq();O.exports.dropRepeatsWith=ov();O.exports.dropWhile=uq();O.exports.either=cv();O.exports.empty=uv();O.exports.endsWith=mq();O.exports.eqBy=gq();O.exports.eqProps=_q();O.exports.equals=$n();O.exports.evolve=Nq();O.exports.filter=Vp();O.exports.find=qq();O.exports.findIndex=Pq();O.exports.findLast=Rq();O.exports.findLastIndex=Iq();O.exports.flatten=Vq();O.exports.flip=Gc();O.exports.forEach=Bq();O.exports.forEachObjIndexed=Gq();O.exports.fromPairs=$q();O.exports.groupBy=Yq();O.exports.groupWith=Zq();O.exports.gt=Qq();O.exports.gte=eT();O.exports.has=hv();O.exports.hasIn=sT();O.exports.hasPath=pv();O.exports.head=jp();O.exports.identical=oT();O.exports.identity=ko();O.exports.ifElse=dv();O.exports.inc=lT();O.exports.includes=hT();O.exports.indexBy=fT();O.exports.indexOf=vT();O.exports.init=fv();O.exports.innerJoin=_T();O.exports.insert=NT();O.exports.insertAll=xT();O.exports.intersection=ST();O.exports.intersperse=PT();O.exports.into=IT();O.exports.invert=VT();O.exports.invertObj=LT();O.exports.invoker=bo();O.exports.is=yv();O.exports.isEmpty=UT();O.exports.isNil=Op();O.exports.join=HT();O.exports.juxt=Hp();O.exports.keys=wr();O.exports.keysIn=ZT();O.exports.last=Gp();O.exports.lastIndexOf=QT();O.exports.length=kv();O.exports.lens=Uc();O.exports.lensIndex=rS();O.exports.lensPath=sS();O.exports.lensProp=oS();O.exports.lift=Ic();O.exports.liftN=Rm();O.exports.lt=uS();O.exports.lte=pS();O.exports.map=cr();O.exports.mapAccum=dS();O.exports.mapAccumRight=mS();O.exports.mapObjIndexed=gS();O.exports.match=_S();O.exports.mathMod=bS();O.exports.max=zs();O.exports.maxBy=wS();O.exports.mean=bv();O.exports.median=MS();O.exports.memoizeWith=OS();O.exports.merge=xv();O.exports.mergeAll=RS();O.exports.mergeDeepLeft=FS();O.exports.mergeDeepRight=WS();O.exports.mergeDeepWith=BS();O.exports.mergeDeepWithKey=$c();O.exports.mergeLeft=GS();O.exports.mergeRight=$S();O.exports.mergeWith=YS();O.exports.mergeWithKey=Xp();O.exports.min=ZS();O.exports.minBy=QS();O.exports.modulo=eM();O.exports.move=nM();O.exports.multiply=wv();O.exports.nAry=Dc();O.exports.negate=sM();O.exports.none=oM();O.exports.not=Im();O.exports.nth=Gs();O.exports.nthArg=uM();O.exports.o=pM();O.exports.objOf=vv();O.exports.of=qv();O.exports.omit=vM();O.exports.once=yM();O.exports.or=Up();O.exports.otherwise=NM();O.exports.over=Sv();O.exports.pair=qM();O.exports.partial=MM();O.exports.partialRight=OM();O.exports.partition=AM();O.exports.path=as();O.exports.paths=Mm();O.exports.pathEq=EM();O.exports.pathOr=Pv();O.exports.pathSatisfies=IM();O.exports.pick=VM();O.exports.pickAll=Ov();O.exports.pickBy=BM();O.exports.pipe=Fc();O.exports.pipeK=GM();O.exports.pipeP=Wm();O.exports.pipeWith=Lm();O.exports.pluck=ho();O.exports.prepend=Cv();O.exports.product=HM();O.exports.project=ZM();O.exports.prop=jc();O.exports.propEq=QM();O.exports.propIs=eP();O.exports.propOr=nP();O.exports.propSatisfies=aP();O.exports.props=iP();O.exports.range=uP();O.exports.reduce=Lr();O.exports.reduceBy=zc();O.exports.reduceRight=Rv();O.exports.reduceWhile=hP();O.exports.reduced=fP();O.exports.reject=Lc();O.exports.remove=av();O.exports.repeat=gP();O.exports.replace=_P();O.exports.reverse=_o();O.exports.scan=NP();O.exports.sequence=jv();O.exports.set=wP();O.exports.slice=qr();O.exports.sort=TP();O.exports.sortBy=MP();O.exports.sortWith=OP();O.exports.split=AP();O.exports.splitAt=jP();O.exports.splitEvery=IP();O.exports.splitWhen=VP();O.exports.startsWith=LP();O.exports.subtract=zP();O.exports.sum=Nv();O.exports.symmetricDifference=$P();O.exports.symmetricDifferenceWith=XP();O.exports.tail=yo();O.exports.take=zp();O.exports.takeLast=lv();O.exports.takeLastWhile=KP();O.exports.takeWhile=nO();O.exports.tap=oO();O.exports.test=pO();O.exports.andThen=dO();O.exports.times=Ev();O.exports.toLower=mO();O.exports.toPairs=gO();O.exports.toPairsIn=_O();O.exports.toString=Bc();O.exports.toUpper=NO();O.exports.transduce=xO();O.exports.transpose=qO();O.exports.traverse=SO();O.exports.trim=OO();O.exports.tryCatch=AO();O.exports.type=Ap();O.exports.unapply=EO();O.exports.unary=DO();O.exports.uncurryN=FO();O.exports.unfold=WO();O.exports.union=BO();O.exports.unionWith=UO();O.exports.uniq=$p();O.exports.uniqBy=mv();O.exports.uniqWith=Dv();O.exports.unless=Iv();O.exports.unnest=Fv();O.exports.until=Zp();O.exports.update=Bp();O.exports.useWith=Av();O.exports.values=Cm();O.exports.valuesIn=ZO();O.exports.view=QO();O.exports.when=Vv();O.exports.where=Wv();O.exports.whereEq=nC();O.exports.without=aC();O.exports.xor=iC();O.exports.xprod=cC();O.exports.zip=lC();O.exports.zipObj=hC();O.exports.zipWith=fC();O.exports.thunkify=vC()});var aa=v((Qp,gC)=\u003e{(function(r,e){typeof Qp==\"object\"\u0026\u0026typeof gC!=\"undefined\"?e(Qp):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.d3=r.d3||{}))})(Qp,function(r){\"use strict\";function e(T,C){return T\u003cC?-1:T\u003eC?1:T\u003e=C?0:NaN}function a(T){let C=T,A=T;T.length===1\u0026\u0026(C=(_e,qe)=\u003eT(_e)-qe,A=s(T));function F(_e,qe,Ge,Ye){for(Ge==null\u0026\u0026(Ge=0),Ye==null\u0026\u0026(Ye=_e.length);Ge\u003cYe;){let ht=Ge+Ye\u003e\u003e\u003e1;A(_e[ht],qe)\u003c0?Ge=ht+1:Ye=ht}return Ge}function I(_e,qe,Ge,Ye){for(Ge==null\u0026\u0026(Ge=0),Ye==null\u0026\u0026(Ye=_e.length);Ge\u003cYe;){let ht=Ge+Ye\u003e\u003e\u003e1;A(_e[ht],qe)\u003e0?Ye=ht:Ge=ht+1}return Ge}function z(_e,qe,Ge,Ye){Ge==null\u0026\u0026(Ge=0),Ye==null\u0026\u0026(Ye=_e.length);let ht=F(_e,qe,Ge,Ye-1);return ht\u003eGe\u0026\u0026C(_e[ht-1],qe)\u003e-C(_e[ht],qe)?ht-1:ht}return{left:F,center:z,right:I}}function s(T){return(C,A)=\u003ee(T(C),A)}function o(T){return T===null?NaN:+T}function*u(T,C){if(C===void 0)for(let A of T)A!=null\u0026\u0026(A=+A)\u003e=A\u0026\u0026(yield A);else{let A=-1;for(let F of T)(F=C(F,++A,T))!=null\u0026\u0026(F=+F)\u003e=F\u0026\u0026(yield F)}}let h=a(e),f=h.right,y=h.left,k=a(o).center;function q(T,C){let A=0;if(C===void 0)for(let F of T)F!=null\u0026\u0026(F=+F)\u003e=F\u0026\u0026++A;else{let F=-1;for(let I of T)(I=C(I,++F,T))!=null\u0026\u0026(I=+I)\u003e=I\u0026\u0026++A}return A}function x(T){return T.length|0}function M(T){return!(T\u003e0)}function L(T){return typeof T!=\"object\"||\"length\"in T?T:Array.from(T)}function j(T){return C=\u003eT(...C)}function B(...T){let C=typeof T[T.length-1]==\"function\"\u0026\u0026j(T.pop());T=T.map(L);let A=T.map(x),F=T.length-1,I=new Array(F+1).fill(0),z=[];if(F\u003c0||A.some(M))return z;for(;;){z.push(I.map((qe,Ge)=\u003eT[Ge][qe]));let _e=F;for(;++I[_e]===A[_e];){if(_e===0)return C?z.map(C):z;I[_e--]=0}}}function ee(T,C){var A=0,F=0;return Float64Array.from(T,C===void 0?I=\u003eA+=+I||0:I=\u003eA+=+C(I,F++,T)||0)}function de(T,C){return C\u003cT?-1:C\u003eT?1:C\u003e=T?0:NaN}function ie(T,C){let A=0,F,I=0,z=0;if(C===void 0)for(let _e of T)_e!=null\u0026\u0026(_e=+_e)\u003e=_e\u0026\u0026(F=_e-I,I+=F/++A,z+=F*(_e-I));else{let _e=-1;for(let qe of T)(qe=C(qe,++_e,T))!=null\u0026\u0026(qe=+qe)\u003e=qe\u0026\u0026(F=qe-I,I+=F/++A,z+=F*(qe-I))}if(A\u003e1)return z/(A-1)}function pe(T,C){let A=ie(T,C);return A\u0026\u0026Math.sqrt(A)}function G(T,C){let A,F;if(C===void 0)for(let I of T)I!=null\u0026\u0026(A===void 0?I\u003e=I\u0026\u0026(A=F=I):(A\u003eI\u0026\u0026(A=I),F\u003cI\u0026\u0026(F=I)));else{let I=-1;for(let z of T)(z=C(z,++I,T))!=null\u0026\u0026(A===void 0?z\u003e=z\u0026\u0026(A=F=z):(A\u003ez\u0026\u0026(A=z),F\u003cz\u0026\u0026(F=z)))}return[A,F]}class R{constructor(){this._partials=new Float64Array(32),this._n=0}add(C){let A=this._partials,F=0;for(let I=0;I\u003cthis._n\u0026\u0026I\u003c32;I++){let z=A[I],_e=C+z,qe=Math.abs(C)\u003cMath.abs(z)?C-(_e-z):z-(_e-C);qe\u0026\u0026(A[F++]=qe),C=_e}return A[F]=C,this._n=F+1,this}valueOf(){let C=this._partials,A=this._n,F,I,z,_e=0;if(A\u003e0){for(_e=C[--A];A\u003e0\u0026\u0026(F=_e,I=C[--A],_e=F+I,z=I-(_e-F),!z););A\u003e0\u0026\u0026(z\u003c0\u0026\u0026C[A-1]\u003c0||z\u003e0\u0026\u0026C[A-1]\u003e0)\u0026\u0026(I=z*2,F=_e+I,I==F-_e\u0026\u0026(_e=F))}return _e}}function H(T,C){let A=new R;if(C===void 0)for(let F of T)(F=+F)\u0026\u0026A.add(F);else{let F=-1;for(let I of T)(I=+C(I,++F,T))\u0026\u0026A.add(I)}return+A}function $(T,C){let A=new R,F=-1;return Float64Array.from(T,C===void 0?I=\u003eA.add(+I||0):I=\u003eA.add(+C(I,++F,T)||0))}class se extends Map{constructor(C,A=ze){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:A}}),C!=null)for(let[F,I]of C)this.set(F,I)}get(C){return super.get(xe(this,C))}has(C){return super.has(xe(this,C))}set(C,A){return super.set(ke(this,C),A)}delete(C){return super.delete(Re(this,C))}}class ce extends Set{constructor(C,A=ze){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:A}}),C!=null)for(let F of C)this.add(F)}has(C){return super.has(xe(this,C))}add(C){return super.add(ke(this,C))}delete(C){return super.delete(Re(this,C))}}function xe({_intern:T,_key:C},A){let F=C(A);return T.has(F)?T.get(F):A}function ke({_intern:T,_key:C},A){let F=C(A);return T.has(F)?T.get(F):(T.set(F,A),A)}function Re({_intern:T,_key:C},A){let F=C(A);return T.has(F)\u0026\u0026(A=T.get(A),T.delete(F)),A}function ze(T){return T!==null\u0026\u0026typeof T==\"object\"?T.valueOf():T}function He(T){return T}function X(T,...C){return Qe(T,He,He,C)}function oe(T,...C){return Qe(T,Array.from,He,C)}function Y(T,C,...A){return Qe(T,He,C,A)}function J(T,C,...A){return Qe(T,Array.from,C,A)}function ge(T,...C){return Qe(T,He,We,C)}function me(T,...C){return Qe(T,Array.from,We,C)}function We(T){if(T.length!==1)throw new Error(\"duplicate key\");return T[0]}function Qe(T,C,A,F){return function I(z,_e){if(_e\u003e=F.length)return A(z);let qe=new se,Ge=F[_e++],Ye=-1;for(let ht of z){let bt=Ge(ht,++Ye,z),Wt=qe.get(bt);Wt?Wt.push(ht):qe.set(bt,[ht])}for(let[ht,bt]of qe)qe.set(ht,I(bt,_e));return C(qe)}(T,0)}function ft(T,C){return Array.from(C,A=\u003eT[A])}function le(T,...C){if(typeof T[Symbol.iterator]!=\"function\")throw new TypeError(\"values is not iterable\");T=Array.from(T);let[A=e]=C;if(A.length===1||C.length\u003e1){let F=Uint32Array.from(T,(I,z)=\u003ez);return C.length\u003e1?(C=C.map(I=\u003eT.map(I)),F.sort((I,z)=\u003e{for(let _e of C){let qe=e(_e[I],_e[z]);if(qe)return qe}})):(A=T.map(A),F.sort((I,z)=\u003ee(A[I],A[z]))),ft(T,F)}return T.sort(A)}function Ne(T,C,A){return(C.length===1?le(Y(T,C,A),([F,I],[z,_e])=\u003ee(I,_e)||e(F,z)):le(X(T,A),([F,I],[z,_e])=\u003eC(I,_e)||e(F,z))).map(([F])=\u003eF)}var Me=Array.prototype,Be=Me.slice;function Oe(T){return function(){return T}}var Pe=Math.sqrt(50),tt=Math.sqrt(10),mt=Math.sqrt(2);function Zt(T,C,A){var F,I=-1,z,_e,qe;if(C=+C,T=+T,A=+A,T===C\u0026\u0026A\u003e0)return[T];if((F=C\u003cT)\u0026\u0026(z=T,T=C,C=z),(qe=An(T,C,A))===0||!isFinite(qe))return[];if(qe\u003e0){let Ge=Math.round(T/qe),Ye=Math.round(C/qe);for(Ge*qe\u003cT\u0026\u0026++Ge,Ye*qe\u003eC\u0026\u0026--Ye,_e=new Array(z=Ye-Ge+1);++I\u003cz;)_e[I]=(Ge+I)*qe}else{qe=-qe;let Ge=Math.round(T*qe),Ye=Math.round(C*qe);for(Ge/qe\u003cT\u0026\u0026++Ge,Ye/qe\u003eC\u0026\u0026--Ye,_e=new Array(z=Ye-Ge+1);++I\u003cz;)_e[I]=(Ge+I)/qe}return F\u0026\u0026_e.reverse(),_e}function An(T,C,A){var F=(C-T)/Math.max(0,A),I=Math.floor(Math.log(F)/Math.LN10),z=F/Math.pow(10,I);return I\u003e=0?(z\u003e=Pe?10:z\u003e=tt?5:z\u003e=mt?2:1)*Math.pow(10,I):-Math.pow(10,-I)/(z\u003e=Pe?10:z\u003e=tt?5:z\u003e=mt?2:1)}function Et(T,C,A){var F=Math.abs(C-T)/Math.max(0,A),I=Math.pow(10,Math.floor(Math.log(F)/Math.LN10)),z=F/I;return z\u003e=Pe?I*=10:z\u003e=tt?I*=5:z\u003e=mt\u0026\u0026(I*=2),C\u003cT?-I:I}function Rn(T,C,A){let F;for(;;){let I=An(T,C,A);if(I===F||I===0||!isFinite(I))return[T,C];I\u003e0?(T=Math.floor(T/I)*I,C=Math.ceil(C/I)*I):I\u003c0\u0026\u0026(T=Math.ceil(T*I)/I,C=Math.floor(C*I)/I),F=I}}function En(T){return Math.ceil(Math.log(q(T))/Math.LN2)+1}function Or(){var T=He,C=G,A=En;function F(I){Array.isArray(I)||(I=Array.from(I));var z,_e=I.length,qe,Ge=new Array(_e);for(z=0;z\u003c_e;++z)Ge[z]=T(I[z],z,I);var Ye=C(Ge),ht=Ye[0],bt=Ye[1],Wt=A(Ge,ht,bt);if(!Array.isArray(Wt)){let Ff=bt,Mi=+Wt;if(C===G\u0026\u0026([ht,bt]=Rn(ht,bt,Mi)),Wt=Zt(ht,bt,Mi),Wt[Wt.length-1]\u003e=bt)if(Ff\u003e=bt\u0026\u0026C===G){let vr=An(ht,bt,Mi);isFinite(vr)\u0026\u0026(vr\u003e0?bt=(Math.floor(bt/vr)+1)*vr:vr\u003c0\u0026\u0026(bt=(Math.ceil(bt*-vr)+1)/-vr))}else Wt.pop()}for(var Er=Wt.length;Wt[0]\u003c=ht;)Wt.shift(),--Er;for(;Wt[Er-1]\u003ebt;)Wt.pop(),--Er;var As=new Array(Er+1),Si;for(z=0;z\u003c=Er;++z)Si=As[z]=[],Si.x0=z\u003e0?Wt[z-1]:ht,Si.x1=z\u003cEr?Wt[z]:bt;for(z=0;z\u003c_e;++z)qe=Ge[z],ht\u003c=qe\u0026\u0026qe\u003c=bt\u0026\u0026As[f(Wt,qe,0,Er)].push(I[z]);return As}return F.value=function(I){return arguments.length?(T=typeof I==\"function\"?I:Oe(I),F):T},F.domain=function(I){return arguments.length?(C=typeof I==\"function\"?I:Oe([I[0],I[1]]),F):C},F.thresholds=function(I){return arguments.length?(A=typeof I==\"function\"?I:Array.isArray(I)?Oe(Be.call(I)):Oe(I),F):A},F}function mr(T,C){let A;if(C===void 0)for(let F of T)F!=null\u0026\u0026(A\u003cF||A===void 0\u0026\u0026F\u003e=F)\u0026\u0026(A=F);else{let F=-1;for(let I of T)(I=C(I,++F,T))!=null\u0026\u0026(A\u003cI||A===void 0\u0026\u0026I\u003e=I)\u0026\u0026(A=I)}return A}function Cr(T,C){let A;if(C===void 0)for(let F of T)F!=null\u0026\u0026(A\u003eF||A===void 0\u0026\u0026F\u003e=F)\u0026\u0026(A=F);else{let F=-1;for(let I of T)(I=C(I,++F,T))!=null\u0026\u0026(A\u003eI||A===void 0\u0026\u0026I\u003e=I)\u0026\u0026(A=I)}return A}function vt(T,C,A=0,F=T.length-1,I=e){for(;F\u003eA;){if(F-A\u003e600){let Ge=F-A+1,Ye=C-A+1,ht=Math.log(Ge),bt=.5*Math.exp(2*ht/3),Wt=.5*Math.sqrt(ht*bt*(Ge-bt)/Ge)*(Ye-Ge/2\u003c0?-1:1),Er=Math.max(A,Math.floor(C-Ye*bt/Ge+Wt)),As=Math.min(F,Math.floor(C+(Ge-Ye)*bt/Ge+Wt));vt(T,C,Er,As,I)}let z=T[C],_e=A,qe=F;for(er(T,A,C),I(T[F],z)\u003e0\u0026\u0026er(T,A,F);_e\u003cqe;){for(er(T,_e,qe),++_e,--qe;I(T[_e],z)\u003c0;)++_e;for(;I(T[qe],z)\u003e0;)--qe}I(T[A],z)===0?er(T,A,qe):(++qe,er(T,qe,F)),qe\u003c=C\u0026\u0026(A=qe+1),C\u003c=qe\u0026\u0026(F=qe-1)}return T}function er(T,C,A){let F=T[C];T[C]=T[A],T[A]=F}function Fn(T,C,A){if(T=Float64Array.from(u(T,A)),!!(F=T.length)){if((C=+C)\u003c=0||F\u003c2)return Cr(T);if(C\u003e=1)return mr(T);var F,I=(F-1)*C,z=Math.floor(I),_e=mr(vt(T,z).subarray(0,z+1)),qe=Cr(T.subarray(z+1));return _e+(qe-_e)*(I-z)}}function La(T,C,A=o){if(!!(F=T.length)){if((C=+C)\u003c=0||F\u003c2)return+A(T[0],0,T);if(C\u003e=1)return+A(T[F-1],F-1,T);var F,I=(F-1)*C,z=Math.floor(I),_e=+A(T[z],z,T),qe=+A(T[z+1],z+1,T);return _e+(qe-_e)*(I-z)}}function Ba(T,C,A){return Math.ceil((A-C)/(2*(Fn(T,.75)-Fn(T,.25))*Math.pow(q(T),-1/3)))}function ma(T,C,A){return Math.ceil((A-C)/(3.5*pe(T)*Math.pow(q(T),-1/3)))}function va(T,C){let A,F=-1,I=-1;if(C===void 0)for(let z of T)++I,z!=null\u0026\u0026(A\u003cz||A===void 0\u0026\u0026z\u003e=z)\u0026\u0026(A=z,F=I);else for(let z of T)(z=C(z,++I,T))!=null\u0026\u0026(A\u003cz||A===void 0\u0026\u0026z\u003e=z)\u0026\u0026(A=z,F=I);return F}function oc(T,C){let A=0,F=0;if(C===void 0)for(let I of T)I!=null\u0026\u0026(I=+I)\u003e=I\u0026\u0026(++A,F+=I);else{let I=-1;for(let z of T)(z=C(z,++I,T))!=null\u0026\u0026(z=+z)\u003e=z\u0026\u0026(++A,F+=z)}if(A)return F/A}function Ar(T,C){return Fn(T,.5,C)}function*Rr(T){for(let C of T)yield*C}function _i(T){return Array.from(Rr(T))}function ki(T,C){let A,F=-1,I=-1;if(C===void 0)for(let z of T)++I,z!=null\u0026\u0026(A\u003ez||A===void 0\u0026\u0026z\u003e=z)\u0026\u0026(A=z,F=I);else for(let z of T)(z=C(z,++I,T))!=null\u0026\u0026(A\u003ez||A===void 0\u0026\u0026z\u003e=z)\u0026\u0026(A=z,F=I);return F}function za(T,C=Os){let A=[],F,I=!1;for(let z of T)I\u0026\u0026A.push(C(F,z)),F=z,I=!0;return A}function Os(T,C){return[T,C]}function Ga(T,C,A){T=+T,C=+C,A=(I=arguments.length)\u003c2?(C=T,T=0,1):I\u003c3?1:+A;for(var F=-1,I=Math.max(0,Math.ceil((C-T)/A))|0,z=new Array(I);++F\u003cI;)z[F]=T+F*A;return z}function cc(T,C=e){let A,F=!1;if(C.length===1){let I;for(let z of T){let _e=C(z);(F?e(_e,I)\u003c0:e(_e,_e)===0)\u0026\u0026(A=z,I=_e,F=!0)}}else for(let I of T)(F?C(I,A)\u003c0:C(I,I)===0)\u0026\u0026(A=I,F=!0);return A}function Ni(T,C=e){if(C.length===1)return ki(T,C);let A,F=-1,I=-1;for(let z of T)++I,(F\u003c0?C(z,z)===0:C(z,A)\u003c0)\u0026\u0026(A=z,F=I);return F}function Ze(T,C=e){let A,F=!1;if(C.length===1){let I;for(let z of T){let _e=C(z);(F?e(_e,I)\u003e0:e(_e,_e)===0)\u0026\u0026(A=z,I=_e,F=!0)}}else for(let I of T)(F?C(I,A)\u003e0:C(I,I)===0)\u0026\u0026(A=I,F=!0);return A}function ga(T,C=e){if(C.length===1)return va(T,C);let A,F=-1,I=-1;for(let z of T)++I,(F\u003c0?C(z,z)===0:C(z,A)\u003e0)\u0026\u0026(A=z,F=I);return F}function uc(T,C){let A=Ni(T,C);return A\u003c0?void 0:A}var bi=xi(Math.random);function xi(T){return function(A,F=0,I=A.length){let z=I-(F=+F);for(;z;){let _e=T()*z--|0,qe=A[z+F];A[z+F]=A[_e+F],A[_e+F]=qe}return A}}function wi(T,C){let A=0;if(C===void 0)for(let F of T)(F=+F)\u0026\u0026(A+=F);else{let F=-1;for(let I of T)(I=+C(I,++F,T))\u0026\u0026(A+=I)}return A}function vl(T){if(!(z=T.length))return[];for(var C=-1,A=Cr(T,jf),F=new Array(A);++C\u003cA;)for(var I=-1,z,_e=F[C]=new Array(z);++I\u003cz;)_e[I]=T[I][C];return F}function jf(T){return T.length}function Vt(){return vl(arguments)}function qi(T,C){if(typeof C!=\"function\")throw new TypeError(\"test is not a function\");let A=-1;for(let F of T)if(!C(F,++A,T))return!1;return!0}function Df(T,C){if(typeof C!=\"function\")throw new TypeError(\"test is not a function\");let A=-1;for(let F of T)if(C(F,++A,T))return!0;return!1}function gl(T,C){if(typeof C!=\"function\")throw new TypeError(\"test is not a function\");let A=[],F=-1;for(let I of T)C(I,++F,T)\u0026\u0026A.push(I);return A}function If(T,C){if(typeof T[Symbol.iterator]!=\"function\")throw new TypeError(\"values is not iterable\");if(typeof C!=\"function\")throw new TypeError(\"mapper is not a function\");return Array.from(T,(A,F)=\u003eC(A,F,T))}function Cs(T,C,A){if(typeof C!=\"function\")throw new TypeError(\"reducer is not a function\");let F=T[Symbol.iterator](),I,z,_e=-1;if(arguments.length\u003c3){if({done:I,value:A}=F.next(),I)return;++_e}for(;{done:I,value:z}=F.next(),!I;)A=C(A,z,++_e,T);return A}function i0(T){if(typeof T[Symbol.iterator]!=\"function\")throw new TypeError(\"values is not iterable\");return Array.from(T).reverse()}function St(T,...C){T=new Set(T);for(let A of C)for(let F of A)T.delete(F);return T}function Ut(T,C){let A=C[Symbol.iterator](),F=new Set;for(let I of T){if(F.has(I))return!1;let z,_e;for(;({value:z,done:_e}=A.next())\u0026\u0026!_e;){if(Object.is(I,z))return!1;F.add(z)}}return!0}function yl(T){return T instanceof Set?T:new Set(T)}function jt(T,...C){T=new Set(T),C=C.map(yl);e:for(let A of T)for(let F of C)if(!F.has(A)){T.delete(A);continue e}return T}function Ti(T,C){let A=T[Symbol.iterator](),F=new Set;for(let I of C){if(F.has(I))continue;let z,_e;for(;{value:z,done:_e}=A.next();){if(_e)return!1;if(F.add(z),Object.is(I,z))break}}return!0}function lc(T,C){return Ti(C,T)}function _l(...T){let C=new Set;for(let A of T)for(let F of A)C.add(F);return C}r.Adder=R,r.InternMap=se,r.InternSet=ce,r.ascending=e,r.bin=Or,r.bisect=f,r.bisectCenter=k,r.bisectLeft=y,r.bisectRight=f,r.bisector=a,r.count=q,r.cross=B,r.cumsum=ee,r.descending=de,r.deviation=pe,r.difference=St,r.disjoint=Ut,r.every=qi,r.extent=G,r.fcumsum=$,r.filter=gl,r.fsum=H,r.greatest=Ze,r.greatestIndex=ga,r.group=X,r.groupSort=Ne,r.groups=oe,r.histogram=Or,r.index=ge,r.indexes=me,r.intersection=jt,r.least=cc,r.leastIndex=Ni,r.map=If,r.max=mr,r.maxIndex=va,r.mean=oc,r.median=Ar,r.merge=_i,r.min=Cr,r.minIndex=ki,r.nice=Rn,r.pairs=za,r.permute=ft,r.quantile=Fn,r.quantileSorted=La,r.quickselect=vt,r.range=Ga,r.reduce=Cs,r.reverse=i0,r.rollup=Y,r.rollups=J,r.scan=uc,r.shuffle=bi,r.shuffler=xi,r.some=Df,r.sort=le,r.subset=lc,r.sum=wi,r.superset=Ti,r.thresholdFreedmanDiaconis=Ba,r.thresholdScott=ma,r.thresholdSturges=En,r.tickIncrement=An,r.tickStep=Et,r.ticks=Zt,r.transpose=vl,r.union=_l,r.variance=ie,r.zip=Vt,Object.defineProperty(r,\"__esModule\",{value:!0})})});var lh=v(De=\u003e{\"use strict\";Object.defineProperty(De,\"__esModule\",{value:!0});De.replace=De.edit=De.appendChild=De.insertChild=De.insertRight=De.insertLeft=De.prev=De.next=De.root=De.up=De.canGoUp=De.canGoRight=De.canGoLeft=De.isRightmost=De.isLeftmost=De.isNotTop=De.isTop=De.isEnd=De.getChildren=De.isLeaf=De.value=De.whilst=void 0;De.zipperFrom=Yn;De.isBranch=$s;De.leftmost=EC;De.left=sg;De.right=oh;De.rightmost=ig;De.canGoDown=og;De.down=ch;De.remove=VC;De.makeZipper=BC;var gQ=Nm(),_C=qt(gQ),yQ=mo(),$v=qt(yQ),_Q=qv(),kQ=qt(_Q),NQ=fo(),bQ=qt(NQ),xQ=Em(),wQ=qt(xQ),qQ=Km(),kC=qt(qQ),TQ=Lp(),Jp=qt(TQ),SQ=Fm(),xo=qt(SQ),MQ=ss(),is=qt(MQ),PQ=cv(),OQ=qt(PQ),CQ=jp(),Hv=qt(CQ),AQ=$n(),Yv=qt(AQ),RQ=ko(),eh=qt(RQ),EQ=fv(),Xv=qt(EQ),jQ=dv(),NC=qt(jQ),DQ=Gp(),th=qt(DQ),IQ=Up(),Zv=qt(IQ),FQ=jc(),Pa=qt(FQ),VQ=Hp(),WQ=qt(VQ),LQ=yo(),Kv=qt(LQ),BQ=Fc(),zt=qt(BQ),zQ=xv(),os=qt(zQ),GQ=km(),bC=qt(GQ),UQ=Vv(),xC=qt(UQ),$Q=Iv(),HQ=qt($Q),YQ=Zp(),XQ=qt(YQ),ZQ=Fv(),KQ=qt(ZQ);function qt(r){return r\u0026\u0026r.__esModule?r:{default:r}}var Qv=null,Jv=\"END\";function eg(r){return!r.length}var tg=De.whilst=(0,is.default)(function(r,e,a){for(var s=a;r(s);)s=e(s);return s}),QQ={left:[],right:[],parentItems:Qv,parentPath:Qv,changed:!1};function ng(r,e,a){this.item=r,this.path=e,this.meta=a}var Hn=(0,Pa.default)(\"item\"),JQ=De.value=Hn,qn=(0,Pa.default)(\"path\"),nh=(0,Pa.default)(\"meta\"),eJ=(0,is.default)(function(r,e){return r(e),e}),tJ=function(e){return function(){throw new Error(e)}},wC=(0,zt.default)(tJ,eJ);function Yn(r,e,a,s){return new ng(e,a||qn(r),s||nh(r))}function $s(r){return nh(r).isBranch(Hn(r))}var qC=De.isLeaf=(0,xo.default)($s),nJ=(0,zt.default)(nh,(0,Pa.default)(\"getChildren\")),rh=De.getChildren=(0,zt.default)((0,xC.default)(qC,wC(\"Tried getting children of a leaf\")),(0,Jp.default)(wQ.default,[nJ,Hn]));function ah(r,e,a){return nh(r).makeItem(e,a)}var Hs=De.isEnd=(0,zt.default)(qn,(0,Yv.default)(Jv)),rg=(0,Pa.default)(\"parentItems\"),TC=(0,zt.default)(rg,th.default),SC=(0,Pa.default)(\"parentPath\"),rJ=(0,zt.default)(qn,(0,xC.default)((0,Yv.default)(Jv),wC(\"Can't get parent items from end path.\")),rg),MC=(0,zt.default)(qn,TC),PC=(0,zt.default)(qn,SC),sa=De.isTop=(0,zt.default)(rJ,(0,Yv.default)(Qv)),OC=De.isNotTop=(0,xo.default)(sa),Ys=(0,zt.default)((0,Pa.default)(\"left\"),(0,Zv.default)(_C.default,[])),Xs=(0,zt.default)((0,Pa.default)(\"right\"),(0,Zv.default)(_C.default,[])),CC=(0,zt.default)(qn,Ys),AC=(0,zt.default)(qn,Xs),aJ=(0,zt.default)(qn,(0,Pa.default)(\"changed\"),Boolean),sJ=(0,xo.default)(aJ),iJ=(0,xo.default)(eg),sh=De.isLeftmost=(0,zt.default)(CC,eg),ih=De.isRightmost=(0,zt.default)(AC,eg),RC=De.canGoLeft=(0,xo.default)(sh),ag=De.canGoRight=(0,xo.default)(ih);function EC(r){if(sa(r)||sh(r))return r;var e=qn(r),a=Ys(e),s=Xs(e),o=Hn(r),u=(0,Hv.default)(a),h=[],f=(0,Kv.default)(a).concat([o],s);return Yn(r,u,(0,os.default)(e,{left:h,right:f}))}function sg(r){if(Hs(r))return r;if(sh(r))return null;var e=Hn(r),a=qn(r),s=Ys(a),o=Xs(a),u=(0,th.default)(s),h=(0,Xv.default)(s),f=[e].concat(o);return Yn(r,u,(0,os.default)(a,{left:h,right:f}))}function oh(r){if(Hs(r))return r;if(ih(r))return null;var e=Hn(r),a=qn(r),s=Ys(a),o=Xs(a),u=(0,Hv.default)(o),h=s.concat([e]),f=(0,Kv.default)(o);return Yn(r,u,(0,os.default)(a,{left:h,right:f}))}function ig(r){if(ih(r))return r;var e=qn(r),a=Xs(e),s=Ys(e),o=Hn(r),u=(0,th.default)(a),h=s.concat([o],(0,Xv.default)(a)),f=[];return Yn(r,u,(0,os.default)(e,{left:h,right:f}))}function og(r){return $s(r)\u0026\u0026iJ(rh(r))}function ch(r){if(!$s(r))return null;var e=Hn(r),a=qn(r),s=rh(r),o=[],u=(0,Kv.default)(s),h=Yn(r,(0,Hv.default)(s),(0,os.default)(a,{left:o,right:u,parentItems:(rg(a)||[]).concat([e]),parentPath:a}));return h}function jC(r,e){if(sa(e))throw new Error(\"Tried inserting left of top\");var a=Hn(e),s=qn(e),o=Ys(s);return Yn(e,a,(0,os.default)(s,{left:o.concat([r]),changed:!0}))}function DC(r,e){if(sa(e))throw new Error(\"Tried inserting left of top\");var a=Hn(e),s=qn(e),o=Xs(s);return Yn(e,a,(0,os.default)(s,{right:[r].concat(o),changed:!0}))}function Xc(r,e){return Hn(e)===r?e:Yn(e,r,(0,$v.default)(\"changed\",!0,qn(e)))}function IC(r,e){return Xc(r(Hn(e)),e)}var oJ=De.canGoUp=OC,cJ=(0,Jp.default)(Yn,[eh.default,MC,PC]),uJ=(0,zt.default)((0,WQ.default)([CC,(0,zt.default)(Hn,kQ.default),AC]),KQ.default),lJ=(0,Jp.default)(ah,[eh.default,MC,uJ]),uh=De.up=(0,kC.default)([[(0,Zv.default)(sa,Hs),(0,bQ.default)(null)],[sJ,cJ],[bC.default,(0,Jp.default)(Yn,[eh.default,lJ,(0,zt.default)(PC,(0,$v.default)(\"changed\",!0))])]]),pJ=De.root=(0,HQ.default)(Hs,tg(OC,uh)),hJ=function(e){return Yn(e,Hn(e),Jv)},dJ=(0,zt.default)((0,XQ.default)((0,OQ.default)(sa,ag),uh),(0,NC.default)(sa,hJ,oh)),fJ=De.next=(0,kC.default)([[Hs,eh.default],[og,ch],[ag,oh],[bC.default,dJ]]),FC=(0,zt.default)(ch,ig),mJ=De.prev=(0,NC.default)(RC,(0,zt.default)(sg,tg($s,FC)),uh);function VC(r){if(sa(r))throw new Error(\"Can't remove top.\");if(Hs(r))throw new Error(\"Can't remove end\");var e=qn(r),a=Ys(e);if(a.length){var s=Yn(r,(0,th.default)(a),(0,os.default)(e,{left:(0,Xv.default)(a),changed:!0}));return tg($s,FC,s)}else{var o=Xs(e),u=SC(e),h=TC(e);return Yn(r,ah(r,h,o),sa(r)?u:(0,$v.default)(\"changed\",!0,u))}}function WC(r,e){var a=[r].concat(rh(e));return Xc(ah(e,r,a),e)}function LC(r,e){var a=rh(e).concat([r]);return Xc(ah(e,r,a),e)}function Xt(r){return function(){return r(this)}}function wo(r){return function(a){return r(a,this)}}Object.assign(ng.prototype,{value:Xt(JQ),root:Xt(pJ),up:Xt(uh),down:Xt(ch),left:Xt(sg),right:Xt(oh),leftmost:Xt(EC),rightmost:Xt(ig),next:Xt(fJ),prev:Xt(mJ),isEnd:Xt(Hs),isTop:Xt(sa),isBranch:Xt($s),isLeaf:Xt(qC),isLeftmost:Xt(sh),isRightmost:Xt(ih),canGoUp:Xt(oJ),canGoLeft:Xt(RC),canGoRight:Xt(ag),canGoDown:Xt(og),edit:wo(IC),replace:wo(Xc),insertLeft:wo(jC),insertRight:wo(DC),insertChild:wo(WC),appendChild:wo(LC),remove:Xt(VC)});function BC(r,e,a){function s(o){return new ng(o,QQ,{isBranch:r,getChildren:e,makeItem:a})}return s.from=s,s}var zge=De.insertLeft=(0,is.default)(jC),Gge=De.insertRight=(0,is.default)(DC),Uge=De.insertChild=(0,is.default)(WC),$ge=De.appendChild=(0,is.default)(LC),Hge=De.edit=(0,is.default)(IC),Yge=De.replace=(0,is.default)(Xc);De.default=BC});var hg=v(Tr=\u003e{\"use strict\";Object.defineProperty(Tr,\"__esModule\",{value:!0});Tr.onPost=Tr.onPre=Tr.visit=Tr.POST=Tr.PRE=void 0;var vJ=ss(),zC=UC(vJ),gJ=hv(),GC=UC(gJ),zr=lh();function UC(r){return r\u0026\u0026r.__esModule?r:{default:r}}var $C=Tr.PRE=\"PRE\",cg=Tr.POST=\"POST\";function yJ(r,e,a,s){for(var o=e,u=a,h=!1,f=!1,y=0;y\u003cs.length;y++){var k=s[y],q=k(r,o,u)||{},x=q.item,M=q.state,L=q.stop,j=q.cut;if((0,GC.default)(\"item\",q)\u0026\u0026(o=x),(0,GC.default)(\"state\",q)\u0026\u0026(u=M),L||j){h=L,f=j;break}}return{item:o,state:u,stop:h,cut:f}}function ug(r,e,a,s){var o=yJ(r,(0,zr.value)(e),a,s)||{},u=o.item,h=o.state,f=o.stop,y=o.cut;return{loc:o.hasOwnProperty(\"item\")?(0,zr.replace)(u,e):e,state:o.hasOwnProperty(\"state\")?h:a,stop:f,cut:y}}var lg=\"DOWN\",pg=\"RIGHT\";function HC(r,e){return{item:(0,zr.value)((0,zr.root)(r)),state:e}}var Zge=Tr.visit=(0,zC.default)(function(e,a,s){for(var o=lg,u=s,h=a,f=!0;f||(0,zr.isNotTop)(u);)if(f=!1,o===lg){var y=ug($C,u,h,e);if(h=y.state,u=y.loc,y.stop)return HC(u,h);!y.cut\u0026\u0026(0,zr.canGoDown)(u)?u=(0,zr.down)(u):o=pg}else if(o===pg){var k=ug(cg,u,h,e);if(h=k.state,u=k.loc,k.stop)return HC(u,h);(0,zr.canGoRight)(u)?(u=(0,zr.right)(u),o=lg):(u=(0,zr.up)(u),o=pg)}var q=ug(cg,u,h,e);return h=q.state,u=q.loc,{item:(0,zr.value)(u),zipper:u,state:h}}),YC=(0,zC.default)(function(r,e){return function(a,s,o){return a===r?e(s,o):void 0}}),Kge=Tr.onPre=YC($C),Qge=Tr.onPost=YC(cg)});var XC=v(Oa=\u003e{\"use strict\";Object.defineProperty(Oa,\"__esModule\",{value:!0});Oa.walk=Oa.preWalk=Oa.postWalk=void 0;var _J=ss(),dg=kJ(_J),Zs=hg();function kJ(r){return r\u0026\u0026r.__esModule?r:{default:r}}var ph=function(e){return function(a,s){return{item:e(a)}}},NJ=Oa.postWalk=(0,dg.default)(function(r,e){return(0,Zs.visit)([(0,Zs.onPost)(ph(r))],void 0,e).zipper}),bJ=Oa.preWalk=(0,dg.default)(function(r,e){return(0,Zs.visit)([(0,Zs.onPre)(ph(r))],void 0,e).zipper}),xJ=Oa.walk=(0,dg.default)(function(r,e,a){return(0,Zs.visit)([(0,Zs.onPre)(ph(r)),(0,Zs.onPost)(ph(e))],void 0,a).zipper});Oa.default={walk:xJ,postWalk:NJ,preWalk:bJ}});var ZC=v(Zc=\u003e{\"use strict\";Object.defineProperty(Zc,\"__esModule\",{value:!0});Zc.ArrayZipper=void 0;var wJ=lh(),qJ=Zc.ArrayZipper=(0,wJ.makeZipper)(function(r){return!!r.length},function(r){return r},function(r,e){return e});Zc.default=qJ});var yg=v(ia=\u003e{\"use strict\";Object.defineProperty(ia,\"__esModule\",{value:!0});ia.ArrayZipper=ia.zip=void 0;var TJ=Object.assign||function(r){for(var e=1;e\u003carguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)\u0026\u0026(r[s]=a[s])}return r},fg=XC();Object.keys(fg).forEach(function(r){r!==\"default\"\u0026\u0026Object.defineProperty(ia,r,{enumerable:!0,get:function(){return fg[r]}})});var mg=hg();Object.keys(mg).forEach(function(r){r!==\"default\"\u0026\u0026Object.defineProperty(ia,r,{enumerable:!0,get:function(){return mg[r]}})});var vg=lh();Object.keys(vg).forEach(function(r){r!==\"default\"\u0026\u0026Object.defineProperty(ia,r,{enumerable:!0,get:function(){return vg[r]}})});var hh=gg(vg),SJ=gg(fg),MJ=ZC(),KC=PJ(MJ),QC=gg(mg);function PJ(r){return r\u0026\u0026r.__esModule?r:{default:r}}function gg(r){if(r\u0026\u0026r.__esModule)return r;var e={};if(r!=null)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)\u0026\u0026(e[a]=r[a]);return e.default=r,e}ia.zip=hh;ia.ArrayZipper=KC.default;var OJ=TJ({},hh,QC,{ArrayZipper:KC.default,walk:SJ,makeZipper:hh.makeZipper,visit:QC,zip:hh});ia.default=OJ});var Tn=v((mh,cA)=\u003e{(function(r,e){typeof mh==\"object\"\u0026\u0026typeof cA!=\"undefined\"?e(mh):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Core={}))})(mh,function(r){\"use strict\";var e=function(le,Ne){return Array(Math.abs(Ne)+1).join(le)};function a(le,Ne,Me){return function(){for(var Be=[],Oe=0;Oe\u003carguments.length;Oe++)Be[Oe]=arguments[Oe];return console.warn(le+\" is deprecated. Use \"+Ne+\".\"),Me.apply(this,Be)}}function s(le){return le!==null\u0026\u0026typeof le==\"object\"\u0026\u0026typeof le.name==\"string\"}function o(le){return le!==null\u0026\u0026typeof le==\"object\"\u0026\u0026typeof le.step==\"number\"\u0026\u0026typeof le.alt==\"number\"}var u=[0,2,4,-1,1,3,5],h=u.map(function(le){return Math.floor(le*7/12)});function f(le){var Ne=le.step,Me=le.alt,Be=le.oct,Oe=le.dir,Pe=Oe===void 0?1:Oe,tt=u[Ne]+7*Me;if(Be===void 0)return[Pe*tt];var mt=Be-h[Ne]-4*Me;return[Pe*tt,Pe*mt]}var y=[3,0,4,1,5,2,6];function k(le){var Ne=le[0],Me=le[1],Be=le[2],Oe=y[q(Ne)],Pe=Math.floor((Ne+1)/7);if(Me===void 0)return{step:Oe,alt:Pe,dir:Be};var tt=Me+4*Pe+h[Oe];return{step:Oe,alt:Pe,oct:tt,dir:Be}}function q(le){var Ne=(le+1)%7;return Ne\u003c0?7+Ne:Ne}var x={empty:!0,name:\"\",pc:\"\",acc:\"\"},M=new Map,L=function(le){return\"CDEFGAB\".charAt(le)},j=function(le){return le\u003c0?e(\"b\",-le):e(\"#\",le)},B=function(le){return le[0]===\"b\"?-le.length:le.length};function ee(le){var Ne=M.get(le);if(Ne)return Ne;var Me=typeof le==\"string\"?H(le):o(le)?ee($(le)):s(le)?ee(le.name):x;return M.set(le,Me),Me}var de=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;function ie(le){var Ne=de.exec(le);return[Ne[1].toUpperCase(),Ne[2].replace(/x/g,\"##\"),Ne[3],Ne[4]]}function pe(le){return ee(k(le))}var G=function(le,Ne){return(le%Ne+Ne)%Ne},R=[0,2,4,5,7,9,11];function H(le){var Ne=ie(le);if(Ne[0]===\"\"||Ne[3]!==\"\")return x;var Me=Ne[0],Be=Ne[1],Oe=Ne[2],Pe=(Me.charCodeAt(0)+3)%7,tt=B(Be),mt=Oe.length?+Oe:void 0,Zt=f({step:Pe,alt:tt,oct:mt}),An=Me+Be+Oe,Et=Me+Be,Rn=(R[Pe]+tt+120)%12,En=mt===void 0?G(R[Pe]+tt,12)-12*99:R[Pe]+tt+12*(mt+1),Or=En\u003e=0\u0026\u0026En\u003c=127?En:null,mr=mt===void 0?null:Math.pow(2,(En-69)/12)*440;return{empty:!1,acc:Be,alt:tt,chroma:Rn,coord:Zt,freq:mr,height:En,letter:Me,midi:Or,name:An,oct:mt,pc:Et,step:Pe}}function $(le){var Ne=le.step,Me=le.alt,Be=le.oct,Oe=L(Ne);if(!Oe)return\"\";var Pe=Oe+j(Me);return Be||Be===0?Pe+Be:Pe}var se={empty:!0,name:\"\",acc:\"\"},ce=\"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\",xe=\"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\",ke=new RegExp(\"^\"+ce+\"|\"+xe+\"$\");function Re(le){var Ne=ke.exec(\"\"+le);return Ne===null?[\"\",\"\"]:Ne[1]?[Ne[1],Ne[2]]:[Ne[4],Ne[3]]}var ze={};function He(le){return typeof le==\"string\"?ze[le]||(ze[le]=Y(le)):o(le)?He(me(le)):s(le)?He(le.name):se}var X=[0,2,4,5,7,9,11],oe=\"PMMPPMM\";function Y(le){var Ne=Re(le);if(Ne[0]===\"\")return se;var Me=+Ne[0],Be=Ne[1],Oe=(Math.abs(Me)-1)%7,Pe=oe[Oe];if(Pe===\"M\"\u0026\u0026Be===\"P\")return se;var tt=Pe===\"M\"?\"majorable\":\"perfectable\",mt=\"\"+Me+Be,Zt=Me\u003c0?-1:1,An=Me===8||Me===-8?Me:Zt*(Oe+1),Et=ge(tt,Be),Rn=Math.floor((Math.abs(Me)-1)/7),En=Zt*(X[Oe]+Et+12*Rn),Or=(Zt*(X[Oe]+Et)%12+12)%12,mr=f({step:Oe,alt:Et,oct:Rn,dir:Zt});return{empty:!1,name:mt,num:Me,q:Be,step:Oe,alt:Et,dir:Zt,type:tt,simple:An,semitones:En,chroma:Or,coord:mr,oct:Rn}}function J(le){var Ne=le[0],Me=le[1],Be=Me===void 0?0:Me,Oe=Ne*7+Be*12\u003c0,Pe=Oe?[-Ne,-Be,-1]:[Ne,Be,1];return He(k(Pe))}function ge(le,Ne){return Ne===\"M\"\u0026\u0026le===\"majorable\"||Ne===\"P\"\u0026\u0026le===\"perfectable\"?0:Ne===\"m\"\u0026\u0026le===\"majorable\"?-1:/^A+$/.test(Ne)?Ne.length:/^d+$/.test(Ne)?-1*(le===\"perfectable\"?Ne.length:Ne.length+1):0}function me(le){var Ne=le.step,Me=le.alt,Be=le.oct,Oe=Be===void 0?0:Be,Pe=le.dir;if(!Pe)return\"\";var tt=Ne+1+7*Oe,mt=Pe\u003c0?\"-\":\"\",Zt=oe[Ne]===\"M\"?\"majorable\":\"perfectable\",An=mt+tt+We(Zt,Me);return An}function We(le,Ne){return Ne===0?le===\"majorable\"?\"M\":\"P\":Ne===-1\u0026\u0026le===\"majorable\"?\"m\":Ne\u003e0?e(\"A\",Ne):e(\"d\",le===\"perfectable\"?Ne:Ne+1)}function Qe(le,Ne){var Me=ee(le),Be=He(Ne);if(Me.empty||Be.empty)return\"\";var Oe=Me.coord,Pe=Be.coord,tt=Oe.length===1?[Oe[0]+Pe[0]]:[Oe[0]+Pe[0],Oe[1]+Pe[1]];return pe(tt).name}function ft(le,Ne){var Me=ee(le),Be=ee(Ne);if(Me.empty||Be.empty)return\"\";var Oe=Me.coord,Pe=Be.coord,tt=Pe[0]-Oe[0],mt=Oe.length===2\u0026\u0026Pe.length===2?Pe[1]-Oe[1]:-Math.floor(tt*7/12);return J([tt,mt]).name}r.accToAlt=B,r.altToAcc=j,r.coordToInterval=J,r.coordToNote=pe,r.decode=k,r.deprecate=a,r.distance=ft,r.encode=f,r.fillStr=e,r.interval=He,r.isNamed=s,r.isPitch=o,r.note=ee,r.stepToLetter=L,r.tokenizeInterval=Re,r.tokenizeNote=ie,r.transpose=Qe,Object.defineProperty(r,\"__esModule\",{value:!0})})});var lA=v((vh,uA)=\u003e{(function(r,e){typeof vh==\"object\"\u0026\u0026typeof uA!=\"undefined\"?e(vh,Tn()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/core\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.AbcNotation={},r.core))})(vh,function(r,e){\"use strict\";var a=function(q,x){return Array(x+1).join(q)},s=/^(_{1,}|=|\\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function o(q){var x=s.exec(q);return x?[x[1],x[2],x[3]]:[\"\",\"\",\"\"]}function u(q){var x=o(q),M=x[0],L=x[1],j=x[2];if(L===\"\")return\"\";for(var B=4,ee=0;ee\u003cj.length;ee++)B+=j.charAt(ee)===\",\"?-1:1;var de=M[0]===\"_\"?M.replace(/_/g,\"b\"):M[0]===\"^\"?M.replace(/\\^/g,\"#\"):\"\";return L.charCodeAt(0)\u003e96?L.toUpperCase()+de+(B+1):L+de+B}function h(q){var x=e.note(q);if(x.empty||!x.oct\u0026\u0026x.oct!==0)return\"\";var M=x.letter,L=x.acc,j=x.oct,B=L[0]===\"b\"?L.replace(/b/g,\"_\"):L.replace(/#/g,\"^\"),ee=j\u003e4?M.toLowerCase():M,de=j===5?\"\":j\u003e4?a(\"'\",j-5):a(\",\",4-j);return B+ee+de}function f(q,x){return h(e.transpose(u(q),x))}function y(q,x){return e.distance(u(q),u(x))}var k={abcToScientificNotation:u,scientificToAbcNotation:h,tokenize:o,transpose:f,distance:y};r.abcToScientificNotation=u,r.default=k,r.distance=y,r.scientificToAbcNotation=h,r.tokenize=o,r.transpose=f,Object.defineProperty(r,\"__esModule\",{value:!0})})});var hA=v((gh,pA)=\u003e{(function(r,e){typeof gh==\"object\"\u0026\u0026typeof pA!=\"undefined\"?e(gh,Tn()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/core\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Array={},r.core))})(gh,function(r,e){\"use strict\";function a(x,M){for(var L=[];M--;L[M]=M+x);return L}function s(x,M){for(var L=[];M--;L[M]=x-M);return L}function o(x,M){return x\u003cM?a(x,M-x+1):s(x,x-M+1)}function u(x,M){var L=M.length,j=(x%L+L)%L;return M.slice(j,L).concat(M.slice(0,j))}function h(x){return x.filter(function(M){return M===0||M})}function f(x){var M=x.map(function(L){return e.note(L)}).filter(function(L){return!L.empty});return M.sort(function(L,j){return L.height-j.height}).map(function(L){return L.name})}function y(x){return f(x).filter(function(M,L,j){return L===0||M!==j[L-1]})}function k(x,M){M===void 0\u0026\u0026(M=Math.random);for(var L,j,B=x.length;B;)L=Math.floor(M()*B--),j=x[B],x[B]=x[L],x[L]=j;return x}function q(x){return x.length===0?[[]]:q(x.slice(1)).reduce(function(M,L){return M.concat(x.map(function(j,B){var ee=L.slice();return ee.splice(B,0,x[0]),ee}))},[])}r.compact=h,r.permutations=q,r.range=o,r.rotate=u,r.shuffle=k,r.sortedNoteNames=f,r.sortedUniqNoteNames=y,Object.defineProperty(r,\"__esModule\",{value:!0})})});var qo=v((yh,dA)=\u003e{(function(r,e){typeof yh==\"object\"\u0026\u0026typeof dA!=\"undefined\"?e(yh):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Collection={}))})(yh,function(r){\"use strict\";function e(k,q){for(var x=[];q--;x[q]=q+k);return x}function a(k,q){for(var x=[];q--;x[q]=k-q);return x}function s(k,q){return k\u003cq?e(k,q-k+1):a(k,k-q+1)}function o(k,q){var x=q.length,M=(k%x+x)%x;return q.slice(M,x).concat(q.slice(0,M))}function u(k){return k.filter(function(q){return q===0||q})}function h(k,q){q===void 0\u0026\u0026(q=Math.random);for(var x,M,L=k.length;L;)x=Math.floor(q()*L--),M=k[L],k[L]=k[x],k[x]=M;return k}function f(k){return k.length===0?[[]]:f(k.slice(1)).reduce(function(q,x){return q.concat(k.map(function(M,L){var j=x.slice();return j.splice(L,0,k[0]),j}))},[])}var y={compact:u,permutations:f,range:s,rotate:o,shuffle:h};r.compact=u,r.default=y,r.permutations=f,r.range=s,r.rotate=o,r.shuffle=h,Object.defineProperty(r,\"__esModule\",{value:!0})})});var ls=v((_h,fA)=\u003e{(function(r,e){typeof _h==\"object\"\u0026\u0026typeof fA!=\"undefined\"?e(_h,qo(),Tn()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/collection\",\"@tonaljs/core\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Pcset={},r.collection,r.core))})(_h,function(r,e,a){\"use strict\";var s,o={empty:!0,name:\"\",setNum:0,chroma:\"000000000000\",normalized:\"000000000000\",intervals:[]},u=function(X){return Number(X).toString(2)},h=function(X){return parseInt(X,2)},f=/^[01]{12}$/;function y(X){return f.test(X)}var k=function(X){return typeof X==\"number\"\u0026\u0026X\u003e=0\u0026\u0026X\u003c=4095},q=function(X){return X\u0026\u0026y(X.chroma)},x=(s={},s[o.chroma]=o,s);function M(X){var oe=y(X)?X:k(X)?u(X):Array.isArray(X)?He(X):q(X)?X.chroma:o.chroma;return x[oe]=x[oe]||ze(oe)}var L=a.deprecate(\"Pcset.pcset\",\"Pcset.get\",M),j=function(X){return M(X).chroma},B=function(X){return M(X).intervals},ee=function(X){return M(X).setNum},de=[\"1P\",\"2m\",\"2M\",\"3m\",\"3M\",\"4P\",\"5d\",\"5P\",\"6m\",\"6M\",\"7m\",\"7M\"];function ie(X){for(var oe=[],Y=0;Y\u003c12;Y++)X.charAt(Y)===\"1\"\u0026\u0026oe.push(de[Y]);return oe}function pe(){return e.range(2048,4095).map(u)}function G(X,oe){oe===void 0\u0026\u0026(oe=!0);var Y=M(X),J=Y.chroma.split(\"\");return e.compact(J.map(function(ge,me){var We=e.rotate(me,J);return oe\u0026\u0026We[0]===\"0\"?null:We.join(\"\")}))}function R(X,oe){return M(X).setNum===M(oe).setNum}function H(X){var oe=M(X).setNum;return function(Y){var J=M(Y).setNum;return oe\u0026\u0026oe!==J\u0026\u0026(J\u0026oe)===J}}function $(X){var oe=M(X).setNum;return function(Y){var J=M(Y).setNum;return oe\u0026\u0026oe!==J\u0026\u0026(J|oe)===J}}function se(X){var oe=M(X);return function(Y){var J=a.note(Y);return oe\u0026\u0026!J.empty\u0026\u0026oe.chroma.charAt(J.chroma)===\"1\"}}var ce=se;function xe(X){var oe=se(X);return function(Y){return Y.filter(oe)}}var ke={get:M,chroma:j,num:ee,intervals:B,chromas:pe,isSupersetOf:$,isSubsetOf:H,isNoteIncludedIn:se,isEqual:R,filter:xe,modes:G,pcset:L};function Re(X){var oe=X.split(\"\");return oe.map(function(Y,J){return e.rotate(J,oe).join(\"\")})}function ze(X){var oe=h(X),Y=Re(X).map(h).filter(function(me){return me\u003e=2048}).sort()[0],J=u(Y),ge=ie(X);return{empty:!1,name:\"\",setNum:oe,chroma:X,normalized:J,intervals:ge}}function He(X){if(X.length===0)return o.chroma;for(var oe,Y=[0,0,0,0,0,0,0,0,0,0,0,0],J=0;J\u003cX.length;J++)oe=a.note(X[J]),oe.empty\u0026\u0026(oe=a.interval(X[J])),oe.empty||(Y[oe.chroma]=1);return Y.join(\"\")}r.EmptyPcset=o,r.chromaToIntervals=ie,r.chromas=pe,r.default=ke,r.filter=xe,r.get=M,r.includes=ce,r.isEqual=R,r.isNoteIncludedIn=se,r.isSubsetOf=H,r.isSupersetOf=$,r.modes=G,r.pcset=L,Object.defineProperty(r,\"__esModule\",{value:!0})})});var eu=v((kh,mA)=\u003e{(function(r,e){typeof kh==\"object\"\u0026\u0026typeof mA!=\"undefined\"?e(kh,Tn(),ls()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/core\",\"@tonaljs/pcset\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.ChordType={},r.core,r.pcset))})(kh,function(r,e,a){\"use strict\";var s=function(){return s=Object.assign||function(R){for(var H,$=1,se=arguments.length;$\u003cse;$++){H=arguments[$];for(var ce in H)Object.prototype.hasOwnProperty.call(H,ce)\u0026\u0026(R[ce]=H[ce])}return R},s.apply(this,arguments)},o=[[\"1P 3M 5P\",\"major\",\"M ^ \"],[\"1P 3M 5P 7M\",\"major seventh\",\"maj7 \\u0394 ma7 M7 Maj7 ^7\"],[\"1P 3M 5P 7M 9M\",\"major ninth\",\"maj9 \\u03949 ^9\"],[\"1P 3M 5P 7M 9M 13M\",\"major thirteenth\",\"maj13 Maj13 ^13\"],[\"1P 3M 5P 6M\",\"sixth\",\"6 add6 add13 M6\"],[\"1P 3M 5P 6M 9M\",\"sixth/ninth\",\"6/9 69 M69\"],[\"1P 3M 6m 7M\",\"major seventh flat sixth\",\"M7b6 ^7b6\"],[\"1P 3M 5P 7M 11A\",\"major seventh sharp eleventh\",\"maj#4 \\u0394#4 \\u0394#11 M7#11 ^7#11 maj7#11\"],[\"1P 3m 5P\",\"minor\",\"m min -\"],[\"1P 3m 5P 7m\",\"minor seventh\",\"m7 min7 mi7 -7\"],[\"1P 3m 5P 7M\",\"minor/major seventh\",\"m/ma7 m/maj7 mM7 mMaj7 m/M7 -\\u03947 m\\u0394 -^7\"],[\"1P 3m 5P 6M\",\"minor sixth\",\"m6 -6\"],[\"1P 3m 5P 7m 9M\",\"minor ninth\",\"m9 -9\"],[\"1P 3m 5P 7M 9M\",\"minor/major ninth\",\"mM9 mMaj9 -^9\"],[\"1P 3m 5P 7m 9M 11P\",\"minor eleventh\",\"m11 -11\"],[\"1P 3m 5P 7m 9M 13M\",\"minor thirteenth\",\"m13 -13\"],[\"1P 3m 5d\",\"diminished\",\"dim \\xB0 o\"],[\"1P 3m 5d 7d\",\"diminished seventh\",\"dim7 \\xB07 o7\"],[\"1P 3m 5d 7m\",\"half-diminished\",\"m7b5 \\xF8 -7b5 h7 h\"],[\"1P 3M 5P 7m\",\"dominant seventh\",\"7 dom\"],[\"1P 3M 5P 7m 9M\",\"dominant ninth\",\"9\"],[\"1P 3M 5P 7m 9M 13M\",\"dominant thirteenth\",\"13\"],[\"1P 3M 5P 7m 11A\",\"lydian dominant seventh\",\"7#11 7#4\"],[\"1P 3M 5P 7m 9m\",\"dominant flat ninth\",\"7b9\"],[\"1P 3M 5P 7m 9A\",\"dominant sharp ninth\",\"7#9\"],[\"1P 3M 7m 9m\",\"altered\",\"alt7\"],[\"1P 4P 5P\",\"suspended fourth\",\"sus4 sus\"],[\"1P 2M 5P\",\"suspended second\",\"sus2\"],[\"1P 4P 5P 7m\",\"suspended fourth seventh\",\"7sus4 7sus\"],[\"1P 5P 7m 9M 11P\",\"eleventh\",\"11\"],[\"1P 4P 5P 7m 9m\",\"suspended fourth flat ninth\",\"b9sus phryg 7b9sus 7b9sus4\"],[\"1P 5P\",\"fifth\",\"5\"],[\"1P 3M 5A\",\"augmented\",\"aug + +5 ^#5\"],[\"1P 3m 5A\",\"minor augmented\",\"m#5 -#5 m+\"],[\"1P 3M 5A 7M\",\"augmented seventh\",\"maj7#5 maj7+5 +maj7 ^7#5\"],[\"1P 3M 5P 7M 9M 11A\",\"major sharp eleventh (lydian)\",\"maj9#11 \\u03949#11 ^9#11\"],[\"1P 2M 4P 5P\",\"\",\"sus24 sus4add9\"],[\"1P 3M 5A 7M 9M\",\"\",\"maj9#5 Maj9#5\"],[\"1P 3M 5A 7m\",\"\",\"7#5 +7 7+ 7aug aug7\"],[\"1P 3M 5A 7m 9A\",\"\",\"7#5#9 7#9#5 7alt\"],[\"1P 3M 5A 7m 9M\",\"\",\"9#5 9+\"],[\"1P 3M 5A 7m 9M 11A\",\"\",\"9#5#11\"],[\"1P 3M 5A 7m 9m\",\"\",\"7#5b9 7b9#5\"],[\"1P 3M 5A 7m 9m 11A\",\"\",\"7#5b9#11\"],[\"1P 3M 5A 9A\",\"\",\"+add#9\"],[\"1P 3M 5A 9M\",\"\",\"M#5add9 +add9\"],[\"1P 3M 5P 6M 11A\",\"\",\"M6#11 M6b5 6#11 6b5\"],[\"1P 3M 5P 6M 7M 9M\",\"\",\"M7add13\"],[\"1P 3M 5P 6M 9M 11A\",\"\",\"69#11\"],[\"1P 3m 5P 6M 9M\",\"\",\"m69 -69\"],[\"1P 3M 5P 6m 7m\",\"\",\"7b6\"],[\"1P 3M 5P 7M 9A 11A\",\"\",\"maj7#9#11\"],[\"1P 3M 5P 7M 9M 11A 13M\",\"\",\"M13#11 maj13#11 M13+4 M13#4\"],[\"1P 3M 5P 7M 9m\",\"\",\"M7b9\"],[\"1P 3M 5P 7m 11A 13m\",\"\",\"7#11b13 7b5b13\"],[\"1P 3M 5P 7m 13M\",\"\",\"7add6 67 7add13\"],[\"1P 3M 5P 7m 9A 11A\",\"\",\"7#9#11 7b5#9 7#9b5\"],[\"1P 3M 5P 7m 9A 11A 13M\",\"\",\"13#9#11\"],[\"1P 3M 5P 7m 9A 11A 13m\",\"\",\"7#9#11b13\"],[\"1P 3M 5P 7m 9A 13M\",\"\",\"13#9\"],[\"1P 3M 5P 7m 9A 13m\",\"\",\"7#9b13\"],[\"1P 3M 5P 7m 9M 11A\",\"\",\"9#11 9+4 9#4\"],[\"1P 3M 5P 7m 9M 11A 13M\",\"\",\"13#11 13+4 13#4\"],[\"1P 3M 5P 7m 9M 11A 13m\",\"\",\"9#11b13 9b5b13\"],[\"1P 3M 5P 7m 9m 11A\",\"\",\"7b9#11 7b5b9 7b9b5\"],[\"1P 3M 5P 7m 9m 11A 13M\",\"\",\"13b9#11\"],[\"1P 3M 5P 7m 9m 11A 13m\",\"\",\"7b9b13#11 7b9#11b13 7b5b9b13\"],[\"1P 3M 5P 7m 9m 13M\",\"\",\"13b9\"],[\"1P 3M 5P 7m 9m 13m\",\"\",\"7b9b13\"],[\"1P 3M 5P 7m 9m 9A\",\"\",\"7b9#9\"],[\"1P 3M 5P 9M\",\"\",\"Madd9 2 add9 add2\"],[\"1P 3M 5P 9m\",\"\",\"Maddb9\"],[\"1P 3M 5d\",\"\",\"Mb5\"],[\"1P 3M 5d 6M 7m 9M\",\"\",\"13b5\"],[\"1P 3M 5d 7M\",\"\",\"M7b5\"],[\"1P 3M 5d 7M 9M\",\"\",\"M9b5\"],[\"1P 3M 5d 7m\",\"\",\"7b5\"],[\"1P 3M 5d 7m 9M\",\"\",\"9b5\"],[\"1P 3M 7m\",\"\",\"7no5\"],[\"1P 3M 7m 13m\",\"\",\"7b13\"],[\"1P 3M 7m 9M\",\"\",\"9no5\"],[\"1P 3M 7m 9M 13M\",\"\",\"13no5\"],[\"1P 3M 7m 9M 13m\",\"\",\"9b13\"],[\"1P 3m 4P 5P\",\"\",\"madd4\"],[\"1P 3m 5P 6m 7M\",\"\",\"mMaj7b6\"],[\"1P 3m 5P 6m 7M 9M\",\"\",\"mMaj9b6\"],[\"1P 3m 5P 7m 11P\",\"\",\"m7add11 m7add4\"],[\"1P 3m 5P 9M\",\"\",\"madd9\"],[\"1P 3m 5d 6M 7M\",\"\",\"o7M7\"],[\"1P 3m 5d 7M\",\"\",\"oM7\"],[\"1P 3m 6m 7M\",\"\",\"mb6M7\"],[\"1P 3m 6m 7m\",\"\",\"m7#5\"],[\"1P 3m 6m 7m 9M\",\"\",\"m9#5\"],[\"1P 3m 5A 7m 9M 11P\",\"\",\"m11A\"],[\"1P 3m 6m 9m\",\"\",\"mb6b9\"],[\"1P 2M 3m 5d 7m\",\"\",\"m9b5\"],[\"1P 4P 5A 7M\",\"\",\"M7#5sus4\"],[\"1P 4P 5A 7M 9M\",\"\",\"M9#5sus4\"],[\"1P 4P 5A 7m\",\"\",\"7#5sus4\"],[\"1P 4P 5P 7M\",\"\",\"M7sus4\"],[\"1P 4P 5P 7M 9M\",\"\",\"M9sus4\"],[\"1P 4P 5P 7m 9M\",\"\",\"9sus4 9sus\"],[\"1P 4P 5P 7m 9M 13M\",\"\",\"13sus4 13sus\"],[\"1P 4P 5P 7m 9m 13m\",\"\",\"7sus4b9b13 7b9b13sus4\"],[\"1P 4P 7m 10m\",\"\",\"4 quartal\"],[\"1P 5P 7m 9m 11P\",\"\",\"11b9\"]],u=s(s({},a.EmptyPcset),{name:\"\",quality:\"Unknown\",intervals:[],aliases:[]}),h=[],f={};function y(G){return f[G]||u}var k=e.deprecate(\"ChordType.chordType\",\"ChordType.get\",y);function q(){return h.map(function(G){return G.name}).filter(function(G){return G})}function x(){return h.map(function(G){return G.aliases[0]}).filter(function(G){return G})}function M(){return Object.keys(f)}function L(){return h.slice()}var j=e.deprecate(\"ChordType.entries\",\"ChordType.all\",L);function B(){h=[],f={}}function ee(G,R,H){var $=ie(G),se=s(s({},a.get(G)),{name:H||\"\",quality:$,intervals:G,aliases:R});h.push(se),se.name\u0026\u0026(f[se.name]=se),f[se.setNum]=se,f[se.chroma]=se,se.aliases.forEach(function(ce){return de(se,ce)})}function de(G,R){f[R]=G}function ie(G){var R=function(H){return G.indexOf(H)!==-1};return R(\"5A\")?\"Augmented\":R(\"3M\")?\"Major\":R(\"5d\")?\"Diminished\":R(\"3m\")?\"Minor\":\"Unknown\"}o.forEach(function(G){var R=G[0],H=G[1],$=G[2];return ee(R.split(\" \"),$.split(\" \"),H)}),h.sort(function(G,R){return G.setNum-R.setNum});var pe={names:q,symbols:x,get:y,all:L,add:ee,removeAll:B,keys:M,entries:j,chordType:k};r.add=ee,r.addAlias=de,r.all=L,r.chordType=k,r.default=pe,r.entries=j,r.get=y,r.keys=M,r.names=q,r.removeAll=B,r.symbols=x,Object.defineProperty(r,\"__esModule\",{value:!0})})});var gA=v((Nh,vA)=\u003e{(function(r,e){typeof Nh==\"object\"\u0026\u0026typeof vA!=\"undefined\"?e(Nh,eu(),Tn(),ls()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/chord-type\",\"@tonaljs/core\",\"@tonaljs/pcset\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.ChordDetect={},r.chordType,r.core,r.pcset))})(Nh,function(r,e,a,s){\"use strict\";var o=function(y){var k=y.reduce(function(q,x){var M=a.note(x).chroma;return M!==void 0\u0026\u0026(q[M]=q[M]||a.note(x).name),q},{});return function(q){return k[q]}};function u(y){var k=y.map(function(x){return a.note(x).pc}).filter(function(x){return x});if(a.note.length===0)return[];var q=h(k,1);return q.filter(function(x){return x.weight}).sort(function(x,M){return M.weight-x.weight}).map(function(x){return x.name})}function h(y,k){var q=y[0],x=a.note(q).chroma,M=o(y),L=s.modes(y,!1),j=[];return L.forEach(function(B,ee){var de=e.all().filter(function(ie){return ie.chroma===B});de.forEach(function(ie){var pe=ie.aliases[0],G=M(ee),R=ee!==x;R?j.push({weight:.5*k,name:\"\"+G+pe+\"/\"+q}):j.push({weight:1*k,name:\"\"+G+pe})})}),j}var f={detect:u};r.default=f,r.detect=u,Object.defineProperty(r,\"__esModule\",{value:!0})})});var xh=v((bh,yA)=\u003e{(function(r,e){typeof bh==\"object\"\u0026\u0026typeof yA!=\"undefined\"?e(bh,Tn(),ls()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/core\",\"@tonaljs/pcset\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.ScaleType={},r.core,r.pcset))})(bh,function(r,e,a){\"use strict\";var s=function(){return s=Object.assign||function(pe){for(var G,R=1,H=arguments.length;R\u003cH;R++){G=arguments[R];for(var $ in G)Object.prototype.hasOwnProperty.call(G,$)\u0026\u0026(pe[$]=G[$])}return pe},s.apply(this,arguments)},o=[[\"1P 2M 3M 5P 6M\",\"major pentatonic\",\"pentatonic\"],[\"1P 3M 4P 5P 7M\",\"ionian pentatonic\"],[\"1P 3M 4P 5P 7m\",\"mixolydian pentatonic\",\"indian\"],[\"1P 2M 4P 5P 6M\",\"ritusen\"],[\"1P 2M 4P 5P 7m\",\"egyptian\"],[\"1P 3M 4P 5d 7m\",\"neopolitan major pentatonic\"],[\"1P 3m 4P 5P 6m\",\"vietnamese 1\"],[\"1P 2m 3m 5P 6m\",\"pelog\"],[\"1P 2m 4P 5P 6m\",\"kumoijoshi\"],[\"1P 2M 3m 5P 6m\",\"hirajoshi\"],[\"1P 2m 4P 5d 7m\",\"iwato\"],[\"1P 2m 4P 5P 7m\",\"in-sen\"],[\"1P 3M 4A 5P 7M\",\"lydian pentatonic\",\"chinese\"],[\"1P 3m 4P 6m 7m\",\"malkos raga\"],[\"1P 3m 4P 5d 7m\",\"locrian pentatonic\",\"minor seven flat five pentatonic\"],[\"1P 3m 4P 5P 7m\",\"minor pentatonic\",\"vietnamese 2\"],[\"1P 3m 4P 5P 6M\",\"minor six pentatonic\"],[\"1P 2M 3m 5P 6M\",\"flat three pentatonic\",\"kumoi\"],[\"1P 2M 3M 5P 6m\",\"flat six pentatonic\"],[\"1P 2m 3M 5P 6M\",\"scriabin\"],[\"1P 3M 5d 6m 7m\",\"whole tone pentatonic\"],[\"1P 3M 4A 5A 7M\",\"lydian #5P pentatonic\"],[\"1P 3M 4A 5P 7m\",\"lydian dominant pentatonic\"],[\"1P 3m 4P 5P 7M\",\"minor #7M pentatonic\"],[\"1P 3m 4d 5d 7m\",\"super locrian pentatonic\"],[\"1P 2M 3m 4P 5P 7M\",\"minor hexatonic\"],[\"1P 2A 3M 5P 5A 7M\",\"augmented\"],[\"1P 2M 3m 3M 5P 6M\",\"major blues\"],[\"1P 2M 4P 5P 6M 7m\",\"piongio\"],[\"1P 2m 3M 4A 6M 7m\",\"prometheus neopolitan\"],[\"1P 2M 3M 4A 6M 7m\",\"prometheus\"],[\"1P 2m 3M 5d 6m 7m\",\"mystery #1\"],[\"1P 2m 3M 4P 5A 6M\",\"six tone symmetric\"],[\"1P 2M 3M 4A 5A 7m\",\"whole tone\",\"messiaen's mode #1\"],[\"1P 2m 4P 4A 5P 7M\",\"messiaen's mode #5\"],[\"1P 3m 4P 5d 5P 7m\",\"minor blues\",\"blues\"],[\"1P 2M 3M 4P 5d 6m 7m\",\"locrian major\",\"arabian\"],[\"1P 2m 3M 4A 5P 6m 7M\",\"double harmonic lydian\"],[\"1P 2M 3m 4P 5P 6m 7M\",\"harmonic minor\"],[\"1P 2m 2A 3M 4A 6m 7m\",\"altered\",\"super locrian\",\"diminished whole tone\",\"pomeroy\"],[\"1P 2M 3m 4P 5d 6m 7m\",\"locrian #2\",\"half-diminished\",\"aeolian b5\"],[\"1P 2M 3M 4P 5P 6m 7m\",\"mixolydian b6\",\"melodic minor fifth mode\",\"hindu\"],[\"1P 2M 3M 4A 5P 6M 7m\",\"lydian dominant\",\"lydian b7\",\"overtone\"],[\"1P 2M 3M 4A 5P 6M 7M\",\"lydian\"],[\"1P 2M 3M 4A 5A 6M 7M\",\"lydian augmented\"],[\"1P 2m 3m 4P 5P 6M 7m\",\"dorian b2\",\"phrygian #6\",\"melodic minor second mode\"],[\"1P 2M 3m 4P 5P 6M 7M\",\"melodic minor\"],[\"1P 2m 3m 4P 5d 6m 7m\",\"locrian\"],[\"1P 2m 3m 4d 5d 6m 7d\",\"ultralocrian\",\"superlocrian bb7\",\"\\xB7superlocrian diminished\"],[\"1P 2m 3m 4P 5d 6M 7m\",\"locrian 6\",\"locrian natural 6\",\"locrian sharp 6\"],[\"1P 2A 3M 4P 5P 5A 7M\",\"augmented heptatonic\"],[\"1P 2M 3m 5d 5P 6M 7m\",\"romanian minor\"],[\"1P 2M 3m 4A 5P 6M 7m\",\"dorian #4\"],[\"1P 2M 3m 4A 5P 6M 7M\",\"lydian diminished\"],[\"1P 2m 3m 4P 5P 6m 7m\",\"phrygian\"],[\"1P 2M 3M 4A 5A 7m 7M\",\"leading whole tone\"],[\"1P 2M 3M 4A 5P 6m 7m\",\"lydian minor\"],[\"1P 2m 3M 4P 5P 6m 7m\",\"phrygian dominant\",\"spanish\",\"phrygian major\"],[\"1P 2m 3m 4P 5P 6m 7M\",\"balinese\"],[\"1P 2m 3m 4P 5P 6M 7M\",\"neopolitan major\"],[\"1P 2M 3m 4P 5P 6m 7m\",\"aeolian\",\"minor\"],[\"1P 2M 3M 4P 5P 6m 7M\",\"harmonic major\"],[\"1P 2m 3M 4P 5P 6m 7M\",\"double harmonic major\",\"gypsy\"],[\"1P 2M 3m 4P 5P 6M 7m\",\"dorian\"],[\"1P 2M 3m 4A 5P 6m 7M\",\"hungarian minor\"],[\"1P 2A 3M 4A 5P 6M 7m\",\"hungarian major\"],[\"1P 2m 3M 4P 5d 6M 7m\",\"oriental\"],[\"1P 2m 3m 3M 4A 5P 7m\",\"flamenco\"],[\"1P 2m 3m 4A 5P 6m 7M\",\"todi raga\"],[\"1P 2M 3M 4P 5P 6M 7m\",\"mixolydian\",\"dominant\"],[\"1P 2m 3M 4P 5d 6m 7M\",\"persian\"],[\"1P 2M 3M 4P 5P 6M 7M\",\"major\",\"ionian\"],[\"1P 2m 3M 5d 6m 7m 7M\",\"enigmatic\"],[\"1P 2M 3M 4P 5A 6M 7M\",\"major augmented\",\"major #5\",\"ionian augmented\",\"ionian #5\"],[\"1P 2A 3M 4A 5P 6M 7M\",\"lydian #9\"],[\"1P 2m 2M 4P 4A 5P 6m 7M\",\"messiaen's mode #4\"],[\"1P 2m 3M 4P 4A 5P 6m 7M\",\"purvi raga\"],[\"1P 2m 3m 3M 4P 5P 6m 7m\",\"spanish heptatonic\"],[\"1P 2M 3M 4P 5P 6M 7m 7M\",\"bebop\"],[\"1P 2M 3m 3M 4P 5P 6M 7m\",\"bebop minor\"],[\"1P 2M 3M 4P 5P 5A 6M 7M\",\"bebop major\"],[\"1P 2m 3m 4P 5d 5P 6m 7m\",\"bebop locrian\"],[\"1P 2M 3m 4P 5P 6m 7m 7M\",\"minor bebop\"],[\"1P 2M 3m 4P 5d 6m 6M 7M\",\"diminished\",\"whole-half diminished\"],[\"1P 2M 3M 4P 5d 5P 6M 7M\",\"ichikosucho\"],[\"1P 2M 3m 4P 5P 6m 6M 7M\",\"minor six diminished\"],[\"1P 2m 3m 3M 4A 5P 6M 7m\",\"half-whole diminished\",\"dominant diminished\",\"messiaen's mode #2\"],[\"1P 3m 3M 4P 5P 6M 7m 7M\",\"kafi raga\"],[\"1P 2M 3M 4P 4A 5A 6A 7M\",\"messiaen's mode #6\"],[\"1P 2M 3m 3M 4P 5d 5P 6M 7m\",\"composite blues\"],[\"1P 2M 3m 3M 4A 5P 6m 7m 7M\",\"messiaen's mode #3\"],[\"1P 2m 2M 3m 4P 4A 5P 6m 6M 7M\",\"messiaen's mode #7\"],[\"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\",\"chromatic\"]],u=s(s({},a.EmptyPcset),{intervals:[],aliases:[]}),h=[],f={};function y(){return h.map(function(ie){return ie.name})}function k(ie){return f[ie]||u}var q=e.deprecate(\"ScaleDictionary.scaleType\",\"ScaleType.get\",k);function x(){return h.slice()}var M=e.deprecate(\"ScaleDictionary.entries\",\"ScaleType.all\",x);function L(){return Object.keys(f)}function j(){h=[],f={}}function B(ie,pe,G){G===void 0\u0026\u0026(G=[]);var R=s(s({},a.get(ie)),{name:pe,intervals:ie,aliases:G});return h.push(R),f[R.name]=R,f[R.setNum]=R,f[R.chroma]=R,R.aliases.forEach(function(H){return ee(R,H)}),R}function ee(ie,pe){f[pe]=ie}o.forEach(function(ie){var pe=ie[0],G=ie[1],R=ie.slice(2);return B(pe.split(\" \"),G,R)});var de={names:y,get:k,all:x,add:B,removeAll:j,keys:L,entries:M,scaleType:q};r.NoScaleType=u,r.add=B,r.addAlias=ee,r.all=x,r.default=de,r.entries=M,r.get=k,r.keys=L,r.names=y,r.removeAll=j,r.scaleType=q,Object.defineProperty(r,\"__esModule\",{value:!0})})});var xg=v((wh,_A)=\u003e{(function(r,e){typeof wh==\"object\"\u0026\u0026typeof _A!=\"undefined\"?e(wh,gA(),eu(),Tn(),ls(),xh()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/chord-detect\",\"@tonaljs/chord-type\",\"@tonaljs/core\",\"@tonaljs/pcset\",\"@tonaljs/scale-type\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Chord={},r.chordDetect,r.chordType,r.core,r.pcset,r.scaleType))})(wh,function(r,e,a,s,o,u){\"use strict\";var h=function(){return h=Object.assign||function(pe){for(var G,R=1,H=arguments.length;R\u003cH;R++){G=arguments[R];for(var $ in G)Object.prototype.hasOwnProperty.call(G,$)\u0026\u0026(pe[$]=G[$])}return pe},h.apply(this,arguments)},f={empty:!0,name:\"\",symbol:\"\",root:\"\",rootDegree:0,type:\"\",tonic:null,setNum:NaN,quality:\"Unknown\",chroma:\"\",normalized:\"\",aliases:[],notes:[],intervals:[]},y=/^(6|64|7|9|11|13)$/;function k(ie){var pe=s.tokenizeNote(ie),G=pe[0],R=pe[1],H=pe[2],$=pe[3];return G===\"\"?[\"\",ie]:G===\"A\"\u0026\u0026$===\"ug\"?[\"\",\"aug\"]:!$\u0026\u0026(H===\"4\"||H===\"5\")?[G+R,H]:y.test(H)?[G+R,H+$]:[G+R+H,$]}function q(ie){if(ie===\"\")return f;if(Array.isArray(ie)\u0026\u0026ie.length===2)return x(ie[1],ie[0]);var pe=k(ie),G=pe[0],R=pe[1],H=x(R,G);return H.empty?x(ie):H}function x(ie,pe,G){var R=a.get(ie),H=s.note(pe||\"\"),$=s.note(G||\"\");if(R.empty||pe\u0026\u0026H.empty||G\u0026\u0026$.empty)return f;var se=s.distance(H.pc,$.pc),ce=R.intervals.indexOf(se)+1;if(!$.empty\u0026\u0026!ce)return f;for(var xe=Array.from(R.intervals),ke=1;ke\u003cce;ke++){var Re=xe[0][0],ze=xe[0][1],He=parseInt(Re,10)+7;xe.push(\"\"+He+ze),xe.shift()}var X=H.empty?[]:xe.map(function(J){return s.transpose(H,J)});ie=R.aliases.indexOf(ie)!==-1?ie:R.aliases[0];var oe=\"\"+(H.empty?\"\":H.pc)+ie+($.empty||ce\u003c=1?\"\":\"/\"+$.pc),Y=\"\"+(pe?H.pc+\" \":\"\")+R.name+(ce\u003e1\u0026\u0026G?\" over \"+$.pc:\"\");return h(h({},R),{name:Y,symbol:oe,type:R.name,root:$.name,intervals:xe,rootDegree:ce,tonic:H.name,notes:X})}var M=s.deprecate(\"Chord.chord\",\"Chord.get\",q);function L(ie,pe){var G=k(ie),R=G[0],H=G[1];return R?s.transpose(R,pe)+H:ie}function j(ie){var pe=q(ie),G=o.isSupersetOf(pe.chroma);return u.all().filter(function(R){return G(R.chroma)}).map(function(R){return R.name})}function B(ie){var pe=q(ie),G=o.isSupersetOf(pe.chroma);return a.all().filter(function(R){return G(R.chroma)}).map(function(R){return pe.tonic+R.aliases[0]})}function ee(ie){var pe=q(ie),G=o.isSubsetOf(pe.chroma);return a.all().filter(function(R){return G(R.chroma)}).map(function(R){return pe.tonic+R.aliases[0]})}var de={getChord:x,get:q,detect:e.detect,chordScales:j,extended:B,reduced:ee,tokenize:k,transpose:L,chord:M};Object.defineProperty(r,\"detect\",{enumerable:!0,get:function(){return e.detect}}),r.chord=M,r.chordScales=j,r.default=de,r.extended=B,r.get=q,r.getChord=x,r.reduced=ee,r.tokenize=k,r.transpose=L,Object.defineProperty(r,\"__esModule\",{value:!0})})});var NA=v((qh,kA)=\u003e{(function(r,e){typeof qh==\"object\"\u0026\u0026typeof kA!=\"undefined\"?e(qh):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.DurationValue={}))})(qh,function(r){\"use strict\";var e=function(){return e=Object.assign||function(B){for(var ee,de=1,ie=arguments.length;de\u003cie;de++){ee=arguments[de];for(var pe in ee)Object.prototype.hasOwnProperty.call(ee,pe)\u0026\u0026(B[pe]=ee[pe])}return B},e.apply(this,arguments)},a=[[.125,\"dl\",[\"large\",\"duplex longa\",\"maxima\",\"octuple\",\"octuple whole\"]],[.25,\"l\",[\"long\",\"longa\"]],[.5,\"d\",[\"double whole\",\"double\",\"breve\"]],[1,\"w\",[\"whole\",\"semibreve\"]],[2,\"h\",[\"half\",\"minim\"]],[4,\"q\",[\"quarter\",\"crotchet\"]],[8,\"e\",[\"eighth\",\"quaver\"]],[16,\"s\",[\"sixteenth\",\"semiquaver\"]],[32,\"t\",[\"thirty-second\",\"demisemiquaver\"]],[64,\"sf\",[\"sixty-fourth\",\"hemidemisemiquaver\"]],[128,\"h\",[\"hundred twenty-eighth\"]],[256,\"th\",[\"two hundred fifty-sixth\"]]],s=[];a.forEach(function(j){var B=j[0],ee=j[1],de=j[2];return M(B,ee,de)});var o={empty:!0,name:\"\",value:0,fraction:[0,0],shorthand:\"\",dots:\"\",names:[]};function u(){return s.reduce(function(j,B){return B.names.forEach(function(ee){return j.push(ee)}),j},[])}function h(){return s.map(function(j){return j.shorthand})}var f=/^([^.]+)(\\.*)$/;function y(j){var B=f.exec(j)||[];B[0];var ee=B[1],de=B[2],ie=s.find(function(R){return R.shorthand===ee||R.names.includes(ee)});if(!ie)return o;var pe=L(ie.fraction,de.length),G=pe[0]/pe[1];return e(e({},ie),{name:j,dots:de,value:G,fraction:pe})}var k=function(j){return y(j).value},q=function(j){return y(j).fraction},x={names:u,shorthands:h,get:y,value:k,fraction:q};function M(j,B,ee){s.push({empty:!1,dots:\"\",name:\"\",value:1/j,fraction:j\u003c1?[1/j,1]:[1,j],shorthand:B,names:ee})}function L(j,B){for(var ee=Math.pow(2,B),de=j[0]*ee,ie=j[1]*ee,pe=de,G=0;G\u003cB;G++)de+=pe/Math.pow(2,G+1);for(;de%2==0\u0026\u0026ie%2==0;)de/=2,ie/=2;return[de,ie]}r.default=x,r.fraction=q,r.get=y,r.names=u,r.shorthands=h,r.value=k,Object.defineProperty(r,\"__esModule\",{value:!0})})});var wg=v((Th,bA)=\u003e{(function(r,e){typeof Th==\"object\"\u0026\u0026typeof bA!=\"undefined\"?e(Th,Tn()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/core\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Interval={},r.core))})(Th,function(r,e){\"use strict\";function a(){return\"1P 2M 3M 4P 5P 6m 7m\".split(\" \")}var s=e.interval,o=function(G){return e.interval(G).name},u=function(G){return e.interval(G).semitones},h=function(G){return e.interval(G).q},f=function(G){return e.interval(G).num};function y(G){var R=e.interval(G);return R.empty?\"\":R.simple+R.q}function k(G){var R=e.interval(G);if(R.empty)return\"\";var H=(7-R.step)%7,$=R.type===\"perfectable\"?-R.alt:-(R.alt+1);return e.interval({step:H,alt:$,oct:R.oct,dir:R.dir}).name}var q=[1,2,2,3,3,4,5,5,6,6,7,7],x=\"P m M m M P d P m M m M\".split(\" \");function M(G){var R=G\u003c0?-1:1,H=Math.abs(G),$=H%12,se=Math.floor(H/12);return R*(q[$]+7*se)+x[$]}var L=e.distance,j=pe(function(G,R){return[G[0]+R[0],G[1]+R[1]]}),B=function(G){return function(R){return j(G,R)}},ee=pe(function(G,R){return[G[0]-R[0],G[1]-R[1]]});function de(G,R){var H=s(G);if(H.empty)return\"\";var $=H.coord,se=$[0],ce=$[1],xe=$[2];return e.coordToInterval([se+R,ce,xe]).name}var ie={names:a,get:s,name:o,num:f,semitones:u,quality:h,fromSemitones:M,distance:L,invert:k,simplify:y,add:j,addTo:B,substract:ee,transposeFifths:de};function pe(G){return function(R,H){var $=e.interval(R).coord,se=e.interval(H).coord;if($\u0026\u0026se){var ce=G($,se);return e.coordToInterval(ce).name}}}r.add=j,r.addTo=B,r.default=ie,r.distance=L,r.fromSemitones=M,r.get=s,r.invert=k,r.name=o,r.names=a,r.num=f,r.quality=h,r.semitones=u,r.simplify=y,r.substract=ee,r.transposeFifths=de,Object.defineProperty(r,\"__esModule\",{value:!0})})});var Mh=v((Sh,xA)=\u003e{(function(r,e){typeof Sh==\"object\"\u0026\u0026typeof xA!=\"undefined\"?e(Sh,Tn()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/core\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Midi={},r.core))})(Sh,function(r,e){\"use strict\";function a(M){return+M\u003e=0\u0026\u0026+M\u003c=127}function s(M){if(a(M))return+M;var L=e.note(M);return L.empty?null:L.midi}function o(M,L){return L===void 0\u0026\u0026(L=440),Math.pow(2,(M-69)/12)*L}var u=Math.log(2),h=Math.log(440);function f(M){var L=12*(Math.log(M)-h)/u+69;return Math.round(L*100)/100}var y=\"C C# D D# E F F# G G# A A# B\".split(\" \"),k=\"C Db D Eb E F Gb G Ab A Bb B\".split(\" \");function q(M,L){if(L===void 0\u0026\u0026(L={}),isNaN(M)||M===-1/0||M===1/0)return\"\";M=Math.round(M);var j=L.sharps===!0?y:k,B=j[M%12];if(L.pitchClass)return B;var ee=Math.floor(M/12)-1;return B+ee}var x={isMidi:a,toMidi:s,midiToFreq:o,midiToNoteName:q,freqToMidi:f};r.default=x,r.freqToMidi=f,r.isMidi=a,r.midiToFreq=o,r.midiToNoteName=q,r.toMidi=s,Object.defineProperty(r,\"__esModule\",{value:!0})})});var Oh=v((Ph,wA)=\u003e{(function(r,e){typeof Ph==\"object\"\u0026\u0026typeof wA!=\"undefined\"?e(Ph,Tn(),Mh()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/core\",\"@tonaljs/midi\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Note={},r.core,r.midi$1))})(Ph,function(r,e,a){\"use strict\";var s=[\"C\",\"D\",\"E\",\"F\",\"G\",\"A\",\"B\"],o=function(J){return J.name},u=function(J){return J.map(e.note).filter(function(ge){return!ge.empty})};function h(J){return J===void 0?s.slice():Array.isArray(J)?u(J).map(o):[]}var f=e.note,y=function(J){return f(J).name},k=function(J){return f(J).pc},q=function(J){return f(J).acc},x=function(J){return f(J).oct},M=function(J){return f(J).midi},L=function(J){return f(J).freq},j=function(J){return f(J).chroma};function B(J){return a.midiToNoteName(J)}function ee(J){return a.midiToNoteName(a.freqToMidi(J))}function de(J){return a.midiToNoteName(a.freqToMidi(J),{sharps:!0})}function ie(J){return a.midiToNoteName(J,{sharps:!0})}var pe=e.transpose,G=e.transpose,R=function(J){return function(ge){return pe(ge,J)}},H=R,$=function(J){return function(ge){return pe(J,ge)}},se=$;function ce(J,ge){var me=f(J);if(me.empty)return\"\";var We=me.coord,Qe=We[0],ft=We[1],le=ft===void 0?e.coordToNote([Qe+ge]):e.coordToNote([Qe+ge,ft]);return le.name}var xe=ce,ke=function(J,ge){return J.height-ge.height},Re=function(J,ge){return ge.height-J.height};function ze(J,ge){return ge=ge||ke,u(J).sort(ge).map(o)}function He(J){return ze(J,ke).filter(function(ge,me,We){return me===0||ge!==We[me-1]})}var X=function(J){var ge=f(J);return ge.empty?\"\":a.midiToNoteName(ge.midi||ge.chroma,{sharps:ge.alt\u003e0,pitchClass:ge.midi===null})};function oe(J,ge){var me=f(J);if(me.empty)return\"\";var We=f(ge||a.midiToNoteName(me.midi||me.chroma,{sharps:me.alt\u003c0,pitchClass:!0}));if(We.empty||We.chroma!==me.chroma)return\"\";if(me.oct===void 0)return We.pc;var Qe=me.chroma-me.alt,ft=We.chroma-We.alt,le=Qe\u003e11||ft\u003c0?-1:Qe\u003c0||ft\u003e11?1:0,Ne=me.oct+le;return We.pc+Ne}var Y={names:h,get:f,name:y,pitchClass:k,accidentals:q,octave:x,midi:M,ascending:ke,descending:Re,sortedNames:ze,sortedUniqNames:He,fromMidi:B,fromMidiSharps:ie,freq:L,fromFreq:ee,fromFreqSharps:de,chroma:j,transpose:pe,tr:G,transposeBy:R,trBy:H,transposeFrom:$,trFrom:se,transposeFifths:ce,trFifths:xe,simplify:X,enharmonic:oe};r.accidentals=q,r.ascending=ke,r.chroma=j,r.default=Y,r.descending=Re,r.enharmonic=oe,r.freq=L,r.fromFreq=ee,r.fromFreqSharps=de,r.fromMidi=B,r.fromMidiSharps=ie,r.get=f,r.midi=M,r.name=y,r.names=h,r.octave=x,r.pitchClass=k,r.simplify=X,r.sortedNames=ze,r.sortedUniqNames=He,r.tr=G,r.trBy=H,r.trFifths=xe,r.trFrom=se,r.transpose=pe,r.transposeBy=R,r.transposeFifths=ce,r.transposeFrom=$,Object.defineProperty(r,\"__esModule\",{value:!0})})});var Ah=v((Ch,qA)=\u003e{(function(r,e){typeof Ch==\"object\"\u0026\u0026typeof qA!=\"undefined\"?e(Ch,Tn()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/core\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.RomanNumeral={},r.core))})(Ch,function(r,e){\"use strict\";var a={empty:!0,name:\"\",chordType:\"\"},s={};function o(B){return typeof B==\"string\"?s[B]||(s[B]=L(B)):typeof B==\"number\"?o(x[B]||\"\"):e.isPitch(B)?f(B):e.isNamed(B)?o(B.name):a}var u=e.deprecate(\"RomanNumeral.romanNumeral\",\"RomanNumeral.get\",o);function h(B){return B===void 0\u0026\u0026(B=!0),(B?x:M).slice()}function f(B){return o(e.altToAcc(B.alt)+x[B.step])}var y=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function k(B){return y.exec(B)||[\"\",\"\",\"\",\"\"]}var q=\"I II III IV V VI VII\",x=q.split(\" \"),M=q.toLowerCase().split(\" \");function L(B){var ee=k(B),de=ee[0],ie=ee[1],pe=ee[2],G=ee[3];if(!pe)return a;var R=pe.toUpperCase(),H=x.indexOf(R),$=e.accToAlt(ie),se=1;return{empty:!1,name:de,roman:pe,interval:e.interval({step:H,alt:$,dir:se}).name,acc:ie,chordType:G,alt:$,step:H,major:pe===R,oct:0,dir:se}}var j={names:h,get:o,romanNumeral:u};r.default=j,r.get=o,r.names=h,r.tokenize=k,Object.defineProperty(r,\"__esModule\",{value:!0})})});var SA=v((Rh,TA)=\u003e{(function(r,e){typeof Rh==\"object\"\u0026\u0026typeof TA!=\"undefined\"?e(Rh,Tn(),Oh(),Ah()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/core\",\"@tonaljs/note\",\"@tonaljs/roman-numeral\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Key={},r.core,r.note,r.romanNumeral))})(Rh,function(r,e,a,s){\"use strict\";var o=function(){return o=Object.assign||function(H){for(var $,se=1,ce=arguments.length;se\u003cce;se++){$=arguments[se];for(var xe in $)Object.prototype.hasOwnProperty.call($,xe)\u0026\u0026(H[xe]=$[xe])}return H},o.apply(this,arguments)},u=Object.freeze([]),h={type:\"major\",tonic:\"\",alteration:0,keySignature:\"\"},f={tonic:\"\",grades:u,intervals:u,scale:u,chords:u,chordsHarmonicFunction:u,chordScales:u},y=o(o(o({},h),f),{type:\"major\",minorRelative:\"\",scale:u,secondaryDominants:u,secondaryDominantsMinorRelative:u,substituteDominants:u,substituteDominantsMinorRelative:u}),k=o(o({},h),{type:\"minor\",relativeMajor:\"\",natural:f,harmonic:f,melodic:f}),q=function(R,H,$){return $===void 0\u0026\u0026($=\"\"),H.map(function(se,ce){return\"\"+R[ce]+$+se})};function x(R,H,$,se){return function(ce){var xe=R.map(function(Re){return s.get(Re).interval||\"\"}),ke=xe.map(function(Re){return e.transpose(ce,Re)});return{tonic:ce,grades:R,intervals:xe,scale:ke,chords:q(ke,H),chordsHarmonicFunction:$.slice(),chordScales:q(ke,se,\" \")}}}var M=function(R,H){var $=e.note(R),se=e.note(H);return $.empty||se.empty?0:se.coord[0]-$.coord[0]},L=x(\"I II III IV V VI VII\".split(\" \"),\"maj7 m7 m7 maj7 7 m7 m7b5\".split(\" \"),\"T SD T SD D T D\".split(\" \"),\"major,dorian,phrygian,lydian,mixolydian,minor,locrian\".split(\",\")),j=x(\"I II bIII IV V bVI bVII\".split(\" \"),\"m7 m7b5 maj7 m7 m7 maj7 7\".split(\" \"),\"T SD T SD D SD SD\".split(\" \"),\"minor,locrian,major,dorian,phrygian,lydian,mixolydian\".split(\",\")),B=x(\"I II bIII IV V bVI VII\".split(\" \"),\"mMaj7 m7b5 +maj7 m7 7 maj7 o7\".split(\" \"),\"T SD T SD D SD D\".split(\" \"),\"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian\".split(\",\")),ee=x(\"I II bIII IV V VI VII\".split(\" \"),\"m6 m7 +maj7 7 7 m7b5 m7b5\".split(\" \"),\"T SD T SD D  \".split(\" \"),\"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered\".split(\",\"));function de(R){var H=e.note(R).pc;if(!H)return y;var $=L(H),se=M(\"C\",H),ce=function(xe){var ke=s.get(xe);return ke.empty?\"\":e.transpose(R,ke.interval)+ke.chordType};return o(o({},$),{type:\"major\",minorRelative:e.transpose(H,\"-3m\"),alteration:se,keySignature:e.altToAcc(se),secondaryDominants:\"- VI7 VII7 I7 II7 III7 -\".split(\" \").map(ce),secondaryDominantsMinorRelative:\"- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -\".split(\" \").map(ce),substituteDominants:\"- bIII7 IV7 bV7 bVI7 bVII7 -\".split(\" \").map(ce),substituteDominantsMinorRelative:\"- IIIm7 Im7 IIbm7 VIm7 IVm7 -\".split(\" \").map(ce)})}function ie(R){var H=e.note(R).pc;if(!H)return k;var $=M(\"C\",H)-3;return{type:\"minor\",tonic:H,relativeMajor:e.transpose(H,\"3m\"),alteration:$,keySignature:e.altToAcc($),natural:j(H),harmonic:B(H),melodic:ee(H)}}function pe(R){return typeof R==\"number\"?a.transposeFifths(\"C\",R):typeof R==\"string\"\u0026\u0026/^b+|#+$/.test(R)?a.transposeFifths(\"C\",e.accToAlt(R)):null}var G={majorKey:de,majorTonicFromKeySignature:pe,minorKey:ie};r.default=G,r.majorKey=de,r.majorTonicFromKeySignature=pe,r.minorKey=ie,Object.defineProperty(r,\"__esModule\",{value:!0})})});var PA=v((Eh,MA)=\u003e{(function(r,e){typeof Eh==\"object\"\u0026\u0026typeof MA!=\"undefined\"?e(Eh,qo(),Tn(),wg(),ls()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/collection\",\"@tonaljs/core\",\"@tonaljs/interval\",\"@tonaljs/pcset\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Mode={},r.collection,r.core,r.interval,r.pcset))})(Eh,function(r,e,a,s,o){\"use strict\";var u=function(){return u=Object.assign||function(se){for(var ce,xe=1,ke=arguments.length;xe\u003cke;xe++){ce=arguments[xe];for(var Re in ce)Object.prototype.hasOwnProperty.call(ce,Re)\u0026\u0026(se[Re]=ce[Re])}return se},u.apply(this,arguments)},h=[[0,2773,0,\"ionian\",\"\",\"Maj7\",\"major\"],[1,2902,2,\"dorian\",\"m\",\"m7\"],[2,3418,4,\"phrygian\",\"m\",\"m7\"],[3,2741,-1,\"lydian\",\"\",\"Maj7\"],[4,2774,1,\"mixolydian\",\"\",\"7\"],[5,2906,3,\"aeolian\",\"m\",\"m7\",\"minor\"],[6,3434,5,\"locrian\",\"dim\",\"m7b5\"]],f=u(u({},o.EmptyPcset),{name:\"\",alt:0,modeNum:NaN,triad:\"\",seventh:\"\",aliases:[]}),y=h.map(B),k={};y.forEach(function($){k[$.name]=$,$.aliases.forEach(function(se){k[se]=$})});function q($){return typeof $==\"string\"?k[$.toLowerCase()]||f:$\u0026\u0026$.name?q($.name):f}var x=a.deprecate(\"Mode.mode\",\"Mode.get\",q);function M(){return y.slice()}var L=a.deprecate(\"Mode.mode\",\"Mode.all\",M);function j(){return y.map(function($){return $.name})}function B($){var se=$[0],ce=$[1],xe=$[2],ke=$[3],Re=$[4],ze=$[5],He=$[6],X=He?[He]:[],oe=Number(ce).toString(2),Y=o.chromaToIntervals(oe);return{empty:!1,intervals:Y,modeNum:se,chroma:oe,normalized:oe,name:ke,setNum:ce,alt:xe,triad:Re,seventh:ze,aliases:X}}function ee($,se){return q($).intervals.map(function(ce){return a.transpose(se,ce)})}function de($){return function(se,ce){var xe=q(se);if(xe.empty)return[];var ke=e.rotate(xe.modeNum,$),Re=xe.intervals.map(function(ze){return a.transpose(ce,ze)});return ke.map(function(ze,He){return Re[He]+ze})}}var ie=de(h.map(function($){return $[4]})),pe=de(h.map(function($){return $[5]}));function G($,se){var ce=q(se),xe=q($);return ce.empty||xe.empty?\"\":s.simplify(s.transposeFifths(\"1P\",xe.alt-ce.alt))}function R($,se,ce){return a.transpose(ce,G($,se))}var H={get:q,names:j,all:M,distance:G,relativeTonic:R,notes:ee,triads:ie,seventhChords:pe,entries:L,mode:x};r.all=M,r.default=H,r.distance=G,r.entries=L,r.get=q,r.mode=x,r.names=j,r.notes=ee,r.relativeTonic=R,r.seventhChords=pe,r.triads=ie,Object.defineProperty(r,\"__esModule\",{value:!0})})});var CA=v((jh,OA)=\u003e{(function(r,e){typeof jh==\"object\"\u0026\u0026typeof OA!=\"undefined\"?e(jh,xg(),Tn(),Ah()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/chord\",\"@tonaljs/core\",\"@tonaljs/roman-numeral\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Progression={},r.chord,r.core,r.romanNumeral))})(jh,function(r,e,a,s){\"use strict\";function o(f,y){var k=y.map(s.get);return k.map(function(q){return a.transpose(f,a.interval(q))+q.chordType})}function u(f,y){return y.map(function(k){var q=e.tokenize(k),x=q[0],M=q[1],L=a.distance(f,x),j=s.get(a.interval(L));return j.name+M})}var h={fromRomanNumerals:o,toRomanNumerals:u};r.default=h,r.fromRomanNumerals=o,r.toRomanNumerals=u,Object.defineProperty(r,\"__esModule\",{value:!0})})});var RA=v((Dh,AA)=\u003e{(function(r,e){typeof Dh==\"object\"\u0026\u0026typeof AA!=\"undefined\"?e(Dh,qo(),Mh()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/collection\",\"@tonaljs/midi\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Range={},r.collection,r.midi))})(Dh,function(r,e,a){\"use strict\";function s(h){var f=e.compact(h.map(a.toMidi));return!h.length||f.length!==h.length?[]:f.reduce(function(y,k){var q=y[y.length-1];return y.concat(e.range(q,k).slice(1))},[f[0]])}function o(h,f){return s(h).map(function(y){return a.midiToNoteName(y,f)})}var u={numeric:s,chromatic:o};r.chromatic=o,r.default=u,r.numeric=s,Object.defineProperty(r,\"__esModule\",{value:!0})})});var jA=v((Ih,EA)=\u003e{(function(r,e){typeof Ih==\"object\"\u0026\u0026typeof EA!=\"undefined\"?e(Ih,eu(),qo(),Tn(),Oh(),ls(),xh()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/chord-type\",\"@tonaljs/collection\",\"@tonaljs/core\",\"@tonaljs/note\",\"@tonaljs/pcset\",\"@tonaljs/scale-type\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Scale={},r.chordType,r.collection,r.core,r.note,r.pcset,r.scaleType))})(Ih,function(r,e,a,s,o,u,h){\"use strict\";var f=function(){return f=Object.assign||function(H){for(var $,se=1,ce=arguments.length;se\u003cce;se++){$=arguments[se];for(var xe in $)Object.prototype.hasOwnProperty.call($,xe)\u0026\u0026(H[xe]=$[xe])}return H},f.apply(this,arguments)},y={empty:!0,name:\"\",type:\"\",tonic:null,setNum:NaN,chroma:\"\",normalized:\"\",aliases:[],notes:[],intervals:[]};function k(R){if(typeof R!=\"string\")return[\"\",\"\"];var H=R.indexOf(\" \"),$=s.note(R.substring(0,H));if($.empty){var se=s.note(R);return se.empty?[\"\",R]:[se.name,\"\"]}var ce=R.substring($.name.length+1);return[$.name,ce.length?ce:\"\"]}var q=h.names;function x(R){var H=Array.isArray(R)?R:k(R),$=s.note(H[0]).name,se=h.get(H[1]);if(se.empty)return y;var ce=se.name,xe=$?se.intervals.map(function(Re){return s.transpose($,Re)}):[],ke=$?$+\" \"+ce:ce;return f(f({},se),{name:ke,type:ce,tonic:$,notes:xe})}var M=s.deprecate(\"Scale.scale\",\"Scale.get\",x);function L(R){var H=x(R),$=u.isSubsetOf(H.chroma);return e.all().filter(function(se){return $(se.chroma)}).map(function(se){return se.aliases[0]})}function j(R){var H=x(R),$=u.isSupersetOf(H.chroma);return h.all().filter(function(se){return $(se.chroma)}).map(function(se){return se.name})}function B(R){var H=u.isSubsetOf(x(R).chroma);return h.all().filter(function($){return H($.chroma)}).map(function($){return $.name})}function ee(R){var H=R.map(function(ce){return s.note(ce).pc}).filter(function(ce){return ce}),$=H[0],se=o.sortedUniqNames(H);return a.rotate(se.indexOf($),se)}function de(R){var H=x(R);if(H.empty)return[];var $=H.tonic?H.notes:H.intervals;return u.modes(H.chroma).map(function(se,ce){var xe=x(se).name;return xe?[$[ce],xe]:[\"\",\"\"]}).filter(function(se){return se[0]})}function ie(R){var H=Array.isArray(R)?ee(R):x(R).notes,$=H.map(function(se){return s.note(se).chroma});return function(se){var ce=typeof se==\"number\"?s.note(o.fromMidi(se)):s.note(se),xe=ce.height;if(xe!==void 0){var ke=xe%12,Re=$.indexOf(ke);if(Re!==-1)return o.enharmonic(ce.name,H[Re])}}}function pe(R){var H=ie(R);return function($,se){var ce=s.note($).height,xe=s.note(se).height;return ce===void 0||xe===void 0?[]:a.range(ce,xe).map(H).filter(function(ke){return ke})}}var G={get:x,names:q,extended:j,modeNames:de,reduced:B,scaleChords:L,scaleNotes:ee,tokenize:k,rangeOf:pe,scale:M};r.default=G,r.extended=j,r.get=x,r.modeNames=de,r.names=q,r.rangeOf=pe,r.reduced=B,r.scale=M,r.scaleChords=L,r.scaleNotes=ee,r.tokenize=k,Object.defineProperty(r,\"__esModule\",{value:!0})})});var IA=v((Fh,DA)=\u003e{(function(r,e){typeof Fh==\"object\"\u0026\u0026typeof DA!=\"undefined\"?e(Fh):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.TimeSignature={}))})(Fh,function(r){\"use strict\";var e={empty:!0,name:\"\",upper:void 0,lower:void 0,type:void 0,additive:[]},a=[\"4/4\",\"3/4\",\"2/4\",\"2/2\",\"12/8\",\"9/8\",\"6/8\",\"3/8\"];function s(){return a.slice()}var o=/^(\\d?\\d(?:\\+\\d)*)\\/(\\d)$/,u=new Map;function h(q){var x=u.get(q);if(x)return x;var M=k(f(q));return u.set(q,M),M}function f(q){if(typeof q==\"string\"){var x=o.exec(q)||[];x[0];var M=x[1],L=x[2];return f([M,L])}var j=q[0],B=q[1],ee=+B;if(typeof j==\"number\")return[j,ee];var de=j.split(\"+\").map(function(ie){return+ie});return de.length===1?[de[0],ee]:[de,ee]}var y={names:s,parse:f,get:h};function k(q){var x=q[0],M=q[1],L=Array.isArray(x)?x.reduce(function(ie,pe){return ie+pe},0):x,j=M;if(L===0||j===0)return e;var B=Array.isArray(x)?x.join(\"+\")+\"/\"+M:x+\"/\"+M,ee=Array.isArray(x)?x:[],de=j===4||j===2?\"simple\":j===8\u0026\u0026L%3==0?\"compound\":\"irregular\";return{empty:!1,name:B,type:de,upper:L,lower:j,additive:ee}}r.default=y,r.get=h,r.names=s,r.parse=f,Object.defineProperty(r,\"__esModule\",{value:!0})})});var Ca=v((Vh,FA)=\u003e{(function(r,e){typeof Vh==\"object\"\u0026\u0026typeof FA!=\"undefined\"?e(Vh,lA(),hA(),xg(),eu(),qo(),Tn(),NA(),wg(),SA(),Mh(),PA(),Oh(),ls(),CA(),RA(),Ah(),jA(),xh(),IA()):typeof define==\"function\"\u0026\u0026define.amd?define([\"exports\",\"@tonaljs/abc-notation\",\"@tonaljs/array\",\"@tonaljs/chord\",\"@tonaljs/chord-type\",\"@tonaljs/collection\",\"@tonaljs/core\",\"@tonaljs/duration-value\",\"@tonaljs/interval\",\"@tonaljs/key\",\"@tonaljs/midi\",\"@tonaljs/mode\",\"@tonaljs/note\",\"@tonaljs/pcset\",\"@tonaljs/progression\",\"@tonaljs/range\",\"@tonaljs/roman-numeral\",\"@tonaljs/scale\",\"@tonaljs/scale-type\",\"@tonaljs/time-signature\"],e):(r=typeof globalThis!=\"undefined\"?globalThis:r||self,e(r.Tonal={},r.abcNotation,r.array,r.chord,r.ChordType,r.collection,r.Core,r.durationValue,r.interval,r.key,r.midi,r.mode,r.note,r.Pcset,r.progression,r.range,r.romanNumeral,r.scale,r.ScaleType,r.timeSignature))})(Vh,function(r,e,a,s,o,u,h,f,y,k,q,x,M,L,j,B,ee,de,ie,pe){\"use strict\";function G(Pe){return Pe\u0026\u0026typeof Pe==\"object\"\u0026\u0026\"default\"in Pe?Pe:{default:Pe}}function R(Pe){if(Pe\u0026\u0026Pe.__esModule)return Pe;var tt=Object.create(null);return Pe\u0026\u0026Object.keys(Pe).forEach(function(mt){if(mt!==\"default\"){var Zt=Object.getOwnPropertyDescriptor(Pe,mt);Object.defineProperty(tt,mt,Zt.get?Zt:{enumerable:!0,get:function(){return Pe[mt]}})}}),tt.default=Pe,Object.freeze(tt)}var H=G(e),$=R(a),se=G(s),ce=G(o),xe=G(u),ke=R(h),Re=G(f),ze=G(y),He=G(k),X=G(q),oe=G(x),Y=G(M),J=G(L),ge=G(j),me=G(B),We=G(ee),Qe=G(de),ft=G(ie),le=G(pe),Ne=ke,Me=J.default,Be=ce.default,Oe=ft.default;Object.defineProperty(r,\"AbcNotation\",{enumerable:!0,get:function(){return H.default}}),r.Array=$,Object.defineProperty(r,\"Chord\",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(r,\"ChordType\",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(r,\"Collection\",{enumerable:!0,get:function(){return xe.default}}),r.Core=ke,Object.defineProperty(r,\"DurationValue\",{enumerable:!0,get:function(){return Re.default}}),Object.defineProperty(r,\"Interval\",{enumerable:!0,get:function(){return ze.default}}),Object.defineProperty(r,\"Key\",{enumerable:!0,get:function(){return He.default}}),Object.defineProperty(r,\"Midi\",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(r,\"Mode\",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(r,\"Note\",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(r,\"Pcset\",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(r,\"Progression\",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(r,\"Range\",{enumerable:!0,get:function(){return me.default}}),Object.defineProperty(r,\"RomanNumeral\",{enumerable:!0,get:function(){return We.default}}),Object.defineProperty(r,\"Scale\",{enumerable:!0,get:function(){return Qe.default}}),Object.defineProperty(r,\"ScaleType\",{enumerable:!0,get:function(){return ft.default}}),Object.defineProperty(r,\"TimeSignature\",{enumerable:!0,get:function(){return le.default}}),r.ChordDictionary=Be,r.PcSet=Me,r.ScaleDictionary=Oe,r.Tonal=Ne,Object.keys(h).forEach(function(Pe){Pe!==\"default\"\u0026\u0026!r.hasOwnProperty(Pe)\u0026\u0026Object.defineProperty(r,Pe,{enumerable:!0,get:function(){return h[Pe]}})}),Object.defineProperty(r,\"__esModule\",{value:!0})})});var ot=v((Eye,WA)=\u003e{WA.exports=React});var ru=v((nu,Sg)=\u003e{(function(r,e){typeof nu==\"object\"\u0026\u0026typeof Sg==\"object\"?Sg.exports=e():typeof define==\"function\"\u0026\u0026define.amd?define([],e):typeof nu==\"object\"?nu.Tone=e():r.Tone=e()})(typeof self!=\"undefined\"?self:nu,function(){return function(r){var e={};function a(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return r[s].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=e,a.d=function(s,o,u){a.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:u})},a.r=function(s){typeof Symbol!=\"undefined\"\u0026\u0026Symbol.toStringTag\u0026\u0026Object.defineProperty(s,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(s,\"__esModule\",{value:!0})},a.t=function(s,o){if(1\u0026o\u0026\u0026(s=a(s)),8\u0026o||4\u0026o\u0026\u0026typeof s==\"object\"\u0026\u0026s\u0026\u0026s.__esModule)return s;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,\"default\",{enumerable:!0,value:s}),2\u0026o\u0026\u0026typeof s!=\"string\")for(var h in s)a.d(u,h,function(f){return s[f]}.bind(null,h));return u},a.n=function(s){var o=s\u0026\u0026s.__esModule?function(){return s.default}:function(){return s};return a.d(o,\"a\",o),o},a.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},a.p=\"\",a(a.s=9)}([function(r,e,a){(function(s,o,u,h){\"use strict\";function f(X){return X\u0026\u0026typeof X==\"object\"\u0026\u0026\"default\"in X?X:{default:X}}var y=f(o),k=f(u),q=f(h),x=function(X,oe,Y){return{endTime:oe,insertTime:Y,type:\"exponentialRampToValue\",value:X}},M=function(X,oe,Y){return{endTime:oe,insertTime:Y,type:\"linearRampToValue\",value:X}},L=function(X,oe){return{startTime:oe,type:\"setValue\",value:X}},j=function(X,oe,Y){return{duration:Y,startTime:oe,type:\"setValueCurve\",values:X}},B=function(X,oe,Y){var J=Y.startTime,ge=Y.target,me=Y.timeConstant;return ge+(oe-ge)*Math.exp((J-X)/me)},ee=function(X){return X.type===\"exponentialRampToValue\"},de=function(X){return X.type===\"linearRampToValue\"},ie=function(X){return ee(X)||de(X)},pe=function(X){return X.type===\"setValue\"},G=function(X){return X.type===\"setValueCurve\"},R=function X(oe,Y,J,ge){var me=oe[Y];return me===void 0?ge:ie(me)||pe(me)?me.value:G(me)?me.values[me.values.length-1]:B(J,X(oe,Y-1,me.startTime,ge),me)},H=function(X,oe,Y,J,ge){return Y===void 0?[J.insertTime,ge]:ie(Y)?[Y.endTime,Y.value]:pe(Y)?[Y.startTime,Y.value]:G(Y)?[Y.startTime+Y.duration,Y.values[Y.values.length-1]]:[Y.startTime,R(X,oe-1,Y.startTime,ge)]},$=function(X){return X.type===\"cancelAndHold\"},se=function(X){return X.type===\"cancelScheduledValues\"},ce=function(X){return $(X)||se(X)?X.cancelTime:ee(X)||de(X)?X.endTime:X.startTime},xe=function(X,oe,Y,J){var ge=J.endTime,me=J.value;return Y===me?me:0\u003cY\u0026\u00260\u003cme||Y\u003c0\u0026\u0026me\u003c0?Y*Math.pow(me/Y,(X-oe)/(ge-oe)):0},ke=function(X,oe,Y,J){return Y+(X-oe)/(J.endTime-oe)*(J.value-Y)},Re=function(X,oe){var Y=oe.duration,J=oe.startTime,ge=oe.values;return function(me,We){var Qe=Math.floor(We),ft=Math.ceil(We);return Qe===ft?me[Qe]:(1-(We-Qe))*me[Qe]+(1-(ft-We))*me[ft]}(ge,(X-J)/Y*(ge.length-1))},ze=function(X){return X.type===\"setTarget\"},He=function(){function X(oe){k.default(this,X),this._automationEvents=[],this._currenTime=0,this._defaultValue=oe}return q.default(X,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:\"add\",value:function(oe){var Y=ce(oe);if($(oe)||se(oe)){var J=this._automationEvents.findIndex(function(Oe){return se(oe)\u0026\u0026G(Oe)?Oe.startTime+Oe.duration\u003e=Y:ce(Oe)\u003e=Y}),ge=this._automationEvents[J];if(J!==-1\u0026\u0026(this._automationEvents=this._automationEvents.slice(0,J)),$(oe)){var me=this._automationEvents[this._automationEvents.length-1];if(ge!==void 0\u0026\u0026ie(ge)){if(ze(me))throw new Error(\"The internal list is malformed.\");var We=G(me)?me.startTime+me.duration:ce(me),Qe=G(me)?me.values[me.values.length-1]:me.value,ft=ee(ge)?xe(Y,We,Qe,ge):ke(Y,We,Qe,ge),le=ee(ge)?x(ft,Y,this._currenTime):M(ft,Y,this._currenTime);this._automationEvents.push(le)}me!==void 0\u0026\u0026ze(me)\u0026\u0026this._automationEvents.push(L(this.getValue(Y),Y)),me!==void 0\u0026\u0026G(me)\u0026\u0026me.startTime+me.duration\u003eY\u0026\u0026(this._automationEvents[this._automationEvents.length-1]=j(new Float32Array([6,7]),me.startTime,Y-me.startTime))}}else{var Ne=this._automationEvents.findIndex(function(Oe){return ce(Oe)\u003eY}),Me=Ne===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[Ne-1];if(Me!==void 0\u0026\u0026G(Me)\u0026\u0026ce(Me)+Me.duration\u003eY)return!1;var Be=ee(oe)?x(oe.value,oe.endTime,this._currenTime):de(oe)?M(oe.value,Y,this._currenTime):oe;if(Ne===-1)this._automationEvents.push(Be);else{if(G(oe)\u0026\u0026Y+oe.duration\u003ece(this._automationEvents[Ne]))return!1;this._automationEvents.splice(Ne,0,Be)}}return!0}},{key:\"flush\",value:function(oe){var Y=this._automationEvents.findIndex(function(me){return ce(me)\u003eoe});if(Y\u003e1){var J=this._automationEvents.slice(Y-1),ge=J[0];ze(ge)\u0026\u0026J.unshift(L(R(this._automationEvents,Y-2,ge.startTime,this._defaultValue),ge.startTime)),this._automationEvents=J}}},{key:\"getValue\",value:function(oe){if(this._automationEvents.length===0)return this._defaultValue;var Y=this._automationEvents[this._automationEvents.length-1],J=this._automationEvents.findIndex(function(Pe){return ce(Pe)\u003eoe}),ge=this._automationEvents[J],me=ce(Y)\u003c=oe?Y:this._automationEvents[J-1];if(me!==void 0\u0026\u0026ze(me)\u0026\u0026(ge===void 0||!ie(ge)||ge.insertTime\u003eoe))return B(oe,R(this._automationEvents,J-2,me.startTime,this._defaultValue),me);if(me!==void 0\u0026\u0026pe(me)\u0026\u0026(ge===void 0||!ie(ge)))return me.value;if(me!==void 0\u0026\u0026G(me)\u0026\u0026(ge===void 0||!ie(ge)||me.startTime+me.duration\u003eoe))return oe\u003cme.startTime+me.duration?Re(oe,me):me.values[me.values.length-1];if(me!==void 0\u0026\u0026ie(me)\u0026\u0026(ge===void 0||!ie(ge)))return me.value;if(ge!==void 0\u0026\u0026ee(ge)){var We=H(this._automationEvents,J-1,me,ge,this._defaultValue),Qe=y.default(We,2),ft=Qe[0],le=Qe[1];return xe(oe,ft,le,ge)}if(ge!==void 0\u0026\u0026de(ge)){var Ne=H(this._automationEvents,J-1,me,ge,this._defaultValue),Me=y.default(Ne,2),Be=Me[0],Oe=Me[1];return ke(oe,Be,Oe,ge)}return this._defaultValue}}]),X}();s.AutomationEventList=He,s.createCancelAndHoldAutomationEvent=function(X){return{cancelTime:X,type:\"cancelAndHold\"}},s.createCancelScheduledValuesAutomationEvent=function(X){return{cancelTime:X,type:\"cancelScheduledValues\"}},s.createExponentialRampToValueAutomationEvent=function(X,oe){return{endTime:oe,type:\"exponentialRampToValue\",value:X}},s.createLinearRampToValueAutomationEvent=function(X,oe){return{endTime:oe,type:\"linearRampToValue\",value:X}},s.createSetTargetAutomationEvent=function(X,oe,Y){return{startTime:oe,target:X,timeConstant:Y,type:\"setTarget\"}},s.createSetValueAutomationEvent=L,s.createSetValueCurveAutomationEvent=j,Object.defineProperty(s,\"__esModule\",{value:!0})})(e,a(1),a(7),a(8))},function(r,e,a){var s=a(2),o=a(3),u=a(4),h=a(6);r.exports=function(f,y){return s(f)||o(f,y)||u(f,y)||h()}},function(r,e){r.exports=function(a){if(Array.isArray(a))return a}},function(r,e){r.exports=function(a,s){if(typeof Symbol!=\"undefined\"\u0026\u0026Symbol.iterator in Object(a)){var o=[],u=!0,h=!1,f=void 0;try{for(var y,k=a[Symbol.iterator]();!(u=(y=k.next()).done)\u0026\u0026(o.push(y.value),!s||o.length!==s);u=!0);}catch(q){h=!0,f=q}finally{try{u||k.return==null||k.return()}finally{if(h)throw f}}return o}}},function(r,e,a){var s=a(5);r.exports=function(o,u){if(o){if(typeof o==\"string\")return s(o,u);var h=Object.prototype.toString.call(o).slice(8,-1);return h===\"Object\"\u0026\u0026o.constructor\u0026\u0026(h=o.constructor.name),h===\"Map\"||h===\"Set\"?Array.from(o):h===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?s(o,u):void 0}}},function(r,e){r.exports=function(a,s){(s==null||s\u003ea.length)\u0026\u0026(s=a.length);for(var o=0,u=new Array(s);o\u003cs;o++)u[o]=a[o];return u}},function(r,e){r.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(r,e){r.exports=function(a,s){if(!(a instanceof s))throw new TypeError(\"Cannot call a class as a function\")}},function(r,e){function a(s,o){for(var u=0;u\u003co.length;u++){var h=o[u];h.enumerable=h.enumerable||!1,h.configurable=!0,\"value\"in h\u0026\u0026(h.writable=!0),Object.defineProperty(s,h.key,h)}}r.exports=function(s,o,u){return o\u0026\u0026a(s.prototype,o),u\u0026\u0026a(s,u),s}},function(r,e,a){\"use strict\";a.r(e),a.d(e,\"getContext\",function(){return Pt}),a.d(e,\"setContext\",function(){return Ol}),a.d(e,\"Clock\",function(){return js}),a.d(e,\"Context\",function(){return Ei}),a.d(e,\"BaseContext\",function(){return om}),a.d(e,\"Delay\",function(){return Ln}),a.d(e,\"Gain\",function(){return Ce}),a.d(e,\"Offline\",function(){return vF}),a.d(e,\"OfflineContext\",function(){return ji}),a.d(e,\"Param\",function(){return Ue}),a.d(e,\"ToneAudioBuffer\",function(){return ct}),a.d(e,\"ToneAudioBuffers\",function(){return Wi}),a.d(e,\"ToneAudioNode\",function(){return ye}),a.d(e,\"connectSeries\",function(){return ar}),a.d(e,\"connect\",function(){return Wn}),a.d(e,\"disconnect\",function(){return lm}),a.d(e,\"FrequencyClass\",function(){return jn}),a.d(e,\"Frequency\",function(){return fF}),a.d(e,\"MidiClass\",function(){return Li}),a.d(e,\"Midi\",function(){return gF}),a.d(e,\"TimeClass\",function(){return rr}),a.d(e,\"Time\",function(){return pF}),a.d(e,\"TicksClass\",function(){return wt}),a.d(e,\"Ticks\",function(){return yF}),a.d(e,\"TransportTimeClass\",function(){return Kt}),a.d(e,\"TransportTime\",function(){return mF}),a.d(e,\"Emitter\",function(){return Ri}),a.d(e,\"IntervalTimeline\",function(){return yN}),a.d(e,\"StateTimeline\",function(){return Fi}),a.d(e,\"Timeline\",function(){return Vr}),a.d(e,\"isUndef\",function(){return Vn}),a.d(e,\"isDefined\",function(){return Je}),a.d(e,\"isFunction\",function(){return lN}),a.d(e,\"isNumber\",function(){return nr}),a.d(e,\"isObject\",function(){return _a}),a.d(e,\"isBoolean\",function(){return sm}),a.d(e,\"isArray\",function(){return _n}),a.d(e,\"isString\",function(){return gr}),a.d(e,\"isNote\",function(){return fc}),a.d(e,\"dbToGain\",function(){return Di}),a.d(e,\"gainToDb\",function(){return vc}),a.d(e,\"intervalToFrequencyRatio\",function(){return Ii}),a.d(e,\"ftom\",function(){return Ya}),a.d(e,\"mtof\",function(){return cm}),a.d(e,\"optionsFromArguments\",function(){return V}),a.d(e,\"defaultArg\",function(){return _r}),a.d(e,\"Unit\",function(){return o}),a.d(e,\"debug\",function(){return s}),a.d(e,\"Noise\",function(){return xa}),a.d(e,\"UserMedia\",function(){return Bi}),a.d(e,\"Oscillator\",function(){return Ot}),a.d(e,\"AMOscillator\",function(){return Gi}),a.d(e,\"FMOscillator\",function(){return Is}),a.d(e,\"PulseOscillator\",function(){return Fs}),a.d(e,\"FatOscillator\",function(){return Ui}),a.d(e,\"PWMOscillator\",function(){return $i}),a.d(e,\"OmniOscillator\",function(){return Qr}),a.d(e,\"ToneOscillatorNode\",function(){return zi}),a.d(e,\"LFO\",function(){return Sn}),a.d(e,\"ToneBufferSource\",function(){return ba}),a.d(e,\"Player\",function(){return Ws}),a.d(e,\"Players\",function(){return Fl}),a.d(e,\"GrainPlayer\",function(){return Vl}),a.d(e,\"Add\",function(){return Vs}),a.d(e,\"Abs\",function(){return bN}),a.d(e,\"AudioToGain\",function(){return Dl}),a.d(e,\"GainToAudio\",function(){return xN}),a.d(e,\"GreaterThan\",function(){return kc}),a.d(e,\"GreaterThanZero\",function(){return Wl}),a.d(e,\"Multiply\",function(){return Ct}),a.d(e,\"Negate\",function(){return hm}),a.d(e,\"Pow\",function(){return Hi}),a.d(e,\"Signal\",function(){return Le}),a.d(e,\"connectSignal\",function(){return yc}),a.d(e,\"Scale\",function(){return Jr}),a.d(e,\"ScaleExp\",function(){return Nc}),a.d(e,\"Subtract\",function(){return Ls}),a.d(e,\"SyncedSignal\",function(){return bF}),a.d(e,\"WaveShaper\",function(){return kr}),a.d(e,\"Zero\",function(){return Il}),a.d(e,\"AMSynth\",function(){return dm}),a.d(e,\"DuoSynth\",function(){return Bl}),a.d(e,\"FMSynth\",function(){return zl}),a.d(e,\"MetalSynth\",function(){return Gl}),a.d(e,\"MembraneSynth\",function(){return Qi}),a.d(e,\"MonoSynth\",function(){return Za}),a.d(e,\"NoiseSynth\",function(){return Ul}),a.d(e,\"PluckSynth\",function(){return $l}),a.d(e,\"PolySynth\",function(){return Hl}),a.d(e,\"Sampler\",function(){return no}),a.d(e,\"Synth\",function(){return Ta}),a.d(e,\"Loop\",function(){return ro}),a.d(e,\"Part\",function(){return ao}),a.d(e,\"Pattern\",function(){return Yl}),a.d(e,\"Sequence\",function(){return Xl}),a.d(e,\"ToneEvent\",function(){return Wr}),a.d(e,\"AutoFilter\",function(){return Kl}),a.d(e,\"AutoPanner\",function(){return Ql}),a.d(e,\"AutoWah\",function(){return Jl}),a.d(e,\"BitCrusher\",function(){return ep}),a.d(e,\"Chebyshev\",function(){return np}),a.d(e,\"Chorus\",function(){return rp}),a.d(e,\"Distortion\",function(){return ap}),a.d(e,\"FeedbackDelay\",function(){return ip}),a.d(e,\"FrequencyShifter\",function(){return op}),a.d(e,\"Freeverb\",function(){return cp}),a.d(e,\"JCReverb\",function(){return up}),a.d(e,\"PingPongDelay\",function(){return lp}),a.d(e,\"PitchShift\",function(){return pp}),a.d(e,\"Phaser\",function(){return hp}),a.d(e,\"Reverb\",function(){return dp}),a.d(e,\"StereoWidener\",function(){return fp}),a.d(e,\"Tremolo\",function(){return mp}),a.d(e,\"Vibrato\",function(){return vp}),a.d(e,\"Analyser\",function(){return co}),a.d(e,\"Meter\",function(){return gp}),a.d(e,\"FFT\",function(){return yp}),a.d(e,\"DCMeter\",function(){return ym}),a.d(e,\"Waveform\",function(){return _p}),a.d(e,\"Follower\",function(){return oo}),a.d(e,\"Channel\",function(){return Ja}),a.d(e,\"CrossFade\",function(){return Bs}),a.d(e,\"Merge\",function(){return Sa}),a.d(e,\"MidSideMerge\",function(){return wc}),a.d(e,\"MidSideSplit\",function(){return xc}),a.d(e,\"Mono\",function(){return _m}),a.d(e,\"MultibandSplit\",function(){return uo}),a.d(e,\"Panner\",function(){return io}),a.d(e,\"Panner3D\",function(){return kp}),a.d(e,\"PanVol\",function(){return qc}),a.d(e,\"Recorder\",function(){return Tc}),a.d(e,\"Solo\",function(){return Bt}),a.d(e,\"Split\",function(){return Ka}),a.d(e,\"Volume\",function(){return Kr}),a.d(e,\"Compressor\",function(){return ta}),a.d(e,\"Gate\",function(){return Np}),a.d(e,\"Limiter\",function(){return bp}),a.d(e,\"MidSideCompressor\",function(){return xp}),a.d(e,\"MultibandCompressor\",function(){return wp}),a.d(e,\"AmplitudeEnvelope\",function(){return Yi}),a.d(e,\"Envelope\",function(){return pn}),a.d(e,\"FrequencyEnvelope\",function(){return Ki}),a.d(e,\"EQ3\",function(){return qp}),a.d(e,\"Filter\",function(){return Bn}),a.d(e,\"OnePoleFilter\",function(){return eo}),a.d(e,\"FeedbackCombFilter\",function(){return Ji}),a.d(e,\"LowpassCombFilter\",function(){return to}),a.d(e,\"Convolver\",function(){return Tp}),a.d(e,\"BiquadFilter\",function(){return Zi}),a.d(e,\"version\",function(){return u}),a.d(e,\"start\",function(){return lF}),a.d(e,\"supported\",function(){return sF}),a.d(e,\"now\",function(){return AF}),a.d(e,\"immediate\",function(){return RF}),a.d(e,\"Transport\",function(){return EF}),a.d(e,\"getTransport\",function(){return jF}),a.d(e,\"Destination\",function(){return DF}),a.d(e,\"Master\",function(){return IF}),a.d(e,\"getDestination\",function(){return FF}),a.d(e,\"Listener\",function(){return VF}),a.d(e,\"getListener\",function(){return WF}),a.d(e,\"Draw\",function(){return LF}),a.d(e,\"getDraw\",function(){return BF}),a.d(e,\"context\",function(){return zF}),a.d(e,\"loaded\",function(){return GF}),a.d(e,\"Buffer\",function(){return UF}),a.d(e,\"Buffers\",function(){return $F}),a.d(e,\"BufferSource\",function(){return HF});var s={};a.r(s),a.d(s,\"assert\",function(){return Ae}),a.d(s,\"assertRange\",function(){return yn}),a.d(s,\"assertContextRunning\",function(){return rm}),a.d(s,\"setLogger\",function(){return iF}),a.d(s,\"log\",function(){return uN}),a.d(s,\"warn\",function(){return dc});var o={};a.r(o);let u=\"14.7.77\";var h=a(0);let f=new WeakSet,y=new WeakMap,k=new WeakMap,q=new WeakMap,x=new WeakMap,M=new WeakMap,L=new WeakMap,j=new WeakMap,B=new WeakMap,ee=new WeakMap,de={construct:()=\u003ede},ie=/^import(?:(?:[\\s]+[\\w]+|(?:[\\s]+[\\w]+[\\s]*,)?[\\s]*\\{[\\s]*[\\w]+(?:[\\s]+as[\\s]+[\\w]+)?(?:[\\s]*,[\\s]*[\\w]+(?:[\\s]+as[\\s]+[\\w]+)?)*[\\s]*}|(?:[\\s]+[\\w]+[\\s]*,)?[\\s]*\\*[\\s]+as[\\s]+[\\w]+)[\\s]+from)?(?:[\\s]*)(\"([^\"\\\\]|\\\\.)+\"|'([^'\\\\]|\\\\.)+')(?:[\\s]*);?/,pe=(l,t)=\u003e{let i=[],c=l.replace(/^[\\s]+/,\"\"),p=c.match(ie);for(;p!==null;){let d=p[1].slice(1,-1),m=p[0].replace(/([\\s]+)?;?$/,\"\").replace(d,new URL(d,t).toString());i.push(m),c=c.slice(p[0].length).replace(/^[\\s]+/,\"\"),p=c.match(ie)}return[i.join(\";\"),c]},G=l=\u003e{if(l!==void 0\u0026\u0026!Array.isArray(l))throw new TypeError(\"The parameterDescriptors property of given value for processorCtor is not an array.\")},R=l=\u003e{if(!(t=\u003e{try{new new Proxy(t,de)}catch{return!1}return!0})(l))throw new TypeError(\"The given value for processorCtor should be a constructor.\");if(l.prototype===null||typeof l.prototype!=\"object\")throw new TypeError(\"The given value for processorCtor should have a prototype.\")},H=(l,t)=\u003e{let i=l.get(t);if(i===void 0)throw new Error(\"A value with the given key could not be found.\");return i},$=(l,t)=\u003e{let i=Array.from(l).filter(t);if(i.length\u003e1)throw Error(\"More than one element was found.\");if(i.length===0)throw Error(\"No element was found.\");let[c]=i;return l.delete(c),c},se=(l,t,i,c)=\u003e{let p=H(l,t),d=$(p,m=\u003em[0]===i\u0026\u0026m[1]===c);return p.size===0\u0026\u0026l.delete(t),d},ce=l=\u003eH(L,l),xe=l=\u003e{if(f.has(l))throw new Error(\"The AudioNode is already stored.\");f.add(l),ce(l).forEach(t=\u003et(!0))},ke=l=\u003e\"port\"in l,Re=l=\u003e{if(!f.has(l))throw new Error(\"The AudioNode is not stored.\");f.delete(l),ce(l).forEach(t=\u003et(!1))},ze=(l,t)=\u003e{!ke(l)\u0026\u0026t.every(i=\u003ei.size===0)\u0026\u0026Re(l)},He={channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},X=(l,t)=\u003el.context===t,oe=l=\u003e{try{l.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Y=()=\u003enew DOMException(\"\",\"IndexSizeError\"),J=l=\u003e{var t;l.getChannelData=(t=l.getChannelData,i=\u003e{try{return t.call(l,i)}catch(c){throw c.code===12?Y():c}})},ge={numberOfChannels:1},me=-34028234663852886e22,We=-me,Qe=l=\u003ef.has(l),ft={buffer:null,channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},le=l=\u003eH(y,l),Ne=l=\u003eH(q,l),Me=(l,t)=\u003e{let{activeInputs:i}=le(l);i.forEach(p=\u003ep.forEach(([d])=\u003e{t.includes(l)||Me(d,[...t,l])}));let c=(p=\u003e\"playbackRate\"in p)(l)?[l.playbackRate]:ke(l)?Array.from(l.parameters.values()):(p=\u003e\"frequency\"in p\u0026\u0026\"gain\"in p)(l)?[l.Q,l.detune,l.frequency,l.gain]:(p=\u003e\"offset\"in p)(l)?[l.offset]:(p=\u003e!(\"frequency\"in p)\u0026\u0026\"gain\"in p)(l)?[l.gain]:(p=\u003e\"detune\"in p\u0026\u0026\"frequency\"in p)(l)?[l.detune,l.frequency]:(p=\u003e\"pan\"in p)(l)?[l.pan]:[];for(let p of c){let d=Ne(p);d!==void 0\u0026\u0026d.activeInputs.forEach(([m])=\u003eMe(m,t))}Qe(l)\u0026\u0026Re(l)},Be=l=\u003e{Me(l.destination,[])},Oe=l=\u003el===void 0||typeof l==\"number\"||typeof l==\"string\"\u0026\u0026(l===\"balanced\"||l===\"interactive\"||l===\"playback\"),Pe=l=\u003e\"context\"in l,tt=l=\u003ePe(l[0]),mt=(l,t,i,c)=\u003e{for(let p of l)if(i(p)){if(c)return!1;throw Error(\"The set contains at least one similar element.\")}return l.add(t),!0},Zt=(l,t,[i,c],p)=\u003e{mt(l,[t,i,c],d=\u003ed[0]===t\u0026\u0026d[1]===i,p)},An=(l,[t,i,c],p)=\u003e{let d=l.get(t);d===void 0?l.set(t,new Set([[i,c]])):mt(d,[i,c],m=\u003em[0]===i,p)},Et=l=\u003e\"inputs\"in l,Rn=(l,t,i,c)=\u003e{if(Et(t)){let p=t.inputs[c];return l.connect(p,i,0),[p,i,0]}return l.connect(t,i,c),[t,i,c]},En=(l,t,i)=\u003e{for(let c of l)if(c[0]===t\u0026\u0026c[1]===i)return l.delete(c),c;return null},Or=(l,t)=\u003e{if(!ce(l).delete(t))throw new Error(\"Missing the expected event listener.\")},mr=(l,t,i)=\u003e{let c=H(l,t),p=$(c,d=\u003ed[0]===i);return c.size===0\u0026\u0026l.delete(t),p},Cr=(l,t,i,c)=\u003e{Et(t)?l.disconnect(t.inputs[c],i,0):l.disconnect(t,i,c)},vt=l=\u003eH(k,l),er=l=\u003eH(x,l),Fn=l=\u003ej.has(l),La=l=\u003e!f.has(l),Ba=l=\u003enew Promise(t=\u003e{let i=l.createScriptProcessor(256,1,1),c=l.createGain(),p=l.createBuffer(1,2,44100),d=p.getChannelData(0);d[0]=1,d[1]=1;let m=l.createBufferSource();m.buffer=p,m.loop=!0,m.connect(i).connect(l.destination),m.connect(c),m.disconnect(c),i.onaudioprocess=g=\u003e{let _=g.inputBuffer.getChannelData(0);Array.prototype.some.call(_,N=\u003eN===1)?t(!0):t(!1),m.stop(),i.onaudioprocess=null,m.disconnect(i),i.disconnect(l.destination)},m.start()}),ma=(l,t)=\u003e{let i=new Map;for(let c of l)for(let p of c){let d=i.get(p);i.set(p,d===void 0?1:d+1)}i.forEach((c,p)=\u003et(p,c))},va=l=\u003e\"context\"in l,oc=(l,t,i,c)=\u003e{let{activeInputs:p,passiveInputs:d}=Ne(t),{outputs:m}=le(l),g=ce(l),_=N=\u003e{let S=vt(l),b=er(t);if(N){let P=mr(d,l,i);Zt(p,l,P,!1),c||Fn(l)||S.connect(b,i)}else{let P=((w,U,D)=\u003e$(w,E=\u003eE[0]===U\u0026\u0026E[1]===D))(p,l,i);An(d,P,!1),c||Fn(l)||S.disconnect(b,i)}};return!!mt(m,[t,i],N=\u003eN[0]===t\u0026\u0026N[1]===i,!0)\u0026\u0026(g.add(_),Qe(l)?Zt(p,l,[i,_],!0):An(d,[l,i,_],!0),!0)},Ar=(l,t,i,c,p)=\u003e{let[d,m]=((g,_,N,S)=\u003e{let{activeInputs:b,passiveInputs:P}=le(_),w=En(b[S],g,N);return w===null?[se(P,g,N,S)[2],!1]:[w[2],!0]})(l,i,c,p);if(d!==null\u0026\u0026(Or(l,d),!m||t||Fn(l)||Cr(vt(l),vt(i),c,p)),Qe(i)){let{activeInputs:g}=le(i);ze(i,g)}},Rr=(l,t,i,c)=\u003e{let[p,d]=((m,g,_)=\u003e{let{activeInputs:N,passiveInputs:S}=Ne(g),b=En(N,m,_);return b===null?[mr(S,m,_)[1],!1]:[b[2],!0]})(l,i,c);p!==null\u0026\u0026(Or(l,p),!d||t||Fn(l)||vt(l).disconnect(er(i),c))};class _i{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,i=null){return this._map.forEach((c,p)=\u003et.call(i,c,p,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}let ki={channelCount:2,channelCountMode:\"explicit\",channelInterpretation:\"speakers\",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function za(l,t,i,c,p){if(typeof l.copyFromChannel==\"function\")t[i].byteLength===0\u0026\u0026(t[i]=new Float32Array(128)),l.copyFromChannel(t[i],c,p);else{let d=l.getChannelData(c);if(t[i].byteLength===0)t[i]=d.slice(p,p+128);else{let m=new Float32Array(d.buffer,p*Float32Array.BYTES_PER_ELEMENT,128);t[i].set(m)}}}let Os=(l,t,i,c,p)=\u003e{typeof l.copyToChannel==\"function\"?t[i].byteLength!==0\u0026\u0026l.copyToChannel(t[i],c,p):t[i].byteLength!==0\u0026\u0026l.getChannelData(c).set(t[i],p)},Ga=(l,t)=\u003e{let i=[];for(let c=0;c\u003cl;c+=1){let p=[],d=typeof t==\"number\"?t:t[c];for(let m=0;m\u003cd;m+=1)p.push(new Float32Array(128));i.push(p)}return i},cc=async(l,t,i,c,p,d,m)=\u003e{let g=t===null?128*Math.ceil(l.context.length/128):t.length,_=c.channelCount*c.numberOfInputs,N=p.reduce((E,W)=\u003eE+W,0),S=N===0?null:i.createBuffer(N,g,i.sampleRate);if(d===void 0)throw new Error(\"Missing the processor constructor.\");let b=le(l),P=await((E,W)=\u003e{let K=H(ee,E),Z=vt(W);return H(K,Z)})(i,l),w=Ga(c.numberOfInputs,c.channelCount),U=Ga(c.numberOfOutputs,p),D=Array.from(l.parameters.keys()).reduce((E,W)=\u003e({...E,[W]:new Float32Array(128)}),{});for(let E=0;E\u003cg;E+=128){if(c.numberOfInputs\u003e0\u0026\u0026t!==null)for(let W=0;W\u003cc.numberOfInputs;W+=1)for(let K=0;K\u003cc.channelCount;K+=1)za(t,w[W],K,K,E);d.parameterDescriptors!==void 0\u0026\u0026t!==null\u0026\u0026d.parameterDescriptors.forEach(({name:W},K)=\u003e{za(t,D,W,_+K,E)});for(let W=0;W\u003cc.numberOfInputs;W+=1)for(let K=0;K\u003cp[W];K+=1)U[W][K].byteLength===0\u0026\u0026(U[W][K]=new Float32Array(128));try{let W=w.map((Z,Q)=\u003eb.activeInputs[Q].size===0?[]:Z),K=m(E/i.sampleRate,i.sampleRate,()=\u003eP.process(W,U,D));if(S!==null)for(let Z=0,Q=0;Z\u003cc.numberOfOutputs;Z+=1){for(let re=0;re\u003cp[Z];re+=1)Os(S,U[Z],re,Q+re,E);Q+=p[Z]}if(!K)break}catch(W){l.dispatchEvent(new ErrorEvent(\"processorerror\",{colno:W.colno,filename:W.filename,lineno:W.lineno,message:W.message}));break}}return S},Ni={Q:1,channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\",detune:0,frequency:350,gain:0,type:\"lowpass\"},Ze={channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"speakers\",numberOfInputs:6},ga={channelCount:6,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",numberOfOutputs:6},uc={channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\",offset:1},bi={buffer:null,channelCount:2,channelCountMode:\"clamped-max\",channelInterpretation:\"speakers\",disableNormalization:!1},xi={channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\",delayTime:0,maxDelayTime:1},wi=(l,t,i)=\u003e{let c=t[i];if(c===void 0)throw l();return c},vl={attack:.003,channelCount:2,channelCountMode:\"clamped-max\",channelInterpretation:\"speakers\",knee:30,ratio:12,release:.25,threshold:-24},jf={channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\",gain:1},Vt=()=\u003enew DOMException(\"\",\"InvalidStateError\"),qi=()=\u003enew DOMException(\"\",\"InvalidAccessError\"),Df={channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\"},gl=(l,t,i,c,p,d,m,g,_,N,S)=\u003e{let b=N.length,P=g;for(let w=0;w\u003cb;w+=1){let U=i[0]*N[w];for(let D=1;D\u003cp;D+=1){let E=P-D\u0026_-1;U+=i[D]*d[E],U-=l[D]*m[E]}for(let D=p;D\u003cc;D+=1)U+=i[D]*d[P-D\u0026_-1];for(let D=p;D\u003ct;D+=1)U-=l[D]*m[P-D\u0026_-1];d[P]=N[w],m[P]=U,P=P+1\u0026_-1,S[w]=U}return P},If={channelCount:2,channelCountMode:\"explicit\",channelInterpretation:\"speakers\"},Cs=l=\u003e{let t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{let i=l.decodeAudioData(t.buffer,()=\u003e{});return i!==void 0\u0026\u0026(i.catch(()=\u003e{}),!0)}catch{}return!1},i0={numberOfChannels:1},St=(l,t,i)=\u003e{let c=t[i];c!==void 0\u0026\u0026c!==l[i]\u0026\u0026(l[i]=c)},Ut=(l,t)=\u003e{St(l,t,\"channelCount\"),St(l,t,\"channelCountMode\"),St(l,t,\"channelInterpretation\")},yl=l=\u003etypeof l.getFloatTimeDomainData==\"function\",jt=(l,t,i)=\u003e{let c=t[i];c!==void 0\u0026\u0026c!==l[i].value\u0026\u0026(l[i].value=c)},Ti=l=\u003e{var t;l.start=(t=l.start,(i=0,c=0,p)=\u003e{if(typeof p==\"number\"\u0026\u0026p\u003c0||c\u003c0||i\u003c0)throw new RangeError(\"The parameters can't be negative.\");t.call(l,i,c,p)})},lc=l=\u003e{var t;l.stop=(t=l.stop,(i=0)=\u003e{if(i\u003c0)throw new RangeError(\"The parameter can't be negative.\");t.call(l,i)})},_l=(l,t)=\u003el===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(l*t))))),T=async(l,t)=\u003enew l(await(i=\u003enew Promise((c,p)=\u003e{let{port1:d,port2:m}=new MessageChannel;d.onmessage=({data:g})=\u003e{d.close(),m.close(),c(g)},d.onmessageerror=({data:g})=\u003e{d.close(),m.close(),p(g)},m.postMessage(i)}))(t)),C=(l,t)=\u003e{let i=l.createBiquadFilter();return Ut(i,t),jt(i,t,\"Q\"),jt(i,t,\"detune\"),jt(i,t,\"frequency\"),jt(i,t,\"gain\"),St(i,t,\"type\"),i},A=(l,t)=\u003e{let i=l.createChannelSplitter(t.numberOfOutputs);return Ut(i,t),(c=\u003e{let p=c.numberOfOutputs;Object.defineProperty(c,\"channelCount\",{get:()=\u003ep,set:d=\u003e{if(d!==p)throw Vt()}}),Object.defineProperty(c,\"channelCountMode\",{get:()=\u003e\"explicit\",set:d=\u003e{if(d!==\"explicit\")throw Vt()}}),Object.defineProperty(c,\"channelInterpretation\",{get:()=\u003e\"discrete\",set:d=\u003e{if(d!==\"discrete\")throw Vt()}})})(i),i},F=(l,t)=\u003e(l.connect=t.connect.bind(t),l.disconnect=t.disconnect.bind(t),l),I=(l,t)=\u003e{let i=l.createDelay(t.maxDelayTime);return Ut(i,t),jt(i,t,\"delayTime\"),i},z=(l,t)=\u003e{let i=l.createGain();return Ut(i,t),jt(i,t,\"gain\"),i};function _e(l,t){let i=t[0]*t[0]+t[1]*t[1];return[(l[0]*t[0]+l[1]*t[1])/i,(l[1]*t[0]-l[0]*t[1])/i]}function qe(l,t){let i=[0,0];for(let d=l.length-1;d\u003e=0;d-=1)p=t,i=[(c=i)[0]*p[0]-c[1]*p[1],c[0]*p[1]+c[1]*p[0]],i[0]+=l[d];var c,p;return i}let Ge=(l,t,i,c)=\u003el.createScriptProcessor(t,i,c),Ye=()=\u003enew DOMException(\"\",\"NotSupportedError\"),ht={numberOfChannels:1},bt={channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\",detune:0,frequency:440,periodicWave:void 0,type:\"sine\"},Wt={channelCount:2,channelCountMode:\"clamped-max\",channelInterpretation:\"speakers\",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:\"inverse\",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:\"equalpower\",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Er={disableNormalization:!1},As={channelCount:2,channelCountMode:\"explicit\",channelInterpretation:\"speakers\",pan:0},Si=()=\u003enew DOMException(\"\",\"UnknownError\"),Ff={channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\",curve:null,oversample:\"none\"},Mi=l=\u003e{if(l===null)return!1;let t=l.length;return t%2!=0?l[Math.floor(t/2)]!==0:l[t/2-1]+l[t/2]!==0},vr=(l,t,i,c)=\u003e{let p=Object.getPrototypeOf(l);for(;!p.hasOwnProperty(t);)p=Object.getPrototypeOf(p);let{get:d,set:m}=Object.getOwnPropertyDescriptor(p,t);Object.defineProperty(l,t,{get:i(d),set:c(m)})},o0=(l,t,i)=\u003e{try{l.setValueAtTime(t,i)}catch(c){if(c.code!==9)throw c;o0(l,t,i+1e-7)}},Vf=l=\u003e{let t=l.createOscillator();try{t.start(-1)}catch(i){return i instanceof RangeError}return!1},c0=l=\u003e{let t=l.createBuffer(1,1,44100),i=l.createBufferSource();i.buffer=t,i.start(),i.stop();try{return i.stop(),!0}catch{return!1}},Wf=l=\u003e{let t=l.createOscillator();try{t.stop(-1)}catch(i){return i instanceof RangeError}return!1},r5=()=\u003e{try{new DOMException}catch{return!1}return!0},a5=()=\u003enew Promise(l=\u003e{let t=new ArrayBuffer(0),{port1:i,port2:c}=new MessageChannel;i.onmessage=({data:p})=\u003el(p!==null),c.postMessage(t,[t])}),u0=(l,t)=\u003e{let i=t.createGain();l.connect(i);let c=(p=l.disconnect,()=\u003e{p.call(l,i),l.removeEventListener(\"ended\",c)});var p;l.addEventListener(\"ended\",c),F(l,i),l.stop=(d=\u003e{let m=!1;return(g=0)=\u003e{if(m)try{d.call(l,g)}catch{i.gain.setValueAtTime(0,g)}else d.call(l,g),m=!0}})(l.stop)},Pi=(l,t)=\u003ei=\u003e{let c={value:l};return Object.defineProperties(i,{currentTarget:c,target:c}),typeof t==\"function\"?t.call(l,i):t.handleEvent.call(l,i)},s5=(l0=mt,(l,t,[i,c,p],d)=\u003e{l0(l[c],[t,i,p],m=\u003em[0]===t\u0026\u0026m[1]===i,d)});var l0;let i5=(l=\u003e(t,i,[c,p,d],m)=\u003e{let g=t.get(c);g===void 0?t.set(c,new Set([[p,i,d]])):l(g,[p,i,d],_=\u003e_[0]===p\u0026\u0026_[1]===i,m)})(mt),o5=(l=\u003e(t,i,c,p)=\u003el(t[p],d=\u003ed[0]===i\u0026\u0026d[1]===c))($),p0=new WeakMap,c5=(l=\u003et=\u003e{var i;return(i=l.get(t))!==null\u0026\u0026i!==void 0?i:0})(p0),tr=(kl=new Map,pc=new WeakMap,(l,t)=\u003e{let i=pc.get(l);if(i!==void 0)return i;let c=kl.get(l);if(c!==void 0)return c;try{let p=t();return p instanceof Promise?(kl.set(l,p),p.catch(()=\u003e!1).then(d=\u003e(kl.delete(l),pc.set(l,d),d))):(pc.set(l,p),p)}catch{return pc.set(l,!1),!1}});var kl,pc;let jr=typeof window==\"undefined\"?null:window,h0=(d0=tr,f0=Y,(l,t)=\u003e{let i=l.createAnalyser();if(Ut(i,t),!(t.maxDecibels\u003et.minDecibels))throw f0();return St(i,t,\"fftSize\"),St(i,t,\"maxDecibels\"),St(i,t,\"minDecibels\"),St(i,t,\"smoothingTimeConstant\"),d0(yl,()=\u003eyl(i))||(c=\u003e{c.getFloatTimeDomainData=p=\u003e{let d=new Uint8Array(p.length);c.getByteTimeDomainData(d);let m=Math.max(d.length,c.fftSize);for(let g=0;g\u003cm;g+=1)p[g]=.0078125*(d[g]-128);return p}})(i),i});var d0,f0;let Lf=(m0=le,l=\u003e{let t=m0(l);if(t.renderer===null)throw new Error(\"Missing the renderer of the given AudioNode in the audio graph.\");return t.renderer});var m0;let gn=((l,t,i)=\u003easync(c,p,d,m)=\u003e{let g=l(c),_=[...m,c];await Promise.all(g.activeInputs.map((N,S)=\u003eArray.from(N).filter(([b])=\u003e!_.includes(b)).map(async([b,P])=\u003e{let w=t(b),U=await w.render(b,p,_),D=c.context.destination;i(b)||c===D\u0026\u0026i(c)||U.connect(d,P,S)})).reduce((N,S)=\u003e[...N,...S],[]))})(le,Lf,Fn),u5=(v0=h0,g0=vt,y0=gn,()=\u003e{let l=new WeakMap;return{render(t,i,c){let p=l.get(i);return p!==void 0?Promise.resolve(p):(async(d,m,g)=\u003e{let _=g0(d);if(!X(_,m)){let N={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,fftSize:_.fftSize,maxDecibels:_.maxDecibels,minDecibels:_.minDecibels,smoothingTimeConstant:_.smoothingTimeConstant};_=v0(m,N)}return l.set(m,_),await y0(d,m,_,g),_})(t,i,c)}}});var v0,g0,y0;let Mt=(_0=M,l=\u003e{let t=_0.get(l);if(t===void 0)throw Vt();return t});var _0;let un=(l=\u003el===null?null:l.hasOwnProperty(\"OfflineAudioContext\")?l.OfflineAudioContext:l.hasOwnProperty(\"webkitOfflineAudioContext\")?l.webkitOfflineAudioContext:null)(jr),_t=(Bf=un,l=\u003eBf!==null\u0026\u0026l instanceof Bf);var Bf;let k0=new WeakMap,N0=(b0=Pi,class{constructor(l){this._nativeEventTarget=l,this._listeners=new WeakMap}addEventListener(l,t,i){if(t!==null){let c=this._listeners.get(t);c===void 0\u0026\u0026(c=b0(this,t),typeof t==\"function\"\u0026\u0026this._listeners.set(t,c)),this._nativeEventTarget.addEventListener(l,c,i)}}dispatchEvent(l){return this._nativeEventTarget.dispatchEvent(l)}removeEventListener(l,t,i){let c=t===null?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(l,c===void 0?null:c,i)}});var b0;let ya=(l=\u003el===null?null:l.hasOwnProperty(\"AudioContext\")?l.AudioContext:l.hasOwnProperty(\"webkitAudioContext\")?l.webkitAudioContext:null)(jr),zf=(Gf=ya,l=\u003eGf!==null\u0026\u0026l instanceof Gf);var Gf;let Uf=(l=\u003et=\u003el!==null\u0026\u0026typeof l.AudioNode==\"function\"\u0026\u0026t instanceof l.AudioNode)(jr),x0=(l=\u003et=\u003el!==null\u0026\u0026typeof l.AudioParam==\"function\"\u0026\u0026t instanceof l.AudioParam)(jr),$t=((l,t,i,c,p,d,m,g,_,N,S,b,P,w,U)=\u003eclass extends N{constructor(D,E,W,K){super(W),this._context=D,this._nativeAudioNode=W;let Z=S(D);b(Z)\u0026\u0026i(Ba,()=\u003eBa(Z))!==!0\u0026\u0026(Q=\u003e{let re=new Map;var te,ae;Q.connect=(te=Q.connect.bind(Q),(be,ue=0,fe=0)=\u003e{let ve=va(be)?te(be,ue,fe):te(be,ue),Te=re.get(be);return Te===void 0?re.set(be,[{input:fe,output:ue}]):Te.every(Fe=\u003eFe.input!==fe||Fe.output!==ue)\u0026\u0026Te.push({input:fe,output:ue}),ve}),Q.disconnect=(ae=Q.disconnect,(be,ue,fe)=\u003e{if(ae.apply(Q),be===void 0)re.clear();else if(typeof be==\"number\")for(let[ve,Te]of re){let Fe=Te.filter(ut=\u003eut.output!==be);Fe.length===0?re.delete(ve):re.set(ve,Fe)}else if(re.has(be))if(ue===void 0)re.delete(be);else{let ve=re.get(be);if(ve!==void 0){let Te=ve.filter(Fe=\u003eFe.output!==ue\u0026\u0026(Fe.input!==fe||fe===void 0));Te.length===0?re.delete(be):re.set(be,Te)}}for(let[ve,Te]of re)Te.forEach(Fe=\u003e{va(ve)?Q.connect(ve,Fe.output,Fe.input):Q.connect(ve,Fe.output)})})})(W),k.set(this,W),L.set(this,new Set),D.state!==\"closed\"\u0026\u0026E\u0026\u0026xe(this),l(this,K,W)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(D){this._nativeAudioNode.channelCount=D}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(D){this._nativeAudioNode.channelCountMode=D}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(D){this._nativeAudioNode.channelInterpretation=D}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(D,E=0,W=0){if(E\u003c0||E\u003e=this._nativeAudioNode.numberOfOutputs)throw p();let K=S(this._context),Z=U(K);if(P(D)||w(D))throw d();if(Pe(D)){let re=vt(D);try{let te=Rn(this._nativeAudioNode,re,E,W),ae=La(this);(Z||ae)\u0026\u0026this._nativeAudioNode.disconnect(...te),this.context.state!==\"closed\"\u0026\u0026!ae\u0026\u0026La(D)\u0026\u0026xe(D)}catch(te){throw te.code===12?d():te}if(t(this,D,E,W,Z)){let te=_([this],D);ma(te,c(Z))}return D}let Q=er(D);if(Q.name===\"playbackRate\")throw m();try{this._nativeAudioNode.connect(Q,E),(Z||La(this))\u0026\u0026this._nativeAudioNode.disconnect(Q,E)}catch(re){throw re.code===12?d():re}if(oc(this,D,E,Z)){let re=_([this],D);ma(re,c(Z))}}disconnect(D,E,W){let K,Z=S(this._context),Q=U(Z);if(D===void 0)K=((re,te)=\u003e{let ae=le(re),be=[];for(let ue of ae.outputs)tt(ue)?Ar(re,te,...ue):Rr(re,te,...ue),be.push(ue[0]);return ae.outputs.clear(),be})(this,Q);else if(typeof D==\"number\"){if(D\u003c0||D\u003e=this.numberOfOutputs)throw p();K=((re,te,ae)=\u003e{let be=le(re),ue=[];for(let fe of be.outputs)fe[1]===ae\u0026\u0026(tt(fe)?Ar(re,te,...fe):Rr(re,te,...fe),ue.push(fe[0]),be.outputs.delete(fe));return ue})(this,Q,D)}else{if(E!==void 0\u0026\u0026(E\u003c0||E\u003e=this.numberOfOutputs)||Pe(D)\u0026\u0026W!==void 0\u0026\u0026(W\u003c0||W\u003e=D.numberOfInputs))throw p();if(K=((re,te,ae,be,ue)=\u003e{let fe=le(re);return Array.from(fe.outputs).filter(ve=\u003e!(ve[0]!==ae||be!==void 0\u0026\u0026ve[1]!==be||ue!==void 0\u0026\u0026ve[2]!==ue)).map(ve=\u003e(tt(ve)?Ar(re,te,...ve):Rr(re,te,...ve),fe.outputs.delete(ve),ve[0]))})(this,Q,D,E,W),K.length===0)throw d()}for(let re of K){let te=_([this],re);ma(te,g)}}})((w0=y,(l,t,i)=\u003e{let c=[];for(let p=0;p\u003ci.numberOfInputs;p+=1)c.push(new Set);w0.set(l,{activeInputs:c,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),((l,t,i,c,p,d,m,g,_,N,S,b,P)=\u003e(w,U,D,E,W)=\u003e{let{activeInputs:K,passiveInputs:Z}=d(U),{outputs:Q}=d(w),re=g(w),te=ae=\u003e{let be=_(U),ue=_(w);if(ae){let fe=se(Z,w,D,E);l(K,w,fe,!1),W||b(w)||i(ue,be,D,E),P(U)\u0026\u0026xe(U)}else{let fe=c(K,w,D,E);t(Z,E,fe,!1),W||b(w)||p(ue,be,D,E);let ve=m(U);ve===0?S(U)\u0026\u0026ze(U,K):setTimeout(()=\u003e{S(U)\u0026\u0026ze(U,K)},1e3*ve)}};return!!N(Q,[U,D,E],ae=\u003eae[0]===U\u0026\u0026ae[1]===D\u0026\u0026ae[2]===E,!0)\u0026\u0026(re.add(te),S(w)?l(K,w,[D,E,te],!0):t(Z,E,[w,D,te],!0),!0)})(s5,i5,Rn,o5,Cr,le,c5,ce,vt,mt,Qe,Fn,La),tr,((l,t,i,c,p,d)=\u003em=\u003e(g,_)=\u003e{let N=l.get(g);if(N===void 0){if(!m\u0026\u0026d(g)){let S=c(g),{outputs:b}=i(g);for(let P of b)if(tt(P)){let w=c(P[0]);t(S,w,P[1],P[2])}else{let w=p(P[0]);S.disconnect(w,P[1])}}l.set(g,_)}else l.set(g,N+_)})(j,Cr,le,vt,er,Qe),Y,qi,Ye,((l,t,i,c,p,d,m,g)=\u003e(_,N)=\u003e{let S=t.get(_);if(S===void 0)throw new Error(\"Missing the expected cycle count.\");let b=d(_.context),P=g(b);if(S===N){if(t.delete(_),!P\u0026\u0026m(_)){let w=c(_),{outputs:U}=i(_);for(let D of U)if(tt(D)){let E=c(D[0]);l(w,E,D[1],D[2])}else{let E=p(D[0]);w.connect(E,D[1])}}}else t.set(_,S-N)})(Rn,j,le,vt,er,Mt,Qe,_t),((l,t,i)=\u003efunction c(p,d){let m=Pe(d)?d:i(l,d);if((_=\u003e\"delayTime\"in _)(m))return[];if(p[0]===m)return[p];if(p.includes(m))return[];let{outputs:g}=t(m);return Array.from(g).map(_=\u003ec([...p,m],_[0])).reduce((_,N)=\u003e_.concat(N),[])})(k0,le,H),N0,Mt,zf,Uf,x0,_t);var w0;let l5=((l,t,i,c,p,d)=\u003eclass extends l{constructor(m,g){let _=p(m),N={...He,...g},S=c(_,N);super(m,!1,S,d(_)?t():null),this._nativeAnalyserNode=S}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(m){this._nativeAnalyserNode.fftSize=m}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(m){let g=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=m,!(m\u003ethis._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=g,i()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(m){let g=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=m,!(this._nativeAnalyserNode.maxDecibels\u003em))throw this._nativeAnalyserNode.minDecibels=g,i()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(m){this._nativeAnalyserNode.smoothingTimeConstant=m}getByteFrequencyData(m){this._nativeAnalyserNode.getByteFrequencyData(m)}getByteTimeDomainData(m){this._nativeAnalyserNode.getByteTimeDomainData(m)}getFloatFrequencyData(m){this._nativeAnalyserNode.getFloatFrequencyData(m)}getFloatTimeDomainData(m){this._nativeAnalyserNode.getFloatTimeDomainData(m)}})($t,u5,Y,h0,Mt,_t),$f=new WeakSet,q0=(l=\u003el===null?null:l.hasOwnProperty(\"AudioBuffer\")?l.AudioBuffer:null)(jr),T0=(Hf=new Uint32Array(1),l=\u003e(Hf[0]=l,Hf[0]));var Hf;let Yf=((l,t)=\u003ei=\u003e{i.copyFromChannel=(c,p,d=0)=\u003e{let m=l(d),g=l(p);if(g\u003e=i.numberOfChannels)throw t();let _=i.length,N=i.getChannelData(g),S=c.length;for(let b=m\u003c0?-m:0;b+m\u003c_\u0026\u0026b\u003cS;b+=1)c[b]=N[b+m]},i.copyToChannel=(c,p,d=0)=\u003e{let m=l(d),g=l(p);if(g\u003e=i.numberOfChannels)throw t();let _=i.length,N=i.getChannelData(g),S=c.length;for(let b=m\u003c0?-m:0;b+m\u003c_\u0026\u0026b\u003cS;b+=1)N[b+m]=c[b]}})(T0,Y),Xf=(l=\u003et=\u003e{t.copyFromChannel=(i=\u003e(c,p,d=0)=\u003e{let m=l(d),g=l(p);if(m\u003ct.length)return i.call(t,c,g,m)})(t.copyFromChannel),t.copyToChannel=(i=\u003e(c,p,d=0)=\u003e{let m=l(d),g=l(p);if(m\u003ct.length)return i.call(t,c,g,m)})(t.copyToChannel)})(T0),p5=((l,t,i,c,p,d,m,g)=\u003e{let _=null;return class LA{constructor(S){if(p===null)throw new Error(\"Missing the native OfflineAudioContext constructor.\");let{length:b,numberOfChannels:P,sampleRate:w}={...ge,...S};_===null\u0026\u0026(_=new p(1,1,44100));let U=c!==null\u0026\u0026t(d,d)?new c({length:b,numberOfChannels:P,sampleRate:w}):_.createBuffer(P,b,w);if(U.numberOfChannels===0)throw i();return typeof U.copyFromChannel!=\"function\"?(m(U),J(U)):t(oe,()=\u003eoe(U))||g(U),l.add(U),U}static[Symbol.hasInstance](S){return S!==null\u0026\u0026typeof S==\"object\"\u0026\u0026Object.getPrototypeOf(S)===LA.prototype||l.has(S)}}})($f,tr,Ye,q0,un,(Zf=q0,()=\u003e{if(Zf===null)return!1;try{new Zf({length:1,sampleRate:44100})}catch{return!1}return!0}),Yf,Xf);var Zf;let Nl=(S0=z,(l,t)=\u003e{let i=S0(l,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",gain:0});t.connect(i).connect(l.destination);let c=()=\u003e{t.removeEventListener(\"ended\",c),t.disconnect(i),i.disconnect()};t.addEventListener(\"ended\",c)});var S0;let M0=((l,t,i)=\u003easync(c,p,d,m)=\u003e{let g=t(c);await Promise.all(Array.from(g.activeInputs).map(async([_,N])=\u003e{let S=l(_),b=await S.render(_,p,m);i(_)||b.connect(d,N)}))})(Lf,Ne,Fn),Xr=(l=\u003e(t,i,c,p)=\u003el(i,t,c,p))(M0),Oi=((l,t,i,c,p,d,m,g,_,N,S)=\u003e(b,P)=\u003e{let w=b.createBufferSource();return Ut(w,P),jt(w,P,\"playbackRate\"),St(w,P,\"buffer\"),St(w,P,\"loop\"),St(w,P,\"loopEnd\"),St(w,P,\"loopStart\"),t(i,()=\u003ei(b))||(U=\u003e{U.start=(D=\u003e{let E=!1;return(W=0,K=0,Z)=\u003e{if(E)throw Vt();D.call(U,W,K,Z),E=!0}})(U.start)})(w),t(c,()=\u003ec(b))||_(w),t(p,()=\u003ep(b))||N(w,b),t(d,()=\u003ed(b))||Ti(w),t(m,()=\u003em(b))||S(w,b),t(g,()=\u003eg(b))||lc(w),l(b,w),w})(Nl,tr,l=\u003e{let t=l.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},l=\u003e{let t=l.createBufferSource(),i=l.createBuffer(1,1,44100);t.buffer=i;try{t.start(0,1)}catch{return!1}return!0},l=\u003e{let t=l.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},Vf,c0,Wf,l=\u003e{var t;l.start=(t=l.start,(i=0,c=0,p)=\u003e{let d=l.buffer,m=d===null?c:Math.min(d.duration,c);d!==null\u0026\u0026m\u003ed.duration-.5/l.context.sampleRate?t.call(l,i,0,0):t.call(l,i,m,p)})},(P0=vr,(l,t)=\u003e{let i=t.createBuffer(1,1,44100);l.buffer===null\u0026\u0026(l.buffer=i),P0(l,\"buffer\",c=\u003e()=\u003e{let p=c.call(l);return p===i?null:p},c=\u003ep=\u003ec.call(l,p===null?i:p))}),u0);var P0;let Zr=((l,t)=\u003e(i,c,p,d)=\u003e(l(c).replay(p),t(c,i,p,d)))((l=\u003et=\u003e{let i=l(t);if(i.renderer===null)throw new Error(\"Missing the renderer of the given AudioParam in the audio graph.\");return i.renderer})(Ne),M0),h5=((l,t,i,c,p)=\u003e()=\u003e{let d=new WeakMap,m=null,g=null;return{set start(_){m=_},set stop(_){g=_},render(_,N,S){let b=d.get(N);return b!==void 0?Promise.resolve(b):(async(P,w,U)=\u003e{let D=i(P),E=X(D,w);if(!E){let W={buffer:D.buffer,channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,loop:D.loop,loopEnd:D.loopEnd,loopStart:D.loopStart,playbackRate:D.playbackRate.value};D=t(w,W),m!==null\u0026\u0026D.start(...m),g!==null\u0026\u0026D.stop(g)}return d.set(w,D),E?await l(w,P.playbackRate,D.playbackRate,U):await c(w,P.playbackRate,D.playbackRate,U),await p(P,w,D,U),D})(_,N,S)}}})(Xr,Oi,vt,Zr,gn),Dr=((l,t,i,c,p,d,m,g,_,N,S,b,P)=\u003e(w,U,D,E=null,W=null)=\u003e{let K=new h.AutomationEventList(D.defaultValue),Z=U?c(K):null,Q={get defaultValue(){return D.defaultValue},get maxValue(){return E===null?D.maxValue:E},get minValue(){return W===null?D.minValue:W},get value(){return D.value},set value(re){D.value=re,Q.setValueAtTime(re,w.context.currentTime)},cancelAndHoldAtTime(re){if(typeof D.cancelAndHoldAtTime==\"function\")Z===null\u0026\u0026K.flush(w.context.currentTime),K.add(p(re)),D.cancelAndHoldAtTime(re);else{let te=Array.from(K).pop();Z===null\u0026\u0026K.flush(w.context.currentTime),K.add(p(re));let ae=Array.from(K).pop();D.cancelScheduledValues(re),te!==ae\u0026\u0026ae!==void 0\u0026\u0026(ae.type===\"exponentialRampToValue\"?D.exponentialRampToValueAtTime(ae.value,ae.endTime):ae.type===\"linearRampToValue\"?D.linearRampToValueAtTime(ae.value,ae.endTime):ae.type===\"setValue\"?D.setValueAtTime(ae.value,ae.startTime):ae.type===\"setValueCurve\"\u0026\u0026D.setValueCurveAtTime(ae.values,ae.startTime,ae.duration))}return Q},cancelScheduledValues:re=\u003e(Z===null\u0026\u0026K.flush(w.context.currentTime),K.add(d(re)),D.cancelScheduledValues(re),Q),exponentialRampToValueAtTime(re,te){if(re===0)throw new RangeError;if(!Number.isFinite(te)||te\u003c0)throw new RangeError;return Z===null\u0026\u0026K.flush(w.context.currentTime),K.add(m(re,te)),D.exponentialRampToValueAtTime(re,te),Q},linearRampToValueAtTime:(re,te)=\u003e(Z===null\u0026\u0026K.flush(w.context.currentTime),K.add(g(re,te)),D.linearRampToValueAtTime(re,te),Q),setTargetAtTime:(re,te,ae)=\u003e(Z===null\u0026\u0026K.flush(w.context.currentTime),K.add(_(re,te,ae)),D.setTargetAtTime(re,te,ae),Q),setValueAtTime:(re,te)=\u003e(Z===null\u0026\u0026K.flush(w.context.currentTime),K.add(N(re,te)),D.setValueAtTime(re,te),Q),setValueCurveAtTime(re,te,ae){let be=re instanceof Float32Array?re:new Float32Array(re);if(b!==null\u0026\u0026b.name===\"webkitAudioContext\"){let ue=te+ae,fe=w.context.sampleRate,ve=Math.ceil(te*fe),Te=Math.floor(ue*fe),Fe=Te-ve,ut=new Float32Array(Fe);for(let Ke=0;Ke\u003cFe;Ke+=1){let st=(be.length-1)/ae*((ve+Ke)/fe-te),$e=Math.floor(st),rt=Math.ceil(st);ut[Ke]=$e===rt?be[$e]:(1-(st-$e))*be[$e]+(1-(rt-st))*be[rt]}Z===null\u0026\u0026K.flush(w.context.currentTime),K.add(S(ut,te,ae)),D.setValueCurveAtTime(ut,te,ae);let Ee=Te/fe;Ee\u003cue\u0026\u0026P(Q,ut[ut.length-1],Ee),P(Q,be[be.length-1],ue)}else Z===null\u0026\u0026K.flush(w.context.currentTime),K.add(S(be,te,ae)),D.setValueCurveAtTime(be,te,ae);return Q}};return i.set(Q,D),t.set(Q,w),l(Q,Z),Q})((O0=q,(l,t)=\u003e{O0.set(l,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),k0,x,l=\u003e({replay(t){for(let i of l)if(i.type===\"exponentialRampToValue\"){let{endTime:c,value:p}=i;t.exponentialRampToValueAtTime(p,c)}else if(i.type===\"linearRampToValue\"){let{endTime:c,value:p}=i;t.linearRampToValueAtTime(p,c)}else if(i.type===\"setTarget\"){let{startTime:c,target:p,timeConstant:d}=i;t.setTargetAtTime(p,c,d)}else if(i.type===\"setValue\"){let{startTime:c,value:p}=i;t.setValueAtTime(p,c)}else{if(i.type!==\"setValueCurve\")throw new Error(\"Can't apply an unknown automation.\");{let{duration:c,startTime:p,values:d}=i;t.setValueCurveAtTime(d,p,c)}}}}),h.createCancelAndHoldAutomationEvent,h.createCancelScheduledValuesAutomationEvent,h.createExponentialRampToValueAutomationEvent,h.createLinearRampToValueAutomationEvent,h.createSetTargetAutomationEvent,h.createSetValueAutomationEvent,h.createSetValueCurveAutomationEvent,ya,o0);var O0;let d5=((l,t,i,c,p,d,m,g)=\u003eclass extends l{constructor(_,N){let S=d(_),b={...ft,...N},P=p(S,b),w=m(S),U=w?t():null;super(_,!1,P,U),this._audioBufferSourceNodeRenderer=U,this._isBufferNullified=!1,this._isBufferSet=b.buffer!==null,this._nativeAudioBufferSourceNode=P,this._onended=null,this._playbackRate=i(this,w,P.playbackRate,We,me)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(_){if(this._nativeAudioBufferSourceNode.buffer=_,_!==null){if(this._isBufferSet)throw c();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(_){this._nativeAudioBufferSourceNode.loop=_}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(_){this._nativeAudioBufferSourceNode.loopEnd=_}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(_){this._nativeAudioBufferSourceNode.loopStart=_}get onended(){return this._onended}set onended(_){let N=typeof _==\"function\"?g(this,_):null;this._nativeAudioBufferSourceNode.onended=N;let S=this._nativeAudioBufferSourceNode.onended;this._onended=S!==null\u0026\u0026S===N?_:S}get playbackRate(){return this._playbackRate}start(_=0,N=0,S){if(this._nativeAudioBufferSourceNode.start(_,N,S),this._audioBufferSourceNodeRenderer!==null\u0026\u0026(this._audioBufferSourceNodeRenderer.start=S===void 0?[_,N]:[_,N,S]),this.context.state!==\"closed\"){xe(this);let b=()=\u003e{this._nativeAudioBufferSourceNode.removeEventListener(\"ended\",b),Qe(this)\u0026\u0026Re(this)};this._nativeAudioBufferSourceNode.addEventListener(\"ended\",b)}}stop(_=0){this._nativeAudioBufferSourceNode.stop(_),this._audioBufferSourceNodeRenderer!==null\u0026\u0026(this._audioBufferSourceNodeRenderer.stop=_)}})($t,h5,Dr,Vt,Oi,Mt,_t,Pi),f5=((l,t,i,c,p,d,m,g)=\u003eclass extends l{constructor(_,N){let S=d(_),b=m(S),P=p(S,N,b);super(_,!1,P,b?t(g):null),this._isNodeOfNativeOfflineAudioContext=b,this._nativeAudioDestinationNode=P}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(_){if(this._isNodeOfNativeOfflineAudioContext)throw c();if(_\u003ethis._nativeAudioDestinationNode.maxChannelCount)throw i();this._nativeAudioDestinationNode.channelCount=_}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(_){if(this._isNodeOfNativeOfflineAudioContext)throw c();this._nativeAudioDestinationNode.channelCountMode=_}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})($t,l=\u003e{let t=null;return{render:(i,c,p)=\u003e(t===null\u0026\u0026(t=(async(d,m,g)=\u003e{let _=m.destination;return await l(d,m,_,g),_})(i,c,p)),t)}},Y,Vt,((l,t)=\u003e(i,c,p)=\u003e{let d=i.destination;if(d.channelCount!==c)try{d.channelCount=c}catch{}p\u0026\u0026d.channelCountMode!==\"explicit\"\u0026\u0026(d.channelCountMode=\"explicit\"),d.maxChannelCount===0\u0026\u0026Object.defineProperty(d,\"maxChannelCount\",{value:c});let m=l(i,{channelCount:c,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,gain:1});return t(m,\"channelCount\",g=\u003e()=\u003eg.call(m),g=\u003e_=\u003e{g.call(m,_);try{d.channelCount=_}catch(N){if(_\u003ed.maxChannelCount)throw N}}),t(m,\"channelCountMode\",g=\u003e()=\u003eg.call(m),g=\u003e_=\u003e{g.call(m,_),d.channelCountMode=_}),t(m,\"channelInterpretation\",g=\u003e()=\u003eg.call(m),g=\u003e_=\u003e{g.call(m,_),d.channelInterpretation=_}),Object.defineProperty(m,\"maxChannelCount\",{get:()=\u003ed.maxChannelCount}),m.connect(d),m})(z,vr),Mt,_t,gn),m5=((l,t,i,c,p)=\u003e()=\u003e{let d=new WeakMap;return{render(m,g,_){let N=d.get(g);return N!==void 0?Promise.resolve(N):(async(S,b,P)=\u003e{let w=i(S),U=X(w,b);if(!U){let D={Q:w.Q.value,channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,detune:w.detune.value,frequency:w.frequency.value,gain:w.gain.value,type:w.type};w=t(b,D)}return d.set(b,w),U?(await l(b,S.Q,w.Q,P),await l(b,S.detune,w.detune,P),await l(b,S.frequency,w.frequency,P),await l(b,S.gain,w.gain,P)):(await c(b,S.Q,w.Q,P),await c(b,S.detune,w.detune,P),await c(b,S.frequency,w.frequency,P),await c(b,S.gain,w.gain,P)),await p(S,b,w,P),w})(m,g,_)}}})(Xr,C,vt,Zr,gn),Rs=(l=\u003e(t,i)=\u003el.set(t,i))(p0),v5=(C0=$t,hc=Dr,A0=m5,Kf=qi,R0=C,E0=Mt,j0=_t,D0=Rs,class extends C0{constructor(l,t){let i=E0(l),c={...Ni,...t},p=R0(i,c),d=j0(i);super(l,!1,p,d?A0():null),this._Q=hc(this,d,p.Q,We,me),this._detune=hc(this,d,p.detune,1200*Math.log2(We),-1200*Math.log2(We)),this._frequency=hc(this,d,p.frequency,l.sampleRate/2,0),this._gain=hc(this,d,p.gain,40*Math.log10(We),me),this._nativeBiquadFilterNode=p,D0(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,t,i){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,t,i)}catch(c){throw c.code===11?Kf():c}if(l.length!==t.length||t.length!==i.length)throw Kf()}});var C0,hc,A0,Kf,R0,E0,j0,D0;let Ua=((l,t)=\u003e(i,c,p)=\u003e{let d=new Set;var m,g;return i.connect=(m=i.connect,(_,N=0,S=0)=\u003e{let b=d.size===0;if(t(_))return m.call(i,_,N,S),l(d,[_,N,S],P=\u003eP[0]===_\u0026\u0026P[1]===N\u0026\u0026P[2]===S,!0),b\u0026\u0026c(),_;m.call(i,_,N),l(d,[_,N],P=\u003eP[0]===_\u0026\u0026P[1]===N,!0),b\u0026\u0026c()}),i.disconnect=(g=i.disconnect,(_,N,S)=\u003e{let b=d.size\u003e0;if(_===void 0)g.apply(i),d.clear();else if(typeof _==\"number\"){g.call(i,_);for(let w of d)w[1]===_\u0026\u0026d.delete(w)}else{t(_)?g.call(i,_,N,S):g.call(i,_,N);for(let w of d)w[0]!==_||N!==void 0\u0026\u0026w[1]!==N||S!==void 0\u0026\u0026w[2]!==S||d.delete(w)}let P=d.size===0;b\u0026\u0026P\u0026\u0026p()}),i})(mt,Uf),g5=(Qf=Vt,I0=Ua,(l,t)=\u003e{t.channelCount=1,t.channelCountMode=\"explicit\",Object.defineProperty(t,\"channelCount\",{get:()=\u003e1,set:()=\u003e{throw Qf()}}),Object.defineProperty(t,\"channelCountMode\",{get:()=\u003e\"explicit\",set:()=\u003e{throw Qf()}});let i=l.createBufferSource();I0(t,()=\u003e{let c=t.numberOfInputs;for(let p=0;p\u003cc;p+=1)i.connect(t,0,p)},()=\u003ei.disconnect(t))});var Qf,I0;let $a=((l,t)=\u003e(i,c)=\u003e{let p=i.createChannelMerger(c.numberOfInputs);return l!==null\u0026\u0026l.name===\"webkitAudioContext\"\u0026\u0026t(i,p),Ut(p,c),p})(ya,g5),y5=((l,t,i,c,p)=\u003eclass extends l{constructor(d,m){let g=c(d),_={...Ze,...m};super(d,!1,i(g,_),p(g)?t():null)}})($t,((l,t,i)=\u003e()=\u003e{let c=new WeakMap;return{render(p,d,m){let g=c.get(d);return g!==void 0?Promise.resolve(g):(async(_,N,S)=\u003e{let b=t(_);if(!X(b,N)){let P={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,numberOfInputs:b.numberOfInputs};b=l(N,P)}return c.set(N,b),await i(_,N,b,S),b})(p,d,m)}}})($a,vt,gn),$a,Mt,_t),_5=((l,t,i,c,p,d)=\u003eclass extends l{constructor(m,g){let _=c(m),N=d({...ga,...g});super(m,!1,i(_,N),p(_)?t():null)}})($t,((l,t,i)=\u003e()=\u003e{let c=new WeakMap;return{render(p,d,m){let g=c.get(d);return g!==void 0?Promise.resolve(g):(async(_,N,S)=\u003e{let b=t(_);if(!X(b,N)){let P={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,numberOfOutputs:b.numberOfOutputs};b=l(N,P)}return c.set(N,b),await i(_,N,b,S),b})(p,d,m)}}})(A,vt,gn),A,Mt,_t,l=\u003e({...l,channelCount:l.numberOfOutputs})),k5=((l,t,i,c)=\u003e(p,{offset:d,...m})=\u003e{let g=p.createBuffer(1,2,44100),_=t(p,{buffer:null,channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),N=i(p,{...m,gain:d}),S=g.getChannelData(0);S[0]=1,S[1]=1,_.buffer=g,_.loop=!0;let b={get bufferSize(){},get channelCount(){return N.channelCount},set channelCount(P){N.channelCount=P},get channelCountMode(){return N.channelCountMode},set channelCountMode(P){N.channelCountMode=P},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(P){N.channelInterpretation=P},get context(){return N.context},get inputs(){return[]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get offset(){return N.gain},get onended(){return _.onended},set onended(P){_.onended=P},addEventListener:(...P)=\u003e_.addEventListener(P[0],P[1],P[2]),dispatchEvent:(...P)=\u003e_.dispatchEvent(P[0]),removeEventListener:(...P)=\u003e_.removeEventListener(P[0],P[1],P[2]),start(P=0){_.start.call(_,P)},stop(P=0){_.stop.call(_,P)}};return l(p,_),c(F(b,N),()=\u003e_.connect(N),()=\u003e_.disconnect(N))})(Nl,Oi,z,Ua),Ci=((l,t,i,c,p)=\u003e(d,m)=\u003e{if(d.createConstantSource===void 0)return i(d,m);let g=d.createConstantSource();return Ut(g,m),jt(g,m,\"offset\"),t(c,()=\u003ec(d))||Ti(g),t(p,()=\u003ep(d))||lc(g),l(d,g),g})(Nl,tr,k5,Vf,Wf),N5=((l,t,i,c,p,d,m)=\u003eclass extends l{constructor(g,_){let N=p(g),S={...uc,..._},b=c(N,S),P=d(N),w=P?i():null;super(g,!1,b,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=b,this._offset=t(this,P,b.offset,We,me),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(g){let _=typeof g==\"function\"?m(this,g):null;this._nativeConstantSourceNode.onended=_;let N=this._nativeConstantSourceNode.onended;this._onended=N!==null\u0026\u0026N===_?g:N}start(g=0){if(this._nativeConstantSourceNode.start(g),this._constantSourceNodeRenderer!==null\u0026\u0026(this._constantSourceNodeRenderer.start=g),this.context.state!==\"closed\"){xe(this);let _=()=\u003e{this._nativeConstantSourceNode.removeEventListener(\"ended\",_),Qe(this)\u0026\u0026Re(this)};this._nativeConstantSourceNode.addEventListener(\"ended\",_)}}stop(g=0){this._nativeConstantSourceNode.stop(g),this._constantSourceNodeRenderer!==null\u0026\u0026(this._constantSourceNodeRenderer.stop=g)}})($t,Dr,((l,t,i,c,p)=\u003e()=\u003e{let d=new WeakMap,m=null,g=null;return{set start(_){m=_},set stop(_){g=_},render(_,N,S){let b=d.get(N);return b!==void 0?Promise.resolve(b):(async(P,w,U)=\u003e{let D=i(P),E=X(D,w);if(!E){let W={channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,offset:D.offset.value};D=t(w,W),m!==null\u0026\u0026D.start(m),g!==null\u0026\u0026D.stop(g)}return d.set(w,D),E?await l(w,P.offset,D.offset,U):await c(w,P.offset,D.offset,U),await p(P,w,D,U),D})(_,N,S)}}})(Xr,Ci,vt,Zr,gn),Ci,Mt,_t,Pi),F0=((l,t)=\u003e(i,c)=\u003e{let p=i.createConvolver();if(Ut(p,c),c.disableNormalization===p.normalize\u0026\u0026(p.normalize=!c.disableNormalization),St(p,c,\"buffer\"),c.channelCount\u003e2||(t(p,\"channelCount\",d=\u003e()=\u003ed.call(p),d=\u003em=\u003e{if(m\u003e2)throw l();return d.call(p,m)}),c.channelCountMode===\"max\"))throw l();return t(p,\"channelCountMode\",d=\u003e()=\u003ed.call(p),d=\u003em=\u003e{if(m===\"max\")throw l();return d.call(p,m)}),p})(Ye,vr),b5=((l,t,i,c,p,d)=\u003eclass extends l{constructor(m,g){let _=c(m),N={...bi,...g},S=i(_,N);super(m,!1,S,p(_)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=S,N.buffer!==null\u0026\u0026d(this,N.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(m){if(this._nativeConvolverNode.buffer=m,m===null\u0026\u0026this._nativeConvolverNode.buffer!==null){let g=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=g.createBuffer(1,1,44100),this._isBufferNullified=!0,d(this,0)}else this._isBufferNullified=!1,d(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(m){this._nativeConvolverNode.normalize=m}})($t,((l,t,i)=\u003e()=\u003e{let c=new WeakMap;return{render(p,d,m){let g=c.get(d);return g!==void 0?Promise.resolve(g):(async(_,N,S)=\u003e{let b=t(_);if(!X(b,N)){let P={buffer:b.buffer,channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,disableNormalization:!b.normalize};b=l(N,P)}return c.set(N,b),Et(b)?await i(_,N,b.inputs[0],S):await i(_,N,b,S),b})(p,d,m)}}})(F0,vt,gn),F0,Mt,_t,Rs),x5=((l,t,i,c,p,d,m)=\u003eclass extends l{constructor(g,_){let N=p(g),S={...xi,..._},b=c(N,S),P=d(N);super(g,!1,b,P?i(S.maxDelayTime):null),this._delayTime=t(this,P,b.delayTime),m(this,S.maxDelayTime)}get delayTime(){return this._delayTime}})($t,Dr,((l,t,i,c,p)=\u003ed=\u003e{let m=new WeakMap;return{render(g,_,N){let S=m.get(_);return S!==void 0?Promise.resolve(S):(async(b,P,w)=\u003e{let U=i(b),D=X(U,P);if(!D){let E={channelCount:U.channelCount,channelCountMode:U.channelCountMode,channelInterpretation:U.channelInterpretation,delayTime:U.delayTime.value,maxDelayTime:d};U=t(P,E)}return m.set(P,U),D?await l(P,b.delayTime,U.delayTime,w):await c(P,b.delayTime,U.delayTime,w),await p(b,P,U,w),U})(g,_,N)}}})(Xr,I,vt,Zr,gn),I,Mt,_t,Rs),V0=(Jf=Ye,(l,t)=\u003e{let i=l.createDynamicsCompressor();if(Ut(i,t),t.channelCount\u003e2||t.channelCountMode===\"max\")throw Jf();return jt(i,t,\"attack\"),jt(i,t,\"knee\"),jt(i,t,\"ratio\"),jt(i,t,\"release\"),jt(i,t,\"threshold\"),i});var Jf;let w5=((l,t,i,c,p,d,m,g)=\u003eclass extends l{constructor(_,N){let S=d(_),b={...vl,...N},P=c(S,b),w=m(S);super(_,!1,P,w?i():null),this._attack=t(this,w,P.attack),this._knee=t(this,w,P.knee),this._nativeDynamicsCompressorNode=P,this._ratio=t(this,w,P.ratio),this._release=t(this,w,P.release),this._threshold=t(this,w,P.threshold),g(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(_){let N=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=_,_\u003e2)throw this._nativeDynamicsCompressorNode.channelCount=N,p()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(_){let N=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=_,_===\"max\")throw this._nativeDynamicsCompressorNode.channelCountMode=N,p()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value==\"number\"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})($t,Dr,((l,t,i,c,p)=\u003e()=\u003e{let d=new WeakMap;return{render(m,g,_){let N=d.get(g);return N!==void 0?Promise.resolve(N):(async(S,b,P)=\u003e{let w=i(S),U=X(w,b);if(!U){let D={attack:w.attack.value,channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,knee:w.knee.value,ratio:w.ratio.value,release:w.release.value,threshold:w.threshold.value};w=t(b,D)}return d.set(b,w),U?(await l(b,S.attack,w.attack,P),await l(b,S.knee,w.knee,P),await l(b,S.ratio,w.ratio,P),await l(b,S.release,w.release,P),await l(b,S.threshold,w.threshold,P)):(await c(b,S.attack,w.attack,P),await c(b,S.knee,w.knee,P),await c(b,S.ratio,w.ratio,P),await c(b,S.release,w.release,P),await c(b,S.threshold,w.threshold,P)),await p(S,b,w,P),w})(m,g,_)}}})(Xr,V0,vt,Zr,gn),V0,Ye,Mt,_t,Rs),q5=((l,t,i,c,p,d)=\u003eclass extends l{constructor(m,g){let _=p(m),N={...jf,...g},S=c(_,N),b=d(_);super(m,!1,S,b?i():null),this._gain=t(this,b,S.gain,We,me)}get gain(){return this._gain}})($t,Dr,((l,t,i,c,p)=\u003e()=\u003e{let d=new WeakMap;return{render(m,g,_){let N=d.get(g);return N!==void 0?Promise.resolve(N):(async(S,b,P)=\u003e{let w=i(S),U=X(w,b);if(!U){let D={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:w.gain.value};w=t(b,D)}return d.set(b,w),U?await l(b,S.gain,w.gain,P):await c(b,S.gain,w.gain,P),await p(S,b,w,P),w})(m,g,_)}}})(Xr,z,vt,Zr,gn),z,Mt,_t),T5=((l,t,i,c)=\u003e(p,d,{channelCount:m,channelCountMode:g,channelInterpretation:_,feedback:N,feedforward:S})=\u003e{let b=_l(d,p.sampleRate),P=N instanceof Float64Array?N:new Float64Array(N),w=S instanceof Float64Array?S:new Float64Array(S),U=P.length,D=w.length,E=Math.min(U,D);if(U===0||U\u003e20)throw c();if(P[0]===0)throw t();if(D===0||D\u003e20)throw c();if(w[0]===0)throw t();if(P[0]!==1){for(let te=0;te\u003cD;te+=1)w[te]/=P[0];for(let te=1;te\u003cU;te+=1)P[te]/=P[0]}let W=i(p,b,m,m);W.channelCount=m,W.channelCountMode=g,W.channelInterpretation=_;let K=[],Z=[],Q=[];for(let te=0;te\u003cm;te+=1){K.push(0);let ae=new Float32Array(32),be=new Float32Array(32);ae.fill(0),be.fill(0),Z.push(ae),Q.push(be)}W.onaudioprocess=te=\u003e{let ae=te.inputBuffer,be=te.outputBuffer,ue=ae.numberOfChannels;for(let fe=0;fe\u003cue;fe+=1){let ve=ae.getChannelData(fe),Te=be.getChannelData(fe);K[fe]=gl(P,U,w,D,E,Z[fe],Q[fe],K[fe],32,ve,Te)}};let re=p.sampleRate/2;return F({get bufferSize(){return b},get channelCount(){return W.channelCount},set channelCount(te){W.channelCount=te},get channelCountMode(){return W.channelCountMode},set channelCountMode(te){W.channelCountMode=te},get channelInterpretation(){return W.channelInterpretation},set channelInterpretation(te){W.channelInterpretation=te},get context(){return W.context},get inputs(){return[W]},get numberOfInputs(){return W.numberOfInputs},get numberOfOutputs(){return W.numberOfOutputs},addEventListener:(...te)=\u003eW.addEventListener(te[0],te[1],te[2]),dispatchEvent:(...te)=\u003eW.dispatchEvent(te[0]),getFrequencyResponse(te,ae,be){if(te.length!==ae.length||ae.length!==be.length)throw l();let ue=te.length;for(let fe=0;fe\u003cue;fe+=1){let ve=-Math.PI*(te[fe]/re),Te=[Math.cos(ve),Math.sin(ve)],Fe=_e(qe(w,Te),qe(P,Te));ae[fe]=Math.sqrt(Fe[0]*Fe[0]+Fe[1]*Fe[1]),be[fe]=Math.atan2(Fe[1],Fe[0])}},removeEventListener:(...te)=\u003eW.removeEventListener(te[0],te[1],te[2])},W)})(qi,Vt,Ge,Ye),bl=((l,t,i,c)=\u003ep=\u003el(Cs,()=\u003eCs(p))?Promise.resolve(l(c,c)).then(d=\u003e{if(!d){let m=i(p,512,0,1);p.oncomplete=()=\u003e{m.onaudioprocess=null,m.disconnect()},m.onaudioprocess=()=\u003ep.currentTime,m.connect(p.destination)}return p.startRendering()}):new Promise(d=\u003e{let m=t(p,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",gain:0});p.oncomplete=g=\u003e{m.disconnect(),d(g.renderedBuffer)},m.connect(p.destination),p.startRendering()}))(tr,z,Ge,((l,t)=\u003e()=\u003e{if(t===null)return Promise.resolve(!1);let i=new t(1,1,44100),c=l(i,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",gain:0});return new Promise(p=\u003e{i.oncomplete=()=\u003e{c.disconnect(),p(i.currentTime!==0)},i.startRendering()})})(z,un)),S5=((l,t,i,c,p)=\u003e(d,m)=\u003e{let g=new WeakMap,_=null,N=async(S,b,P)=\u003e{let w=null,U=t(S),D=X(U,b);if(b.createIIRFilter===void 0?w=l(b,{buffer:null,channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):D||(U=b.createIIRFilter(m,d)),g.set(b,w===null?U:w),w!==null){if(_===null){if(i===null)throw new Error(\"Missing the native OfflineAudioContext constructor.\");let W=new i(S.context.destination.channelCount,S.context.length,b.sampleRate);_=(async()=\u003e(await c(S,W,W.destination,P),((K,Z,Q,re)=\u003e{let te=Q instanceof Float64Array?Q:new Float64Array(Q),ae=re instanceof Float64Array?re:new Float64Array(re),be=te.length,ue=ae.length,fe=Math.min(be,ue);if(te[0]!==1){for(let Ee=0;Ee\u003cbe;Ee+=1)ae[Ee]/=te[0];for(let Ee=1;Ee\u003cue;Ee+=1)te[Ee]/=te[0]}let ve=new Float32Array(32),Te=new Float32Array(32),Fe=Z.createBuffer(K.numberOfChannels,K.length,K.sampleRate),ut=K.numberOfChannels;for(let Ee=0;Ee\u003cut;Ee+=1){let Ke=K.getChannelData(Ee),st=Fe.getChannelData(Ee);ve.fill(0),Te.fill(0),gl(te,be,ae,ue,fe,ve,Te,0,32,Ke,st)}return Fe})(await p(W),b,d,m)))()}let E=await _;return w.buffer=E,w.start(0),w}return await c(S,b,U,P),U};return{render(S,b,P){let w=g.get(b);return w!==void 0?Promise.resolve(w):N(S,b,P)}}})(Oi,vt,un,gn,bl);var W0;let M5=((l,t,i,c,p,d)=\u003eclass extends l{constructor(m,g){let _=c(m),N=p(_),S={...Df,...g},b=t(_,N?null:m.baseLatency,S);super(m,!1,b,N?i(S.feedback,S.feedforward):null),(P=\u003e{var w;P.getFrequencyResponse=(w=P.getFrequencyResponse,(U,D,E)=\u003e{if(U.length!==D.length||D.length!==E.length)throw qi();return w.call(P,U,D,E)})})(b),this._nativeIIRFilterNode=b,d(this,1)}getFrequencyResponse(m,g,_){return this._nativeIIRFilterNode.getFrequencyResponse(m,g,_)}})($t,(W0=T5,(l,t,i)=\u003e{if(l.createIIRFilter===void 0)return W0(l,t,i);let c=l.createIIRFilter(i.feedforward,i.feedback);return Ut(c,i),c}),S5,Mt,_t,Rs),P5=((l,t,i,c,p)=\u003e(d,m)=\u003e{let g=m.listener,{forwardX:_,forwardY:N,forwardZ:S,positionX:b,positionY:P,positionZ:w,upX:U,upY:D,upZ:E}=g.forwardX===void 0?(()=\u003e{let W=t(m,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"speakers\",numberOfInputs:9}),K=p(m),Z=c(m,256,9,0),Q=(ae,be)=\u003e{let ue=i(m,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",offset:be});return ue.connect(W,0,ae),ue.start(),Object.defineProperty(ue.offset,\"defaultValue\",{get:()=\u003ebe}),l({context:d},K,ue.offset,We,me)},re=[0,0,-1,0,1,0],te=[0,0,0];return Z.onaudioprocess=({inputBuffer:ae})=\u003e{let be=[ae.getChannelData(0)[0],ae.getChannelData(1)[0],ae.getChannelData(2)[0],ae.getChannelData(3)[0],ae.getChannelData(4)[0],ae.getChannelData(5)[0]];be.some((fe,ve)=\u003efe!==re[ve])\u0026\u0026(g.setOrientation(...be),re=be);let ue=[ae.getChannelData(6)[0],ae.getChannelData(7)[0],ae.getChannelData(8)[0]];ue.some((fe,ve)=\u003efe!==te[ve])\u0026\u0026(g.setPosition(...ue),te=ue)},W.connect(Z),{forwardX:Q(0,0),forwardY:Q(1,0),forwardZ:Q(2,-1),positionX:Q(6,0),positionY:Q(7,0),positionZ:Q(8,0),upX:Q(3,0),upY:Q(4,1),upZ:Q(5,0)}})():g;return{get forwardX(){return _},get forwardY(){return N},get forwardZ(){return S},get positionX(){return b},get positionY(){return P},get positionZ(){return w},get upX(){return U},get upY(){return D},get upZ(){return E}}})(Dr,$a,Ci,Ge,_t),L0=new WeakMap,em=((l,t,i,c,p,d)=\u003eclass extends i{constructor(m,g){super(m),this._nativeContext=m,M.set(this,m),c(m)\u0026\u0026p.set(m,new Set),this._destination=new l(this,g),this._listener=t(this,m),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(m){let g=typeof m==\"function\"?d(this,m):null;this._nativeContext.onstatechange=g;let _=this._nativeContext.onstatechange;this._onstatechange=_!==null\u0026\u0026_===g?m:_}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(f5,P5,N0,_t,L0,Pi),B0=((l,t,i,c,p,d)=\u003e(m,g)=\u003e{let _=m.createOscillator();return Ut(_,g),jt(_,g,\"detune\"),jt(_,g,\"frequency\"),g.periodicWave!==void 0?_.setPeriodicWave(g.periodicWave):St(_,g,\"type\"),t(i,()=\u003ei(m))||Ti(_),t(c,()=\u003ec(m))||d(_,m),t(p,()=\u003ep(m))||lc(_),l(m,_),_})(Nl,tr,Vf,c0,Wf,u0),O5=((l,t,i,c,p,d,m)=\u003eclass extends l{constructor(g,_){let N=p(g),S={...bt,..._},b=i(N,S),P=d(N),w=P?c():null,U=g.sampleRate/2;super(g,!1,b,w),this._detune=t(this,P,b.detune,153600,-153600),this._frequency=t(this,P,b.frequency,U,-U),this._nativeOscillatorNode=b,this._onended=null,this._oscillatorNodeRenderer=w,this._oscillatorNodeRenderer!==null\u0026\u0026S.periodicWave!==void 0\u0026\u0026(this._oscillatorNodeRenderer.periodicWave=S.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(g){let _=typeof g==\"function\"?m(this,g):null;this._nativeOscillatorNode.onended=_;let N=this._nativeOscillatorNode.onended;this._onended=N!==null\u0026\u0026N===_?g:N}get type(){return this._nativeOscillatorNode.type}set type(g){this._nativeOscillatorNode.type=g,this._oscillatorNodeRenderer!==null\u0026\u0026(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(g){this._nativeOscillatorNode.setPeriodicWave(g),this._oscillatorNodeRenderer!==null\u0026\u0026(this._oscillatorNodeRenderer.periodicWave=g)}start(g=0){if(this._nativeOscillatorNode.start(g),this._oscillatorNodeRenderer!==null\u0026\u0026(this._oscillatorNodeRenderer.start=g),this.context.state!==\"closed\"){xe(this);let _=()=\u003e{this._nativeOscillatorNode.removeEventListener(\"ended\",_),Qe(this)\u0026\u0026Re(this)};this._nativeOscillatorNode.addEventListener(\"ended\",_)}}stop(g=0){this._nativeOscillatorNode.stop(g),this._oscillatorNodeRenderer!==null\u0026\u0026(this._oscillatorNodeRenderer.stop=g)}})($t,Dr,B0,((l,t,i,c,p)=\u003e()=\u003e{let d=new WeakMap,m=null,g=null,_=null;return{set periodicWave(N){m=N},set start(N){g=N},set stop(N){_=N},render(N,S,b){let P=d.get(S);return P!==void 0?Promise.resolve(P):(async(w,U,D)=\u003e{let E=i(w),W=X(E,U);if(!W){let K={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,detune:E.detune.value,frequency:E.frequency.value,periodicWave:m===null?void 0:m,type:E.type};E=t(U,K),g!==null\u0026\u0026E.start(g),_!==null\u0026\u0026E.stop(_)}return d.set(U,E),W?(await l(U,w.detune,E.detune,D),await l(U,w.frequency,E.frequency,D)):(await c(U,w.detune,E.detune,D),await c(U,w.frequency,E.frequency,D)),await p(w,U,E,D),E})(N,S,b)}}})(Xr,B0,vt,Zr,gn),Mt,_t,Pi),z0=(G0=Oi,(l,t)=\u003e{let i=G0(l,{buffer:null,channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=l.createBuffer(1,2,44100);return i.buffer=c,i.loop=!0,i.connect(t),i.start(),()=\u003e{i.stop(),i.disconnect(t)}});var G0;let C5=((l,t,i,c,p)=\u003e(d,{curve:m,oversample:g,..._})=\u003e{let N=d.createWaveShaper(),S=d.createWaveShaper();Ut(N,_),Ut(S,_);let b=i(d,{..._,gain:1}),P=i(d,{..._,gain:-1}),w=i(d,{..._,gain:1}),U=i(d,{..._,gain:-1}),D=null,E=!1,W=null,K={get bufferSize(){},get channelCount(){return N.channelCount},set channelCount(Z){b.channelCount=Z,P.channelCount=Z,N.channelCount=Z,w.channelCount=Z,S.channelCount=Z,U.channelCount=Z},get channelCountMode(){return N.channelCountMode},set channelCountMode(Z){b.channelCountMode=Z,P.channelCountMode=Z,N.channelCountMode=Z,w.channelCountMode=Z,S.channelCountMode=Z,U.channelCountMode=Z},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(Z){b.channelInterpretation=Z,P.channelInterpretation=Z,N.channelInterpretation=Z,w.channelInterpretation=Z,S.channelInterpretation=Z,U.channelInterpretation=Z},get context(){return N.context},get curve(){return W},set curve(Z){if(Z!==null\u0026\u0026Z.length\u003c2)throw t();if(Z===null)N.curve=Z,S.curve=Z;else{let Q=Z.length,re=new Float32Array(Q+2-Q%2),te=new Float32Array(Q+2-Q%2);re[0]=Z[0],te[0]=-Z[Q-1];let ae=Math.ceil((Q+1)/2),be=(Q+1)/2-1;for(let ue=1;ue\u003cae;ue+=1){let fe=ue/ae*be,ve=Math.floor(fe),Te=Math.ceil(fe);re[ue]=ve===Te?Z[ve]:(1-(fe-ve))*Z[ve]+(1-(Te-fe))*Z[Te],te[ue]=ve===Te?-Z[Q-1-ve]:-(1-(fe-ve))*Z[Q-1-ve]-(1-(Te-fe))*Z[Q-1-Te]}re[ae]=Q%2==1?Z[ae-1]:(Z[ae-2]+Z[ae-1])/2,N.curve=re,S.curve=te}W=Z,E\u0026\u0026(c(W)\u0026\u0026D===null?D=l(d,b):D!==null\u0026\u0026(D(),D=null))},get inputs(){return[b]},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get oversample(){return N.oversample},set oversample(Z){N.oversample=Z,S.oversample=Z},addEventListener:(...Z)=\u003eb.addEventListener(Z[0],Z[1],Z[2]),dispatchEvent:(...Z)=\u003eb.dispatchEvent(Z[0]),removeEventListener:(...Z)=\u003eb.removeEventListener(Z[0],Z[1],Z[2])};return m!==null\u0026\u0026(K.curve=m instanceof Float32Array?m:new Float32Array(m)),g!==K.oversample\u0026\u0026(K.oversample=g),p(F(K,w),()=\u003e{b.connect(N).connect(w),b.connect(P).connect(S).connect(U).connect(w),E=!0,c(W)\u0026\u0026(D=l(d,b))},()=\u003e{b.disconnect(N),N.disconnect(w),b.disconnect(P),P.disconnect(S),S.disconnect(U),U.disconnect(w),E=!1,D!==null\u0026\u0026(D(),D=null)})})(z0,Vt,z,Mi,Ua),xl=((l,t,i,c,p,d,m)=\u003e(g,_)=\u003e{let N=g.createWaveShaper();if(d!==null\u0026\u0026d.name===\"webkitAudioContext\"\u0026\u0026g.createGain().gain.automationRate===void 0)return i(g,_);Ut(N,_);let S=_.curve===null||_.curve instanceof Float32Array?_.curve:new Float32Array(_.curve);if(S!==null\u0026\u0026S.length\u003c2)throw t();St(N,{curve:S},\"curve\"),St(N,_,\"oversample\");let b=null,P=!1;return m(N,\"curve\",w=\u003e()=\u003ew.call(N),w=\u003eU=\u003e(w.call(N,U),P\u0026\u0026(c(U)\u0026\u0026b===null?b=l(g,N):c(U)||b===null||(b(),b=null)),U)),p(N,()=\u003e{P=!0,c(N.curve)\u0026\u0026(b=l(g,N))},()=\u003e{P=!1,b!==null\u0026\u0026(b(),b=null)})})(z0,Vt,C5,Mi,Ua,ya,vr),A5=((l,t,i,c,p,d,m,g,_)=\u003e(N,{coneInnerAngle:S,coneOuterAngle:b,coneOuterGain:P,distanceModel:w,maxDistance:U,orientationX:D,orientationY:E,orientationZ:W,panningModel:K,positionX:Z,positionY:Q,positionZ:re,refDistance:te,rolloffFactor:ae,...be})=\u003e{let ue=N.createPanner();if(be.channelCount\u003e2||be.channelCountMode===\"max\")throw m();Ut(ue,be);let fe={channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"discrete\"},ve=i(N,{...fe,channelInterpretation:\"speakers\",numberOfInputs:6}),Te=c(N,{...be,gain:1}),Fe=c(N,{...fe,gain:1}),ut=c(N,{...fe,gain:0}),Ee=c(N,{...fe,gain:0}),Ke=c(N,{...fe,gain:0}),st=c(N,{...fe,gain:0}),$e=c(N,{...fe,gain:0}),rt=p(N,256,6,1),lt=d(N,{...fe,curve:new Float32Array([1,1]),oversample:\"none\"}),Ht=[D,E,W],an=[Z,Q,re];rt.onaudioprocess=({inputBuffer:je})=\u003e{let bn=[je.getChannelData(0)[0],je.getChannelData(1)[0],je.getChannelData(2)[0]];bn.some((or,es)=\u003eor!==Ht[es])\u0026\u0026(ue.setOrientation(...bn),Ht=bn);let na=[je.getChannelData(3)[0],je.getChannelData(4)[0],je.getChannelData(5)[0]];na.some((or,es)=\u003eor!==an[es])\u0026\u0026(ue.setPosition(...na),an=na)},Object.defineProperty(ut.gain,\"defaultValue\",{get:()=\u003e0}),Object.defineProperty(Ee.gain,\"defaultValue\",{get:()=\u003e0}),Object.defineProperty(Ke.gain,\"defaultValue\",{get:()=\u003e0}),Object.defineProperty(st.gain,\"defaultValue\",{get:()=\u003e0}),Object.defineProperty($e.gain,\"defaultValue\",{get:()=\u003e0});let it={get bufferSize(){},get channelCount(){return ue.channelCount},set channelCount(je){if(je\u003e2)throw m();Te.channelCount=je,ue.channelCount=je},get channelCountMode(){return ue.channelCountMode},set channelCountMode(je){if(je===\"max\")throw m();Te.channelCountMode=je,ue.channelCountMode=je},get channelInterpretation(){return ue.channelInterpretation},set channelInterpretation(je){Te.channelInterpretation=je,ue.channelInterpretation=je},get coneInnerAngle(){return ue.coneInnerAngle},set coneInnerAngle(je){ue.coneInnerAngle=je},get coneOuterAngle(){return ue.coneOuterAngle},set coneOuterAngle(je){ue.coneOuterAngle=je},get coneOuterGain(){return ue.coneOuterGain},set coneOuterGain(je){if(je\u003c0||je\u003e1)throw t();ue.coneOuterGain=je},get context(){return ue.context},get distanceModel(){return ue.distanceModel},set distanceModel(je){ue.distanceModel=je},get inputs(){return[Te]},get maxDistance(){return ue.maxDistance},set maxDistance(je){if(je\u003c0)throw new RangeError;ue.maxDistance=je},get numberOfInputs(){return ue.numberOfInputs},get numberOfOutputs(){return ue.numberOfOutputs},get orientationX(){return Fe.gain},get orientationY(){return ut.gain},get orientationZ(){return Ee.gain},get panningModel(){return ue.panningModel},set panningModel(je){ue.panningModel=je},get positionX(){return Ke.gain},get positionY(){return st.gain},get positionZ(){return $e.gain},get refDistance(){return ue.refDistance},set refDistance(je){if(je\u003c0)throw new RangeError;ue.refDistance=je},get rolloffFactor(){return ue.rolloffFactor},set rolloffFactor(je){if(je\u003c0)throw new RangeError;ue.rolloffFactor=je},addEventListener:(...je)=\u003eTe.addEventListener(je[0],je[1],je[2]),dispatchEvent:(...je)=\u003eTe.dispatchEvent(je[0]),removeEventListener:(...je)=\u003eTe.removeEventListener(je[0],je[1],je[2])};return S!==it.coneInnerAngle\u0026\u0026(it.coneInnerAngle=S),b!==it.coneOuterAngle\u0026\u0026(it.coneOuterAngle=b),P!==it.coneOuterGain\u0026\u0026(it.coneOuterGain=P),w!==it.distanceModel\u0026\u0026(it.distanceModel=w),U!==it.maxDistance\u0026\u0026(it.maxDistance=U),D!==it.orientationX.value\u0026\u0026(it.orientationX.value=D),E!==it.orientationY.value\u0026\u0026(it.orientationY.value=E),W!==it.orientationZ.value\u0026\u0026(it.orientationZ.value=W),K!==it.panningModel\u0026\u0026(it.panningModel=K),Z!==it.positionX.value\u0026\u0026(it.positionX.value=Z),Q!==it.positionY.value\u0026\u0026(it.positionY.value=Q),re!==it.positionZ.value\u0026\u0026(it.positionZ.value=re),te!==it.refDistance\u0026\u0026(it.refDistance=te),ae!==it.rolloffFactor\u0026\u0026(it.rolloffFactor=ae),Ht[0]===1\u0026\u0026Ht[1]===0\u0026\u0026Ht[2]===0||ue.setOrientation(...Ht),an[0]===0\u0026\u0026an[1]===0\u0026\u0026an[2]===0||ue.setPosition(...an),_(F(it,ue),()=\u003e{Te.connect(ue),l(Te,lt,0,0),lt.connect(Fe).connect(ve,0,0),lt.connect(ut).connect(ve,0,1),lt.connect(Ee).connect(ve,0,2),lt.connect(Ke).connect(ve,0,3),lt.connect(st).connect(ve,0,4),lt.connect($e).connect(ve,0,5),ve.connect(rt).connect(N.destination)},()=\u003e{Te.disconnect(ue),g(Te,lt,0,0),lt.disconnect(Fe),Fe.disconnect(ve),lt.disconnect(ut),ut.disconnect(ve),lt.disconnect(Ee),Ee.disconnect(ve),lt.disconnect(Ke),Ke.disconnect(ve),lt.disconnect(st),st.disconnect(ve),lt.disconnect($e),$e.disconnect(ve),ve.disconnect(rt),rt.disconnect(N.destination)})})(Rn,Vt,$a,z,Ge,xl,Ye,Cr,Ua),U0=($0=A5,(l,t)=\u003e{let i=l.createPanner();return i.orientationX===void 0?$0(l,t):(Ut(i,t),jt(i,t,\"orientationX\"),jt(i,t,\"orientationY\"),jt(i,t,\"orientationZ\"),jt(i,t,\"positionX\"),jt(i,t,\"positionY\"),jt(i,t,\"positionZ\"),St(i,t,\"coneInnerAngle\"),St(i,t,\"coneOuterAngle\"),St(i,t,\"coneOuterGain\"),St(i,t,\"distanceModel\"),St(i,t,\"maxDistance\"),St(i,t,\"panningModel\"),St(i,t,\"refDistance\"),St(i,t,\"rolloffFactor\"),i)});var $0;let R5=((l,t,i,c,p,d,m)=\u003eclass extends l{constructor(g,_){let N=p(g),S={...Wt,..._},b=i(N,S),P=d(N);super(g,!1,b,P?c():null),this._nativePannerNode=b,this._orientationX=t(this,P,b.orientationX,We,me),this._orientationY=t(this,P,b.orientationY,We,me),this._orientationZ=t(this,P,b.orientationZ,We,me),this._positionX=t(this,P,b.positionX,We,me),this._positionY=t(this,P,b.positionY,We,me),this._positionZ=t(this,P,b.positionZ,We,me),m(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(g){this._nativePannerNode.coneInnerAngle=g}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(g){this._nativePannerNode.coneOuterAngle=g}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(g){this._nativePannerNode.coneOuterGain=g}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(g){this._nativePannerNode.distanceModel=g}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(g){this._nativePannerNode.maxDistance=g}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(g){this._nativePannerNode.panningModel=g}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(g){this._nativePannerNode.refDistance=g}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(g){this._nativePannerNode.rolloffFactor=g}})($t,Dr,U0,((l,t,i,c,p,d,m,g,_,N)=\u003e()=\u003e{let S=new WeakMap,b=null;return{render(P,w,U){let D=S.get(w);return D!==void 0?Promise.resolve(D):(async(E,W,K)=\u003e{let Z=null,Q=d(E),re={channelCount:Q.channelCount,channelCountMode:Q.channelCountMode,channelInterpretation:Q.channelInterpretation},te={...re,coneInnerAngle:Q.coneInnerAngle,coneOuterAngle:Q.coneOuterAngle,coneOuterGain:Q.coneOuterGain,distanceModel:Q.distanceModel,maxDistance:Q.maxDistance,panningModel:Q.panningModel,refDistance:Q.refDistance,rolloffFactor:Q.rolloffFactor},ae=X(Q,W);if(\"bufferSize\"in Q)Z=c(W,{...re,gain:1});else if(!ae){let be={...te,orientationX:Q.orientationX.value,orientationY:Q.orientationY.value,orientationZ:Q.orientationZ.value,positionX:Q.positionX.value,positionY:Q.positionY.value,positionZ:Q.positionZ.value};Q=p(W,be)}if(S.set(W,Z===null?Q:Z),Z!==null){if(b===null){if(m===null)throw new Error(\"Missing the native OfflineAudioContext constructor.\");let Ee=new m(6,E.context.length,W.sampleRate),Ke=t(Ee,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"speakers\",numberOfInputs:6});Ke.connect(Ee.destination),b=(async()=\u003e{let st=await Promise.all([E.orientationX,E.orientationY,E.orientationZ,E.positionX,E.positionY,E.positionZ].map(async($e,rt)=\u003e{let lt=i(Ee,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",offset:rt===0?1:0});return await g(Ee,$e,lt.offset,K),lt}));for(let $e=0;$e\u003c6;$e+=1)st[$e].connect(Ke,0,$e),st[$e].start(0);return N(Ee)})()}let be=await b,ue=c(W,{...re,gain:1});await _(E,W,ue,K);let fe=[];for(let Ee=0;Ee\u003cbe.numberOfChannels;Ee+=1)fe.push(be.getChannelData(Ee));let ve=[fe[0][0],fe[1][0],fe[2][0]],Te=[fe[3][0],fe[4][0],fe[5][0]],Fe=c(W,{...re,gain:1}),ut=p(W,{...te,orientationX:ve[0],orientationY:ve[1],orientationZ:ve[2],positionX:Te[0],positionY:Te[1],positionZ:Te[2]});ue.connect(Fe).connect(ut.inputs[0]),ut.connect(Z);for(let Ee=128;Ee\u003cbe.length;Ee+=128){let Ke=[fe[0][Ee],fe[1][Ee],fe[2][Ee]],st=[fe[3][Ee],fe[4][Ee],fe[5][Ee]];if(Ke.some(($e,rt)=\u003e$e!==ve[rt])||st.some(($e,rt)=\u003e$e!==Te[rt])){ve=Ke,Te=st;let $e=Ee/W.sampleRate;Fe.gain.setValueAtTime(0,$e),Fe=c(W,{...re,gain:0}),ut=p(W,{...te,orientationX:ve[0],orientationY:ve[1],orientationZ:ve[2],positionX:Te[0],positionY:Te[1],positionZ:Te[2]}),Fe.gain.setValueAtTime(1,$e),ue.connect(Fe).connect(ut.inputs[0]),ut.connect(Z)}}return Z}return ae?(await l(W,E.orientationX,Q.orientationX,K),await l(W,E.orientationY,Q.orientationY,K),await l(W,E.orientationZ,Q.orientationZ,K),await l(W,E.positionX,Q.positionX,K),await l(W,E.positionY,Q.positionY,K),await l(W,E.positionZ,Q.positionZ,K)):(await g(W,E.orientationX,Q.orientationX,K),await g(W,E.orientationY,Q.orientationY,K),await g(W,E.orientationZ,Q.orientationZ,K),await g(W,E.positionX,Q.positionX,K),await g(W,E.positionY,Q.positionY,K),await g(W,E.positionZ,Q.positionZ,K)),Et(Q)?await _(E,W,Q.inputs[0],K):await _(E,W,Q,K),Q})(P,w,U)}}})(Xr,$a,Ci,z,U0,vt,un,Zr,gn,bl),Mt,_t,Rs),E5=((l,t,i,c)=\u003eclass BA{constructor(d,m){let g=t(d),_=c({...Er,...m}),N=l(g,_);return i.add(N),N}static[Symbol.hasInstance](d){return d!==null\u0026\u0026typeof d==\"object\"\u0026\u0026Object.getPrototypeOf(d)===BA.prototype||i.has(d)}})((l=\u003e(t,{disableNormalization:i,imag:c,real:p})=\u003e{let d=c instanceof Float32Array?c:new Float32Array(c),m=p instanceof Float32Array?p:new Float32Array(p),g=t.createPeriodicWave(m,d,{disableNormalization:i});if(Array.from(c).length\u003c2)throw l();return g})(Y),Mt,new WeakSet,l=\u003e{let{imag:t,real:i}=l;return t===void 0?i===void 0?{...l,imag:[0,0],real:[0,0]}:{...l,imag:Array.from(i,()=\u003e0),real:i}:i===void 0?{...l,imag:t,real:Array.from(t,()=\u003e0)}:{...l,imag:t,real:i}}),H0=((l,t)=\u003e(i,c)=\u003e{let p=c.channelCountMode;if(p===\"clamped-max\")throw t();if(i.createStereoPanner===void 0)return l(i,c);let d=i.createStereoPanner();return Ut(d,c),jt(d,c,\"pan\"),Object.defineProperty(d,\"channelCountMode\",{get:()=\u003ep,set:m=\u003e{if(m!==p)throw t()}}),d})(((l,t,i,c,p,d)=\u003e{let m=new Float32Array([1,1]),g=Math.PI/2,_={channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"discrete\"},N={..._,oversample:\"none\"},S=(b,P,w,U,D)=\u003e{if(P===1)return((E,W,K,Z)=\u003e{let Q=new Float32Array(16385),re=new Float32Array(16385);for(let ve=0;ve\u003c16385;ve+=1){let Te=ve/16384*g;Q[ve]=Math.cos(Te),re[ve]=Math.sin(Te)}let te=i(E,{..._,gain:0}),ae=c(E,{...N,curve:Q}),be=c(E,{...N,curve:m}),ue=i(E,{..._,gain:0}),fe=c(E,{...N,curve:re});return{connectGraph(){W.connect(te),W.connect(be.inputs===void 0?be:be.inputs[0]),W.connect(ue),be.connect(K),K.connect(ae.inputs===void 0?ae:ae.inputs[0]),K.connect(fe.inputs===void 0?fe:fe.inputs[0]),ae.connect(te.gain),fe.connect(ue.gain),te.connect(Z,0,0),ue.connect(Z,0,1)},disconnectGraph(){W.disconnect(te),W.disconnect(be.inputs===void 0?be:be.inputs[0]),W.disconnect(ue),be.disconnect(K),K.disconnect(ae.inputs===void 0?ae:ae.inputs[0]),K.disconnect(fe.inputs===void 0?fe:fe.inputs[0]),ae.disconnect(te.gain),fe.disconnect(ue.gain),te.disconnect(Z,0,0),ue.disconnect(Z,0,1)}}})(b,w,U,D);if(P===2)return((E,W,K,Z)=\u003e{let Q=new Float32Array(16385),re=new Float32Array(16385),te=new Float32Array(16385),ae=new Float32Array(16385),be=Math.floor(8192.5);for(let rt=0;rt\u003c16385;rt+=1)if(rt\u003ebe){let lt=(rt-be)/(16384-be)*g;Q[rt]=Math.cos(lt),re[rt]=Math.sin(lt),te[rt]=0,ae[rt]=1}else{let lt=rt/(16384-be)*g;Q[rt]=1,re[rt]=0,te[rt]=Math.cos(lt),ae[rt]=Math.sin(lt)}let ue=t(E,{channelCount:2,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",numberOfOutputs:2}),fe=i(E,{..._,gain:0}),ve=c(E,{...N,curve:Q}),Te=i(E,{..._,gain:0}),Fe=c(E,{...N,curve:re}),ut=c(E,{...N,curve:m}),Ee=i(E,{..._,gain:0}),Ke=c(E,{...N,curve:te}),st=i(E,{..._,gain:0}),$e=c(E,{...N,curve:ae});return{connectGraph(){W.connect(ue),W.connect(ut.inputs===void 0?ut:ut.inputs[0]),ue.connect(fe,0),ue.connect(Te,0),ue.connect(Ee,1),ue.connect(st,1),ut.connect(K),K.connect(ve.inputs===void 0?ve:ve.inputs[0]),K.connect(Fe.inputs===void 0?Fe:Fe.inputs[0]),K.connect(Ke.inputs===void 0?Ke:Ke.inputs[0]),K.connect($e.inputs===void 0?$e:$e.inputs[0]),ve.connect(fe.gain),Fe.connect(Te.gain),Ke.connect(Ee.gain),$e.connect(st.gain),fe.connect(Z,0,0),Ee.connect(Z,0,0),Te.connect(Z,0,1),st.connect(Z,0,1)},disconnectGraph(){W.disconnect(ue),W.disconnect(ut.inputs===void 0?ut:ut.inputs[0]),ue.disconnect(fe,0),ue.disconnect(Te,0),ue.disconnect(Ee,1),ue.disconnect(st,1),ut.disconnect(K),K.disconnect(ve.inputs===void 0?ve:ve.inputs[0]),K.disconnect(Fe.inputs===void 0?Fe:Fe.inputs[0]),K.disconnect(Ke.inputs===void 0?Ke:Ke.inputs[0]),K.disconnect($e.inputs===void 0?$e:$e.inputs[0]),ve.disconnect(fe.gain),Fe.disconnect(Te.gain),Ke.disconnect(Ee.gain),$e.disconnect(st.gain),fe.disconnect(Z,0,0),Ee.disconnect(Z,0,0),Te.disconnect(Z,0,1),st.disconnect(Z,0,1)}}})(b,w,U,D);throw p()};return(b,{channelCount:P,channelCountMode:w,pan:U,...D})=\u003e{if(w===\"max\")throw p();let E=l(b,{...D,channelCount:1,channelCountMode:w,numberOfInputs:2}),W=i(b,{...D,channelCount:P,channelCountMode:w,gain:1}),K=i(b,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",gain:U}),{connectGraph:Z,disconnectGraph:Q}=S(b,P,W,K,E);Object.defineProperty(K.gain,\"defaultValue\",{get:()=\u003e0}),Object.defineProperty(K.gain,\"maxValue\",{get:()=\u003e1}),Object.defineProperty(K.gain,\"minValue\",{get:()=\u003e-1});let re={get bufferSize(){},get channelCount(){return W.channelCount},set channelCount(ae){W.channelCount!==ae\u0026\u0026(te\u0026\u0026Q(),{connectGraph:Z,disconnectGraph:Q}=S(b,ae,W,K,E),te\u0026\u0026Z()),W.channelCount=ae},get channelCountMode(){return W.channelCountMode},set channelCountMode(ae){if(ae===\"clamped-max\"||ae===\"max\")throw p();W.channelCountMode=ae},get channelInterpretation(){return W.channelInterpretation},set channelInterpretation(ae){W.channelInterpretation=ae},get context(){return W.context},get inputs(){return[W]},get numberOfInputs(){return W.numberOfInputs},get numberOfOutputs(){return W.numberOfOutputs},get pan(){return K.gain},addEventListener:(...ae)=\u003eW.addEventListener(ae[0],ae[1],ae[2]),dispatchEvent:(...ae)=\u003eW.dispatchEvent(ae[0]),removeEventListener:(...ae)=\u003eW.removeEventListener(ae[0],ae[1],ae[2])},te=!1;return d(F(re,E),()=\u003e{Z(),te=!0},()=\u003e{Q(),te=!1})}})($a,A,z,xl,Ye,Ua),Ye),j5=((l,t,i,c,p,d)=\u003eclass extends l{constructor(m,g){let _=p(m),N={...As,...g},S=i(_,N),b=d(_);super(m,!1,S,b?c():null),this._pan=t(this,b,S.pan)}get pan(){return this._pan}})($t,Dr,H0,((l,t,i,c,p)=\u003e()=\u003e{let d=new WeakMap;return{render(m,g,_){let N=d.get(g);return N!==void 0?Promise.resolve(N):(async(S,b,P)=\u003e{let w=i(S),U=X(w,b);if(!U){let D={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,pan:w.pan.value};w=t(b,D)}return d.set(b,w),U?await l(b,S.pan,w.pan,P):await c(b,S.pan,w.pan,P),Et(w)?await p(S,b,w.inputs[0],P):await p(S,b,w,P),w})(m,g,_)}}})(Xr,H0,vt,Zr,gn),Mt,_t),D5=((l,t,i)=\u003e()=\u003e{let c=new WeakMap;return{render(p,d,m){let g=c.get(d);return g!==void 0?Promise.resolve(g):(async(_,N,S)=\u003e{let b=t(_);if(!X(b,N)){let P={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,curve:b.curve,oversample:b.oversample};b=l(N,P)}return c.set(N,b),Et(b)?await i(_,N,b.inputs[0],S):await i(_,N,b,S),b})(p,d,m)}}})(xl,vt,gn),I5=((l,t,i,c,p,d,m)=\u003eclass extends l{constructor(g,_){let N=p(g),S={...Ff,..._},b=i(N,S);super(g,!0,b,d(N)?c():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=b,m(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(g){if(g===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(g.length\u003c2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=g}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(g){this._nativeWaveShaperNode.oversample=g}})($t,Vt,xl,D5,Mt,_t,Rs),Y0=(l=\u003el!==null\u0026\u0026l.isSecureContext)(jr),tm=(l=\u003e(t,i,c)=\u003e{Object.defineProperties(l,{currentFrame:{configurable:!0,get:()=\u003eMath.round(t*i)},currentTime:{configurable:!0,get:()=\u003et}});try{return c()}finally{l!==null\u0026\u0026(delete l.currentFrame,delete l.currentTime)}})(jr),X0=new WeakMap,F5=((l,t)=\u003ei=\u003e{let c=l.get(i);if(c!==void 0)return c;if(t===null)throw new Error(\"Missing the native OfflineAudioContext constructor.\");return c=new t(1,1,8e3),l.set(i,c),c})(X0,un),wl=(l=\u003el===null?null:l.hasOwnProperty(\"AudioWorkletNode\")?l.AudioWorkletNode:null)(jr),V5=Y0?((l,t,i,c,p,d,m,g,_,N,S,b)=\u003e(P,w,U={credentials:\"omit\"})=\u003e{let D=d(P);if(D.audioWorklet!==void 0)return Promise.all([p(w),Promise.resolve(l(S,S))]).then(([[Z,Q],re])=\u003e{let[te,ae]=pe(Z,Q),be=re?ae:ae.replace(/\\s+extends\\s+AudioWorkletProcessor\\s*{/,\" extends (class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=\u003ep.postMessage=(q=\u003e(m,t)=\u003eq.call(p,m,t?t.filter(u=\u003e!this.__b.has(u)):t))(p.postMessage))(this.port)}}){\"),ue=new Blob([`${te};(registerProcessor=\u003e{${be}\n})((n,p)=\u003eregisterProcessor(n,class extends p{${re?\"\":\"__c = (a) =\u003e a.forEach(e=\u003ethis.__b.add(e.buffer));\"}process(i,o,p){${re?\"\":\"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));\"}return super.process(i.map(j=\u003ej.some(k=\u003ek.length===0)?[]:j),o,p)}}))`],{type:\"application/javascript; charset=utf-8\"}),fe=URL.createObjectURL(ue);return D.audioWorklet.addModule(fe,U).then(()=\u003e{if(!g(D))return m(D).audioWorklet.addModule(fe,U)}).finally(()=\u003eURL.revokeObjectURL(fe))});let E=N.get(P);if(E!==void 0\u0026\u0026E.has(w))return Promise.resolve();let W=_.get(P);if(W!==void 0){let Z=W.get(w);if(Z!==void 0)return Z}let K=p(w).then(([Z,Q])=\u003e{let[re,te]=pe(Z,Q);return i(`${re};((a,b)=\u003e{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=\u003e{${te}\n})})(window,'_AWGS')`)}).then(()=\u003e{let Z=b._AWGS.pop();if(Z===void 0)throw new SyntaxError;c(D.currentTime,D.sampleRate,()=\u003eZ(class{},void 0,(Q,re)=\u003e{if(Q.trim()===\"\")throw t();let te=B.get(D);if(te!==void 0){if(te.has(Q))throw t();R(re),G(re.parameterDescriptors),te.set(Q,re)}else R(re),G(re.parameterDescriptors),B.set(D,new Map([[Q,re]]))},D.sampleRate,void 0,void 0))});return W===void 0?_.set(P,new Map([[w,K]])):W.set(w,K),K.then(()=\u003e{let Z=N.get(P);Z===void 0?N.set(P,new Set([w])):Z.add(w)}).finally(()=\u003e{let Z=_.get(P);Z!==void 0\u0026\u0026Z.delete(w)}),K})(tr,Ye,(l=\u003et=\u003enew Promise((i,c)=\u003e{if(l===null)return void c(new SyntaxError);let p=l.document.head;if(p===null)c(new SyntaxError);else{let d=l.document.createElement(\"script\"),m=new Blob([t],{type:\"application/javascript\"}),g=URL.createObjectURL(m),_=l.onerror,N=()=\u003e{l.onerror=_,URL.revokeObjectURL(g)};l.onerror=(S,b,P,w,U)=\u003eb===g||b===l.location.href\u0026\u0026P===1\u0026\u0026w===1?(N(),c(U),!1):_!==null?_(S,b,P,w,U):void 0,d.onerror=()=\u003e{N(),c(new SyntaxError)},d.onload=()=\u003e{N(),i()},d.src=g,d.type=\"module\",p.appendChild(d)}}))(jr),tm,(l=\u003easync t=\u003e{try{let i=await fetch(t);if(i.ok)return[await i.text(),i.url]}catch{}throw l()})(()=\u003enew DOMException(\"\",\"AbortError\")),Mt,F5,_t,new WeakMap,new WeakMap,((l,t)=\u003easync()=\u003e{if(l===null)return!0;if(t===null)return!1;let i=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor(\"a\",A)'],{type:\"application/javascript; charset=utf-8\"}),c=new t(1,128,8e3),p=URL.createObjectURL(i),d=!1,m=!1;try{await c.audioWorklet.addModule(p);let g=new l(c,\"a\",{numberOfOutputs:0}),_=c.createOscillator();g.port.onmessage=()=\u003ed=!0,g.onprocessorerror=()=\u003em=!0,_.connect(g),await c.startRendering()}catch{}finally{URL.revokeObjectURL(p)}return d\u0026\u0026!m})(wl,un),jr):void 0,W5=((l,t)=\u003ei=\u003el(i)||t(i))(zf,_t),Z0=((l,t,i,c,p,d,m,g,_,N,S,b,P,w,U,D,E,W,K,Z)=\u003eclass extends U{constructor(Q,re){super(Q,re),this._nativeContext=Q,this._audioWorklet=l===void 0?void 0:{addModule:(te,ae)=\u003el(this,te,ae)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new p(this)}createBuffer(Q,re,te){return new i({length:re,numberOfChannels:Q,sampleRate:te})}createBufferSource(){return new c(this)}createChannelMerger(Q=6){return new d(this,{numberOfInputs:Q})}createChannelSplitter(Q=6){return new m(this,{numberOfOutputs:Q})}createConstantSource(){return new g(this)}createConvolver(){return new _(this)}createDelay(Q=1){return new S(this,{maxDelayTime:Q})}createDynamicsCompressor(){return new b(this)}createGain(){return new P(this)}createIIRFilter(Q,re){return new w(this,{feedback:re,feedforward:Q})}createOscillator(){return new D(this)}createPanner(){return new E(this)}createPeriodicWave(Q,re,te={disableNormalization:!1}){return new W(this,{...te,imag:re,real:Q})}createStereoPanner(){return new K(this)}createWaveShaper(){return new Z(this)}decodeAudioData(Q,re,te){return N(this._nativeContext,Q).then(ae=\u003e(typeof re==\"function\"\u0026\u0026re(ae),ae)).catch(ae=\u003e{throw typeof te==\"function\"\u0026\u0026te(ae),ae})}})(V5,l5,p5,d5,v5,y5,_5,N5,b5,((l,t,i,c,p,d,m,g,_,N,S)=\u003e(b,P)=\u003e{let w=m(b)?b:d(b);if(p.has(P)){let U=i();return Promise.reject(U)}try{p.add(P)}catch{}return t(_,()=\u003e_(w))?w.decodeAudioData(P).then(U=\u003e(t(g,()=\u003eg(U))||S(U),l.add(U),U)):new Promise((U,D)=\u003e{let E=()=\u003e{try{(K=\u003e{let{port1:Z}=new MessageChannel;Z.postMessage(K,[K])})(P)}catch{}},W=K=\u003e{D(K),E()};try{w.decodeAudioData(P,K=\u003e{typeof K.copyFromChannel!=\"function\"\u0026\u0026(N(K),J(K)),l.add(K),E(),U(K)},K=\u003e{W(K===null?c():K)})}catch(K){W(K)}})})($f,tr,()=\u003enew DOMException(\"\",\"DataCloneError\"),()=\u003enew DOMException(\"\",\"EncodingError\"),new WeakSet,Mt,W5,oe,Cs,Yf,Xf),x5,w5,q5,M5,em,O5,R5,E5,j5,I5),L5=((l,t,i,c)=\u003eclass extends l{constructor(p,d){let m=i(p),g=t(m,d);if(c(m))throw TypeError();super(p,!0,g,null),this._nativeMediaElementAudioSourceNode=g}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})($t,(l,t)=\u003el.createMediaElementSource(t.mediaElement),Mt,_t),B5=((l,t,i,c)=\u003eclass extends l{constructor(p,d){let m=i(p);if(c(m))throw new TypeError;let g={...If,...d},_=t(m,g);super(p,!1,_,null),this._nativeMediaStreamAudioDestinationNode=_}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})($t,(l,t)=\u003e{let i=l.createMediaStreamDestination();return Ut(i,t),i.numberOfOutputs===1\u0026\u0026Object.defineProperty(i,\"numberOfOutputs\",{get:()=\u003e0}),i},Mt,_t),z5=((l,t,i,c)=\u003eclass extends l{constructor(p,d){let m=i(p),g=t(m,d);if(c(m))throw new TypeError;super(p,!0,g,null),this._nativeMediaStreamAudioSourceNode=g}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})($t,(l,{mediaStream:t})=\u003e{let i=t.getAudioTracks();i.sort((d,m)=\u003ed.id\u003cm.id?-1:d.id\u003em.id?1:0);let c=i.slice(0,1),p=l.createMediaStreamSource(new MediaStream(c));return Object.defineProperty(p,\"mediaStream\",{value:t}),p},Mt,_t),G5=((l,t,i)=\u003eclass extends l{constructor(c,p){let d=i(c);super(c,!0,t(d,p),null)}})($t,((l,t)=\u003e(i,{mediaStreamTrack:c})=\u003e{if(typeof i.createMediaStreamTrackSource==\"function\")return i.createMediaStreamTrackSource(c);let p=new MediaStream([c]),d=i.createMediaStreamSource(p);if(c.kind!==\"audio\")throw l();if(t(i))throw new TypeError;return d})(Vt,_t),Mt),U5=((l,t,i,c,p,d,m,g,_)=\u003eclass extends l{constructor(N={}){if(_===null)throw new Error(\"Missing the native AudioContext constructor.\");let S=new _(N);if(S===null)throw c();if(!Oe(N.latencyHint))throw new TypeError(`The provided value '${N.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(N.sampleRate!==void 0\u0026\u0026S.sampleRate!==N.sampleRate)throw i();super(S,2);let{latencyHint:b}=N,{sampleRate:P}=S;if(this._baseLatency=typeof S.baseLatency==\"number\"?S.baseLatency:b===\"balanced\"?512/P:b===\"interactive\"||b===void 0?256/P:b===\"playback\"?1024/P:128*Math.max(2,Math.min(128,Math.round(b*P/128)))/P,this._nativeAudioContext=S,_.name===\"webkitAudioContext\"?(this._nativeGainNode=S.createGain(),this._nativeOscillatorNode=S.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(S.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,S.state===\"running\"){this._state=\"suspended\";let w=()=\u003e{this._state===\"suspended\"\u0026\u0026(this._state=null),S.removeEventListener(\"statechange\",w)};S.addEventListener(\"statechange\",w)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state===\"closed\"?this._nativeAudioContext.close().then(()=\u003e{throw t()}):(this._state===\"suspended\"\u0026\u0026(this._state=null),this._nativeAudioContext.close().then(()=\u003e{this._nativeGainNode!==null\u0026\u0026this._nativeOscillatorNode!==null\u0026\u0026(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Be(this)}))}createMediaElementSource(N){return new p(this,{mediaElement:N})}createMediaStreamDestination(){return new d(this)}createMediaStreamSource(N){return new m(this,{mediaStream:N})}createMediaStreamTrackSource(N){return new g(this,{mediaStreamTrack:N})}resume(){return this._state===\"suspended\"?new Promise((N,S)=\u003e{let b=()=\u003e{this._nativeAudioContext.removeEventListener(\"statechange\",b),this._nativeAudioContext.state===\"running\"?N():this.resume().then(N,S)};this._nativeAudioContext.addEventListener(\"statechange\",b)}):this._nativeAudioContext.resume().catch(N=\u003e{throw N===void 0||N.code===15?t():N})}suspend(){return this._nativeAudioContext.suspend().catch(N=\u003e{throw N===void 0?t():N})}})(Z0,Vt,Ye,Si,L5,B5,z5,G5,ya),nm=(K0=L0,l=\u003e{let t=K0.get(l);if(t===void 0)throw new Error(\"The context has no set of AudioWorkletNodes.\");return t});var K0;let $5=(Q0=nm,(l,t)=\u003e{Q0(l).add(t)});var Q0;let J0=(l=\u003e(t,i,c=0,p=0)=\u003e{let d=t[c];if(d===void 0)throw l();return va(i)?d.connect(i,0,p):d.connect(i,0)})(Y),H5=(l=\u003e(t,i)=\u003e{l(t).delete(i)})(nm),eN=(l=\u003e(t,i,c,p=0)=\u003ei===void 0?t.forEach(d=\u003ed.disconnect()):typeof i==\"number\"?wi(l,t,i).disconnect():va(i)?c===void 0?t.forEach(d=\u003ed.disconnect(i)):p===void 0?wi(l,t,c).disconnect(i,0):wi(l,t,c).disconnect(i,0,p):c===void 0?t.forEach(d=\u003ed.disconnect(i)):wi(l,t,c).disconnect(i,0))(Y),tN=new WeakMap,Y5=((l,t)=\u003ei=\u003et(l,i))(tN,H),X5=((l,t,i,c,p,d,m,g,_,N,S,b,P)=\u003e(w,U,D,E)=\u003e{if(E.numberOfInputs===0\u0026\u0026E.numberOfOutputs===0)throw _();let W=Array.isArray(E.outputChannelCount)?E.outputChannelCount:Array.from(E.outputChannelCount);if(W.some(we=\u003ewe\u003c1))throw _();if(W.length!==E.numberOfOutputs)throw t();if(E.channelCountMode!==\"explicit\")throw _();let K=E.channelCount*E.numberOfInputs,Z=W.reduce((we,dt)=\u003ewe+dt,0),Q=D.parameterDescriptors===void 0?0:D.parameterDescriptors.length;if(K+Q\u003e6||Z\u003e6)throw _();let re=new MessageChannel,te=[],ae=[];for(let we=0;we\u003cE.numberOfInputs;we+=1)te.push(m(w,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1})),ae.push(p(w,{channelCount:E.channelCount,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",numberOfOutputs:E.channelCount}));let be=[];if(D.parameterDescriptors!==void 0)for(let{defaultValue:we,maxValue:dt,minValue:xn,name:Dt}of D.parameterDescriptors){let pt=d(w,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",offset:E.parameterData[Dt]!==void 0?E.parameterData[Dt]:we===void 0?0:we});Object.defineProperties(pt.offset,{defaultValue:{get:()=\u003ewe===void 0?0:we},maxValue:{get:()=\u003edt===void 0?We:dt},minValue:{get:()=\u003exn===void 0?me:xn}}),be.push(pt)}let ue=c(w,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"speakers\",numberOfInputs:Math.max(1,K+Q)}),fe=_l(U,w.sampleRate),ve=g(w,fe,K+Q,Math.max(1,Z)),Te=p(w,{channelCount:Math.max(1,Z),channelCountMode:\"explicit\",channelInterpretation:\"discrete\",numberOfOutputs:Math.max(1,Z)}),Fe=[];for(let we=0;we\u003cE.numberOfOutputs;we+=1)Fe.push(c(w,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"speakers\",numberOfInputs:W[we]}));for(let we=0;we\u003cE.numberOfInputs;we+=1){te[we].connect(ae[we]);for(let dt=0;dt\u003cE.channelCount;dt+=1)ae[we].connect(ue,dt,we*E.channelCount+dt)}let ut=new _i(D.parameterDescriptors===void 0?[]:D.parameterDescriptors.map(({name:we},dt)=\u003e{let xn=be[dt];return xn.connect(ue,0,K+dt),xn.start(0),[we,xn.offset]}));ue.connect(ve);let Ee=E.channelInterpretation,Ke=null,st=E.numberOfOutputs===0?[ve]:Fe,$e={get bufferSize(){return fe},get channelCount(){return E.channelCount},set channelCount(we){throw i()},get channelCountMode(){return E.channelCountMode},set channelCountMode(we){throw i()},get channelInterpretation(){return Ee},set channelInterpretation(we){for(let dt of te)dt.channelInterpretation=we;Ee=we},get context(){return ve.context},get inputs(){return te},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get onprocessorerror(){return Ke},set onprocessorerror(we){typeof Ke==\"function\"\u0026\u0026$e.removeEventListener(\"processorerror\",Ke),Ke=typeof we==\"function\"?we:null,typeof Ke==\"function\"\u0026\u0026$e.addEventListener(\"processorerror\",Ke)},get parameters(){return ut},get port(){return re.port2},addEventListener:(...we)=\u003eve.addEventListener(we[0],we[1],we[2]),connect:l.bind(null,st),disconnect:N.bind(null,st),dispatchEvent:(...we)=\u003eve.dispatchEvent(we[0]),removeEventListener:(...we)=\u003eve.removeEventListener(we[0],we[1],we[2])},rt=new Map;var lt,Ht;re.port1.addEventListener=(lt=re.port1.addEventListener,(...we)=\u003e{if(we[0]===\"message\"){let dt=typeof we[1]==\"function\"?we[1]:typeof we[1]==\"object\"\u0026\u0026we[1]!==null\u0026\u0026typeof we[1].handleEvent==\"function\"?we[1].handleEvent:null;if(dt!==null){let xn=rt.get(we[1]);xn!==void 0?we[1]=xn:(we[1]=Dt=\u003e{S(w.currentTime,w.sampleRate,()=\u003edt(Dt))},rt.set(dt,we[1]))}}return lt.call(re.port1,we[0],we[1],we[2])}),re.port1.removeEventListener=(Ht=re.port1.removeEventListener,(...we)=\u003e{if(we[0]===\"message\"){let dt=rt.get(we[1]);dt!==void 0\u0026\u0026(rt.delete(we[1]),we[1]=dt)}return Ht.call(re.port1,we[0],we[1],we[2])});let an=null;Object.defineProperty(re.port1,\"onmessage\",{get:()=\u003ean,set:we=\u003e{typeof an==\"function\"\u0026\u0026re.port1.removeEventListener(\"message\",an),an=typeof we==\"function\"?we:null,typeof an==\"function\"\u0026\u0026(re.port1.addEventListener(\"message\",an),re.port1.start())}}),D.prototype.port=re.port1;let it=null;((we,dt,xn,Dt)=\u003e{let pt=ee.get(we);pt===void 0\u0026\u0026(pt=new WeakMap,ee.set(we,pt));let At=T(xn,Dt);return pt.set(dt,At),At})(w,$e,D,E).then(we=\u003eit=we);let je=Ga(E.numberOfInputs,E.channelCount),bn=Ga(E.numberOfOutputs,W),na=D.parameterDescriptors===void 0?[]:D.parameterDescriptors.reduce((we,{name:dt})=\u003e({...we,[dt]:new Float32Array(128)}),{}),or=!0,es=()=\u003e{E.numberOfOutputs\u003e0\u0026\u0026ve.disconnect(Te);for(let we=0,dt=0;we\u003cE.numberOfOutputs;we+=1){let xn=Fe[we];for(let Dt=0;Dt\u003cW[we];Dt+=1)Te.disconnect(xn,dt+Dt,Dt);dt+=W[we]}},ts=new Map;ve.onaudioprocess=({inputBuffer:we,outputBuffer:dt})=\u003e{if(it!==null){let xn=b($e);for(let Dt=0;Dt\u003cfe;Dt+=128){for(let pt=0;pt\u003cE.numberOfInputs;pt+=1)for(let At=0;At\u003cE.channelCount;At+=1)za(we,je[pt],At,At,Dt);D.parameterDescriptors!==void 0\u0026\u0026D.parameterDescriptors.forEach(({name:pt},At)=\u003e{za(we,na,pt,K+At,Dt)});for(let pt=0;pt\u003cE.numberOfInputs;pt+=1)for(let At=0;At\u003cW[pt];At+=1)bn[pt][At].byteLength===0\u0026\u0026(bn[pt][At]=new Float32Array(128));try{let pt=je.map((Nr,ns)=\u003e{if(xn[ns].size\u003e0)return ts.set(ns,fe/128),Nr;let rs=ts.get(ns);return rs===void 0?[]:(Nr.every(YF=\u003eYF.every(XF=\u003eXF===0))\u0026\u0026(rs===1?ts.delete(ns):ts.set(ns,rs-1)),Nr)});or=S(w.currentTime+Dt/w.sampleRate,w.sampleRate,()=\u003eit.process(pt,bn,na));for(let Nr=0,ns=0;Nr\u003cE.numberOfOutputs;Nr+=1){for(let rs=0;rs\u003cW[Nr];rs+=1)Os(dt,bn[Nr],rs,ns+rs,Dt);ns+=W[Nr]}}catch(pt){or=!1,$e.dispatchEvent(new ErrorEvent(\"processorerror\",{colno:pt.colno,filename:pt.filename,lineno:pt.lineno,message:pt.message}))}if(!or){for(let pt=0;pt\u003cE.numberOfInputs;pt+=1){te[pt].disconnect(ae[pt]);for(let At=0;At\u003cE.channelCount;At+=1)ae[Dt].disconnect(ue,At,pt*E.channelCount+At)}if(D.parameterDescriptors!==void 0){let pt=D.parameterDescriptors.length;for(let At=0;At\u003cpt;At+=1){let Nr=be[At];Nr.disconnect(ue,0,K+At),Nr.stop()}}ue.disconnect(ve),ve.onaudioprocess=null,Qt?es():EN();break}}}};let Qt=!1,zn=m(w,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",gain:0}),RN=()=\u003eve.connect(zn).connect(w.destination),EN=()=\u003e{ve.disconnect(zn),zn.disconnect()};return RN(),P($e,()=\u003e{if(or){EN(),E.numberOfOutputs\u003e0\u0026\u0026ve.connect(Te);for(let we=0,dt=0;we\u003cE.numberOfOutputs;we+=1){let xn=Fe[we];for(let Dt=0;Dt\u003cW[we];Dt+=1)Te.connect(xn,dt+Dt,Dt);dt+=W[we]}}Qt=!0},()=\u003e{or\u0026\u0026(RN(),es()),Qt=!1})})(J0,Y,Vt,$a,A,Ci,z,Ge,Ye,eN,tm,Y5,Ua),Z5=((l,t,i,c,p)=\u003e(d,m,g,_,N,S)=\u003e{if(g!==null)try{let w=new g(d,_,S),U=new Map,D=null;if(Object.defineProperties(w,{channelCount:{get:()=\u003eS.channelCount,set:()=\u003e{throw l()}},channelCountMode:{get:()=\u003e\"explicit\",set:()=\u003e{throw l()}},onprocessorerror:{get:()=\u003eD,set:E=\u003e{typeof D==\"function\"\u0026\u0026w.removeEventListener(\"processorerror\",D),D=typeof E==\"function\"?E:null,typeof D==\"function\"\u0026\u0026w.addEventListener(\"processorerror\",D)}}}),w.addEventListener=(P=w.addEventListener,(...E)=\u003e{if(E[0]===\"processorerror\"){let W=typeof E[1]==\"function\"?E[1]:typeof E[1]==\"object\"\u0026\u0026E[1]!==null\u0026\u0026typeof E[1].handleEvent==\"function\"?E[1].handleEvent:null;if(W!==null){let K=U.get(E[1]);K!==void 0?E[1]=K:(E[1]=Z=\u003e{Z.type===\"error\"?(Object.defineProperties(Z,{type:{value:\"processorerror\"}}),W(Z)):W(new ErrorEvent(E[0],{...Z}))},U.set(W,E[1]))}}return P.call(w,\"error\",E[1],E[2]),P.call(w,...E)}),w.removeEventListener=(b=w.removeEventListener,(...E)=\u003e{if(E[0]===\"processorerror\"){let W=U.get(E[1]);W!==void 0\u0026\u0026(U.delete(E[1]),E[1]=W)}return b.call(w,\"error\",E[1],E[2]),b.call(w,E[0],E[1],E[2])}),S.numberOfOutputs!==0){let E=i(d,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",gain:0});return w.connect(E).connect(d.destination),p(w,()=\u003eE.disconnect(),()=\u003eE.connect(d.destination))}return w}catch(w){throw w.code===11?c():w}var b,P;if(N===void 0)throw c();return(w=\u003e{let{port1:U}=new MessageChannel;try{U.postMessage(w)}finally{U.close()}})(S),t(d,m,N,S)})(Vt,X5,z,Ye,Ua),K5=((l,t,i,c,p,d,m,g,_,N,S,b,P,w,U,D)=\u003e(E,W,K)=\u003e{let Z=new WeakMap,Q=null;return{render(re,te,ae){g(te,re);let be=Z.get(te);return be!==void 0?Promise.resolve(be):(async(ue,fe,ve)=\u003e{let Te=S(ue),Fe=null,ut=X(Te,fe),Ee=Array.isArray(W.outputChannelCount)?W.outputChannelCount:Array.from(W.outputChannelCount);if(b===null){let Ke=Ee.reduce((lt,Ht)=\u003elt+Ht,0),st=p(fe,{channelCount:Math.max(1,Ke),channelCountMode:\"explicit\",channelInterpretation:\"discrete\",numberOfOutputs:Math.max(1,Ke)}),$e=[];for(let lt=0;lt\u003cue.numberOfOutputs;lt+=1)$e.push(c(fe,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"speakers\",numberOfInputs:Ee[lt]}));let rt=m(fe,{channelCount:W.channelCount,channelCountMode:W.channelCountMode,channelInterpretation:W.channelInterpretation,gain:1});rt.connect=t.bind(null,$e),rt.disconnect=_.bind(null,$e),Fe=[st,$e,rt]}else ut||(Te=new b(fe,E));if(Z.set(fe,Fe===null?Te:Fe[2]),Fe!==null){if(Q===null){if(K===void 0)throw new Error(\"Missing the processor constructor.\");if(P===null)throw new Error(\"Missing the native OfflineAudioContext constructor.\");let Ht=ue.channelCount*ue.numberOfInputs,an=K.parameterDescriptors===void 0?0:K.parameterDescriptors.length,it=Ht+an;Q=cc(ue,it===0?null:await(async()=\u003e{let bn=new P(it,128*Math.ceil(ue.context.length/128),fe.sampleRate),na=[],or=[];for(let Qt=0;Qt\u003cW.numberOfInputs;Qt+=1)na.push(m(bn,{channelCount:W.channelCount,channelCountMode:W.channelCountMode,channelInterpretation:W.channelInterpretation,gain:1})),or.push(p(bn,{channelCount:W.channelCount,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",numberOfOutputs:W.channelCount}));let es=await Promise.all(Array.from(ue.parameters.values()).map(async Qt=\u003e{let zn=d(bn,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"discrete\",offset:Qt.value});return await w(bn,Qt,zn.offset,ve),zn})),ts=c(bn,{channelCount:1,channelCountMode:\"explicit\",channelInterpretation:\"speakers\",numberOfInputs:Math.max(1,Ht+an)});for(let Qt=0;Qt\u003cW.numberOfInputs;Qt+=1){na[Qt].connect(or[Qt]);for(let zn=0;zn\u003cW.channelCount;zn+=1)or[Qt].connect(ts,zn,Qt*W.channelCount+zn)}for(let[Qt,zn]of es.entries())zn.connect(ts,0,Ht+Qt),zn.start(0);return ts.connect(bn.destination),await Promise.all(na.map(Qt=\u003eU(ue,bn,Qt,ve))),D(bn)})(),fe,W,Ee,K,N)}let Ke=await Q,st=i(fe,{buffer:null,channelCount:2,channelCountMode:\"max\",channelInterpretation:\"speakers\",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[$e,rt,lt]=Fe;Ke!==null\u0026\u0026(st.buffer=Ke,st.start(0)),st.connect($e);for(let Ht=0,an=0;Ht\u003cue.numberOfOutputs;Ht+=1){let it=rt[Ht];for(let je=0;je\u003cEe[Ht];je+=1)$e.connect(it,an+je,je);an+=Ee[Ht]}return lt}if(ut)for(let[Ke,st]of ue.parameters.entries())await l(fe,st,Te.parameters.get(Ke),ve);else for(let[Ke,st]of ue.parameters.entries())await w(fe,st,Te.parameters.get(Ke),ve);return await U(ue,fe,Te,ve),Te})(re,te,ae)}}})(Xr,J0,Oi,$a,A,Ci,z,H5,eN,tm,vt,wl,un,Zr,gn,bl),Q5=(l=\u003et=\u003el.get(t))(X0),J5=(l=\u003e(t,i)=\u003e{l.set(t,i)})(tN),nN=Y0?((l,t,i,c,p,d,m,g,_,N,S,b,P)=\u003eclass extends t{constructor(w,U,D){var E;let W=g(w),K=_(W),Z=S({...ki,...D}),Q=B.get(W),re=Q==null?void 0:Q.get(U),te=K||W.state!==\"closed\"?W:(E=m(W))!==null\u0026\u0026E!==void 0?E:W,ae=p(te,K?null:w.baseLatency,N,U,re,Z);super(w,!0,ae,K?c(U,Z,re):null);let be=[];ae.parameters.forEach((fe,ve)=\u003e{let Te=i(this,K,fe);be.push([ve,Te])}),this._nativeAudioWorkletNode=ae,this._onprocessorerror=null,this._parameters=new _i(be),K\u0026\u0026l(W,this);let{activeInputs:ue}=d(this);b(ae,ue)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(w){let U=typeof w==\"function\"?P(this,w):null;this._nativeAudioWorkletNode.onprocessorerror=U;let D=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=D!==null\u0026\u0026D===U?w:D}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})($5,$t,Dr,K5,Z5,le,Q5,Mt,_t,wl,l=\u003e({...l,outputChannelCount:l.outputChannelCount!==void 0?l.outputChannelCount:l.numberOfInputs===1\u0026\u0026l.numberOfOutputs===1?[l.channelCount]:Array.from({length:l.numberOfOutputs},()=\u003e1)}),J5,Pi):void 0,rN=(((l,t,i,c,p)=\u003e{})(Vt,Ye,Si,em,ya),((l,t)=\u003e(i,c,p)=\u003e{if(t===null)throw new Error(\"Missing the native OfflineAudioContext constructor.\");try{return new t(i,c,p)}catch(d){throw d.name===\"SyntaxError\"?l():d}})(Ye,un)),aN=((l,t,i,c,p,d,m,g)=\u003e{let _=[];return(N,S)=\u003ei(N).render(N,S,_).then(()=\u003ePromise.all(Array.from(c(S)).map(b=\u003ei(b).render(b,S,_)))).then(()=\u003ep(S)).then(b=\u003e(typeof b.copyFromChannel!=\"function\"?(m(b),J(b)):t(d,()=\u003ed(b))||g(b),l.add(b),b))})($f,tr,Lf,nm,bl,oe,Yf,Xf),eF=(((l,t,i,c,p)=\u003e{})(tr,Vt,rN,em,aN),((l,t,i,c,p)=\u003eclass extends l{constructor(d,m,g){let _;if(typeof d==\"number\"\u0026\u0026m!==void 0\u0026\u0026g!==void 0)_={length:m,numberOfChannels:d,sampleRate:g};else{if(typeof d!=\"object\")throw new Error(\"The given parameters are not valid.\");_=d}let{length:N,numberOfChannels:S,sampleRate:b}={...ht,..._},P=c(S,N,b);t(Cs,()=\u003eCs(P))||P.addEventListener(\"statechange\",(()=\u003e{let w=0,U=D=\u003e{this._state===\"running\"\u0026\u0026(w\u003e0?(P.removeEventListener(\"statechange\",U),D.stopImmediatePropagation(),this._waitForThePromiseToSettle(D)):w+=1)};return U})()),super(P,S),this._length=N,this._nativeOfflineAudioContext=P,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state===\"running\"?Promise.reject(i()):(this._state=\"running\",p(this.destination,this._nativeOfflineAudioContext).finally(()=\u003e{this._state=null,Be(this)}))}_waitForThePromiseToSettle(d){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(d):setTimeout(()=\u003ethis._waitForThePromiseToSettle(d))}})(Z0,tr,Vt,rN,aN)),tF=((l,t)=\u003ei=\u003e{let c=l.get(i);return t(c)||t(i)})(M,zf),nF=(sN=k,iN=Uf,l=\u003esN.has(l)||iN(l));var sN,iN;let rF=(oN=x,cN=x0,l=\u003eoN.has(l)||cN(l));var oN,cN;let aF=((l,t)=\u003ei=\u003e{let c=l.get(i);return t(c)||t(i)})(M,_t),sF=()=\u003e(async(l,t,i,c,p,d,m,g,_,N,S,b,P,w,U,D)=\u003el(t,t)\u0026\u0026l(i,i)\u0026\u0026l(p,p)\u0026\u0026l(d,d)\u0026\u0026l(g,g)\u0026\u0026l(_,_)\u0026\u0026l(N,N)\u0026\u0026l(S,S)\u0026\u0026l(b,b)\u0026\u0026l(P,P)\u0026\u0026l(w,w)?(await Promise.all([l(c,c),l(m,m),l(U,U),l(D,D)])).every(E=\u003eE):!1)(tr,(l=\u003e()=\u003e{if(l===null)return!1;let t=new l(1,1,44100).createBuffer(1,1,44100);if(t.copyToChannel===void 0)return!0;let i=new Float32Array(2);try{t.copyFromChannel(i,0,0)}catch{return!1}return!0})(un),(l=\u003e()=\u003e{if(l===null)return!1;if(l.prototype!==void 0\u0026\u0026l.prototype.close!==void 0)return!0;let t=new l,i=t.close!==void 0;try{t.close()}catch{}return i})(ya),(l=\u003e()=\u003e{if(l===null)return Promise.resolve(!1);let t=new l(1,1,44100);return new Promise(i=\u003e{let c=!0,p=m=\u003e{c\u0026\u0026(c=!1,t.startRendering(),i(m instanceof TypeError))},d;try{d=t.decodeAudioData(null,()=\u003e{},p)}catch(m){p(m)}d!==void 0\u0026\u0026d.catch(p)})})(un),(l=\u003e()=\u003e{if(l===null)return!1;let t;try{t=new l({latencyHint:\"balanced\"})}catch{return!1}return t.close(),!0})(ya),(l=\u003e()=\u003e{if(l===null)return!1;let t=new l(1,1,44100).createGain(),i=t.connect(t)===t;return t.disconnect(t),i})(un),((l,t)=\u003easync()=\u003e{if(l===null)return!0;if(t===null)return!1;let i=new Blob(['class A extends AudioWorkletProcessor{process(){this.port.postMessage(0)}}registerProcessor(\"a\",A)'],{type:\"application/javascript; charset=utf-8\"}),c=new t(1,128,8e3),p=URL.createObjectURL(i),d=!1;try{await c.audioWorklet.addModule(p);let m=new l(c,\"a\",{numberOfOutputs:0}),g=c.createOscillator();m.port.onmessage=()=\u003ed=!0,g.connect(m),g.start(0),await c.startRendering(),d||await new Promise(_=\u003esetTimeout(_,5))}catch{}finally{URL.revokeObjectURL(p)}return d})(wl,un),(l=\u003e()=\u003e{if(l===null)return!1;let t=new l(1,1,44100).createChannelMerger();if(t.channelCountMode===\"max\")return!0;try{t.channelCount=2}catch{return!0}return!1})(un),(l=\u003e()=\u003e{if(l===null)return!1;let t=new l(1,1,44100);return t.createConstantSource===void 0?!0:t.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY})(un),(l=\u003e()=\u003e{if(l===null)return!1;let t=new l(1,1,44100),i=t.createConvolver();i.buffer=t.createBuffer(1,1,t.sampleRate);try{i.buffer=t.createBuffer(1,1,t.sampleRate)}catch{return!1}return!0})(un),(l=\u003e()=\u003e{if(l===null)return!1;let t=new l(1,1,44100).createConvolver();try{t.channelCount=1}catch{return!1}return!0})(un),r5,(l=\u003e()=\u003el!==null\u0026\u0026l.hasOwnProperty(\"isSecureContext\"))(jr),(l=\u003e()=\u003e{if(l===null)return!1;let t=new l;try{return t.createMediaStreamSource(new MediaStream),!1}catch(i){return!0}})(ya),(l=\u003e()=\u003e{if(l===null)return Promise.resolve(!1);let t=new l(1,1,44100);if(t.createStereoPanner===void 0||t.createConstantSource===void 0)return Promise.resolve(!0);let i=t.createConstantSource(),c=t.createStereoPanner();return i.channelCount=1,i.offset.value=1,c.channelCount=1,i.start(),i.connect(c).connect(t.destination),t.startRendering().then(p=\u003ep.getChannelData(0)[0]!==1)})(un),a5);function Ae(l,t){if(!l)throw new Error(t)}function yn(l,t,i=1/0){if(!(t\u003c=l\u0026\u0026l\u003c=i))throw new RangeError(`Value must be within [${t}, ${i}], got: ${l}`)}function rm(l){l.isOffline||l.state===\"running\"||dc('The AudioContext is \"suspended\". Invoke Tone.start() from a user action to start the audio.')}let am=console;function iF(l){am=l}function uN(...l){am.log(...l)}function dc(...l){am.warn(...l)}function Vn(l){return l===void 0}function Je(l){return!Vn(l)}function lN(l){return typeof l==\"function\"}function nr(l){return typeof l==\"number\"}function _a(l){return Object.prototype.toString.call(l)===\"[object Object]\"\u0026\u0026l.constructor===Object}function sm(l){return typeof l==\"boolean\"}function _n(l){return Array.isArray(l)}function gr(l){return typeof l==\"string\"}function fc(l){return gr(l)\u0026\u0026/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(l)}let ka=typeof self==\"object\"?self:null,oF=ka\u0026\u0026(ka.hasOwnProperty(\"AudioContext\")||ka.hasOwnProperty(\"webkitAudioContext\"));function Ir(l,t,i,c){var p,d=arguments.length,m=d\u003c3?t:c===null?c=Object.getOwnPropertyDescriptor(t,i):c;if(typeof Reflect==\"object\"\u0026\u0026typeof Reflect.decorate==\"function\")m=Reflect.decorate(l,t,i,c);else for(var g=l.length-1;g\u003e=0;g--)(p=l[g])\u0026\u0026(m=(d\u003c3?p(m):d\u003e3?p(t,i,m):p(t,i))||m);return d\u003e3\u0026\u0026m\u0026\u0026Object.defineProperty(t,i,m),m}function xt(l,t,i,c){return new(i||(i=Promise))(function(p,d){function m(N){try{_(c.next(N))}catch(S){d(S)}}function g(N){try{_(c.throw(N))}catch(S){d(S)}}function _(N){var S;N.done?p(N.value):(S=N.value,S instanceof i?S:new i(function(b){b(S)})).then(m,g)}_((c=c.apply(l,t||[])).next())})}class cF{constructor(t,i,c){this._callback=t,this._type=i,this._updateInterval=c,this._createClock()}_createWorker(){let t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:\"text/javascript\"}),i=URL.createObjectURL(t),c=new Worker(i);c.onmessage=this._callback.bind(this),this._worker=c}_createTimeout(){this._timeout=setTimeout(()=\u003e{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if(this._type===\"worker\")try{this._createWorker()}catch(t){this._type=\"timeout\",this._createClock()}else this._type===\"timeout\"\u0026\u0026this._createTimeout()}_disposeClock(){this._timeout\u0026\u0026(clearTimeout(this._timeout),this._timeout=0),this._worker\u0026\u0026(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),this._type===\"worker\"\u0026\u0026this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Es(l){return rF(l)}function Ha(l){return nF(l)}function ql(l){return aF(l)}function Ai(l){return tF(l)}function pN(l){return l instanceof AudioBuffer}function uF(l,t){return l===\"value\"||Es(t)||Ha(t)||pN(t)}function yr(l,...t){if(!t.length)return l;let i=t.shift();if(_a(l)\u0026\u0026_a(i))for(let c in i)uF(c,i[c])?l[c]=i[c]:_a(i[c])?(l[c]||Object.assign(l,{[c]:{}}),yr(l[c],i[c])):Object.assign(l,{[c]:i[c]});return yr(l,...t)}function V(l,t,i=[],c){let p={},d=Array.from(t);if(_a(d[0])\u0026\u0026c\u0026\u0026!Reflect.has(d[0],c)\u0026\u0026(Object.keys(d[0]).some(m=\u003eReflect.has(l,m))||(yr(p,{[c]:d[0]}),i.splice(i.indexOf(c),1),d.shift())),d.length===1\u0026\u0026_a(d[0]))yr(p,d[0]);else for(let m=0;m\u003ci.length;m++)Je(d[m])\u0026\u0026(p[i[m]]=d[m]);return yr(l,p)}function _r(l,t){return Vn(l)?t:l}function kn(l,t){return t.forEach(i=\u003e{Reflect.has(l,i)\u0026\u0026delete l[i]}),l}class Na{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||ka\u0026\u0026this.toString()===ka.TONE_DEBUG_CLASS)\u0026\u0026uN(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Na.version=u;function Tl(l,t){return l\u003et+1e-6}function im(l,t){return Tl(l,t)||Fr(l,t)}function hN(l,t){return l+1e-6\u003ct}function Fr(l,t){return Math.abs(l-t)\u003c1e-6}function dN(l,t,i){return Math.max(Math.min(l,i),t)}class Vr extends Na{constructor(){super(),this.name=\"Timeline\",this._timeline=[];let t=V(Vr.getDefaults(),arguments,[\"memory\"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Ae(Reflect.has(t,\"time\"),\"Timeline: events must have a time attribute\"),t.time=t.time.valueOf(),this.increasing\u0026\u0026this.length){let i=this._timeline[this.length-1];Ae(im(t.time,i.time),\"The time must be greater than or equal to the last scheduled time\"),this._timeline.push(t)}else{let i=this._search(t.time);this._timeline.splice(i+1,0,t)}if(this.length\u003ethis.memory){let i=this.length-this.memory;this._timeline.splice(0,i)}return this}remove(t){let i=this._timeline.indexOf(t);return i!==-1\u0026\u0026this._timeline.splice(i,1),this}get(t,i=\"time\"){let c=this._search(t,i);return c!==-1?this._timeline[c]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,i=\"time\"){let c=this._search(t,i);return c+1\u003cthis._timeline.length?this._timeline[c+1]:null}getBefore(t){let i=this._timeline.length;if(i\u003e0\u0026\u0026this._timeline[i-1].time\u003ct)return this._timeline[i-1];let c=this._search(t);return c-1\u003e=0?this._timeline[c-1]:null}cancel(t){if(this._timeline.length\u003e1){let i=this._search(t);if(i\u003e=0)if(Fr(this._timeline[i].time,t)){for(let c=i;c\u003e=0\u0026\u0026Fr(this._timeline[c].time,t);c--)i=c;this._timeline=this._timeline.slice(0,i)}else this._timeline=this._timeline.slice(0,i+1);else this._timeline=[]}else this._timeline.length===1\u0026\u0026im(this._timeline[0].time,t)\u0026\u0026(this._timeline=[]);return this}cancelBefore(t){let i=this._search(t);return i\u003e=0\u0026\u0026(this._timeline=this._timeline.slice(i+1)),this}previousEvent(t){let i=this._timeline.indexOf(t);return i\u003e0?this._timeline[i-1]:null}_search(t,i=\"time\"){if(this._timeline.length===0)return-1;let c=0,p=this._timeline.length,d=p;if(p\u003e0\u0026\u0026this._timeline[p-1][i]\u003c=t)return p-1;for(;c\u003cd;){let m=Math.floor(c+(d-c)/2),g=this._timeline[m],_=this._timeline[m+1];if(Fr(g[i],t)){for(let N=m;N\u003cthis._timeline.length\u0026\u0026Fr(this._timeline[N][i],t);N++)m=N;return m}if(hN(g[i],t)\u0026\u0026Tl(_[i],t))return m;Tl(g[i],t)?d=m:c=m+1}return-1}_iterate(t,i=0,c=this._timeline.length-1){this._timeline.slice(i,c+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,i){let c=this._search(t);return c!==-1\u0026\u0026this._iterate(i,0,c),this}forEachAfter(t,i){let c=this._search(t);return this._iterate(i,c+1),this}forEachBetween(t,i,c){let p=this._search(t),d=this._search(i);return p!==-1\u0026\u0026d!==-1?(this._timeline[p].time!==t\u0026\u0026(p+=1),this._timeline[d].time===i\u0026\u0026(d-=1),this._iterate(c,p,d)):p===-1\u0026\u0026this._iterate(c,0,d),this}forEachFrom(t,i){let c=this._search(t);for(;c\u003e=0\u0026\u0026this._timeline[c].time\u003e=t;)c--;return this._iterate(i,c+1),this}forEachAtTime(t,i){let c=this._search(t);if(c!==-1\u0026\u0026Fr(this._timeline[c].time,t)){let p=c;for(let d=c;d\u003e=0\u0026\u0026Fr(this._timeline[d].time,t);d--)p=d;this._iterate(d=\u003e{i(d)},p,c)}return this}dispose(){return super.dispose(),this._timeline=[],this}}let fN=[];function Sl(l){fN.push(l)}let mN=[];function Ml(l){mN.push(l)}class Ri extends Na{constructor(){super(...arguments),this.name=\"Emitter\"}on(t,i){return t.split(/\\W+/).forEach(c=\u003e{Vn(this._events)\u0026\u0026(this._events={}),this._events.hasOwnProperty(c)||(this._events[c]=[]),this._events[c].push(i)}),this}once(t,i){let c=(...p)=\u003e{i(...p),this.off(t,c)};return this.on(t,c),this}off(t,i){return t.split(/\\W+/).forEach(c=\u003e{if(Vn(this._events)\u0026\u0026(this._events={}),this._events.hasOwnProperty(t))if(Vn(i))this._events[t]=[];else{let p=this._events[t];for(let d=p.length-1;d\u003e=0;d--)p[d]===i\u0026\u0026p.splice(d,1)}}),this}emit(t,...i){if(this._events\u0026\u0026this._events.hasOwnProperty(t)){let c=this._events[t].slice(0);for(let p=0,d=c.length;p\u003cd;p++)c[p].apply(this,i)}return this}static mixin(t){[\"on\",\"once\",\"off\",\"emit\"].forEach(i=\u003e{let c=Object.getOwnPropertyDescriptor(Ri.prototype,i);Object.defineProperty(t.prototype,i,c)})}dispose(){return super.dispose(),this._events=void 0,this}}class om extends Ri{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Ei extends om{constructor(){super(),this.name=\"Context\",this._constants=new Map,this._timeouts=new Vr,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;let t=V(Ei.getDefaults(),arguments,[\"context\"]);t.context?this._context=t.context:this._context=function(i){return new U5(i)}({latencyHint:t.latencyHint}),this._ticker=new cF(this.emit.bind(this,\"tick\"),t.clockSource,t.updateInterval),this.on(\"tick\",this._timeoutLoop.bind(this)),this._context.onstatechange=()=\u003e{this.emit(\"statechange\",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:\"worker\",latencyHint:\"interactive\",lookAhead:.1,updateInterval:.05}}initialize(){var t;return this._initialized||(t=this,fN.forEach(i=\u003ei(t)),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,i,c){return this._context.createBuffer(t,i,c)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,i){return this._context.createIIRFilter(t,i)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,i,c){return this._context.createPeriodicWave(t,i,c)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return Ae(Ai(this._context),\"Not available if OfflineAudioContext\"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return Ae(Ai(this._context),\"Not available if OfflineAudioContext\"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return Ae(Ai(this._context),\"Not available if OfflineAudioContext\"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Ae(!this._initialized,\"The listener cannot be set after initialization.\"),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Ae(!this._initialized,\"The transport cannot be set after initialization.\"),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Ae(!this._initialized,\"Draw cannot be set after initialization.\"),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Ae(!this._initialized,\"The destination cannot be set after initialization.\"),this._destination=t}createAudioWorkletNode(t,i){return function(c,p,d){return Ae(Je(nN),\"This node only works in a secure context (https or localhost)\"),new nN(c,p,d)}(this.rawContext,t,i)}addAudioWorkletModule(t,i){return xt(this,void 0,void 0,function*(){Ae(Je(this.rawContext.audioWorklet),\"AudioWorkletNode is only available in a secure context (https or localhost)\"),this._workletModules.has(i)||this._workletModules.set(i,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(i)})}workletsAreReady(){return xt(this,void 0,void 0,function*(){let t=[];this._workletModules.forEach(i=\u003et.push(i)),yield Promise.all(t)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let i=0;if(this._latencyHint=t,gr(t))switch(t){case\"interactive\":i=.1;break;case\"playback\":i=.5;break;case\"balanced\":i=.25}this.lookAhead=i,this.updateInterval=i/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Ai(this._context)?this._context.resume():Promise.resolve()}close(){return xt(this,void 0,void 0,function*(){var t;Ai(this._context)\u0026\u0026(yield this._context.close()),this._initialized\u0026\u0026(t=this,mN.forEach(i=\u003ei(t)))})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{let i=this._context.createBuffer(1,128,this._context.sampleRate),c=i.getChannelData(0);for(let d=0;d\u003cc.length;d++)c[d]=t;let p=this._context.createBufferSource();return p.channelCount=1,p.channelCountMode=\"explicit\",p.buffer=i,p.loop=!0,p.start(0),this._constants.set(t,p),p}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=\u003ethis._constants[t].disconnect()),this}_timeoutLoop(){let t=this.now(),i=this._timeouts.peek();for(;this._timeouts.length\u0026\u0026i\u0026\u0026i.time\u003c=t;)i.callback(),this._timeouts.shift(),i=this._timeouts.peek()}setTimeout(t,i){this._timeoutIds++;let c=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:c+i}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(i=\u003e{i.id===t\u0026\u0026this._timeouts.remove(i)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,i){let c=++this._timeoutIds,p=()=\u003e{let d=this.now();this._timeouts.add({callback:()=\u003e{t(),p()},id:c,time:d+i})};return p(),c}}function Ie(l,t){_n(t)?t.forEach(i=\u003eIe(l,i)):Object.defineProperty(l,t,{enumerable:!0,writable:!1})}function mc(l,t){_n(t)?t.forEach(i=\u003emc(l,i)):Object.defineProperty(l,t,{writable:!0})}let at=()=\u003e{};class ct extends Na{constructor(){super(),this.name=\"ToneAudioBuffer\",this.onload=at;let t=V(ct.getDefaults(),arguments,[\"url\",\"onload\",\"onerror\"]);this.reverse=t.reverse,this.onload=t.onload,t.url\u0026\u0026pN(t.url)||t.url instanceof ct?this.set(t.url):gr(t.url)\u0026\u0026this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:at,onload:at,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Pt().sampleRate}set(t){return t instanceof ct?t.loaded?this._buffer=t.get():t.onload=()=\u003e{this.set(t),this.onload(this)}:this._buffer=t,this._reversed\u0026\u0026this._reverse(),this}get(){return this._buffer}load(t){return xt(this,void 0,void 0,function*(){let i=ct.load(t).then(c=\u003e{this.set(c),this.onload(this)});ct.downloads.push(i);try{yield i}finally{let c=ct.downloads.indexOf(i);ct.downloads.splice(c,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){let i=_n(t)\u0026\u0026t[0].length\u003e0,c=i?t.length:1,p=i?t[0].length:t.length,d=Pt(),m=d.createBuffer(c,p,d.sampleRate),g=i||c!==1?t:[t];for(let _=0;_\u003cc;_++)m.copyToChannel(g[_],_);return this._buffer=m,this}toMono(t){if(nr(t))this.fromArray(this.toArray(t));else{let i=new Float32Array(this.length),c=this.numberOfChannels;for(let p=0;p\u003cc;p++){let d=this.toArray(p);for(let m=0;m\u003cd.length;m++)i[m]+=d[m]}i=i.map(p=\u003ep/c),this.fromArray(i)}return this}toArray(t){if(nr(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{let i=[];for(let c=0;c\u003cthis.numberOfChannels;c++)i[c]=this.getChannelData(c);return i}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,i=this.duration){let c=Math.floor(t*this.sampleRate),p=Math.floor(i*this.sampleRate);Ae(c\u003cp,\"The start time must be less than the end time\");let d=p-c,m=Pt().createBuffer(this.numberOfChannels,d,this.sampleRate);for(let g=0;g\u003cthis.numberOfChannels;g++)m.copyToChannel(this.getChannelData(g).subarray(c,p),g);return new ct(m)}_reverse(){if(this.loaded)for(let t=0;t\u003cthis.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length\u003e0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t\u0026\u0026(this._reversed=t,this._reverse())}static fromArray(t){return new ct().fromArray(t)}static fromUrl(t){return xt(this,void 0,void 0,function*(){return yield new ct().load(t)})}static load(t){return xt(this,void 0,void 0,function*(){let i=t.match(/\\[([^\\]\\[]+\\|.+)\\]$/);if(i){let m=i[1].split(\"|\"),g=m[0];for(let _ of m)if(ct.supportsType(_)){g=_;break}t=t.replace(i[0],g)}let c=ct.baseUrl===\"\"||ct.baseUrl.endsWith(\"/\")?ct.baseUrl:ct.baseUrl+\"/\",p=yield fetch(c+t);if(!p.ok)throw new Error(\"could not load url: \"+t);let d=yield p.arrayBuffer();return yield Pt().decodeAudioData(d)})}static supportsType(t){let i=t.split(\".\"),c=i[i.length-1];return document.createElement(\"audio\").canPlayType(\"audio/\"+c)!==\"\"}static loaded(){return xt(this,void 0,void 0,function*(){for(yield Promise.resolve();ct.downloads.length;)yield ct.downloads[0]})}}ct.baseUrl=\"\",ct.downloads=[];class ji extends Ei{constructor(){var t,i,c;super({clockSource:\"offline\",context:ql(arguments[0])?arguments[0]:(t=arguments[0],i=arguments[1]*arguments[2],c=arguments[2],new eF(t,i,c)),lookAhead:0,updateInterval:ql(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name=\"OfflineContext\",this._currentTime=0,this.isOffline=!0,this._duration=ql(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return xt(this,void 0,void 0,function*(){let i=0;for(;this._duration-this._currentTime\u003e=0;){this.emit(\"tick\"),this._currentTime+=128/this.sampleRate,i++;let c=Math.floor(this.sampleRate/128);t\u0026\u0026i%c==0\u0026\u0026(yield new Promise(p=\u003esetTimeout(p,1)))}})}render(t=!0){return xt(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);let i=yield this._context.startRendering();return new ct(i)})}close(){return Promise.resolve()}}let vN=new class extends om{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(l,t,i){return{}}createChannelMerger(l){return{}}createChannelSplitter(l){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(l){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(l,t){return{}}createPanner(){return{}}createPeriodicWave(l,t,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(l){return{}}createMediaElementSource(l){return{}}createMediaStreamDestination(){return{}}decodeAudioData(l){return Promise.resolve({})}createAudioWorkletNode(l,t){return{}}get rawContext(){return{}}addAudioWorkletModule(l,t){return xt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(l,t){return 0}clearTimeout(l){return this}setInterval(l,t){return 0}clearInterval(l){return this}getConstant(l){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(l){}get destination(){return{}}set destination(l){}now(){return 0}immediate(){return 0}},Pl=vN;function Pt(){return Pl===vN\u0026\u0026oF\u0026\u0026Ol(new Ei),Pl}function Ol(l){Pl=Ai(l)?new Ei(l):ql(l)?new ji(l):l}function lF(){return Pl.resume()}if(ka\u0026\u0026!ka.TONE_SILENCE_LOGGING){let l=\"v\";u===\"dev\"\u0026\u0026(l=\"\");let t=` * Tone.js ${l}${u} * `;console.log(\"%c\"+t,\"background: #000; color: #fff\")}function Di(l){return Math.pow(10,l/20)}function vc(l){return Math.log(l)/Math.LN10*20}function Ii(l){return Math.pow(2,l/12)}let Cl=440;function Ya(l){return Math.round(gN(l))}function gN(l){return 69+12*Math.log2(l/Cl)}function cm(l){return Cl*Math.pow(2,(l-69)/12)}class um extends Na{constructor(t,i,c){super(),this.defaultUnits=\"s\",this._val=i,this._units=c,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=\u003ethis._frequencyToUnits(parseFloat(t)),regexp:/^(\\d+(?:\\.\\d+)?)hz$/i},i:{method:t=\u003ethis._ticksToUnits(parseInt(t,10)),regexp:/^(\\d+)i$/i},m:{method:t=\u003ethis._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\\d+)m$/i},n:{method:(t,i)=\u003e{let c=parseInt(t,10),p=i===\".\"?1.5:1;return c===1?this._beatsToUnits(this._getTimeSignature())*p:this._beatsToUnits(4/c)*p},regexp:/^(\\d+)n(\\.?)$/i},number:{method:t=\u003ethis._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\\d+(?:\\.\\d+)?)$/},s:{method:t=\u003ethis._secondsToUnits(parseFloat(t)),regexp:/^(\\d+(?:\\.\\d+)?)s$/},samples:{method:t=\u003eparseInt(t,10)/this.context.sampleRate,regexp:/^(\\d+)samples$/},t:{method:t=\u003e{let i=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(i)))},regexp:/^(\\d+)t$/i},tr:{method:(t,i,c)=\u003e{let p=0;return t\u0026\u0026t!==\"0\"\u0026\u0026(p+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),i\u0026\u0026i!==\"0\"\u0026\u0026(p+=this._beatsToUnits(parseFloat(i))),c\u0026\u0026c!==\"0\"\u0026\u0026(p+=this._beatsToUnits(parseFloat(c)/4)),p},regexp:/^(\\d+(?:\\.\\d+)?):(\\d+(?:\\.\\d+)?):?(\\d+(?:\\.\\d+)?)?$/}}}valueOf(){if(this._val instanceof um\u0026\u0026this.fromType(this._val),Vn(this._val))return this._noArg();if(gr(this._val)\u0026\u0026Vn(this._units)){for(let t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(_a(this._val)){let t=0;for(let i in this._val)if(Je(this._val[i])){let c=this._val[i];t+=new this.constructor(this.context,i).valueOf()*c}return t}if(Je(this._units)){let t=this._expressions[this._units],i=this._val.toString().trim().match(t.regexp);return i?t.method.apply(this,i.slice(1)):t.method.call(this,this._val)}return gr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case\"s\":this._val=t.toSeconds();break;case\"i\":this._val=t.toTicks();break;case\"hz\":this._val=t.toFrequency();break;case\"midi\":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class rr extends um{constructor(){super(...arguments),this.name=\"TimeClass\"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=\u003ethis._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\\+(.+)/},quantize:{method:t=\u003e{let i=new rr(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(i))},regexp:/^@(.+)/}})}quantize(t,i=1){let c=new this.constructor(this.context,t).valueOf(),p=this.valueOf();return p+(Math.round(p/c)*c-p)*i}toNotation(){let t=this.toSeconds(),i=[\"1m\"];for(let d=1;d\u003c9;d++){let m=Math.pow(2,d);i.push(m+\"n.\"),i.push(m+\"n\"),i.push(m+\"t\")}i.push(\"0\");let c=i[0],p=new rr(this.context,i[0]).toSeconds();return i.forEach(d=\u003e{let m=new rr(this.context,d).toSeconds();Math.abs(m-t)\u003cMath.abs(p-t)\u0026\u0026(c=d,p=m)}),c}toBarsBeatsSixteenths(){let t=this._beatsToUnits(1),i=this.valueOf()/t;i=parseFloat(i.toFixed(4));let c=Math.floor(i/this._getTimeSignature()),p=i%1*4;i=Math.floor(i)%this._getTimeSignature();let d=p.toString();return d.length\u003e3\u0026\u0026(p=parseFloat(parseFloat(d).toFixed(3))),[c,i,p].join(\":\")}toTicks(){let t=this._beatsToUnits(1),i=this.valueOf()/t;return Math.round(i*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Ya(this.toFrequency())}_now(){return this.context.now()}}function pF(l,t){return new rr(Pt(),l,t)}class jn extends rr{constructor(){super(...arguments),this.name=\"Frequency\",this.defaultUnits=\"hz\"}static get A4(){return Cl}static set A4(t){(function(i){Cl=i})(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\\d+(?:\\.\\d+)?midi)/,method(t){return this.defaultUnits===\"midi\"?t:jn.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,i){let c=hF[t.toLowerCase()]+12*(parseInt(i,10)+1);return this.defaultUnits===\"midi\"?c:jn.mtof(c)}},tr:{regexp:/^(\\d+(?:\\.\\d+)?):(\\d+(?:\\.\\d+)?):?(\\d+(?:\\.\\d+)?)?/,method(t,i,c){let p=1;return t\u0026\u0026t!==\"0\"\u0026\u0026(p*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),i\u0026\u0026i!==\"0\"\u0026\u0026(p*=this._beatsToUnits(parseFloat(i))),c\u0026\u0026c!==\"0\"\u0026\u0026(p*=this._beatsToUnits(parseFloat(c)/4)),p}}})}transpose(t){return new jn(this.context,this.valueOf()*Ii(t))}harmonize(t){return t.map(i=\u003ethis.transpose(i))}toMidi(){return Ya(this.valueOf())}toNote(){let t=this.toFrequency(),i=Math.log2(t/jn.A4),c=Math.round(12*i)+57,p=Math.floor(c/12);return p\u003c0\u0026\u0026(c+=-12*p),dF[c%12]+p.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let t=this._beatsToUnits(1),i=this.valueOf()/t;return Math.floor(i*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return cm(t)}static ftom(t){return Ya(t)}}let hF={cbb:-2,cb:-1,c:0,\"c#\":1,cx:2,dbb:0,db:1,d:2,\"d#\":3,dx:4,ebb:2,eb:3,e:4,\"e#\":5,ex:6,fbb:3,fb:4,f:5,\"f#\":6,fx:7,gbb:5,gb:6,g:7,\"g#\":8,gx:9,abb:7,ab:8,a:9,\"a#\":10,ax:11,bbb:9,bb:10,b:11,\"b#\":12,bx:13},dF=[\"C\",\"C#\",\"D\",\"D#\",\"E\",\"F\",\"F#\",\"G\",\"G#\",\"A\",\"A#\",\"B\"];function fF(l,t){return new jn(Pt(),l,t)}class Kt extends rr{constructor(){super(...arguments),this.name=\"TransportTime\"}_now(){return this.context.transport.seconds}}function mF(l,t){return new Kt(Pt(),l,t)}class ln extends Na{constructor(){super();let t=V(ln.getDefaults(),arguments,[\"context\"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Pt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new rr(this.context,t).toSeconds()}toFrequency(t){return new jn(this.context,t).toFrequency()}toTicks(t){return new Kt(this.context,t).toTicks()}_getPartialProperties(t){let i=this.get();return Object.keys(i).forEach(c=\u003e{Vn(t[c])\u0026\u0026delete i[c]}),i}get(){let t=this.constructor.getDefaults();return Object.keys(t).forEach(i=\u003e{if(Reflect.has(this,i)){let c=this[i];Je(c)\u0026\u0026Je(c.value)\u0026\u0026Je(c.setValueAtTime)?t[i]=c.value:c instanceof ln?t[i]=c._getPartialProperties(t[i]):_n(c)||nr(c)||gr(c)||sm(c)?t[i]=c:delete t[i]}}),t}set(t){return Object.keys(t).forEach(i=\u003e{Reflect.has(this,i)\u0026\u0026Je(this[i])\u0026\u0026(this[i]\u0026\u0026Je(this[i].value)\u0026\u0026Je(this[i].setValueAtTime)?this[i].value!==t[i]\u0026\u0026(this[i].value=t[i]):this[i]instanceof ln?this[i].set(t[i]):this[i]=t[i])}),this}}class Fi extends Vr{constructor(t=\"stopped\"){super(),this.name=\"StateTimeline\",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){let i=this.get(t);return i!==null?i.state:this._initial}setStateAtTime(t,i,c){return yn(i,0),this.add(Object.assign({},c,{state:t,time:i})),this}getLastState(t,i){for(let c=this._search(i);c\u003e=0;c--){let p=this._timeline[c];if(p.state===t)return p}}getNextState(t,i){let c=this._search(i);if(c!==-1)for(let p=c;p\u003cthis._timeline.length;p++){let d=this._timeline[p];if(d.state===t)return d}}}class Ue extends ln{constructor(){super(V(Ue.getDefaults(),arguments,[\"param\",\"units\",\"convert\"])),this.name=\"Param\",this.overridden=!1,this._minOutput=1e-7;let t=V(Ue.getDefaults(),arguments,[\"param\",\"units\",\"convert\"]);for(Ae(Je(t.param)\u0026\u0026(Es(t.param)||t.param instanceof Ue),\"param must be an AudioParam\");!Es(t.param);)t.param=t.param._param;this._swappable=!!Je(t.swappable)\u0026\u0026t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Vr(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Je(t.value)\u0026\u0026t.value!==this._toType(this._initialValue)\u0026\u0026this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ln.getDefaults(),{convert:!0,units:\"number\"})}get value(){let t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Je(this._minValue)?this._minValue:this.units===\"time\"||this.units===\"frequency\"||this.units===\"normalRange\"||this.units===\"positive\"||this.units===\"transportTime\"||this.units===\"ticks\"||this.units===\"bpm\"||this.units===\"hertz\"||this.units===\"samples\"?0:this.units===\"audioRange\"?-1:this.units===\"decibels\"?-1/0:this._param.minValue}get maxValue(){return Je(this._maxValue)?this._maxValue:this.units===\"normalRange\"||this.units===\"audioRange\"?1:this._param.maxValue}_is(t,i){return this.units===i}_assertRange(t){return Je(this.maxValue)\u0026\u0026Je(this.minValue)\u0026\u0026yn(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert\u0026\u0026!this.overridden?this._is(t,\"time\")?this.toSeconds(t):this._is(t,\"decibels\")?Di(t):this._is(t,\"frequency\")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert\u0026\u0026this.units===\"decibels\"?vc(t):t}setValueAtTime(t,i){let c=this.toSeconds(i),p=this._fromType(t);return Ae(isFinite(p)\u0026\u0026isFinite(c),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(i)}`),this._assertRange(p),this.log(this.units,\"setValueAtTime\",t,c),this._events.add({time:c,type:\"setValueAtTime\",value:p}),this._param.setValueAtTime(p,c),this}getValueAtTime(t){let i=Math.max(this.toSeconds(t),0),c=this._events.getAfter(i),p=this._events.get(i),d=this._initialValue;if(p===null)d=this._initialValue;else if(p.type!==\"setTargetAtTime\"||c!==null\u0026\u0026c.type!==\"setValueAtTime\")if(c===null)d=p.value;else if(c.type===\"linearRampToValueAtTime\"||c.type===\"exponentialRampToValueAtTime\"){let m=p.value;if(p.type===\"setTargetAtTime\"){let g=this._events.getBefore(p.time);m=g===null?this._initialValue:g.value}d=c.type===\"linearRampToValueAtTime\"?this._linearInterpolate(p.time,m,c.time,c.value,i):this._exponentialInterpolate(p.time,m,c.time,c.value,i)}else d=p.value;else{let m=this._events.getBefore(p.time),g;g=m===null?this._initialValue:m.value,p.type===\"setTargetAtTime\"\u0026\u0026(d=this._exponentialApproach(p.time,g,p.value,p.constant,i))}return this._toType(d)}setRampPoint(t){t=this.toSeconds(t);let i=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(i)===0\u0026\u0026(i=this._toType(this._minOutput)),this.setValueAtTime(i,t),this}linearRampToValueAtTime(t,i){let c=this._fromType(t),p=this.toSeconds(i);return Ae(isFinite(c)\u0026\u0026isFinite(p),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(i)}`),this._assertRange(c),this._events.add({time:p,type:\"linearRampToValueAtTime\",value:c}),this.log(this.units,\"linearRampToValueAtTime\",t,p),this._param.linearRampToValueAtTime(c,p),this}exponentialRampToValueAtTime(t,i){let c=this._fromType(t);c=Fr(c,0)?this._minOutput:c,this._assertRange(c);let p=this.toSeconds(i);return Ae(isFinite(c)\u0026\u0026isFinite(p),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(i)}`),this._events.add({time:p,type:\"exponentialRampToValueAtTime\",value:c}),this.log(this.units,\"exponentialRampToValueAtTime\",t,p),this._param.exponentialRampToValueAtTime(c,p),this}exponentialRampTo(t,i,c){return c=this.toSeconds(c),this.setRampPoint(c),this.exponentialRampToValueAtTime(t,c+this.toSeconds(i)),this}linearRampTo(t,i,c){return c=this.toSeconds(c),this.setRampPoint(c),this.linearRampToValueAtTime(t,c+this.toSeconds(i)),this}targetRampTo(t,i,c){return c=this.toSeconds(c),this.setRampPoint(c),this.exponentialApproachValueAtTime(t,c,i),this}exponentialApproachValueAtTime(t,i,c){i=this.toSeconds(i),c=this.toSeconds(c);let p=Math.log(c+1)/Math.log(200);return this.setTargetAtTime(t,i,p),this.cancelAndHoldAtTime(i+.9*c),this.linearRampToValueAtTime(t,i+c),this}setTargetAtTime(t,i,c){let p=this._fromType(t);Ae(isFinite(c)\u0026\u0026c\u003e0,\"timeConstant must be a number greater than 0\");let d=this.toSeconds(i);return this._assertRange(p),Ae(isFinite(p)\u0026\u0026isFinite(d),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(i)}`),this._events.add({constant:c,time:d,type:\"setTargetAtTime\",value:p}),this.log(this.units,\"setTargetAtTime\",t,d,c),this._param.setTargetAtTime(p,d,c),this}setValueCurveAtTime(t,i,c,p=1){c=this.toSeconds(c),i=this.toSeconds(i);let d=this._fromType(t[0])*p;this.setValueAtTime(this._toType(d),i);let m=c/(t.length-1);for(let g=1;g\u003ct.length;g++){let _=this._fromType(t[g])*p;this.linearRampToValueAtTime(this._toType(_),i+g*m)}return this}cancelScheduledValues(t){let i=this.toSeconds(t);return Ae(isFinite(i),\"Invalid argument to cancelScheduledValues: \"+JSON.stringify(t)),this._events.cancel(i),this._param.cancelScheduledValues(i),this.log(this.units,\"cancelScheduledValues\",i),this}cancelAndHoldAtTime(t){let i=this.toSeconds(t),c=this._fromType(this.getValueAtTime(i));Ae(isFinite(i),\"Invalid argument to cancelAndHoldAtTime: \"+JSON.stringify(t)),this.log(this.units,\"cancelAndHoldAtTime\",i,\"value=\"+c);let p=this._events.get(i),d=this._events.getAfter(i);return p\u0026\u0026Fr(p.time,i)?d?(this._param.cancelScheduledValues(d.time),this._events.cancel(d.time)):(this._param.cancelAndHoldAtTime(i),this._events.cancel(i+this.sampleTime)):d\u0026\u0026(this._param.cancelScheduledValues(d.time),this._events.cancel(d.time),d.type===\"linearRampToValueAtTime\"?this.linearRampToValueAtTime(this._toType(c),i):d.type===\"exponentialRampToValueAtTime\"\u0026\u0026this.exponentialRampToValueAtTime(this._toType(c),i)),this._events.add({time:i,type:\"setValueAtTime\",value:c}),this._param.setValueAtTime(c,i),this}rampTo(t,i=.1,c){return this.units===\"frequency\"||this.units===\"bpm\"||this.units===\"decibels\"?this.exponentialRampTo(t,i,c):this.linearRampTo(t,i,c),this}apply(t){let i=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(i),i);let c=this._events.get(i);if(c\u0026\u0026c.type===\"setTargetAtTime\"){let p=this._events.getAfter(c.time),d=p?p.time:i+2,m=(d-i)/10;for(let g=i;g\u003cd;g+=m)t.linearRampToValueAtTime(this.getValueAtTime(g),g)}return this._events.forEachAfter(this.context.currentTime,p=\u003e{p.type===\"cancelScheduledValues\"?t.cancelScheduledValues(p.time):p.type===\"setTargetAtTime\"?t.setTargetAtTime(p.value,p.time,p.constant):t[p.type](p.value,p.time)}),this}setParam(t){Ae(this._swappable,\"The Param must be assigned as 'swappable' in the constructor\");let i=this.input;return i.disconnect(this._param),this.apply(t),this._param=t,i.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,i,c,p,d){return c+(i-c)*Math.exp(-(d-t)/p)}_linearInterpolate(t,i,c,p,d){return i+(d-t)/(c-t)*(p-i)}_exponentialInterpolate(t,i,c,p,d){return i*Math.pow(p/i,(d-t)/(c-t))}}class ye extends ln{constructor(){super(...arguments),this.name=\"ToneAudioNode\",this._internalChannels=[]}get numberOfInputs(){return Je(this.input)?Es(this.input)||this.input instanceof Ue?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Je(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Je(t)\u0026\u0026(t instanceof ye||Ha(t))}_getInternalNodes(){let t=this._internalChannels.slice(0);return this._isAudioNode(this.input)\u0026\u0026t.push(this.input),this._isAudioNode(this.output)\u0026\u0026this.input!==this.output\u0026\u0026t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(i=\u003e{i.channelCount=t.channelCount,i.channelCountMode=t.channelCountMode,i.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){let t=this._getInternalNodes();Ae(t.length\u003e0,\"ToneAudioNode does not have any internal nodes\");let i=t[0];return{channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){let i=this._getChannelProperties();this._setChannelProperties(Object.assign(i,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){let i=this._getChannelProperties();this._setChannelProperties(Object.assign(i,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){let i=this._getChannelProperties();this._setChannelProperties(Object.assign(i,{channelInterpretation:t}))}connect(t,i=0,c=0){return Wn(this,t,i,c),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return dc(\"toMaster() has been renamed toDestination()\"),this.toDestination()}disconnect(t,i=0,c=0){return lm(this,t,i,c),this}chain(...t){return ar(this,...t),this}fan(...t){return t.forEach(i=\u003ethis.connect(i)),this}dispose(){return super.dispose(),Je(this.input)\u0026\u0026(this.input instanceof ye?this.input.dispose():Ha(this.input)\u0026\u0026this.input.disconnect()),Je(this.output)\u0026\u0026(this.output instanceof ye?this.output.dispose():Ha(this.output)\u0026\u0026this.output.disconnect()),this._internalChannels=[],this}}function ar(...l){let t=l.shift();l.reduce((i,c)=\u003e(i instanceof ye?i.connect(c):Ha(i)\u0026\u0026Wn(i,c),c),t)}function Wn(l,t,i=0,c=0){for(Ae(Je(l),\"Cannot connect from undefined node\"),Ae(Je(t),\"Cannot connect to undefined node\"),(t instanceof ye||Ha(t))\u0026\u0026Ae(t.numberOfInputs\u003e0,\"Cannot connect to node with no inputs\"),Ae(l.numberOfOutputs\u003e0,\"Cannot connect from node with no outputs\");t instanceof ye||t instanceof Ue;)Je(t.input)\u0026\u0026(t=t.input);for(;l instanceof ye;)Je(l.output)\u0026\u0026(l=l.output);Es(t)?l.connect(t,i):l.connect(t,i,c)}function lm(l,t,i=0,c=0){if(Je(t))for(;t instanceof ye;)t=t.input;for(;!Ha(l);)Je(l.output)\u0026\u0026(l=l.output);Es(t)?l.disconnect(t,i):Ha(t)?l.disconnect(t,i,c):l.disconnect()}class Ce extends ye{constructor(){super(V(Ce.getDefaults(),arguments,[\"gain\",\"units\"])),this.name=\"Gain\",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;let t=V(Ce.getDefaults(),arguments,[\"gain\",\"units\"]);this.gain=new Ue({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Ie(this,\"gain\")}static getDefaults(){return Object.assign(ye.getDefaults(),{convert:!0,gain:1,units:\"gain\"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Vi extends ye{constructor(t){super(t),this.onended=at,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ce({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(i){let c=this.toSeconds(i);return this._startTime!==-1\u0026\u0026c\u003e=this._startTime\u0026\u0026(this._stopTime===-1||c\u003c=this._stopTime)?\"started\":\"stopped\"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(ye.getDefaults(),{curve:\"linear\",fadeIn:0,fadeOut:0,onended:at})}_startGain(t,i=1){Ae(this._startTime===-1,\"Source cannot be started more than once\");let c=this.toSeconds(this._fadeIn);return this._startTime=t+c,this._startTime=Math.max(this._startTime,this.context.currentTime),c\u003e0?(this._gainNode.gain.setValueAtTime(0,t),this._curve===\"linear\"?this._gainNode.gain.linearRampToValueAtTime(i,t+c):this._gainNode.gain.exponentialApproachValueAtTime(i,t,c)):this._gainNode.gain.setValueAtTime(i,t),this}stop(t){return this.log(\"stop\",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Ae(this._startTime!==-1,\"'start' must be called before 'stop'\"),this.cancelStop();let i=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+i,this._stopTime=Math.max(this._stopTime,this.context.currentTime),i\u003e0?this._curve===\"linear\"?this._gainNode.gain.linearRampTo(0,i,t):this._gainNode.gain.targetRampTo(0,i,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=\u003e{let c=this._curve===\"exponential\"?2*i:0;this._stopSource(this.now()+c),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==at\u0026\u0026(this.onended(this),this.onended=at,!this.context.isOffline)){let t=()=\u003ethis.dispose();window.requestIdleCallback!==void 0?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log(\"cancelStop\"),Ae(this._startTime!==-1,\"Source is not started\"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class gc extends Vi{constructor(){super(V(gc.getDefaults(),arguments,[\"offset\"])),this.name=\"ToneConstantSource\",this._source=this.context.createConstantSource();let t=V(gc.getDefaults(),arguments,[\"offset\"]);Wn(this._source,this._gainNode),this.offset=new Ue({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Vi.getDefaults(),{convert:!0,offset:1,units:\"number\"})}start(t){let i=this.toSeconds(t);return this.log(\"start\",i),this._startGain(i),this._source.start(i),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state===\"started\"\u0026\u0026this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Le extends ye{constructor(){super(V(Le.getDefaults(),arguments,[\"value\",\"units\"])),this.name=\"Signal\",this.override=!0;let t=V(Le.getDefaults(),arguments,[\"value\",\"units\"]);this.output=this._constantSource=new gc({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ye.getDefaults(),{convert:!0,units:\"number\",value:0})}connect(t,i=0,c=0){return yc(this,t,i,c),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,i){return this._param.setValueAtTime(t,i),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,i){return this._param.linearRampToValueAtTime(t,i),this}exponentialRampToValueAtTime(t,i){return this._param.exponentialRampToValueAtTime(t,i),this}exponentialRampTo(t,i,c){return this._param.exponentialRampTo(t,i,c),this}linearRampTo(t,i,c){return this._param.linearRampTo(t,i,c),this}targetRampTo(t,i,c){return this._param.targetRampTo(t,i,c),this}exponentialApproachValueAtTime(t,i,c){return this._param.exponentialApproachValueAtTime(t,i,c),this}setTargetAtTime(t,i,c){return this._param.setTargetAtTime(t,i,c),this}setValueCurveAtTime(t,i,c,p){return this._param.setValueCurveAtTime(t,i,c,p),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,i,c){return this._param.rampTo(t,i,c),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function yc(l,t,i,c){(t instanceof Ue||Es(t)||t instanceof Le\u0026\u0026t.override)\u0026\u0026(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Le\u0026\u0026(t.overridden=!0)),Wn(l,t,i,c)}class Al extends Ue{constructor(){super(V(Al.getDefaults(),arguments,[\"value\"])),this.name=\"TickParam\",this._events=new Vr(1/0),this._multiplier=1;let t=V(Al.getDefaults(),arguments,[\"value\"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:\"setValueAtTime\",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ue.getDefaults(),{multiplier:1,units:\"hertz\",value:1})}setTargetAtTime(t,i,c){i=this.toSeconds(i),this.setRampPoint(i);let p=this._fromType(t),d=this._events.get(i),m=Math.round(Math.max(1/c,1));for(let g=0;g\u003c=m;g++){let _=c*g+i,N=this._exponentialApproach(d.time,d.value,p,c,_);this.linearRampToValueAtTime(this._toType(N),_)}return this}setValueAtTime(t,i){let c=this.toSeconds(i);super.setValueAtTime(t,i);let p=this._events.get(c),d=this._events.previousEvent(p),m=this._getTicksUntilEvent(d,c);return p.ticks=Math.max(m,0),this}linearRampToValueAtTime(t,i){let c=this.toSeconds(i);super.linearRampToValueAtTime(t,i);let p=this._events.get(c),d=this._events.previousEvent(p),m=this._getTicksUntilEvent(d,c);return p.ticks=Math.max(m,0),this}exponentialRampToValueAtTime(t,i){i=this.toSeconds(i);let c=this._fromType(t),p=this._events.get(i),d=Math.round(Math.max(10*(i-p.time),1)),m=(i-p.time)/d;for(let g=0;g\u003c=d;g++){let _=m*g+p.time,N=this._exponentialInterpolate(p.time,p.value,i,c,_);this.linearRampToValueAtTime(this._toType(N),_)}return this}_getTicksUntilEvent(t,i){if(t===null)t={ticks:0,time:0,type:\"setValueAtTime\",value:0};else if(Vn(t.ticks)){let m=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(m,t.time)}let c=this._fromType(this.getValueAtTime(t.time)),p=this._fromType(this.getValueAtTime(i)),d=this._events.get(i);return d\u0026\u0026d.time===i\u0026\u0026d.type===\"setValueAtTime\"\u0026\u0026(p=this._fromType(this.getValueAtTime(i-this.sampleTime))),.5*(i-t.time)*(c+p)+t.ticks}getTicksAtTime(t){let i=this.toSeconds(t),c=this._events.get(i);return Math.max(this._getTicksUntilEvent(c,i),0)}getDurationOfTicks(t,i){let c=this.toSeconds(i),p=this.getTicksAtTime(i);return this.getTimeOfTick(p+t)-c}getTimeOfTick(t){let i=this._events.get(t,\"ticks\"),c=this._events.getAfter(t,\"ticks\");if(i\u0026\u0026i.ticks===t)return i.time;if(i\u0026\u0026c\u0026\u0026c.type===\"linearRampToValueAtTime\"\u0026\u0026i.value!==c.value){let p=this._fromType(this.getValueAtTime(i.time)),d=(this._fromType(this.getValueAtTime(c.time))-p)/(c.time-i.time),m=Math.sqrt(Math.pow(p,2)-2*d*(i.ticks-t)),g=(-p+m)/d,_=(-p-m)/d;return(g\u003e0?g:_)+i.time}return i?i.value===0?1/0:i.time+(t-i.ticks)/i.value:t/this._initialValue}ticksToTime(t,i){return this.getDurationOfTicks(t,i)}timeToTicks(t,i){let c=this.toSeconds(i),p=this.toSeconds(t),d=this.getTicksAtTime(c);return this.getTicksAtTime(c+p)-d}_fromType(t){return this.units===\"bpm\"\u0026\u0026this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units===\"bpm\"\u0026\u0026this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){let i=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(i,0)}}class Rl extends Le{constructor(){super(V(Rl.getDefaults(),arguments,[\"value\"])),this.name=\"TickSignal\";let t=V(Rl.getDefaults(),arguments,[\"value\"]);this.input=this._param=new Al({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Le.getDefaults(),{multiplier:1,units:\"hertz\",value:1})}ticksToTime(t,i){return this._param.ticksToTime(t,i)}timeToTicks(t,i){return this._param.timeToTicks(t,i)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,i){return this._param.getDurationOfTicks(t,i)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class El extends ln{constructor(){super(V(El.getDefaults(),arguments,[\"frequency\"])),this.name=\"TickSource\",this._state=new Fi,this._tickOffset=new Vr;let t=V(El.getDefaults(),arguments,[\"frequency\"]);this.frequency=new Rl({context:this.context,units:t.units,value:t.frequency}),Ie(this,\"frequency\"),this._state.setStateAtTime(\"stopped\",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:\"hertz\"},ln.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,i){let c=this.toSeconds(t);return this._state.getValueAtTime(c)!==\"started\"\u0026\u0026(this._state.setStateAtTime(\"started\",c),Je(i)\u0026\u0026this.setTicksAtTime(i,c)),this}stop(t){let i=this.toSeconds(t);if(this._state.getValueAtTime(i)===\"stopped\"){let c=this._state.get(i);c\u0026\u0026c.time\u003e0\u0026\u0026(this._tickOffset.cancel(c.time),this._state.cancel(c.time))}return this._state.cancel(i),this._state.setStateAtTime(\"stopped\",i),this.setTicksAtTime(0,i),this}pause(t){let i=this.toSeconds(t);return this._state.getValueAtTime(i)===\"started\"\u0026\u0026this._state.setStateAtTime(\"paused\",i),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){let i=this.toSeconds(t),c=this._state.getLastState(\"stopped\",i),p={state:\"paused\",time:i};this._state.add(p);let d=c,m=0;return this._state.forEachBetween(c.time,i+this.sampleTime,g=\u003e{let _=d.time,N=this._tickOffset.get(g.time);N\u0026\u0026N.time\u003e=d.time\u0026\u0026(m=N.ticks,_=N.time),d.state===\"started\"\u0026\u0026g.state!==\"started\"\u0026\u0026(m+=this.frequency.getTicksAtTime(g.time)-this.frequency.getTicksAtTime(_)),d=g}),this._state.remove(p),m}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){let i=this.now(),c=this.frequency.timeToTicks(t,i);this.setTicksAtTime(c,i)}getSecondsAtTime(t){t=this.toSeconds(t);let i=this._state.getLastState(\"stopped\",t),c={state:\"paused\",time:t};this._state.add(c);let p=i,d=0;return this._state.forEachBetween(i.time,t+this.sampleTime,m=\u003e{let g=p.time,_=this._tickOffset.get(m.time);_\u0026\u0026_.time\u003e=p.time\u0026\u0026(d=_.seconds,g=_.time),p.state===\"started\"\u0026\u0026m.state!==\"started\"\u0026\u0026(d+=m.time-g),p=m}),this._state.remove(c),d}setTicksAtTime(t,i){return i=this.toSeconds(i),this._tickOffset.cancel(i),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,i),ticks:t,time:i}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,i=this.now()){let c=this._tickOffset.get(i),p=this._state.get(i),d=Math.max(c.time,p.time),m=this.frequency.getTicksAtTime(d)+t-c.ticks;return this.frequency.getTimeOfTick(m)}forEachTickBetween(t,i,c){let p=this._state.get(t);this._state.forEachBetween(t,i,m=\u003e{p\u0026\u0026p.state===\"started\"\u0026\u0026m.state!==\"started\"\u0026\u0026this.forEachTickBetween(Math.max(p.time,t),m.time-this.sampleTime,c),p=m});let d=null;if(p\u0026\u0026p.state===\"started\"){let m=Math.max(p.time,t),g=this.frequency.getTicksAtTime(m),_=g-this.frequency.getTicksAtTime(p.time),N=Math.ceil(_)-_;N=Fr(N,1)?0:N;let S=this.frequency.getTimeOfTick(g+N);for(;S\u003ci;){try{c(S,Math.round(this.getTicksAtTime(S)))}catch(b){d=b;break}S+=this.frequency.getDurationOfTicks(1,S)}}if(d)throw d;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class js extends ln{constructor(){super(V(js.getDefaults(),arguments,[\"callback\",\"frequency\"])),this.name=\"Clock\",this.callback=at,this._lastUpdate=0,this._state=new Fi(\"stopped\"),this._boundLoop=this._loop.bind(this);let t=V(js.getDefaults(),arguments,[\"callback\",\"frequency\"]);this.callback=t.callback,this._tickSource=new El({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ie(this,\"frequency\"),this._state.setStateAtTime(\"stopped\",0),this.context.on(\"tick\",this._boundLoop)}static getDefaults(){return Object.assign(ln.getDefaults(),{callback:at,frequency:1,units:\"hertz\"})}get state(){return this._state.getValueAtTime(this.now())}start(t,i){rm(this.context);let c=this.toSeconds(t);return this.log(\"start\",c),this._state.getValueAtTime(c)!==\"started\"\u0026\u0026(this._state.setStateAtTime(\"started\",c),this._tickSource.start(c,i),c\u003cthis._lastUpdate\u0026\u0026this.emit(\"start\",c,i)),this}stop(t){let i=this.toSeconds(t);return this.log(\"stop\",i),this._state.cancel(i),this._state.setStateAtTime(\"stopped\",i),this._tickSource.stop(i),i\u003cthis._lastUpdate\u0026\u0026this.emit(\"stop\",i),this}pause(t){let i=this.toSeconds(t);return this._state.getValueAtTime(i)===\"started\"\u0026\u0026(this._state.setStateAtTime(\"paused\",i),this._tickSource.pause(i),i\u003cthis._lastUpdate\u0026\u0026this.emit(\"pause\",i)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,i){return this._tickSource.setTicksAtTime(t,i),this}getTimeOfTick(t,i=this.now()){return this._tickSource.getTimeOfTick(t,i)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,i){let c=this.toSeconds(i),p=this.getTicksAtTime(c);return this._tickSource.getTimeOfTick(p+t,c)}_loop(){let t=this._lastUpdate,i=this.now();this._lastUpdate=i,this.log(\"loop\",t,i),t!==i\u0026\u0026(this._state.forEachBetween(t,i,c=\u003e{switch(c.state){case\"started\":let p=this._tickSource.getTicksAtTime(c.time);this.emit(\"start\",c.time,p);break;case\"stopped\":c.time!==0\u0026\u0026this.emit(\"stop\",c.time);break;case\"paused\":this.emit(\"pause\",c.time)}}),this._tickSource.forEachTickBetween(t,i,(c,p)=\u003e{this.callback(c,p)}))}getStateAtTime(t){let i=this.toSeconds(t);return this._state.getValueAtTime(i)}dispose(){return super.dispose(),this.context.off(\"tick\",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Ri.mixin(js);class Ln extends ye{constructor(){super(V(Ln.getDefaults(),arguments,[\"delayTime\",\"maxDelay\"])),this.name=\"Delay\";let t=V(Ln.getDefaults(),arguments,[\"delayTime\",\"maxDelay\"]),i=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(i,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(i),this.delayTime=new Ue({context:this.context,param:this._delayNode.delayTime,units:\"time\",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),Ie(this,\"delayTime\")}static getDefaults(){return Object.assign(ye.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}function vF(l,t,i=2,c=Pt().sampleRate){return xt(this,void 0,void 0,function*(){let p=Pt(),d=new ji(i,t,c);Ol(d),yield l(d);let m=d.render();Ol(p);let g=yield m;return new ct(g)})}class Wi extends Na{constructor(){super(),this.name=\"ToneAudioBuffers\",this._buffers=new Map,this._loadingCount=0;let t=V(Wi.getDefaults(),arguments,[\"urls\",\"onload\",\"baseUrl\"],\"urls\");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(i=\u003e{this._loadingCount++;let c=t.urls[i];this.add(i,c,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:\"\",onerror:at,onload:at,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Ae(this.has(t),\"ToneAudioBuffers has no buffer named: \"+t),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0\u0026\u0026t\u0026\u0026t()}get loaded(){return Array.from(this._buffers).every(([t,i])=\u003ei.loaded)}add(t,i,c=at,p=at){return gr(i)?this._buffers.set(t.toString(),new ct(this.baseUrl+i,c,p)):this._buffers.set(t.toString(),new ct(i,c,p)),this}dispose(){return super.dispose(),this._buffers.forEach(t=\u003et.dispose()),this._buffers.clear(),this}}class Li extends jn{constructor(){super(...arguments),this.name=\"MidiClass\",this.defaultUnits=\"midi\"}_frequencyToUnits(t){return Ya(super._frequencyToUnits(t))}_ticksToUnits(t){return Ya(super._ticksToUnits(t))}_beatsToUnits(t){return Ya(super._beatsToUnits(t))}_secondsToUnits(t){return Ya(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return cm(this.toMidi())}transpose(t){return new Li(this.context,this.toMidi()+t)}}function gF(l,t){return new Li(Pt(),l,t)}class wt extends Kt{constructor(){super(...arguments),this.name=\"Ticks\",this.defaultUnits=\"i\"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function yF(l,t){return new wt(Pt(),l,t)}class _F extends ln{constructor(){super(...arguments),this.name=\"Draw\",this.expiration=.25,this.anticipation=.008,this._events=new Vr,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,i){return this._events.add({callback:t,time:this.toSeconds(i)}),this._events.length===1\u0026\u0026(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){let t=this.context.currentTime;for(;this._events.length\u0026\u0026this._events.peek().time-this.anticipation\u003c=t;){let i=this._events.shift();i\u0026\u0026t-i.time\u003c=this.expiration\u0026\u0026i.callback()}this._events.length\u003e0\u0026\u0026(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Sl(l=\u003e{l.draw=new _F({context:l})}),Ml(l=\u003e{l.draw.dispose()});class yN extends Na{constructor(){super(...arguments),this.name=\"IntervalTimeline\",this._root=null,this._length=0}add(t){Ae(Je(t.time),\"Events must have a time property\"),Ae(Je(t.duration),\"Events must have a duration parameter\"),t.time=t.time.valueOf();let i=new kF(t.time,t.time+t.duration,t);for(this._root===null?this._root=i:this._root.insert(i),this._length++;i!==null;)i.updateHeight(),i.updateMax(),this._rebalance(i),i=i.parent;return this}remove(t){if(this._root!==null){let i=[];this._root.search(t.time,i);for(let c of i)if(c.event===t){this._removeNode(c),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,i=\u003ethis.remove(i)),this}_setRoot(t){this._root=t,this._root!==null\u0026\u0026(this._root.parent=null)}_replaceNodeInParent(t,i){t.parent!==null?(t.isLeftChild()?t.parent.left=i:t.parent.right=i,this._rebalance(t.parent)):this._setRoot(i)}_removeNode(t){if(t.left===null\u0026\u0026t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{let i,c=null;if(t.getBalance()\u003e0)if(t.left.right===null)i=t.left,i.right=t.right,c=i;else{for(i=t.left.right;i.right!==null;)i=i.right;i.parent\u0026\u0026(i.parent.right=i.left,c=i.parent,i.left=t.left,i.right=t.right)}else if(t.right.left===null)i=t.right,i.left=t.left,c=i;else{for(i=t.right.left;i.left!==null;)i=i.left;i.parent\u0026\u0026(i.parent.left=i.right,c=i.parent,i.left=t.left,i.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=i:t.parent.right=i:this._setRoot(i),c\u0026\u0026this._rebalance(c)}t.dispose()}_rotateLeft(t){let i=t.parent,c=t.isLeftChild(),p=t.right;p\u0026\u0026(t.right=p.left,p.left=t),i!==null?c?i.left=p:i.right=p:this._setRoot(p)}_rotateRight(t){let i=t.parent,c=t.isLeftChild(),p=t.left;p\u0026\u0026(t.left=p.right,p.right=t),i!==null?c?i.left=p:i.right=p:this._setRoot(p)}_rebalance(t){let i=t.getBalance();i\u003e1\u0026\u0026t.left?t.left.getBalance()\u003c0?this._rotateLeft(t.left):this._rotateRight(t):i\u003c-1\u0026\u0026t.right\u0026\u0026(t.right.getBalance()\u003e0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){let i=[];if(this._root.search(t,i),i.length\u003e0){let c=i[0];for(let p=1;p\u003ci.length;p++)i[p].low\u003ec.low\u0026\u0026(c=i[p]);return c.event}}return null}forEach(t){if(this._root!==null){let i=[];this._root.traverse(c=\u003ei.push(c)),i.forEach(c=\u003e{c.event\u0026\u0026t(c.event)})}return this}forEachAtTime(t,i){if(this._root!==null){let c=[];this._root.search(t,c),c.forEach(p=\u003e{p.event\u0026\u0026i(p.event)})}return this}forEachFrom(t,i){if(this._root!==null){let c=[];this._root.searchAfter(t,c),c.forEach(p=\u003e{p.event\u0026\u0026i(p.event)})}return this}dispose(){return super.dispose(),this._root!==null\u0026\u0026this._root.traverse(t=\u003et.dispose()),this._root=null,this}}class kF{constructor(t,i,c){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=c,this.low=t,this.high=i,this.max=this.high}insert(t){t.low\u003c=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,i){t\u003ethis.max||(this.left!==null\u0026\u0026this.left.search(t,i),this.low\u003c=t\u0026\u0026this.high\u003et\u0026\u0026i.push(this),this.low\u003et||this.right!==null\u0026\u0026this.right.search(t,i))}searchAfter(t,i){this.low\u003e=t\u0026\u0026(i.push(this),this.left!==null\u0026\u0026this.left.searchAfter(t,i)),this.right!==null\u0026\u0026this.right.searchAfter(t,i)}traverse(t){t(this),this.left!==null\u0026\u0026this.left.traverse(t),this.right!==null\u0026\u0026this.right.traverse(t)}updateHeight(){this.left!==null\u0026\u0026this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null\u0026\u0026(this.max=Math.max(this.max,this.left.max)),this.right!==null\u0026\u0026(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null\u0026\u0026this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null\u0026\u0026(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null\u0026\u0026this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null\u0026\u0026(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null\u0026\u0026(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Kr extends ye{constructor(){super(V(Kr.getDefaults(),arguments,[\"volume\"])),this.name=\"Volume\";let t=V(Kr.getDefaults(),arguments,[\"volume\"]);this.input=this.output=new Ce({context:this.context,gain:t.volume,units:\"decibels\"}),this.volume=this.output.gain,Ie(this,\"volume\"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(ye.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute\u0026\u0026t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute\u0026\u0026!t\u0026\u0026(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class jl extends ye{constructor(){super(V(jl.getDefaults(),arguments)),this.name=\"Destination\",this.input=new Kr({context:this.context}),this.output=new Ce({context:this.context}),this.volume=this.input.volume;let t=V(jl.getDefaults(),arguments);ar(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ye.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),ar(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Sl(l=\u003e{l.destination=new jl({context:l})}),Ml(l=\u003e{l.destination.dispose()});class NF extends Na{constructor(t){super(),this.name=\"TimelineValue\",this._timeline=new Vr({memory:10}),this._initialValue=t}set(t,i){return this._timeline.add({value:t,time:i}),this}get(t){let i=this._timeline.get(t);return i?i.value:this._initialValue}}class Xa{constructor(t,i){this.id=Xa._eventId++;let c=Object.assign(Xa.getDefaults(),i);this.transport=t,this.callback=c.callback,this._once=c.once,this.time=c.time}static getDefaults(){return{callback:at,once:!1,time:0}}invoke(t){this.callback\u0026\u0026(this.callback(t),this._once\u0026\u0026this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Xa._eventId=0;class pm extends Xa{constructor(t,i){super(t,i),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let c=Object.assign(pm.getDefaults(),i);this.duration=new wt(t.context,c.duration).valueOf(),this._interval=new wt(t.context,c.interval).valueOf(),this._nextTick=c.time,this.transport.on(\"start\",this._boundRestart),this.transport.on(\"loopStart\",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Xa.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){let i=this.transport.getTicksAtTime(t);i\u003e=this.time\u0026\u0026i\u003e=this._nextTick\u0026\u0026this._nextTick+this._interval\u003cthis.time+this.duration\u0026\u0026(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new wt(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;let i=this.transport.getTicksAtTime(t);i\u003ethis.time\u0026\u0026(this._nextTick=this.time+Math.ceil((i-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new wt(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new wt(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off(\"start\",this._boundRestart),this.transport.off(\"loopStart\",this._boundRestart),this}}class _c extends ln{constructor(){super(V(_c.getDefaults(),arguments)),this.name=\"Transport\",this._loop=new NF(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Vr,this._repeatedEvents=new yN,this._syncedSignals=[],this._swingAmount=0;let t=V(_c.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new js({callback:this._processTick.bind(this),context:this.context,frequency:0,units:\"bpm\"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Ie(this,\"bpm\"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(ln.getDefaults(),{bpm:120,loopEnd:\"4m\",loopStart:0,ppq:192,swing:0,swingSubdivision:\"8n\",timeSignature:4})}_processTick(t,i){if(this._loop.get(t)\u0026\u0026i\u003e=this._loopEnd\u0026\u0026(this.emit(\"loopEnd\",t),this._clock.setTicksAtTime(this._loopStart,t),i=this._loopStart,this.emit(\"loopStart\",t,this._clock.getSecondsAtTime(t)),this.emit(\"loop\",t)),this._swingAmount\u003e0\u0026\u0026i%this._ppq!=0\u0026\u0026i%(2*this._swingTicks)!=0){let c=i%(2*this._swingTicks)/(2*this._swingTicks),p=Math.sin(c*Math.PI)*this._swingAmount;t+=new wt(this.context,2*this._swingTicks/3).toSeconds()*p}this._timeline.forEachAtTime(i,c=\u003ec.invoke(t))}schedule(t,i){let c=new Xa(this,{callback:t,time:new Kt(this.context,i).toTicks()});return this._addEvent(c,this._timeline)}scheduleRepeat(t,i,c,p=1/0){let d=new pm(this,{callback:t,duration:new rr(this.context,p).toTicks(),interval:new rr(this.context,i).toTicks(),time:new Kt(this.context,c).toTicks()});return this._addEvent(d,this._repeatedEvents)}scheduleOnce(t,i){let c=new Xa(this,{callback:t,once:!0,time:new Kt(this.context,i).toTicks()});return this._addEvent(c,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){let i=this._scheduledEvents[t.toString()];i.timeline.remove(i.event),i.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,i){return this._scheduledEvents[t.id.toString()]={event:t,timeline:i},i.add(t),t.id}cancel(t=0){let i=this.toTicks(t);return this._timeline.forEachFrom(i,c=\u003ethis.clear(c.id)),this._repeatedEvents.forEachFrom(i,c=\u003ethis.clear(c.id)),this}_bindClockEvents(){this._clock.on(\"start\",(t,i)=\u003e{i=new wt(this.context,i).toSeconds(),this.emit(\"start\",t,i)}),this._clock.on(\"stop\",t=\u003e{this.emit(\"stop\",t)}),this._clock.on(\"pause\",t=\u003e{this.emit(\"pause\",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,i){let c;return Je(i)\u0026\u0026(c=this.toTicks(i)),this._clock.start(t,c),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!==\"started\"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){_n(t)\u0026\u0026(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new rr(this.context,this._loopStart,\"i\").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new rr(this.context,this._loopEnd,\"i\").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,i){return this.loopStart=t,this.loopEnd=i,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new wt(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){let t=this.now(),i=this._clock.getTicksAtTime(t);return new wt(this.context,i).toBarsBeatsSixteenths()}set position(t){let i=this.toTicks(t);this.ticks=i}get seconds(){return this._clock.seconds}set seconds(t){let i=this.now(),c=this._clock.frequency.timeToTicks(t,i);this.ticks=c}get progress(){if(this.loop){let t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){let i=this.now();if(this.state===\"started\"){let c=this._clock.getTicksAtTime(i),p=i+this._clock.frequency.getDurationOfTicks(Math.ceil(c)-c,i);this.emit(\"stop\",p),this._clock.setTicksAtTime(t,p),this.emit(\"start\",p,this._clock.getSecondsAtTime(p))}else this._clock.setTicksAtTime(t,i)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!==\"started\")return 0;{let i=this.now(),c=t-this.getTicksAtTime(i)%t;return this._clock.nextTickTime(c,i)}}syncSignal(t,i){if(!i){let p=this.now();if(t.getValueAtTime(p)!==0){let d=1/(60/this.bpm.getValueAtTime(p)/this.PPQ);i=t.getValueAtTime(p)/d}else i=0}let c=new Ce(i);return this.bpm.connect(c),c.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:c,signal:t}),t.value=0,this}unsyncSignal(t){for(let i=this._syncedSignals.length-1;i\u003e=0;i--){let c=this._syncedSignals[i];c.signal===t\u0026\u0026(c.ratio.dispose(),c.signal.value=c.initial,this._syncedSignals.splice(i,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),mc(this,\"bpm\"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Ri.mixin(_c),Sl(l=\u003e{l.transport=new _c({context:l})}),Ml(l=\u003e{l.transport.dispose()});class Lt extends ye{constructor(t){super(t),this.input=void 0,this._state=new Fi(\"stopped\"),this._synced=!1,this._scheduled=[],this._syncedStart=at,this._syncedStop=at,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Kr({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Ie(this,\"volume\"),this.onstop=t.onstop}static getDefaults(){return Object.assign(ye.getDefaults(),{mute:!1,onstop:at,volume:0})}get state(){return this._synced?this.context.transport.state===\"started\"?this._state.getValueAtTime(this.context.transport.seconds):\"stopped\":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,i,c){let p=Vn(t)\u0026\u0026this._synced?this.context.transport.seconds:this.toSeconds(t);if(p=this._clampToCurrentTime(p),this._synced||this._state.getValueAtTime(p)!==\"started\")if(this.log(\"start\",p),this._state.setStateAtTime(\"started\",p),this._synced){let d=this._state.get(p);d\u0026\u0026(d.offset=this.toSeconds(_r(i,0)),d.duration=c?this.toSeconds(c):void 0);let m=this.context.transport.schedule(g=\u003e{this._start(g,i,c)},p);this._scheduled.push(m),this.context.transport.state===\"started\"\u0026\u0026this.context.transport.getSecondsAtTime(this.immediate())\u003ep\u0026\u0026this._syncedStart(this.now(),this.context.transport.seconds)}else rm(this.context),this._start(p,i,c);else Ae(Tl(p,this._state.get(p).time),\"Start time must be strictly greater than previous start time\"),this._state.cancel(p),this._state.setStateAtTime(\"started\",p),this.log(\"restart\",p),this.restart(p,i,c);return this}stop(t){let i=Vn(t)\u0026\u0026this._synced?this.context.transport.seconds:this.toSeconds(t);if(i=this._clampToCurrentTime(i),this._state.getValueAtTime(i)===\"started\"||Je(this._state.getNextState(\"started\",i))){if(this.log(\"stop\",i),this._synced){let c=this.context.transport.schedule(this._stop.bind(this),i);this._scheduled.push(c)}else this._stop(i);this._state.cancel(i),this._state.setStateAtTime(\"stopped\",i)}return this}restart(t,i,c){return t=this.toSeconds(t),this._state.getValueAtTime(t)===\"started\"\u0026\u0026(this._state.cancel(t),this._restart(t,i,c)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,i)=\u003e{if(i\u003e0){let c=this._state.get(i);if(c\u0026\u0026c.state===\"started\"\u0026\u0026c.time!==i){let p=i-this.toSeconds(c.time),d;c.duration\u0026\u0026(d=this.toSeconds(c.duration)-p),this._start(t,this.toSeconds(c.offset)+p,d)}}},this._syncedStop=t=\u003e{let i=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(i)===\"started\"\u0026\u0026this._stop(t)},this.context.transport.on(\"start\",this._syncedStart),this.context.transport.on(\"loopStart\",this._syncedStart),this.context.transport.on(\"stop\",this._syncedStop),this.context.transport.on(\"pause\",this._syncedStop),this.context.transport.on(\"loopEnd\",this._syncedStop)),this}unsync(){return this._synced\u0026\u0026(this.context.transport.off(\"stop\",this._syncedStop),this.context.transport.off(\"pause\",this._syncedStop),this.context.transport.off(\"loopEnd\",this._syncedStop),this.context.transport.off(\"start\",this._syncedStart),this.context.transport.off(\"loopStart\",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=\u003ethis.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=at,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ba extends Vi{constructor(){super(V(ba.getDefaults(),arguments,[\"url\",\"onload\"])),this.name=\"ToneBufferSource\",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;let t=V(ba.getDefaults(),arguments,[\"url\",\"onload\"]);Wn(this._source,this._gainNode),this._source.onended=()=\u003ethis._stopSource(),this.playbackRate=new Ue({context:this.context,param:this._source.playbackRate,units:\"positive\",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new ct(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Vi.getDefaults(),{url:new ct,loop:!1,loopEnd:0,loopStart:0,onload:at,onerror:at,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,i,c,p=1){Ae(this.buffer.loaded,\"buffer is either not set or not loaded\");let d=this.toSeconds(t);this._startGain(d,p),i=this.loop?_r(i,this.loopStart):_r(i,0);let m=Math.max(this.toSeconds(i),0);if(this.loop){let g=this.toSeconds(this.loopEnd)||this.buffer.duration,_=this.toSeconds(this.loopStart),N=g-_;im(m,g)\u0026\u0026(m=(m-_)%N+_),Fr(m,this.buffer.duration)\u0026\u0026(m=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,hN(m,this.buffer.duration)\u0026\u0026(this._sourceStarted=!0,this._source.start(d,m)),Je(c)){let g=this.toSeconds(c);g=Math.max(g,0),this.stop(d+g)}return this}_stopSource(t){!this._sourceStopped\u0026\u0026this._sourceStarted\u0026\u0026(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted\u0026\u0026this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class xa extends Lt{constructor(){super(V(xa.getDefaults(),arguments,[\"type\"])),this.name=\"Noise\",this._source=null;let t=V(xa.getDefaults(),arguments,[\"type\"]);this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Lt.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:\"white\"})}get type(){return this._type}set type(t){if(Ae(t in _N,\"Noise: invalid type: \"+t),this._type!==t\u0026\u0026(this._type=t,this.state===\"started\")){let i=this.now();this._stop(i),this._start(i)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source\u0026\u0026(this._source.playbackRate.value=t)}_start(t){let i=_N[this._type];this._source=new ba({url:i,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=\u003ethis.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(i.duration-.001))}_stop(t){this._source\u0026\u0026(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source\u0026\u0026(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source\u0026\u0026(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source\u0026\u0026this._source.disconnect(),this}}let wa={brown:null,pink:null,white:null},_N={get brown(){if(!wa.brown){let l=[];for(let t=0;t\u003c2;t++){let i=new Float32Array(220500);l[t]=i;let c=0;for(let p=0;p\u003c220500;p++){let d=2*Math.random()-1;i[p]=(c+.02*d)/1.02,c=i[p],i[p]*=3.5}}wa.brown=new ct().fromArray(l)}return wa.brown},get pink(){if(!wa.pink){let l=[];for(let t=0;t\u003c2;t++){let i=new Float32Array(220500),c,p,d,m,g,_,N;l[t]=i,c=p=d=m=g=_=N=0;for(let S=0;S\u003c220500;S++){let b=2*Math.random()-1;c=.99886*c+.0555179*b,p=.99332*p+.0750759*b,d=.969*d+.153852*b,m=.8665*m+.3104856*b,g=.55*g+.5329522*b,_=-.7616*_-.016898*b,i[S]=c+p+d+m+g+_+N+.5362*b,i[S]*=.11,N=.115926*b}}wa.pink=new ct().fromArray(l)}return wa.pink},get white(){if(!wa.white){let l=[];for(let t=0;t\u003c2;t++){let i=new Float32Array(220500);l[t]=i;for(let c=0;c\u003c220500;c++)i[c]=2*Math.random()-1}wa.white=new ct().fromArray(l)}return wa.white}};class Bi extends ye{constructor(){super(V(Bi.getDefaults(),arguments,[\"volume\"])),this.name=\"UserMedia\";let t=V(Bi.getDefaults(),arguments,[\"volume\"]);this._volume=this.output=new Kr({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Ie(this,\"volume\"),this.mute=t.mute}static getDefaults(){return Object.assign(ye.getDefaults(),{mute:!1,volume:0})}open(t){return xt(this,void 0,void 0,function*(){Ae(Bi.supported,\"UserMedia is not supported\"),this.state===\"started\"\u0026\u0026this.close();let i=yield Bi.enumerateDevices();nr(t)?this._device=i[t]:(this._device=i.find(d=\u003ed.label===t||d.deviceId===t),!this._device\u0026\u0026i.length\u003e0\u0026\u0026(this._device=i[0]),Ae(Je(this._device),\"No matching device \"+t));let c={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device\u0026\u0026(c.audio.deviceId=this._device.deviceId);let p=yield navigator.mediaDevices.getUserMedia(c);if(!this._stream){this._stream=p;let d=this.context.createMediaStreamSource(p);Wn(d,this.output),this._mediaStream=d}return this})}close(){return this._stream\u0026\u0026this._mediaStream\u0026\u0026(this._stream.getAudioTracks().forEach(t=\u003e{t.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return xt(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(t=\u003et.kind===\"audioinput\")})}get state(){return this._stream\u0026\u0026this._stream.active?\"started\":\"stopped\"}get deviceId(){return this._device?this._device.deviceId:void 0}get groupId(){return this._device?this._device.groupId:void 0}get label(){return this._device?this._device.label:void 0}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return Je(navigator.mediaDevices)\u0026\u0026Je(navigator.mediaDevices.getUserMedia)}}function Ds(l,t){return xt(this,void 0,void 0,function*(){let i=t/l.context.sampleRate,c=new ji(1,i,l.context.sampleRate);return new l.constructor(Object.assign(l.get(),{frequency:2/i,detune:0,context:c})).toDestination().start(0),(yield c.render()).getChannelData(0)})}class zi extends Vi{constructor(){super(V(zi.getDefaults(),arguments,[\"frequency\",\"type\"])),this.name=\"ToneOscillatorNode\",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];let t=V(zi.getDefaults(),arguments,[\"frequency\",\"type\"]);Wn(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new Ue({context:this.context,param:this._oscillator.frequency,units:\"frequency\",value:t.frequency}),this.detune=new Ue({context:this.context,param:this._oscillator.detune,units:\"cents\",value:t.detune}),Ie(this,[\"frequency\",\"detune\"])}static getDefaults(){return Object.assign(Vi.getDefaults(),{detune:0,frequency:440,type:\"sine\"})}start(t){let i=this.toSeconds(t);return this.log(\"start\",i),this._startGain(i),this._oscillator.start(i),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state===\"started\"\u0026\u0026this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ot extends Lt{constructor(){super(V(Ot.getDefaults(),arguments,[\"frequency\",\"type\"])),this.name=\"Oscillator\",this._oscillator=null;let t=V(Ot.getDefaults(),arguments,[\"frequency\",\"type\"]);this.frequency=new Le({context:this.context,units:\"frequency\",value:t.frequency}),Ie(this,\"frequency\"),this.detune=new Le({context:this.context,units:\"cents\",value:t.detune}),Ie(this,\"detune\"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount\u0026\u0026t.type!==\"custom\"\u0026\u0026(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Lt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:\"sine\"})}_start(t){let i=this.toSeconds(t),c=new zi({context:this.context,onended:()=\u003ethis.onstop(this)});this._oscillator=c,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(i)}_stop(t){let i=this.toSeconds(t);this._oscillator\u0026\u0026this._oscillator.stop(i)}_restart(t){let i=this.toSeconds(t);return this.log(\"restart\",i),this._oscillator\u0026\u0026this._oscillator.cancelStop(),this._state.cancel(i),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type===\"custom\")return Ot._periodicWaveCache.find(t=\u003e{return t.phase===this._phase\u0026\u0026(i=t.partials,c=this._partials,i.length===c.length\u0026\u0026i.every((p,d)=\u003ec[d]===p));var i,c});{let t=Ot._periodicWaveCache.find(i=\u003ei.type===this._type\u0026\u0026i.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;let i=[\"sine\",\"square\",\"sawtooth\",\"triangle\"].indexOf(t)!==-1;if(this._phase===0\u0026\u0026i)this._wave=void 0,this._partialCount=0,this._oscillator!==null\u0026\u0026(this._oscillator.type=t);else{let c=this._getCachedPeriodicWave();if(Je(c)){let{partials:p,wave:d}=c;this._wave=d,this._partials=p,this._oscillator!==null\u0026\u0026this._oscillator.setPeriodicWave(this._wave)}else{let[p,d]=this._getRealImaginary(t,this._phase),m=this.context.createPeriodicWave(p,d);this._wave=m,this._oscillator!==null\u0026\u0026this._oscillator.setPeriodicWave(this._wave),Ot._periodicWaveCache.push({imag:d,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:p,type:this._type,wave:this._wave}),Ot._periodicWaveCache.length\u003e100\u0026\u0026Ot._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),\"\")}set baseType(t){this.partialCount\u0026\u0026this._type!==\"custom\"\u0026\u0026t!==\"custom\"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){yn(t,0);let i=this._type,c=/^(sine|triangle|square|sawtooth)(\\d+)$/.exec(this._type);if(c\u0026\u0026(i=c[1]),this._type!==\"custom\")this.type=t===0?i:i+t.toString();else{let p=new Float32Array(t);this._partials.forEach((d,m)=\u003ep[m]=d),this._partials=Array.from(p),this.type=this._type}}_getRealImaginary(t,i){let c=2048,p=new Float32Array(c),d=new Float32Array(c),m=1;if(t===\"custom\"){if(m=this._partials.length+1,this._partialCount=this._partials.length,c=m,this._partials.length===0)return[p,d]}else{let g=/^(sine|triangle|square|sawtooth)(\\d+)$/.exec(t);g?(m=parseInt(g[2],10)+1,this._partialCount=parseInt(g[2],10),t=g[1],m=Math.max(m,2),c=m):this._partialCount=0,this._partials=[]}for(let g=1;g\u003cc;++g){let _=2/(g*Math.PI),N;switch(t){case\"sine\":N=g\u003c=m?1:0,this._partials[g-1]=N;break;case\"square\":N=1\u0026g?2*_:0,this._partials[g-1]=N;break;case\"sawtooth\":N=_*(1\u0026g?1:-1),this._partials[g-1]=N;break;case\"triangle\":N=1\u0026g?_*_*2*(g-1\u003e\u003e1\u00261?-1:1):0,this._partials[g-1]=N;break;case\"custom\":N=this._partials[g-1];break;default:throw new TypeError(\"Oscillator: invalid type: \"+t)}N!==0?(p[g]=-N*Math.sin(i*g),d[g]=N*Math.cos(i*g)):(p[g]=0,d[g]=0)}return[p,d]}_inverseFFT(t,i,c){let p=0,d=t.length;for(let m=0;m\u003cd;m++)p+=t[m]*Math.cos(m*c)+i[m]*Math.sin(m*c);return p}getInitialValue(){let[t,i]=this._getRealImaginary(this._type,0),c=0,p=2*Math.PI;for(let d=0;d\u003c32;d++)c=Math.max(this._inverseFFT(t,i,d/32*p),c);return dN(-this._inverseFFT(t,i,this._phase)/c,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length\u0026\u0026(this.type=\"custom\")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return xt(this,void 0,void 0,function*(){return Ds(this,t)})}dispose(){return super.dispose(),this._oscillator!==null\u0026\u0026this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ot._periodicWaveCache=[];class sr extends ye{constructor(){super(Object.assign(V(sr.getDefaults(),arguments,[\"context\"])))}connect(t,i=0,c=0){return yc(this,t,i,c),this}}class kr extends sr{constructor(){super(Object.assign(V(kr.getDefaults(),arguments,[\"mapping\",\"length\"]))),this.name=\"WaveShaper\",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;let t=V(kr.getDefaults(),arguments,[\"mapping\",\"length\"]);_n(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):lN(t.mapping)\u0026\u0026this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Le.getDefaults(),{length:1024})}setMap(t,i=1024){let c=new Float32Array(i);for(let p=0,d=i;p\u003cd;p++){let m=p/(d-1)*2-1;c[p]=t(m,p)}return this.curve=c,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){Ae([\"none\",\"2x\",\"4x\"].some(i=\u003ei.includes(t)),\"oversampling must be either 'none', '2x', or '4x'\"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Dl extends sr{constructor(){super(...arguments),this.name=\"AudioToGain\",this._norm=new kr({context:this.context,mapping:t=\u003e(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ct extends Le{constructor(){super(Object.assign(V(Ct.getDefaults(),arguments,[\"value\"]))),this.name=\"Multiply\",this.override=!1;let t=V(Ct.getDefaults(),arguments,[\"value\"]);this._mult=this.input=this.output=new Ce({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Gi extends Lt{constructor(){super(V(Gi.getDefaults(),arguments,[\"frequency\",\"type\",\"modulationType\"])),this.name=\"AMOscillator\",this._modulationScale=new Dl({context:this.context}),this._modulationNode=new Ce({context:this.context});let t=V(Gi.getDefaults(),arguments,[\"frequency\",\"type\",\"modulationType\"]);this._carrier=new Ot({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=\u003ethis.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ot({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Ct({context:this.context,units:\"positive\",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ie(this,[\"frequency\",\"detune\",\"harmonicity\"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{harmonicity:1,modulationType:\"square\"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return xt(this,void 0,void 0,function*(){return Ds(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Is extends Lt{constructor(){super(V(Is.getDefaults(),arguments,[\"frequency\",\"type\",\"modulationType\"])),this.name=\"FMOscillator\",this._modulationNode=new Ce({context:this.context,gain:0});let t=V(Is.getDefaults(),arguments,[\"frequency\",\"type\",\"modulationType\"]);this._carrier=new Ot({context:this.context,detune:t.detune,frequency:0,onstop:()=\u003ethis.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Le({context:this.context,units:\"frequency\",value:t.frequency}),this._modulator=new Ot({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Ct({context:this.context,units:\"positive\",value:t.harmonicity}),this.modulationIndex=new Ct({context:this.context,units:\"positive\",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ie(this,[\"modulationIndex\",\"frequency\",\"detune\",\"harmonicity\"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:\"square\"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return xt(this,void 0,void 0,function*(){return Ds(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Fs extends Lt{constructor(){super(V(Fs.getDefaults(),arguments,[\"frequency\",\"width\"])),this.name=\"PulseOscillator\",this._widthGate=new Ce({context:this.context,gain:0}),this._thresh=new kr({context:this.context,mapping:i=\u003ei\u003c=0?-1:1});let t=V(Fs.getDefaults(),arguments,[\"frequency\",\"width\"]);this.width=new Le({context:this.context,units:\"audioRange\",value:t.width}),this._triangle=new Ot({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=\u003ethis.onstop(this),phase:t.phase,type:\"triangle\"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ie(this,[\"width\",\"frequency\",\"detune\"])}static getDefaults(){return Object.assign(Lt.getDefaults(),{detune:0,frequency:440,phase:0,type:\"pulse\",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return\"pulse\"}get baseType(){return\"pulse\"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return xt(this,void 0,void 0,function*(){return Ds(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Ui extends Lt{constructor(){super(V(Ui.getDefaults(),arguments,[\"frequency\",\"type\",\"spread\"])),this.name=\"FatOscillator\",this._oscillators=[];let t=V(Ui.getDefaults(),arguments,[\"frequency\",\"type\",\"spread\"]);this.frequency=new Le({context:this.context,units:\"frequency\",value:t.frequency}),this.detune=new Le({context:this.context,units:\"cents\",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Ie(this,[\"frequency\",\"detune\"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{count:3,spread:20,type:\"sawtooth\"})}_start(t){t=this.toSeconds(t),this._forEach(i=\u003ei.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(i=\u003ei.stop(t))}_restart(t){this._forEach(i=\u003ei.restart(t))}_forEach(t){for(let i=0;i\u003cthis._oscillators.length;i++)t(this._oscillators[i],i)}get type(){return this._type}set type(t){this._type=t,this._forEach(i=\u003ei.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length\u003e1){let i=-t/2,c=t/(this._oscillators.length-1);this._forEach((p,d)=\u003ep.detune.value=i+c*d)}}get count(){return this._oscillators.length}set count(t){if(yn(t,1),this._oscillators.length!==t){this._forEach(i=\u003ei.dispose()),this._oscillators=[];for(let i=0;i\u003ct;i++){let c=new Ot({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+i/t*360,partialCount:this._partialCount,onstop:i===0?()=\u003ethis.onstop(this):at});this.type===\"custom\"\u0026\u0026(c.partials=this._partials),this.frequency.connect(c.frequency),this.detune.connect(c.detune),c.detune.overridden=!1,c.connect(this.output),this._oscillators[i]=c}this.spread=this._spread,this.state===\"started\"\u0026\u0026this._forEach(i=\u003ei.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((i,c)=\u003ei.phase=this._phase+c/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(i=\u003ei.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length\u0026\u0026(this._type=\"custom\",this._forEach(i=\u003ei.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(i=\u003ei.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return xt(this,void 0,void 0,function*(){return Ds(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=\u003et.dispose()),this}}class $i extends Lt{constructor(){super(V($i.getDefaults(),arguments,[\"frequency\",\"modulationFrequency\"])),this.name=\"PWMOscillator\",this.sourceType=\"pwm\",this._scale=new Ct({context:this.context,value:2});let t=V($i.getDefaults(),arguments,[\"frequency\",\"modulationFrequency\"]);this._pulse=new Fs({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType=\"sine\",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ot({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=\u003ethis.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ie(this,[\"modulationFrequency\",\"frequency\",\"detune\"])}static getDefaults(){return Object.assign(Lt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:\"pwm\"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return\"pwm\"}get baseType(){return\"pwm\"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return xt(this,void 0,void 0,function*(){return Ds(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}let kN={am:Gi,fat:Ui,fm:Is,oscillator:Ot,pulse:Fs,pwm:$i};class Qr extends Lt{constructor(){super(V(Qr.getDefaults(),arguments,[\"frequency\",\"type\"])),this.name=\"OmniOscillator\";let t=V(Qr.getDefaults(),arguments,[\"frequency\",\"type\"]);this.frequency=new Le({context:this.context,units:\"frequency\",value:t.frequency}),this.detune=new Le({context:this.context,units:\"cents\",value:t.detune}),Ie(this,[\"frequency\",\"detune\"]),this.set(t)}static getDefaults(){return Object.assign(Ot.getDefaults(),Is.getDefaults(),Gi.getDefaults(),Ui.getDefaults(),Fs.getDefaults(),$i.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t=\"\";return[\"am\",\"fm\",\"fat\"].some(i=\u003ethis._sourceType===i)\u0026\u0026(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)===\"fm\"?(this._createNewOscillator(\"fm\"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)===\"am\"?(this._createNewOscillator(\"am\"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)===\"fat\"?(this._createNewOscillator(\"fat\"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t===\"pwm\"?(this._createNewOscillator(\"pwm\"),this._oscillator=this._oscillator):t===\"pulse\"?this._createNewOscillator(\"pulse\"):(this._createNewOscillator(\"oscillator\"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,\"pulse\")||this._getOscType(this._oscillator,\"pwm\")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,\"pulse\")||this._getOscType(this._oscillator,\"pwm\")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,\"type\")\u0026\u0026t.type\u0026\u0026(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;let i=kN[t],c=this.now();if(this._oscillator){let p=this._oscillator;p.stop(c),this.context.setTimeout(()=\u003ep.dispose(),this.blockTime)}this._oscillator=new i({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=\u003ethis.onstop(this),this.state===\"started\"\u0026\u0026this._oscillator.start(c)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let i=\"sine\";this._oscillator.type!==\"pwm\"\u0026\u0026this._oscillator.type!==\"pulse\"\u0026\u0026(i=this._oscillator.type),t===\"fm\"?this.type=\"fm\"+i:t===\"am\"?this.type=\"am\"+i:t===\"fat\"?this.type=\"fat\"+i:t===\"oscillator\"?this.type=i:t===\"pulse\"?this.type=\"pulse\":t===\"pwm\"\u0026\u0026(this.type=\"pwm\")}_getOscType(t,i){return t instanceof kN[i]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,\"pulse\")||this._getOscType(this._oscillator,\"pwm\")||t===\"pulse\"||t===\"pwm\"||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,\"pulse\")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,\"fat\")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,\"fat\")\u0026\u0026nr(t)\u0026\u0026(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,\"fat\")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,\"fat\")\u0026\u0026nr(t)\u0026\u0026(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,\"fm\")||this._getOscType(this._oscillator,\"am\")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,\"fm\")||this._getOscType(this._oscillator,\"am\"))\u0026\u0026gr(t)\u0026\u0026(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,\"fm\")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,\"fm\")||this._getOscType(this._oscillator,\"am\")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,\"pwm\")?this._oscillator.modulationFrequency:void 0}asArray(t=1024){return xt(this,void 0,void 0,function*(){return Ds(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Vs extends Le{constructor(){super(Object.assign(V(Vs.getDefaults(),arguments,[\"value\"]))),this.override=!1,this.name=\"Add\",this._sum=new Ce({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,ar(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Jr extends sr{constructor(){super(Object.assign(V(Jr.getDefaults(),arguments,[\"min\",\"max\"]))),this.name=\"Scale\";let t=V(Jr.getDefaults(),arguments,[\"min\",\"max\"]);this._mult=this.input=new Ct({context:this.context,value:t.max-t.min}),this._add=this.output=new Vs({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(sr.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Il extends sr{constructor(){super(Object.assign(V(Il.getDefaults(),arguments))),this.name=\"Zero\",this._gain=new Ce({context:this.context}),this.output=this._gain,this.input=void 0,Wn(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),lm(this.context.getConstant(0),this._gain),this}}class Sn extends ye{constructor(){super(V(Sn.getDefaults(),arguments,[\"frequency\",\"min\",\"max\"])),this.name=\"LFO\",this._stoppedValue=0,this._units=\"number\",this.convert=!0,this._fromType=Ue.prototype._fromType,this._toType=Ue.prototype._toType,this._is=Ue.prototype._is,this._clampValue=Ue.prototype._clampValue;let t=V(Sn.getDefaults(),arguments,[\"frequency\",\"min\",\"max\"]);this._oscillator=new Ot(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Ce({context:this.context,gain:t.amplitude,units:\"normalRange\"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Le({context:this.context,units:\"audioRange\",value:0}),this._zeros=new Il({context:this.context}),this._a2g=new Dl({context:this.context}),this._scaler=this.output=new Jr({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Ie(this,[\"amplitude\",\"frequency\"]),this.phase=t.phase}static getDefaults(){return Object.assign(Ot.getDefaults(),{amplitude:1,frequency:\"4n\",max:1,min:0,type:\"sine\",units:\"number\"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){let i=this.min,c=this.max;this._units=t,this.min=i,this.max=c}get state(){return this._oscillator.state}connect(t,i,c){return(t instanceof Ue||t instanceof Le)\u0026\u0026(this.convert=t.convert,this.units=t.units),yc(this,t,i,c),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function NN(l,t=1/0){let i=new WeakMap;return function(c,p){Reflect.defineProperty(c,p,{configurable:!0,enumerable:!0,get:function(){return i.get(this)},set:function(d){yn(d,l,t),i.set(this,d)}})}}function qa(l,t=1/0){let i=new WeakMap;return function(c,p){Reflect.defineProperty(c,p,{configurable:!0,enumerable:!0,get:function(){return i.get(this)},set:function(d){yn(this.toSeconds(d),l,t),i.set(this,d)}})}}class Ws extends Lt{constructor(){super(V(Ws.getDefaults(),arguments,[\"url\",\"onload\"])),this.name=\"Player\",this._activeSources=new Set;let t=V(Ws.getDefaults(),arguments,[\"url\",\"onload\"]);this._buffer=new ct({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Lt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:at,onerror:at,playbackRate:1,reverse:!1})}load(t){return xt(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=at){t(),this.autostart\u0026\u0026this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size!==0||this._synced||this._state.getValueAtTime(this.now())!==\"started\"||(this._state.cancel(this.now()),this._state.setStateAtTime(\"stopped\",this.now()))}start(t,i,c){return super.start(t,i,c),this}_start(t,i,c){i=this._loop?_r(i,this._loopStart):_r(i,0);let p=this.toSeconds(i),d=c;c=_r(c,Math.max(this._buffer.duration-p,0));let m=this.toSeconds(c);m/=this._playbackRate,t=this.toSeconds(t);let g=new ba({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+m),this._state.setStateAtTime(\"stopped\",t+m,{implicitEnd:!0})),this._activeSources.add(g),this._loop\u0026\u0026Vn(d)?g.start(t,p):g.start(t,p,m-this.toSeconds(this.fadeOut))}_stop(t){let i=this.toSeconds(t);this._activeSources.forEach(c=\u003ec.stop(i))}restart(t,i,c){return super.restart(t,i,c),this}_restart(t,i,c){this._stop(t),this._start(t,i,c)}seek(t,i){let c=this.toSeconds(i);if(this._state.getValueAtTime(c)===\"started\"){let p=this.toSeconds(t);this._stop(c),this._start(c,p)}return this}setLoopPoints(t,i){return this.loopStart=t,this.loopEnd=i,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded\u0026\u0026yn(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(i=\u003e{i.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded\u0026\u0026yn(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(i=\u003e{i.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t\u0026\u0026(this._loop=t,this._activeSources.forEach(i=\u003e{i.loop=t}),t)){let i=this._state.getNextState(\"stopped\",this.now());i\u0026\u0026this._state.cancel(i.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;let i=this.now(),c=this._state.getNextState(\"stopped\",i);c\u0026\u0026c.implicitEnd\u0026\u0026(this._state.cancel(c.time),this._activeSources.forEach(p=\u003ep.cancelStop())),this._activeSources.forEach(p=\u003e{p.playbackRate.setValueAtTime(t,i)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=\u003et.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Ir([qa(0)],Ws.prototype,\"fadeIn\",void 0),Ir([qa(0)],Ws.prototype,\"fadeOut\",void 0);class Fl extends ye{constructor(){super(V(Fl.getDefaults(),arguments,[\"urls\",\"onload\"],\"urls\")),this.name=\"Players\",this.input=void 0,this._players=new Map;let t=V(Fl.getDefaults(),arguments,[\"urls\",\"onload\"],\"urls\");this._volume=this.output=new Kr({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Ie(this,\"volume\"),this._buffers=new Wi({urls:t.urls,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.mute=t.mute,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Lt.getDefaults(),{baseUrl:\"\",fadeIn:0,fadeOut:0,mute:!1,onload:at,onerror:at,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._players.forEach(i=\u003e{i.fadeIn=t})}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._players.forEach(i=\u003e{i.fadeOut=t})}get state(){return Array.from(this._players).some(([t,i])=\u003ei.state===\"started\")?\"started\":\"stopped\"}has(t){return this._buffers.has(t)}player(t){if(Ae(this.has(t),`No Player with the name ${t} exists on this object`),!this._players.has(t)){let i=new Ws({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,i)}return this._players.get(t)}get loaded(){return this._buffers.loaded}add(t,i,c){return Ae(!this._buffers.has(t),\"A buffer with that name already exists on this object\"),this._buffers.add(t,i,c),this}stopAll(t){return this._players.forEach(i=\u003ei.stop(t)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(t=\u003et.dispose()),this._buffers.dispose(),this}}class Vl extends Lt{constructor(){super(V(Vl.getDefaults(),arguments,[\"url\",\"onload\"])),this.name=\"GrainPlayer\",this._loopStart=0,this._loopEnd=0,this._activeSources=[];let t=V(Vl.getDefaults(),arguments,[\"url\",\"onload\"]);this.buffer=new ct({onload:t.onload,onerror:t.onerror,reverse:t.reverse,url:t.url}),this._clock=new js({context:this.context,callback:this._tick.bind(this),frequency:1/t.grainSize}),this._playbackRate=t.playbackRate,this._grainSize=t.grainSize,this._overlap=t.overlap,this.detune=t.detune,this.overlap=t.overlap,this.loop=t.loop,this.playbackRate=t.playbackRate,this.grainSize=t.grainSize,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.reverse=t.reverse,this._clock.on(\"stop\",this._onstop.bind(this))}static getDefaults(){return Object.assign(Lt.getDefaults(),{onload:at,onerror:at,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(t,i,c){i=_r(i,0),i=this.toSeconds(i),t=this.toSeconds(t);let p=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,i/p),c\u0026\u0026this.stop(t+this.toSeconds(c))}restart(t,i,c){return super.restart(t,i,c),this}_restart(t,i,c){this._stop(t),this._start(t,i,c)}_stop(t){this._clock.stop(t)}_onstop(t){this._activeSources.forEach(i=\u003e{i.fadeOut=0,i.stop(t)}),this.onstop(this)}_tick(t){let i=this._clock.getTicksAtTime(t),c=i*this._grainSize;if(this.log(\"offset\",c),!this.loop\u0026\u0026c\u003ethis.buffer.duration)return void this.stop(t);let p=c\u003cthis._overlap?0:this._overlap,d=new ba({context:this.context,url:this.buffer,fadeIn:p,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:Ii(this.detune/100)}).connect(this.output);d.start(t,this._grainSize*i),d.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(d),d.onended=()=\u003e{let m=this._activeSources.indexOf(d);m!==-1\u0026\u0026this._activeSources.splice(m,1)}}get playbackRate(){return this._playbackRate}set playbackRate(t){yn(t,.001),this._playbackRate=t,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(t){this.buffer.loaded\u0026\u0026yn(this.toSeconds(t),0,this.buffer.duration),this._loopStart=this.toSeconds(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this.buffer.loaded\u0026\u0026yn(this.toSeconds(t),0,this.buffer.duration),this._loopEnd=this.toSeconds(t)}get reverse(){return this.buffer.reverse}set reverse(t){this.buffer.reverse=t}get grainSize(){return this._grainSize}set grainSize(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(t){let i=this.toSeconds(t);yn(i,0),this._overlap=i}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(t=\u003et.dispose()),this}}class bN extends sr{constructor(){super(...arguments),this.name=\"Abs\",this._abs=new kr({context:this.context,mapping:t=\u003eMath.abs(t)\u003c.001?0:Math.abs(t)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class xN extends sr{constructor(){super(...arguments),this.name=\"GainToAudio\",this._norm=new kr({context:this.context,mapping:t=\u003e2*Math.abs(t)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class hm extends sr{constructor(){super(...arguments),this.name=\"Negate\",this._multiply=new Ct({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class Ls extends Le{constructor(){super(Object.assign(V(Ls.getDefaults(),arguments,[\"value\"]))),this.override=!1,this.name=\"Subtract\",this._sum=new Ce({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new hm({context:this.context}),this.subtrahend=this._param,ar(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(Le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class Wl extends sr{constructor(){super(Object.assign(V(Wl.getDefaults(),arguments))),this.name=\"GreaterThanZero\",this._thresh=this.output=new kr({context:this.context,length:127,mapping:t=\u003et\u003c=0?0:1}),this._scale=this.input=new Ct({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class kc extends Le{constructor(){super(Object.assign(V(kc.getDefaults(),arguments,[\"value\"]))),this.name=\"GreaterThan\",this.override=!1;let t=V(kc.getDefaults(),arguments,[\"value\"]);this._subtract=this.input=new Ls({context:this.context,value:t.value}),this._gtz=this.output=new Wl({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,Ie(this,\"comparator\"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(Le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class Hi extends sr{constructor(){super(Object.assign(V(Hi.getDefaults(),arguments,[\"value\"]))),this.name=\"Pow\";let t=V(Hi.getDefaults(),arguments,[\"value\"]);this._exponentScaler=this.input=this.output=new kr({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(sr.getDefaults(),{value:1})}_expFunc(t){return i=\u003eMath.pow(Math.abs(i),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Nc extends Jr{constructor(){super(Object.assign(V(Nc.getDefaults(),arguments,[\"min\",\"max\",\"exponent\"]))),this.name=\"ScaleExp\";let t=V(Nc.getDefaults(),arguments,[\"min\",\"max\",\"exponent\"]);this.input=this._exp=new Hi({context:this.context,value:t.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(Jr.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(t){this._exp.value=t}dispose(){return super.dispose(),this._exp.dispose(),this}}class bF extends Le{constructor(){super(V(Le.getDefaults(),arguments,[\"value\",\"units\"])),this.name=\"SyncedSignal\",this.override=!1;let t=V(Le.getDefaults(),arguments,[\"value\",\"units\"]);this._lastVal=t.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),\"1i\"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on(\"start\",this._syncedCallback),this.context.transport.on(\"pause\",this._syncedCallback),this.context.transport.on(\"stop\",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new gc({context:this.context,offset:t.value,units:t.units}).start(0),this.setValueAtTime(t.value,0)}_onTick(t){let i=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==i\u0026\u0026(this._lastVal=i,this._constantSource.offset.setValueAtTime(i,t))}_anchorValue(t){let i=super.getValueAtTime(this.context.transport.seconds);this._lastVal=i,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(i,t)}getValueAtTime(t){let i=new Kt(this.context,t).toSeconds();return super.getValueAtTime(i)}setValueAtTime(t,i){let c=new Kt(this.context,i).toSeconds();return super.setValueAtTime(t,c),this}linearRampToValueAtTime(t,i){let c=new Kt(this.context,i).toSeconds();return super.linearRampToValueAtTime(t,c),this}exponentialRampToValueAtTime(t,i){let c=new Kt(this.context,i).toSeconds();return super.exponentialRampToValueAtTime(t,c),this}setTargetAtTime(t,i,c){let p=new Kt(this.context,i).toSeconds();return super.setTargetAtTime(t,p,c),this}cancelScheduledValues(t){let i=new Kt(this.context,t).toSeconds();return super.cancelScheduledValues(i),this}setValueCurveAtTime(t,i,c,p){let d=new Kt(this.context,i).toSeconds();return c=this.toSeconds(c),super.setValueCurveAtTime(t,d,c,p),this}cancelAndHoldAtTime(t){let i=new Kt(this.context,t).toSeconds();return super.cancelAndHoldAtTime(i),this}setRampPoint(t){let i=new Kt(this.context,t).toSeconds();return super.setRampPoint(i),this}exponentialRampTo(t,i,c){let p=new Kt(this.context,c).toSeconds();return super.exponentialRampTo(t,i,p),this}linearRampTo(t,i,c){let p=new Kt(this.context,c).toSeconds();return super.linearRampTo(t,i,p),this}targetRampTo(t,i,c){let p=new Kt(this.context,c).toSeconds();return super.targetRampTo(t,i,p),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off(\"start\",this._syncedCallback),this.context.transport.off(\"pause\",this._syncedCallback),this.context.transport.off(\"stop\",this._syncedCallback),this._constantSource.dispose(),this}}class pn extends ye{constructor(){super(V(pn.getDefaults(),arguments,[\"attack\",\"decay\",\"sustain\",\"release\"])),this.name=\"Envelope\",this._sig=new Le({context:this.context,value:0}),this.output=this._sig,this.input=void 0;let t=V(pn.getDefaults(),arguments,[\"attack\",\"decay\",\"sustain\",\"release\"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(ye.getDefaults(),{attack:.01,attackCurve:\"linear\",decay:.1,decayCurve:\"exponential\",release:1,releaseCurve:\"exponential\",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,i){if(gr(t))return t;{let c;for(c in Ll)if(Ll[c][i]===t)return c;return t}}_setCurve(t,i,c){if(gr(c)\u0026\u0026Reflect.has(Ll,c)){let p=Ll[c];_a(p)?t!==\"_decayCurve\"\u0026\u0026(this[t]=p[i]):this[t]=p}else{if(!_n(c)||t===\"_decayCurve\")throw new Error(\"Envelope: invalid curve: \"+c);this[t]=c}}get attackCurve(){return this._getCurve(this._attackCurve,\"In\")}set attackCurve(t){this._setCurve(\"_attackCurve\",\"In\",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,\"Out\")}set releaseCurve(t){this._setCurve(\"_releaseCurve\",\"Out\",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){Ae([\"linear\",\"exponential\"].some(i=\u003ei===t),\"Invalid envelope curve: \"+t),this._decayCurve=t}triggerAttack(t,i=1){this.log(\"triggerAttack\",t,i),t=this.toSeconds(t);let c=this.toSeconds(this.attack),p=this.toSeconds(this.decay),d=this.getValueAtTime(t);if(d\u003e0\u0026\u0026(c=(1-d)/(1/c)),c\u003cthis.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(i,t);else if(this._attackCurve===\"linear\")this._sig.linearRampTo(i,c,t);else if(this._attackCurve===\"exponential\")this._sig.targetRampTo(i,c,t);else{this._sig.cancelAndHoldAtTime(t);let m=this._attackCurve;for(let g=1;g\u003cm.length;g++)if(m[g-1]\u003c=d\u0026\u0026d\u003c=m[g]){m=this._attackCurve.slice(g),m[0]=d;break}this._sig.setValueCurveAtTime(m,t,c,i)}if(p\u0026\u0026this.sustain\u003c1){let m=i*this.sustain,g=t+c;this.log(\"decay\",g),this._decayCurve===\"linear\"?this._sig.linearRampToValueAtTime(m,p+g):this._sig.exponentialApproachValueAtTime(m,g,p)}return this}triggerRelease(t){this.log(\"triggerRelease\",t),t=this.toSeconds(t);let i=this.getValueAtTime(t);if(i\u003e0){let c=this.toSeconds(this.release);c\u003cthis.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve===\"linear\"?this._sig.linearRampTo(0,c,t):this._releaseCurve===\"exponential\"?this._sig.targetRampTo(0,c,t):(Ae(_n(this._releaseCurve),\"releaseCurve must be either 'linear', 'exponential' or an array\"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,c,i))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,i,c=1){return i=this.toSeconds(i),this.triggerAttack(i,c),this.triggerRelease(i+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,i=0,c=0){return yc(this,t,i,c),this}asArray(t=1024){return xt(this,void 0,void 0,function*(){let i=t/this.context.sampleRate,c=new ji(1,i,this.context.sampleRate),p=this.toSeconds(this.attack)+this.toSeconds(this.decay),d=p+this.toSeconds(this.release),m=.1*d,g=d+m,_=new this.constructor(Object.assign(this.get(),{attack:i*this.toSeconds(this.attack)/g,decay:i*this.toSeconds(this.decay)/g,release:i*this.toSeconds(this.release)/g,context:c}));return _._sig.toDestination(),_.triggerAttackRelease(i*(p+m)/g,0),(yield c.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Ir([qa(0)],pn.prototype,\"attack\",void 0),Ir([qa(0)],pn.prototype,\"decay\",void 0),Ir([NN(0,1)],pn.prototype,\"sustain\",void 0),Ir([qa(0)],pn.prototype,\"release\",void 0);let Ll=(()=\u003e{let l,t,i=[];for(l=0;l\u003c128;l++)i[l]=Math.sin(l/127*(Math.PI/2));let c=[];for(l=0;l\u003c127;l++){t=l/127;let N=Math.sin(t*(2*Math.PI)*6.4-Math.PI/2)+1;c[l]=N/10+.83*t}c[127]=1;let p=[];for(l=0;l\u003c128;l++)p[l]=Math.ceil(l/127*5)/5;let d=[];for(l=0;l\u003c128;l++)t=l/127,d[l]=.5*(1-Math.cos(Math.PI*t));let m=[];for(l=0;l\u003c128;l++){t=l/127;let N=4*Math.pow(t,3)+.2,S=Math.cos(N*Math.PI*2*t);m[l]=Math.abs(S*(1-t))}function g(N){let S=new Array(N.length);for(let b=0;b\u003cN.length;b++)S[b]=1-N[b];return S}return{bounce:{In:g(m),Out:m},cosine:{In:i,Out:(_=i,_.slice(0).reverse())},exponential:\"exponential\",linear:\"linear\",ripple:{In:c,Out:g(c)},sine:{In:d,Out:g(d)},step:{In:p,Out:g(p)}};var _})();class ir extends ye{constructor(){super(V(ir.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;let t=V(ir.getDefaults(),arguments);this._volume=this.output=new Kr({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Ie(this,\"volume\")}static getDefaults(){return Object.assign(ye.getDefaults(),{volume:0})}sync(){return this._syncState()\u0026\u0026(this._syncMethod(\"triggerAttack\",1),this._syncMethod(\"triggerRelease\",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,i){let c=this[\"_original_\"+t]=this[t];this[t]=(...p)=\u003e{let d=p[i],m=this.context.transport.schedule(g=\u003e{p[i]=g,c.apply(this,p)},d);this._scheduledEvents.push(m)}}unsync(){return this._scheduledEvents.forEach(t=\u003ethis.context.transport.clear(t)),this._scheduledEvents=[],this._synced\u0026\u0026(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,i,c,p){let d=this.toSeconds(c),m=this.toSeconds(i);return this.triggerAttack(t,d,p),this.triggerRelease(d+m),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Nn extends ir{constructor(){super(V(Nn.getDefaults(),arguments));let t=V(Nn.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(ir.getDefaults(),{detune:0,onsilence:at,portamento:0})}triggerAttack(t,i,c=1){this.log(\"triggerAttack\",t,i,c);let p=this.toSeconds(i);return this._triggerEnvelopeAttack(p,c),this.setNote(t,p),this}triggerRelease(t){this.log(\"triggerRelease\",t);let i=this.toSeconds(t);return this._triggerEnvelopeRelease(i),this}setNote(t,i){let c=this.toSeconds(i),p=t instanceof jn?t.toFrequency():t;if(this.portamento\u003e0\u0026\u0026this.getLevelAtTime(c)\u003e.05){let d=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(p,d,c)}else this.frequency.setValueAtTime(p,c);return this}}Ir([qa(0)],Nn.prototype,\"portamento\",void 0);class Yi extends pn{constructor(){super(V(Yi.getDefaults(),arguments,[\"attack\",\"decay\",\"sustain\",\"release\"])),this.name=\"AmplitudeEnvelope\",this._gainNode=new Ce({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Ta extends Nn{constructor(){super(V(Ta.getDefaults(),arguments)),this.name=\"Synth\";let t=V(Ta.getDefaults(),arguments);this.oscillator=new Qr(Object.assign({context:this.context,detune:t.detune,onstop:()=\u003ethis.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Yi(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Ie(this,[\"oscillator\",\"frequency\",\"detune\",\"envelope\"])}static getDefaults(){return Object.assign(Nn.getDefaults(),{envelope:Object.assign(kn(pn.getDefaults(),Object.keys(ye.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(kn(Qr.getDefaults(),[...Object.keys(Lt.getDefaults()),\"frequency\",\"detune\"]),{type:\"triangle\"})})}_triggerEnvelopeAttack(t,i){if(this.envelope.triggerAttack(t,i),this.oscillator.start(t),this.envelope.sustain===0){let c=this.toSeconds(this.envelope.attack),p=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+c+p)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Xi extends Nn{constructor(){super(V(Xi.getDefaults(),arguments)),this.name=\"ModulationSynth\";let t=V(Xi.getDefaults(),arguments);this._carrier=new Ta({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=\u003ethis.onsilence(this),volume:-10}),this._modulator=new Ta({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Le({context:this.context,units:\"frequency\"}),this.detune=new Le({context:this.context,value:t.detune,units:\"cents\"}),this.harmonicity=new Ct({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new Ce({context:this.context,gain:0}),Ie(this,[\"frequency\",\"harmonicity\",\"oscillator\",\"envelope\",\"modulation\",\"modulationEnvelope\",\"detune\"])}static getDefaults(){return Object.assign(Nn.getDefaults(),{harmonicity:3,oscillator:Object.assign(kn(Qr.getDefaults(),[...Object.keys(Lt.getDefaults()),\"frequency\",\"detune\"]),{type:\"sine\"}),envelope:Object.assign(kn(pn.getDefaults(),Object.keys(ye.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(kn(Qr.getDefaults(),[...Object.keys(Lt.getDefaults()),\"frequency\",\"detune\"]),{type:\"square\"}),modulationEnvelope:Object.assign(kn(pn.getDefaults(),Object.keys(ye.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,i){this._carrier._triggerEnvelopeAttack(t,i),this._modulator._triggerEnvelopeAttack(t,i)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class dm extends Xi{constructor(){super(V(dm.getDefaults(),arguments)),this.name=\"AMSynth\",this._modulationScale=new Dl({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Zi extends ye{constructor(){super(V(Zi.getDefaults(),arguments,[\"frequency\",\"type\"])),this.name=\"BiquadFilter\";let t=V(Zi.getDefaults(),arguments,[\"frequency\",\"type\"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Ue({context:this.context,units:\"number\",value:t.Q,param:this._filter.Q}),this.frequency=new Ue({context:this.context,units:\"frequency\",value:t.frequency,param:this._filter.frequency}),this.detune=new Ue({context:this.context,units:\"cents\",value:t.detune,param:this._filter.detune}),this.gain=new Ue({context:this.context,units:\"decibels\",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(ye.getDefaults(),{Q:1,type:\"lowpass\",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){Ae([\"lowpass\",\"highpass\",\"bandpass\",\"lowshelf\",\"highshelf\",\"notch\",\"allpass\",\"peaking\"].indexOf(t)!==-1,\"Invalid filter type: \"+t),this._filter.type=t}getFrequencyResponse(t=128){let i=new Float32Array(t);for(let m=0;m\u003ct;m++){let g=19980*Math.pow(m/t,2)+20;i[m]=g}let c=new Float32Array(t),p=new Float32Array(t),d=this.context.createBiquadFilter();return d.type=this.type,d.Q.value=this.Q.value,d.frequency.value=this.frequency.value,d.gain.value=this.gain.value,d.getFrequencyResponse(i,c,p),c}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Bn extends ye{constructor(){super(V(Bn.getDefaults(),arguments,[\"frequency\",\"type\",\"rolloff\"])),this.name=\"Filter\",this.input=new Ce({context:this.context}),this.output=new Ce({context:this.context}),this._filters=[];let t=V(Bn.getDefaults(),arguments,[\"frequency\",\"type\",\"rolloff\"]);this._filters=[],this.Q=new Le({context:this.context,units:\"positive\",value:t.Q}),this.frequency=new Le({context:this.context,units:\"frequency\",value:t.frequency}),this.detune=new Le({context:this.context,units:\"cents\",value:t.detune}),this.gain=new Le({context:this.context,units:\"decibels\",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,Ie(this,[\"detune\",\"frequency\",\"gain\",\"Q\"])}static getDefaults(){return Object.assign(ye.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:\"lowpass\"})}get type(){return this._type}set type(t){Ae([\"lowpass\",\"highpass\",\"bandpass\",\"lowshelf\",\"highshelf\",\"notch\",\"allpass\",\"peaking\"].indexOf(t)!==-1,\"Invalid filter type: \"+t),this._type=t,this._filters.forEach(i=\u003ei.type=t)}get rolloff(){return this._rolloff}set rolloff(t){let i=nr(t)?t:parseInt(t,10),c=[-12,-24,-48,-96],p=c.indexOf(i);Ae(p!==-1,\"rolloff can only be \"+c.join(\", \")),p+=1,this._rolloff=i,this.input.disconnect(),this._filters.forEach(d=\u003ed.disconnect()),this._filters=new Array(p);for(let d=0;d\u003cp;d++){let m=new Zi({context:this.context});m.type=this._type,this.frequency.connect(m.frequency),this.detune.connect(m.detune),this.Q.connect(m.Q),this.gain.connect(m.gain),this._filters[d]=m}this._internalChannels=this._filters,ar(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){let i=new Zi({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),c=new Float32Array(t).map(()=\u003e1);return this._filters.forEach(()=\u003e{i.getFrequencyResponse(t).forEach((p,d)=\u003ec[d]*=p)}),i.dispose(),c}dispose(){return super.dispose(),this._filters.forEach(t=\u003e{t.dispose()}),mc(this,[\"detune\",\"frequency\",\"gain\",\"Q\"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Ki extends pn{constructor(){super(V(Ki.getDefaults(),arguments,[\"attack\",\"decay\",\"sustain\",\"release\"])),this.name=\"FrequencyEnvelope\";let t=V(Ki.getDefaults(),arguments,[\"attack\",\"decay\",\"sustain\",\"release\"]);this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new Hi({context:this.context,value:t.exponent}),this._scale=this.output=new Jr({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(pn.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){let i=this.toFrequency(t);yn(i,0),this._baseFrequency=i,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Za extends Nn{constructor(){super(V(Za.getDefaults(),arguments)),this.name=\"MonoSynth\";let t=V(Za.getDefaults(),arguments);this.oscillator=new Qr(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=\u003ethis.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Bn(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new Ki(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new Yi(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Ie(this,[\"oscillator\",\"frequency\",\"detune\",\"filter\",\"filterEnvelope\",\"envelope\"])}static getDefaults(){return Object.assign(Nn.getDefaults(),{envelope:Object.assign(kn(pn.getDefaults(),Object.keys(ye.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(kn(Bn.getDefaults(),Object.keys(ye.getDefaults())),{Q:1,rolloff:-12,type:\"lowpass\"}),filterEnvelope:Object.assign(kn(Ki.getDefaults(),Object.keys(ye.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(kn(Qr.getDefaults(),Object.keys(Lt.getDefaults())),{type:\"sawtooth\"})})}_triggerEnvelopeAttack(t,i=1){if(this.envelope.triggerAttack(t,i),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),this.envelope.sustain===0){let c=this.toSeconds(this.envelope.attack),p=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+c+p)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Bl extends Nn{constructor(){super(V(Bl.getDefaults(),arguments)),this.name=\"DuoSynth\";let t=V(Bl.getDefaults(),arguments);this.voice0=new Za(Object.assign(t.voice0,{context:this.context,onsilence:()=\u003ethis.onsilence(this)})),this.voice1=new Za(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new Ct({context:this.context,units:\"positive\",value:t.harmonicity}),this._vibrato=new Sn({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new Ce({context:this.context,units:\"normalRange\",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Le({context:this.context,units:\"frequency\",value:440}),this.detune=new Le({context:this.context,units:\"cents\",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),Ie(this,[\"voice0\",\"voice1\",\"frequency\",\"vibratoAmount\",\"vibratoRate\"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return yr(Nn.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:yr(kn(Za.getDefaults(),Object.keys(Nn.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:yr(kn(Za.getDefaults(),Object.keys(Nn.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,i){this.voice0._triggerEnvelopeAttack(t,i),this.voice1._triggerEnvelopeAttack(t,i)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class zl extends Xi{constructor(){super(V(zl.getDefaults(),arguments)),this.name=\"FMSynth\";let t=V(zl.getDefaults(),arguments);this.modulationIndex=new Ct({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(Xi.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}let wN=[1,1.483,1.932,2.546,2.63,3.897];class Gl extends Nn{constructor(){super(V(Gl.getDefaults(),arguments)),this.name=\"MetalSynth\",this._oscillators=[],this._freqMultipliers=[];let t=V(Gl.getDefaults(),arguments);this.detune=new Le({context:this.context,units:\"cents\",value:t.detune}),this.frequency=new Le({context:this.context,units:\"frequency\"}),this._amplitude=new Ce({context:this.context,gain:0}).connect(this.output),this._highpass=new Bn({Q:0,context:this.context,type:\"highpass\"}).connect(this._amplitude);for(let i=0;i\u003cwN.length;i++){let c=new Is({context:this.context,harmonicity:t.harmonicity,modulationIndex:t.modulationIndex,modulationType:\"square\",onstop:i===0?()=\u003ethis.onsilence(this):at,type:\"square\"});c.connect(this._highpass),this._oscillators[i]=c;let p=new Ct({context:this.context,value:wN[i]});this._freqMultipliers[i]=p,this.frequency.chain(p,c.frequency),this.detune.connect(c.detune)}this._filterFreqScaler=new Jr({context:this.context,max:7e3,min:this.toFrequency(t.resonance)}),this.envelope=new pn({attack:t.envelope.attack,attackCurve:\"linear\",context:this.context,decay:t.envelope.decay,release:t.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=t.octaves,this.octaves=t.octaves}static getDefaults(){return yr(Nn.getDefaults(),{envelope:Object.assign(kn(pn.getDefaults(),Object.keys(ye.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(t,i=1){return this.envelope.triggerAttack(t,i),this._oscillators.forEach(c=\u003ec.start(t)),this.envelope.sustain===0\u0026\u0026this._oscillators.forEach(c=\u003e{c.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(t){return this.envelope.triggerRelease(t),this._oscillators.forEach(i=\u003ei.stop(t+this.toSeconds(this.envelope.release))),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(t){this._oscillators.forEach(i=\u003ei.modulationIndex.value=t)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(t){this._oscillators.forEach(i=\u003ei.harmonicity.value=t)}get resonance(){return this._filterFreqScaler.min}set resonance(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}dispose(){return super.dispose(),this._oscillators.forEach(t=\u003et.dispose()),this._freqMultipliers.forEach(t=\u003et.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class Qi extends Ta{constructor(){super(V(Qi.getDefaults(),arguments)),this.name=\"MembraneSynth\",this.portamento=0;let t=V(Qi.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Ie(this,[\"oscillator\",\"envelope\"])}static getDefaults(){return yr(Nn.getDefaults(),Ta.getDefaults(),{envelope:{attack:.001,attackCurve:\"exponential\",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:\"sine\"},pitchDecay:.05})}setNote(t,i){let c=this.toSeconds(i),p=this.toFrequency(t instanceof jn?t.toFrequency():t),d=p*this.octaves;return this.oscillator.frequency.setValueAtTime(d,c),this.oscillator.frequency.exponentialRampToValueAtTime(p,c+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Ir([NN(0)],Qi.prototype,\"octaves\",void 0),Ir([qa(0)],Qi.prototype,\"pitchDecay\",void 0);class Ul extends ir{constructor(){super(V(Ul.getDefaults(),arguments)),this.name=\"NoiseSynth\";let t=V(Ul.getDefaults(),arguments);this.noise=new xa(Object.assign({context:this.context},t.noise)),this.envelope=new Yi(Object.assign({context:this.context},t.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(ir.getDefaults(),{envelope:Object.assign(kn(pn.getDefaults(),Object.keys(ye.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(kn(xa.getDefaults(),Object.keys(Lt.getDefaults())),{type:\"white\"})})}triggerAttack(t,i=1){return t=this.toSeconds(t),this.envelope.triggerAttack(t,i),this.noise.start(t),this.envelope.sustain===0\u0026\u0026this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()\u0026\u0026(this._syncMethod(\"triggerAttack\",0),this._syncMethod(\"triggerRelease\",0)),this}triggerAttackRelease(t,i,c=1){return i=this.toSeconds(i),t=this.toSeconds(t),this.triggerAttack(i,c),this.triggerRelease(i+t),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}let fm=new Set;function mm(l){fm.add(l)}function qN(l,t){let i=`registerProcessor(\"${l}\", ${t})`;fm.add(i)}class vm extends ye{constructor(t){super(t),this.name=\"ToneAudioWorklet\",this.workletOptions={},this.onprocessorerror=at;let i=URL.createObjectURL(new Blob([Array.from(fm).join(`\n`)],{type:\"text/javascript\"})),c=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(i,c).then(()=\u003e{this.disposed||(this._worklet=this.context.createAudioWorkletNode(c,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet\u0026\u0026(this._worklet.port.postMessage(\"dispose\"),this._worklet.disconnect()),this}}mm(`\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it's disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) =\u003e {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === \"dispose\") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n`),mm(`\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length \u003e 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input \u0026\u0026 input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample \u003c this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel \u003c channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input \u0026\u0026 input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n`),mm(`\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i \u003c channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] \u003e this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead \u003c 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n`),qN(\"feedback-comb-filter\",`\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"delayTime\",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: \"k-rate\"\n\t\t\t}, {\n\t\t\t\tname: \"feedback\",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: \"k-rate\"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n`);class Ji extends vm{constructor(){super(V(Ji.getDefaults(),arguments,[\"delayTime\",\"resonance\"])),this.name=\"FeedbackCombFilter\";let t=V(Ji.getDefaults(),arguments,[\"delayTime\",\"resonance\"]);this.input=new Ce({context:this.context}),this.output=new Ce({context:this.context}),this.delayTime=new Ue({context:this.context,value:t.delayTime,units:\"time\",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new Ue({context:this.context,value:t.resonance,units:\"normalRange\",param:this._dummyParam,swappable:!0}),Ie(this,[\"resonance\",\"delayTime\"])}_audioWorkletName(){return\"feedback-comb-filter\"}static getDefaults(){return Object.assign(ye.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){ar(this.input,t,this.output);let i=t.parameters.get(\"delayTime\");this.delayTime.setParam(i);let c=t.parameters.get(\"feedback\");this.resonance.setParam(c)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class eo extends ye{constructor(){super(V(eo.getDefaults(),arguments,[\"frequency\",\"type\"])),this.name=\"OnePoleFilter\";let t=V(eo.getDefaults(),arguments,[\"frequency\",\"type\"]);this._frequency=t.frequency,this._type=t.type,this.input=new Ce({context:this.context}),this.output=new Ce({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(ye.getDefaults(),{frequency:880,type:\"lowpass\"})}_createFilter(){let t=this._filter,i=this.toFrequency(this._frequency),c=1/(2*Math.PI*i);if(this._type===\"lowpass\"){let p=1/(c*this.context.sampleRate),d=p-1;this._filter=this.context.createIIRFilter([p,0],[1,d])}else{let p=1/(c*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,p])}this.input.chain(this._filter,this.output),t\u0026\u0026this.context.setTimeout(()=\u003e{this.disposed||(this.input.disconnect(t),t.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){let i=new Float32Array(t);for(let d=0;d\u003ct;d++){let m=19980*Math.pow(d/t,2)+20;i[d]=m}let c=new Float32Array(t),p=new Float32Array(t);return this._filter.getFrequencyResponse(i,c,p),c}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class to extends ye{constructor(){super(V(to.getDefaults(),arguments,[\"delayTime\",\"resonance\",\"dampening\"])),this.name=\"LowpassCombFilter\";let t=V(to.getDefaults(),arguments,[\"delayTime\",\"resonance\",\"dampening\"]);this._combFilter=this.output=new Ji({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new eo({context:this.context,frequency:t.dampening,type:\"lowpass\"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(ye.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class $l extends ir{constructor(){super(V($l.getDefaults(),arguments)),this.name=\"PluckSynth\";let t=V($l.getDefaults(),arguments);this._noise=new xa({context:this.context,type:\"pink\"}),this.attackNoise=t.attackNoise,this._lfcf=new to({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return yr(ir.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,i){let c=this.toFrequency(t);i=this.toSeconds(i);let p=1/c;return this._lfcf.delayTime.setValueAtTime(p,i),this._noise.start(i),this._noise.stop(i+p*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(i),this._lfcf.resonance.setValueAtTime(this.resonance,i),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class Hl extends ir{constructor(){super(V(Hl.getDefaults(),arguments,[\"voice\",\"options\"])),this.name=\"PolySynth\",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;let t=V(Hl.getDefaults(),arguments,[\"voice\",\"options\"]);Ae(!nr(t.voice),\"DEPRECATED: The polyphony count is no longer the first argument.\");let i=t.voice.getDefaults();this.options=Object.assign(i,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();let c=this._voices.indexOf(this._dummyVoice);this._voices.splice(c,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(ir.getDefaults(),{maxPolyphony:32,options:{},voice:Ta})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);let i=this._activeVoices.findIndex(c=\u003ec.voice===t);this._activeVoices.splice(i,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length\u003cthis.maxPolyphony){let t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return t.connect(this.output),this._voices.push(t),t}dc(\"Max polyphony exceeded. Note dropped.\")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length\u0026\u0026this._voices.length\u003eMath.ceil(this._averageActiveVoices+1)){let t=this._availableVoices.shift(),i=this._voices.indexOf(t);this._voices.splice(i,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,i,c){t.forEach(p=\u003e{let d=new Li(this.context,p).toMidi(),m=this._getNextAvailableVoice();m\u0026\u0026(m.triggerAttack(p,i,c),this._activeVoices.push({midi:d,voice:m,released:!1}),this.log(\"triggerAttack\",p,i))})}_triggerRelease(t,i){t.forEach(c=\u003e{let p=new Li(this.context,c).toMidi(),d=this._activeVoices.find(({midi:m,released:g})=\u003em===p\u0026\u0026!g);d\u0026\u0026(d.voice.triggerRelease(i),d.released=!0,this.log(\"triggerRelease\",c,i))})}_scheduleEvent(t,i,c,p){Ae(!this.disposed,\"Synth was already disposed\"),c\u003c=this.now()?t===\"attack\"?this._triggerAttack(i,c,p):this._triggerRelease(i,c):this.context.setTimeout(()=\u003e{this._scheduleEvent(t,i,c,p)},c-this.now())}triggerAttack(t,i,c){Array.isArray(t)||(t=[t]);let p=this.toSeconds(i);return this._scheduleEvent(\"attack\",t,p,c),this}triggerRelease(t,i){Array.isArray(t)||(t=[t]);let c=this.toSeconds(i);return this._scheduleEvent(\"release\",t,c),this}triggerAttackRelease(t,i,c,p){let d=this.toSeconds(c);if(this.triggerAttack(t,d,p),_n(i)){Ae(_n(t),\"If the duration is an array, the notes must also be an array\"),t=t;for(let m=0;m\u003ct.length;m++){let g=i[Math.min(m,i.length-1)],_=this.toSeconds(g);Ae(_\u003e0,\"The duration must be greater than 0\"),this.triggerRelease(t[m],d+_)}}else{let m=this.toSeconds(i);Ae(m\u003e0,\"The duration must be greater than 0\"),this.triggerRelease(t,d+m)}return this}sync(){return this._syncState()\u0026\u0026(this._syncMethod(\"triggerAttack\",1),this._syncMethod(\"triggerRelease\",1)),this}set(t){let i=kn(t,[\"onsilence\",\"context\"]);return this.options=yr(this.options,i),this._voices.forEach(c=\u003ec.set(i)),this._dummyVoice.set(i),this}get(){return this._dummyVoice.get()}releaseAll(t){let i=this.toSeconds(t);return this._activeVoices.forEach(({voice:c})=\u003e{c.triggerRelease(i)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(t=\u003et.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class no extends ir{constructor(){super(V(no.getDefaults(),arguments,[\"urls\",\"onload\",\"baseUrl\"],\"urls\")),this.name=\"Sampler\",this._activeSources=new Map;let t=V(no.getDefaults(),arguments,[\"urls\",\"onload\",\"baseUrl\"],\"urls\"),i={};Object.keys(t.urls).forEach(c=\u003e{let p=parseInt(c,10);if(Ae(fc(c)||nr(p)\u0026\u0026isFinite(p),\"url key is neither a note or midi pitch: \"+c),fc(c)){let d=new jn(this.context,c).toMidi();i[d]=t.urls[c]}else nr(p)\u0026\u0026isFinite(p)\u0026\u0026(i[p]=t.urls[p])}),this._buffers=new Wi({urls:i,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded\u0026\u0026Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(ir.getDefaults(),{attack:0,baseUrl:\"\",curve:\"exponential\",onload:at,onerror:at,release:.1,urls:{}})}_findClosest(t){let i=0;for(;i\u003c96;){if(this._buffers.has(t+i))return-i;if(this._buffers.has(t-i))return i;i++}throw new Error(\"No available buffers for note: \"+t)}triggerAttack(t,i,c=1){return this.log(\"triggerAttack\",t,i,c),Array.isArray(t)||(t=[t]),t.forEach(p=\u003e{let d=gN(new jn(this.context,p).toFrequency()),m=Math.round(d),g=d-m,_=this._findClosest(m),N=m-_,S=this._buffers.get(N),b=Ii(_+g),P=new ba({url:S,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:b}).connect(this.output);P.start(i,0,S.duration/b,c),_n(this._activeSources.get(m))||this._activeSources.set(m,[]),this._activeSources.get(m).push(P),P.onended=()=\u003e{if(this._activeSources\u0026\u0026this._activeSources.has(m)){let w=this._activeSources.get(m),U=w.indexOf(P);U!==-1\u0026\u0026w.splice(U,1)}}}),this}triggerRelease(t,i){return this.log(\"triggerRelease\",t,i),Array.isArray(t)||(t=[t]),t.forEach(c=\u003e{let p=new jn(this.context,c).toMidi();if(this._activeSources.has(p)\u0026\u0026this._activeSources.get(p).length){let d=this._activeSources.get(p);i=this.toSeconds(i),d.forEach(m=\u003e{m.stop(i)}),this._activeSources.set(p,[])}}),this}releaseAll(t){let i=this.toSeconds(t);return this._activeSources.forEach(c=\u003e{for(;c.length;)c.shift().stop(i)}),this}sync(){return this._syncState()\u0026\u0026(this._syncMethod(\"triggerAttack\",1),this._syncMethod(\"triggerRelease\",1)),this}triggerAttackRelease(t,i,c,p=1){let d=this.toSeconds(c);return this.triggerAttack(t,d,p),_n(i)?(Ae(_n(t),\"notes must be an array when duration is array\"),t.forEach((m,g)=\u003e{let _=i[Math.min(g,i.length-1)];this.triggerRelease(m,d+this.toSeconds(_))})):this.triggerRelease(t,d+this.toSeconds(i)),this}add(t,i,c){if(Ae(fc(t)||isFinite(t),\"note must be a pitch or midi: \"+t),fc(t)){let p=new jn(this.context,t).toMidi();this._buffers.add(p,i,c)}else this._buffers.add(t,i,c);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=\u003e{t.forEach(i=\u003ei.dispose())}),this._activeSources.clear(),this}}Ir([qa(0)],no.prototype,\"attack\",void 0),Ir([qa(0)],no.prototype,\"release\",void 0);class Wr extends ln{constructor(){super(V(Wr.getDefaults(),arguments,[\"callback\",\"value\"])),this.name=\"ToneEvent\",this._state=new Fi(\"stopped\"),this._startOffset=0;let t=V(Wr.getDefaults(),arguments,[\"callback\",\"value\"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(ln.getDefaults(),{callback:at,humanize:!1,loop:!1,loopEnd:\"1m\",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,i=\u003e{let c;if(i.state===\"started\"){i.id!==-1\u0026\u0026this.context.transport.clear(i.id);let p=i.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||nr(this._loop)\u0026\u0026this._loop\u003e1){c=1/0,nr(this._loop)\u0026\u0026(c=this._loop*this._getLoopDuration());let d=this._state.getAfter(p);d!==null\u0026\u0026(c=Math.min(c,d.time-p)),c!==1/0\u0026\u0026(this._state.setStateAtTime(\"stopped\",p+c+1,{id:-1}),c=new wt(this.context,c));let m=new wt(this.context,this._getLoopDuration());i.id=this.context.transport.scheduleRepeat(this._tick.bind(this),m,new wt(this.context,p),c)}else i.id=this.context.transport.schedule(this._tick.bind(this),new wt(this.context,p))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){let i=this.toTicks(t);return this._state.getValueAtTime(i)===\"stopped\"\u0026\u0026(this._state.add({id:-1,state:\"started\",time:i}),this._rescheduleEvents(i)),this}stop(t){this.cancel(t);let i=this.toTicks(t);if(this._state.getValueAtTime(i)===\"started\"){this._state.setStateAtTime(\"stopped\",i,{id:-1});let c=this._state.getBefore(i),p=i;c!==null\u0026\u0026(p=c.time),this._rescheduleEvents(p)}return this}cancel(t){t=_r(t,-1/0);let i=this.toTicks(t);return this._state.forEachFrom(i,c=\u003e{this.context.transport.clear(c.id)}),this._state.cancel(i),this}_tick(t){let i=this.context.transport.getTicksAtTime(t);if(!this.mute\u0026\u0026this._state.getValueAtTime(i)===\"started\"){if(this.probability\u003c1\u0026\u0026Math.random()\u003ethis.probability)return;if(this.humanize){let c=.02;sm(this.humanize)||(c=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*c}this.callback(t,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new wt(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop\u0026\u0026this._rescheduleEvents()}get loopStart(){return new wt(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop\u0026\u0026this._rescheduleEvents()}get progress(){if(this._loop){let t=this.context.transport.ticks,i=this._state.get(t);if(i!==null\u0026\u0026i.state===\"started\"){let c=this._getLoopDuration();return(t-i.time)%c/c}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class ro extends ln{constructor(){super(V(ro.getDefaults(),arguments,[\"callback\",\"interval\"])),this.name=\"Loop\";let t=V(ro.getDefaults(),arguments,[\"callback\",\"interval\"]);this._event=new Wr({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign(ln.getDefaults(),{interval:\"4n\",callback:at,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(t){this._event.loop=t===1/0||t}dispose(){return super.dispose(),this._event.dispose(),this}}class ao extends Wr{constructor(){super(V(ao.getDefaults(),arguments,[\"callback\",\"events\"])),this.name=\"Part\",this._state=new Fi(\"stopped\"),this._events=new Set;let t=V(ao.getDefaults(),arguments,[\"callback\",\"events\"]);this._state.increasing=!0,t.events.forEach(i=\u003e{_n(i)?this.add(i[0],i[1]):this.add(i)})}static getDefaults(){return Object.assign(Wr.getDefaults(),{events:[]})}start(t,i){let c=this.toTicks(t);if(this._state.getValueAtTime(c)!==\"started\"){i=_r(i,this._loop?this._loopStart:0),i=this._loop?_r(i,this._loopStart):_r(i,0);let p=this.toTicks(i);this._state.add({id:-1,offset:p,state:\"started\",time:c}),this._forEach(d=\u003e{this._startNote(d,c,p)})}return this}_startNote(t,i,c){i-=c,this._loop?t.startOffset\u003e=this._loopStart\u0026\u0026t.startOffset\u003cthis._loopEnd?(t.startOffset\u003cc\u0026\u0026(i+=this._getLoopDuration()),t.start(new wt(this.context,i))):t.startOffset\u003cthis._loopStart\u0026\u0026t.startOffset\u003e=c\u0026\u0026(t.loop=!1,t.start(new wt(this.context,i))):t.startOffset\u003e=c\u0026\u0026t.start(new wt(this.context,i))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach(i=\u003e{i.startOffset+=this._startOffset})}stop(t){let i=this.toTicks(t);return this._state.cancel(i),this._state.setStateAtTime(\"stopped\",i),this._forEach(c=\u003e{c.stop(t)}),this}at(t,i){let c=new Kt(this.context,t).toTicks(),p=new wt(this.context,1).toSeconds(),d=this._events.values(),m=d.next();for(;!m.done;){let g=m.value;if(Math.abs(c-g.startOffset)\u003cp)return Je(i)\u0026\u0026(g.value=i),g;m=d.next()}return Je(i)?(this.add(t,i),this.at(t)):null}add(t,i){t instanceof Object\u0026\u0026Reflect.has(t,\"time\")\u0026\u0026(t=(i=t).time);let c=this.toTicks(t),p;return i instanceof Wr?(p=i,p.callback=this._tick.bind(this)):p=new Wr({callback:this._tick.bind(this),context:this.context,value:i}),p.startOffset=c,p.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(p),this._restartEvent(p),this}_restartEvent(t){this._state.forEach(i=\u003e{i.state===\"started\"?this._startNote(t,i.time,i.offset):t.stop(new wt(this.context,i.time))})}remove(t,i){return _a(t)\u0026\u0026t.hasOwnProperty(\"time\")\u0026\u0026(t=(i=t).time),t=this.toTicks(t),this._events.forEach(c=\u003e{c.startOffset===t\u0026\u0026(Vn(i)||Je(i)\u0026\u0026c.value===i)\u0026\u0026(this._events.delete(c),c.dispose())}),this}clear(){return this._forEach(t=\u003et.dispose()),this._events.clear(),this}cancel(t){return this._forEach(i=\u003ei.cancel(t)),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events\u0026\u0026this._events.forEach(i=\u003e{i instanceof ao?i._forEach(t):t(i)}),this}_setAll(t,i){this._forEach(c=\u003e{c[t]=i})}_tick(t,i){this.mute||this.callback(t,i)}_testLoopBoundries(t){this._loop\u0026\u0026(t.startOffset\u003cthis._loopStart||t.startOffset\u003e=this._loopEnd)?t.cancel(0):t.state===\"stopped\"\u0026\u0026this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll(\"probability\",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll(\"humanize\",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach(i=\u003e{i.loopStart=this.loopStart,i.loopEnd=this.loopEnd,i.loop=t,this._testLoopBoundries(i)})}get loopEnd(){return new wt(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop\u0026\u0026this._forEach(i=\u003e{i.loopEnd=t,this._testLoopBoundries(i)})}get loopStart(){return new wt(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop\u0026\u0026this._forEach(i=\u003e{i.loopStart=this.loopStart,this._testLoopBoundries(i)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll(\"playbackRate\",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*xF(l){let t=0;for(;t\u003cl.length;)t=so(t,l),yield l[t],t++}function*wF(l){let t=l.length-1;for(;t\u003e=0;)t=so(t,l),yield l[t],t--}function*bc(l,t){for(;;)yield*t(l)}function so(l,t){return dN(l,0,t.length-1)}function*TN(l,t){let i=t?0:l.length-1;for(;;)i=so(i,l),yield l[i],t?(i++,i\u003e=l.length-1\u0026\u0026(t=!1)):(i--,i\u003c=0\u0026\u0026(t=!0))}function*qF(l){let t=0,i=0;for(;t\u003cl.length;)t=so(t,l),yield l[t],i++,t+=i%2?2:-1}function*TF(l){let t=l.length-1,i=0;for(;t\u003e=0;)t=so(t,l),yield l[t],i++,t+=i%2?-2:1}function*SF(l){let t=[];for(let i=0;i\u003cl.length;i++)t.push(i);for(;t.length\u003e0;){let i=so(t.splice(Math.floor(t.length*Math.random()),1)[0],l);yield l[i]}}function*SN(l,t=\"up\",i=0){switch(Ae(l.length\u003e0,\"The array must have more than one value in it\"),t){case\"up\":yield*bc(l,xF);case\"down\":yield*bc(l,wF);case\"upDown\":yield*TN(l,!0);case\"downUp\":yield*TN(l,!1);case\"alternateUp\":yield*bc(l,qF);case\"alternateDown\":yield*bc(l,TF);case\"random\":yield*function*(c){for(;;){let p=Math.floor(Math.random()*c.length);yield c[p]}}(l);case\"randomOnce\":yield*bc(l,SF);case\"randomWalk\":yield*function*(c){let p=Math.floor(Math.random()*c.length);for(;;)p===0?p++:p===c.length-1||Math.random()\u003c.5?p--:p++,yield c[p]}(l)}}class Yl extends ro{constructor(){super(V(Yl.getDefaults(),arguments,[\"callback\",\"values\",\"pattern\"])),this.name=\"Pattern\";let t=V(Yl.getDefaults(),arguments,[\"callback\",\"values\",\"pattern\"]);this.callback=t.callback,this._values=t.values,this._pattern=SN(t.values,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign(ro.getDefaults(),{pattern:\"up\",values:[],callback:at})}_tick(t){let i=this._pattern.next();this._value=i.value,this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=SN(this._values,this._type)}}class Xl extends Wr{constructor(){super(V(Xl.getDefaults(),arguments,[\"callback\",\"events\",\"subdivision\"])),this.name=\"Sequence\",this._part=new ao({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];let t=V(Xl.getDefaults(),arguments,[\"callback\",\"events\",\"subdivision\"]);this._subdivision=this.toTicks(t.subdivision),this.events=t.events,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.playbackRate=t.playbackRate,this.probability=t.probability,this.humanize=t.humanize,this.mute=t.mute,this.playbackRate=t.playbackRate}static getDefaults(){return Object.assign(kn(Wr.getDefaults(),[\"value\"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:\"8n\"})}_seqCallback(t,i){i!==null\u0026\u0026this.callback(t,i)}get events(){return this._events}set events(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(t,i){return this._part.start(t,i\u0026\u0026this._indexTime(i)),this}stop(t){return this._part.stop(t),this}get subdivision(){return new wt(this.context,this._subdivision).toSeconds()}_createSequence(t){return new Proxy(t,{get:(i,c)=\u003ei[c],set:(i,c,p)=\u003e(gr(c)\u0026\u0026isFinite(parseInt(c,10))\u0026\u0026_n(p)?i[c]=this._createSequence(p):i[c]=p,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(t,i,c){t.forEach((p,d)=\u003e{let m=d*i+c;if(_n(p))this._rescheduleSequence(p,i/p.length,m);else{let g=new wt(this.context,m,\"i\").toSeconds();this._part.add(g,p)}})}_indexTime(t){return new wt(this.context,t*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(t){this._part.loop=t}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this._part.loopEnd=t===0?this._indexTime(this._eventsArray.length):this._indexTime(t)}get startOffset(){return this._part.startOffset}set startOffset(t){this._part.startOffset=t}get playbackRate(){return this._part.playbackRate}set playbackRate(t){this._part.playbackRate=t}get probability(){return this._part.probability}set probability(t){this._part.probability=t}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(t){this._part.humanize=t}get length(){return this._part.length}}class Bs extends ye{constructor(){super(Object.assign(V(Bs.getDefaults(),arguments,[\"fade\"]))),this.name=\"CrossFade\",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new xN({context:this.context}),this.a=new Ce({context:this.context,gain:0}),this.b=new Ce({context:this.context,gain:0}),this.output=new Ce({context:this.context}),this._internalChannels=[this.a,this.b];let t=V(Bs.getDefaults(),arguments,[\"fade\"]);this.fade=new Le({context:this.context,units:\"normalRange\",value:t.fade}),Ie(this,\"fade\"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode=\"explicit\",Wn(this._split,this.a.gain,0),Wn(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ye.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class rn extends ye{constructor(t){super(t),this.name=\"Effect\",this._dryWet=new Bs({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Ce({context:this.context}),this.effectReturn=new Ce({context:this.context}),this.input=new Ce({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Ie(this,\"wet\")}static getDefaults(){return Object.assign(ye.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Zl extends rn{constructor(t){super(t),this.name=\"LFOEffect\",this._lfo=new Sn({context:this.context,frequency:t.frequency,amplitude:t.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=t.type,Ie(this,[\"frequency\",\"depth\"])}static getDefaults(){return Object.assign(rn.getDefaults(),{frequency:1,type:\"sine\",depth:1})}start(t){return this._lfo.start(t),this}stop(t){return this._lfo.stop(t),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Kl extends Zl{constructor(){super(V(Kl.getDefaults(),arguments,[\"frequency\",\"baseFrequency\",\"octaves\"])),this.name=\"AutoFilter\";let t=V(Kl.getDefaults(),arguments,[\"frequency\",\"baseFrequency\",\"octaves\"]);this.filter=new Bn(Object.assign(t.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=t.octaves,this.baseFrequency=t.baseFrequency}static getDefaults(){return Object.assign(Zl.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:\"lowpass\",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._lfo.max=this._lfo.min*Math.pow(2,t)}dispose(){return super.dispose(),this.filter.dispose(),this}}class io extends ye{constructor(){super(Object.assign(V(io.getDefaults(),arguments,[\"pan\"]))),this.name=\"Panner\",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;let t=V(io.getDefaults(),arguments,[\"pan\"]);this.pan=new Ue({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode=\"explicit\",Ie(this,\"pan\")}static getDefaults(){return Object.assign(ye.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class Ql extends Zl{constructor(){super(V(Ql.getDefaults(),arguments,[\"frequency\"])),this.name=\"AutoPanner\";let t=V(Ql.getDefaults(),arguments,[\"frequency\"]);this._panner=new io({context:this.context,channelCount:t.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(Zl.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class oo extends ye{constructor(){super(V(oo.getDefaults(),arguments,[\"smoothing\"])),this.name=\"Follower\";let t=V(oo.getDefaults(),arguments,[\"smoothing\"]);this._abs=this.input=new bN({context:this.context}),this._lowpass=this.output=new eo({context:this.context,frequency:1/this.toSeconds(t.smoothing),type:\"lowpass\"}),this._abs.connect(this._lowpass),this._smoothing=t.smoothing}static getDefaults(){return Object.assign(ye.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class Jl extends rn{constructor(){super(V(Jl.getDefaults(),arguments,[\"baseFrequency\",\"octaves\",\"sensitivity\"])),this.name=\"AutoWah\";let t=V(Jl.getDefaults(),arguments,[\"baseFrequency\",\"octaves\",\"sensitivity\"]);this._follower=new oo({context:this.context,smoothing:t.follower}),this._sweepRange=new Nc({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this._inputBoost=new Ce({context:this.context}),this._bandpass=new Bn({context:this.context,rolloff:-48,frequency:0,Q:t.Q}),this._peaking=new Bn({context:this.context,type:\"peaking\"}),this._peaking.gain.value=t.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=t.sensitivity,Ie(this,[\"gain\",\"Q\"])}static getDefaults(){return Object.assign(rn.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(t){this._follower.smoothing=t}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._setSweepRange()}get sensitivity(){return vc(1/this._inputBoost.gain.value)}set sensitivity(t){this._inputBoost.gain.value=1/Di(t)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}qN(\"bit-crusher\",`\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n`);class ep extends rn{constructor(){super(V(ep.getDefaults(),arguments,[\"bits\"])),this.name=\"BitCrusher\";let t=V(ep.getDefaults(),arguments,[\"bits\"]);this._bitCrusherWorklet=new tp({context:this.context,bits:t.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(rn.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class tp extends vm{constructor(){super(V(tp.getDefaults(),arguments)),this.name=\"BitCrusherWorklet\";let t=V(tp.getDefaults(),arguments);this.input=new Ce({context:this.context}),this.output=new Ce({context:this.context}),this.bits=new Ue({context:this.context,value:t.bits,units:\"positive\",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(vm.getDefaults(),{bits:12})}_audioWorkletName(){return\"bit-crusher\"}onReady(t){ar(this.input,t,this.output);let i=t.parameters.get(\"bits\");this.bits.setParam(i)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class np extends rn{constructor(){super(V(np.getDefaults(),arguments,[\"order\"])),this.name=\"Chebyshev\";let t=V(np.getDefaults(),arguments,[\"order\"]);this._shaper=new kr({context:this.context,length:4096}),this._order=t.order,this.connectEffect(this._shaper),this.order=t.order,this.oversample=t.oversample}static getDefaults(){return Object.assign(rn.getDefaults(),{order:1,oversample:\"none\"})}_getCoefficient(t,i,c){return c.has(i)||(i===0?c.set(i,0):i===1?c.set(i,t):c.set(i,2*t*this._getCoefficient(t,i-1,c)-this._getCoefficient(t,i-2,c))),c.get(i)}get order(){return this._order}set order(t){this._order=t,this._shaper.setMap(i=\u003ethis._getCoefficient(i,t,new Map))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Ka extends ye{constructor(){super(V(Ka.getDefaults(),arguments,[\"channels\"])),this.name=\"Split\";let t=V(Ka.getDefaults(),arguments,[\"channels\"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ye.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Sa extends ye{constructor(){super(V(Sa.getDefaults(),arguments,[\"channels\"])),this.name=\"Merge\";let t=V(Sa.getDefaults(),arguments,[\"channels\"]);this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(ye.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class ea extends ye{constructor(t){super(t),this.name=\"StereoEffect\",this.input=new Ce({context:this.context}),this.input.channelCount=2,this.input.channelCountMode=\"explicit\",this._dryWet=this.output=new Bs({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new Ka({context:this.context,channels:2}),this._merge=new Sa({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Ie(this,[\"wet\"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),ar(...t),Wn(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),ar(...t),Wn(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(ye.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class gm extends ea{constructor(t){super(t),this.feedback=new Le({context:this.context,value:t.feedback,units:\"normalRange\"}),this._feedbackL=new Ce({context:this.context}),this._feedbackR=new Ce({context:this.context}),this._feedbackSplit=new Ka({context:this.context,channels:2}),this._feedbackMerge=new Sa({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Ie(this,[\"feedback\"])}static getDefaults(){return Object.assign(ea.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class rp extends gm{constructor(){super(V(rp.getDefaults(),arguments,[\"frequency\",\"delayTime\",\"depth\"])),this.name=\"Chorus\";let t=V(rp.getDefaults(),arguments,[\"frequency\",\"delayTime\",\"depth\"]);this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new Sn({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new Sn({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new Ln({context:this.context}),this._delayNodeR=new Ln({context:this.context}),this.frequency=this._lfoL.frequency,Ie(this,[\"frequency\"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(gm.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:\"sine\",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;let i=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-i,0),this._lfoL.max=this._delayTime+i,this._lfoR.min=Math.max(this._delayTime-i,0),this._lfoR.max=this._delayTime+i}get delayTime(){return 1e3*this._delayTime}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class ap extends rn{constructor(){super(V(ap.getDefaults(),arguments,[\"distortion\"])),this.name=\"Distortion\";let t=V(ap.getDefaults(),arguments,[\"distortion\"]);this._shaper=new kr({context:this.context,length:4096}),this._distortion=t.distortion,this.connectEffect(this._shaper),this.distortion=t.distortion,this.oversample=t.oversample}static getDefaults(){return Object.assign(rn.getDefaults(),{distortion:.4,oversample:\"none\"})}get distortion(){return this._distortion}set distortion(t){this._distortion=t;let i=100*t,c=Math.PI/180;this._shaper.setMap(p=\u003eMath.abs(p)\u003c.001?0:(3+i)*p*20*c/(Math.PI+i*Math.abs(p)))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class sp extends rn{constructor(t){super(t),this.name=\"FeedbackEffect\",this._feedbackGain=new Ce({context:this.context,gain:t.feedback,units:\"normalRange\"}),this.feedback=this._feedbackGain.gain,Ie(this,\"feedback\"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(rn.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class ip extends sp{constructor(){super(V(ip.getDefaults(),arguments,[\"delayTime\",\"feedback\"])),this.name=\"FeedbackDelay\";let t=V(ip.getDefaults(),arguments,[\"delayTime\",\"feedback\"]);this._delayNode=new Ln({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Ie(this,\"delayTime\")}static getDefaults(){return Object.assign(sp.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class MF extends ye{constructor(t){super(t),this.name=\"PhaseShiftAllpass\",this.input=new Ce({context:this.context}),this.output=new Ce({context:this.context}),this.offset90=new Ce({context:this.context}),this._bank0=this._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),this._bank1=this._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),ar(this.input,...this._bank0,this._oneSampleDelay,this.output),ar(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(t){return t.map(i=\u003e{let c=[[i*i,0,-1],[1,0,-i*i]];return this.context.createIIRFilter(c[0],c[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(t=\u003et.disconnect()),this._bank1.forEach(t=\u003et.disconnect()),this._oneSampleDelay.disconnect(),this}}class op extends rn{constructor(){super(V(op.getDefaults(),arguments,[\"frequency\"])),this.name=\"FrequencyShifter\";let t=V(op.getDefaults(),arguments,[\"frequency\"]);this.frequency=new Le({context:this.context,units:\"frequency\",value:t.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new zi({context:this.context,type:\"sine\"}),this._cosine=new Ot({context:this.context,phase:-90,type:\"sine\"}),this._sineMultiply=new Ct({context:this.context}),this._cosineMultiply=new Ct({context:this.context}),this._negate=new hm({context:this.context}),this._add=new Vs({context:this.context}),this._phaseShifter=new MF({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);let i=this.immediate();this._sine.start(i),this._cosine.start(i)}static getDefaults(){return Object.assign(rn.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}let MN=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],PN=[225,556,441,341];class cp extends ea{constructor(){super(V(cp.getDefaults(),arguments,[\"roomSize\",\"dampening\"])),this.name=\"Freeverb\",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];let t=V(cp.getDefaults(),arguments,[\"roomSize\",\"dampening\"]);this.roomSize=new Le({context:this.context,value:t.roomSize,units:\"normalRange\"}),this._allpassFiltersL=PN.map(i=\u003e{let c=this.context.createBiquadFilter();return c.type=\"allpass\",c.frequency.value=i,c}),this._allpassFiltersR=PN.map(i=\u003e{let c=this.context.createBiquadFilter();return c.type=\"allpass\",c.frequency.value=i,c}),this._combFilters=MN.map((i,c)=\u003e{let p=new to({context:this.context,dampening:t.dampening,delayTime:i});return c\u003cMN.length/2?this.connectEffectLeft(p,...this._allpassFiltersL):this.connectEffectRight(p,...this._allpassFiltersR),this.roomSize.connect(p.resonance),p}),Ie(this,[\"roomSize\"])}static getDefaults(){return Object.assign(ea.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(t){this._combFilters.forEach(i=\u003ei.dampening=t)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(t=\u003et.disconnect()),this._allpassFiltersR.forEach(t=\u003et.disconnect()),this._combFilters.forEach(t=\u003et.dispose()),this.roomSize.dispose(),this}}let ON=[.06748,.06404,.08212,.09004],PF=[.773,.802,.753,.733],OF=[347,113,37];class up extends ea{constructor(){super(V(up.getDefaults(),arguments,[\"roomSize\"])),this.name=\"JCReverb\",this._allpassFilters=[],this._feedbackCombFilters=[];let t=V(up.getDefaults(),arguments,[\"roomSize\"]);this.roomSize=new Le({context:this.context,value:t.roomSize,units:\"normalRange\"}),this._scaleRoomSize=new Jr({context:this.context,min:-.733,max:.197}),this._allpassFilters=OF.map(i=\u003e{let c=this.context.createBiquadFilter();return c.type=\"allpass\",c.frequency.value=i,c}),this._feedbackCombFilters=ON.map((i,c)=\u003e{let p=new Ji({context:this.context,delayTime:i});return this._scaleRoomSize.connect(p.resonance),p.resonance.value=PF[c],c\u003cON.length/2?this.connectEffectLeft(...this._allpassFilters,p):this.connectEffectRight(...this._allpassFilters,p),p}),this.roomSize.connect(this._scaleRoomSize),Ie(this,[\"roomSize\"])}static getDefaults(){return Object.assign(ea.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(t=\u003et.disconnect()),this._feedbackCombFilters.forEach(t=\u003et.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class CN extends gm{constructor(t){super(t),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),Ie(this,[\"feedback\"])}}class lp extends CN{constructor(){super(V(lp.getDefaults(),arguments,[\"delayTime\",\"feedback\"])),this.name=\"PingPongDelay\";let t=V(lp.getDefaults(),arguments,[\"delayTime\",\"feedback\"]);this._leftDelay=new Ln({context:this.context,maxDelay:t.maxDelay}),this._rightDelay=new Ln({context:this.context,maxDelay:t.maxDelay}),this._rightPreDelay=new Ln({context:this.context,maxDelay:t.maxDelay}),this.delayTime=new Le({context:this.context,units:\"time\",value:t.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),Ie(this,[\"delayTime\"])}static getDefaults(){return Object.assign(CN.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class pp extends sp{constructor(){super(V(pp.getDefaults(),arguments,[\"pitch\"])),this.name=\"PitchShift\";let t=V(pp.getDefaults(),arguments,[\"pitch\"]);this._frequency=new Le({context:this.context}),this._delayA=new Ln({maxDelay:1,context:this.context}),this._lfoA=new Sn({context:this.context,min:0,max:.1,type:\"sawtooth\"}).connect(this._delayA.delayTime),this._delayB=new Ln({maxDelay:1,context:this.context}),this._lfoB=new Sn({context:this.context,min:0,max:.1,type:\"sawtooth\",phase:180}).connect(this._delayB.delayTime),this._crossFade=new Bs({context:this.context}),this._crossFadeLFO=new Sn({context:this.context,min:0,max:1,type:\"triangle\",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new Ln({delayTime:t.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,Ie(this,\"delayTime\"),this._pitch=t.pitch,this._windowSize=t.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);let i=this.now();this._lfoA.start(i),this._lfoB.start(i),this._crossFadeLFO.start(i),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(sp.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(t){this._pitch=t;let i=0;t\u003c0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,i=Ii(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,i=Ii(t)-1),this._frequency.value=i*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class hp extends ea{constructor(){super(V(hp.getDefaults(),arguments,[\"frequency\",\"octaves\",\"baseFrequency\"])),this.name=\"Phaser\";let t=V(hp.getDefaults(),arguments,[\"frequency\",\"octaves\",\"baseFrequency\"]);this._lfoL=new Sn({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new Sn({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this.Q=new Le({context:this.context,value:t.Q,units:\"positive\"}),this._filtersL=this._makeFilters(t.stages,this._lfoL),this._filtersR=this._makeFilters(t.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=t.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=t.baseFrequency,this.octaves=t.octaves,this._lfoL.start(),this._lfoR.start(),Ie(this,[\"frequency\",\"Q\"])}static getDefaults(){return Object.assign(ea.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(t,i){let c=[];for(let p=0;p\u003ct;p++){let d=this.context.createBiquadFilter();d.type=\"allpass\",this.Q.connect(d.Q),i.connect(d.frequency),c.push(d)}return c}get octaves(){return this._octaves}set octaves(t){this._octaves=t;let i=this._baseFrequency*Math.pow(2,t);this._lfoL.max=i,this._lfoR.max=i}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(t=\u003et.disconnect()),this._filtersR.forEach(t=\u003et.disconnect()),this.frequency.dispose(),this}}class dp extends rn{constructor(){super(V(dp.getDefaults(),arguments,[\"decay\"])),this.name=\"Reverb\",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();let t=V(dp.getDefaults(),arguments,[\"decay\"]);this._decay=t.decay,this._preDelay=t.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(rn.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){yn(t=this.toSeconds(t),.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){yn(t=this.toSeconds(t),0),this._preDelay=t,this.generate()}generate(){return xt(this,void 0,void 0,function*(){let t=this.ready,i=new ji(2,this._decay+this._preDelay,this.context.sampleRate),c=new xa({context:i}),p=new xa({context:i}),d=new Sa({context:i});c.connect(d,0,0),p.connect(d,0,1);let m=new Ce({context:i}).toDestination();d.connect(m),c.start(0),p.start(0),m.gain.setValueAtTime(0,0),m.gain.setValueAtTime(1,this._preDelay),m.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);let g=i.render();return this.ready=g.then(at),yield t,this._convolver.buffer=(yield g).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class xc extends ye{constructor(){super(V(xc.getDefaults(),arguments)),this.name=\"MidSideSplit\",this._split=this.input=new Ka({channels:2,context:this.context}),this._midAdd=new Vs({context:this.context}),this.mid=new Ct({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new Ls({context:this.context}),this.side=new Ct({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class wc extends ye{constructor(){super(V(wc.getDefaults(),arguments)),this.name=\"MidSideMerge\",this.mid=new Ce({context:this.context}),this.side=new Ce({context:this.context}),this._left=new Vs({context:this.context}),this._leftMult=new Ct({context:this.context,value:Math.SQRT1_2}),this._right=new Ls({context:this.context}),this._rightMult=new Ct({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new Sa({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class AN extends rn{constructor(t){super(t),this.name=\"MidSideEffect\",this._midSideMerge=new wc({context:this.context}),this._midSideSplit=new xc({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...t){this._midSend.chain(...t,this._midReturn)}connectEffectSide(...t){this._sideSend.chain(...t,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class fp extends AN{constructor(){super(V(fp.getDefaults(),arguments,[\"width\"])),this.name=\"StereoWidener\";let t=V(fp.getDefaults(),arguments,[\"width\"]);this.width=new Le({context:this.context,value:t.width,units:\"normalRange\"}),Ie(this,[\"width\"]),this._twoTimesWidthMid=new Ct({context:this.context,value:2}),this._twoTimesWidthSide=new Ct({context:this.context,value:2}),this._midMult=new Ct({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new Ls({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),Wn(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new Ct({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(AN.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class mp extends ea{constructor(){super(V(mp.getDefaults(),arguments,[\"frequency\",\"depth\"])),this.name=\"Tremolo\";let t=V(mp.getDefaults(),arguments,[\"frequency\",\"depth\"]);this._lfoL=new Sn({context:this.context,type:t.type,min:1,max:0}),this._lfoR=new Sn({context:this.context,type:t.type,min:1,max:0}),this._amplitudeL=new Ce({context:this.context}),this._amplitudeR=new Ce({context:this.context}),this.frequency=new Le({context:this.context,value:t.frequency,units:\"frequency\"}),this.depth=new Le({context:this.context,value:t.depth,units:\"normalRange\"}),Ie(this,[\"frequency\",\"depth\"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=t.spread}static getDefaults(){return Object.assign(ea.getDefaults(),{frequency:10,type:\"sine\",depth:.5,spread:180})}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class vp extends rn{constructor(){super(V(vp.getDefaults(),arguments,[\"frequency\",\"depth\"])),this.name=\"Vibrato\";let t=V(vp.getDefaults(),arguments,[\"frequency\",\"depth\"]);this._delayNode=new Ln({context:this.context,delayTime:0,maxDelay:t.maxDelay}),this._lfo=new Sn({context:this.context,type:t.type,min:0,max:t.maxDelay,frequency:t.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=t.depth,Ie(this,[\"frequency\",\"depth\"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(rn.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:\"sine\"})}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class co extends ye{constructor(){super(V(co.getDefaults(),arguments,[\"type\",\"size\"])),this.name=\"Analyser\",this._analysers=[],this._buffers=[];let t=V(co.getDefaults(),arguments,[\"type\",\"size\"]);this.input=this.output=this._gain=new Ce({context:this.context}),this._split=new Ka({context:this.context,channels:t.channels}),this.input.connect(this._split),yn(t.channels,1);for(let i=0;i\u003ct.channels;i++)this._analysers[i]=this.context.createAnalyser(),this._split.connect(this._analysers[i],i,0);this.size=t.size,this.type=t.type}static getDefaults(){return Object.assign(ye.getDefaults(),{size:1024,smoothing:.8,type:\"fft\",channels:1})}getValue(){return this._analysers.forEach((t,i)=\u003e{let c=this._buffers[i];this._type===\"fft\"?t.getFloatFrequencyData(c):this._type===\"waveform\"\u0026\u0026t.getFloatTimeDomainData(c)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(t){this._analysers.forEach((i,c)=\u003e{i.fftSize=2*t,this._buffers[c]=new Float32Array(t)})}get channels(){return this._analysers.length}get type(){return this._type}set type(t){Ae(t===\"waveform\"||t===\"fft\",\"Analyser: invalid type: \"+t),this._type=t}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(t){this._analysers.forEach(i=\u003ei.smoothingTimeConstant=t)}dispose(){return super.dispose(),this._analysers.forEach(t=\u003et.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class Qa extends ye{constructor(){super(V(Qa.getDefaults(),arguments)),this.name=\"MeterBase\",this.input=this.output=this._analyser=new co({context:this.context,size:256,type:\"waveform\"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class gp extends Qa{constructor(){super(V(gp.getDefaults(),arguments,[\"smoothing\"])),this.name=\"Meter\",this._rms=0;let t=V(gp.getDefaults(),arguments,[\"smoothing\"]);this.input=this.output=this._analyser=new co({context:this.context,size:256,type:\"waveform\",channels:t.channels}),this.smoothing=t.smoothing,this.normalRange=t.normalRange}static getDefaults(){return Object.assign(Qa.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return dc(\"'getLevel' has been changed to 'getValue'\"),this.getValue()}getValue(){let t=this._analyser.getValue(),i=(this.channels===1?[t]:t).map(c=\u003e{let p=c.reduce((m,g)=\u003em+g*g,0),d=Math.sqrt(p/c.length);return this._rms=Math.max(d,this._rms*this.smoothing),this.normalRange?this._rms:vc(this._rms)});return this.channels===1?i[0]:i}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class yp extends Qa{constructor(){super(V(yp.getDefaults(),arguments,[\"size\"])),this.name=\"FFT\";let t=V(yp.getDefaults(),arguments,[\"size\"]);this.normalRange=t.normalRange,this._analyser.type=\"fft\",this.size=t.size}static getDefaults(){return Object.assign(ye.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(t=\u003ethis.normalRange?Di(t):t)}get size(){return this._analyser.size}set size(t){this._analyser.size=t}get smoothing(){return this._analyser.smoothing}set smoothing(t){this._analyser.smoothing=t}getFrequencyOfIndex(t){return Ae(0\u003c=t\u0026\u0026t\u003cthis.size,\"index must be greater than or equal to 0 and less than \"+this.size),t*this.context.sampleRate/(2*this.size)}}class ym extends Qa{constructor(){super(V(ym.getDefaults(),arguments)),this.name=\"DCMeter\",this._analyser.type=\"waveform\",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class _p extends Qa{constructor(){super(V(_p.getDefaults(),arguments,[\"size\"])),this.name=\"Waveform\";let t=V(_p.getDefaults(),arguments,[\"size\"]);this._analyser.type=\"waveform\",this.size=t.size}static getDefaults(){return Object.assign(Qa.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(t){this._analyser.size=t}}class Bt extends ye{constructor(){super(V(Bt.getDefaults(),arguments,[\"solo\"])),this.name=\"Solo\";let t=V(Bt.getDefaults(),arguments,[\"solo\"]);this.input=this.output=new Ce({context:this.context}),Bt._allSolos.has(this.context)||Bt._allSolos.set(this.context,new Set),Bt._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(ye.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Bt._allSolos.get(this.context).forEach(i=\u003ei._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Bt._soloed.has(this.context)||Bt._soloed.set(this.context,new Set),Bt._soloed.get(this.context).add(this)}_removeSolo(){Bt._soloed.has(this.context)\u0026\u0026Bt._soloed.get(this.context).delete(this)}_isSoloed(){return Bt._soloed.has(this.context)\u0026\u0026Bt._soloed.get(this.context).has(this)}_noSolos(){return!Bt._soloed.has(this.context)||Bt._soloed.has(this.context)\u0026\u0026Bt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Bt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Bt._allSolos=new Map,Bt._soloed=new Map;class qc extends ye{constructor(){super(V(qc.getDefaults(),arguments,[\"pan\",\"volume\"])),this.name=\"PanVol\";let t=V(qc.getDefaults(),arguments,[\"pan\",\"volume\"]);this._panner=this.input=new io({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Kr({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Ie(this,[\"pan\",\"volume\"])}static getDefaults(){return Object.assign(ye.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Ja extends ye{constructor(){super(V(Ja.getDefaults(),arguments,[\"volume\",\"pan\"])),this.name=\"Channel\";let t=V(Ja.getDefaults(),arguments,[\"volume\",\"pan\"]);this._solo=this.input=new Bt({solo:t.solo,context:this.context}),this._panVol=this.output=new qc({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ie(this,[\"pan\",\"volume\"])}static getDefaults(){return Object.assign(ye.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return Ja.buses.has(t)||Ja.buses.set(t,new Ce({context:this.context})),Ja.buses.get(t)}send(t,i=0){let c=this._getBus(t),p=new Ce({context:this.context,units:\"decibels\",gain:i});return this.connect(p),p.connect(c),p}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Ja.buses=new Map;class _m extends ye{constructor(){super(V(_m.getDefaults(),arguments)),this.name=\"Mono\",this.input=new Ce({context:this.context}),this._merge=this.output=new Sa({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class uo extends ye{constructor(){super(V(uo.getDefaults(),arguments,[\"lowFrequency\",\"highFrequency\"])),this.name=\"MultibandSplit\",this.input=new Ce({context:this.context}),this.output=void 0,this.low=new Bn({context:this.context,frequency:0,type:\"lowpass\"}),this._lowMidFilter=new Bn({context:this.context,frequency:0,type:\"highpass\"}),this.mid=new Bn({context:this.context,frequency:0,type:\"lowpass\"}),this.high=new Bn({context:this.context,frequency:0,type:\"highpass\"}),this._internalChannels=[this.low,this.mid,this.high];let t=V(uo.getDefaults(),arguments,[\"lowFrequency\",\"highFrequency\"]);this.lowFrequency=new Le({context:this.context,units:\"frequency\",value:t.lowFrequency}),this.highFrequency=new Le({context:this.context,units:\"frequency\",value:t.highFrequency}),this.Q=new Le({context:this.context,units:\"positive\",value:t.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),Ie(this,[\"high\",\"mid\",\"low\",\"highFrequency\",\"lowFrequency\"])}static getDefaults(){return Object.assign(ye.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),mc(this,[\"high\",\"mid\",\"low\",\"highFrequency\",\"lowFrequency\"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class CF extends ye{constructor(){super(...arguments),this.name=\"Listener\",this.positionX=new Ue({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ue({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ue({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ue({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ue({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ue({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ue({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ue({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ue({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ye.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Sl(l=\u003e{l.listener=new CF({context:l})}),Ml(l=\u003e{l.listener.dispose()});class kp extends ye{constructor(){super(V(kp.getDefaults(),arguments,[\"positionX\",\"positionY\",\"positionZ\"])),this.name=\"Panner3D\";let t=V(kp.getDefaults(),arguments,[\"positionX\",\"positionY\",\"positionZ\"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=t.panningModel,this.maxDistance=t.maxDistance,this.distanceModel=t.distanceModel,this.coneOuterGain=t.coneOuterGain,this.coneOuterAngle=t.coneOuterAngle,this.coneInnerAngle=t.coneInnerAngle,this.refDistance=t.refDistance,this.rolloffFactor=t.rolloffFactor,this.positionX=new Ue({context:this.context,param:this._panner.positionX,value:t.positionX}),this.positionY=new Ue({context:this.context,param:this._panner.positionY,value:t.positionY}),this.positionZ=new Ue({context:this.context,param:this._panner.positionZ,value:t.positionZ}),this.orientationX=new Ue({context:this.context,param:this._panner.orientationX,value:t.orientationX}),this.orientationY=new Ue({context:this.context,param:this._panner.orientationY,value:t.orientationY}),this.orientationZ=new Ue({context:this.context,param:this._panner.orientationZ,value:t.orientationZ})}static getDefaults(){return Object.assign(ye.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:\"inverse\",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:\"equalpower\",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(t,i,c){return this.positionX.value=t,this.positionY.value=i,this.positionZ.value=c,this}setOrientation(t,i,c){return this.orientationX.value=t,this.orientationY.value=i,this.orientationZ.value=c,this}get panningModel(){return this._panner.panningModel}set panningModel(t){this._panner.panningModel=t}get refDistance(){return this._panner.refDistance}set refDistance(t){this._panner.refDistance=t}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(t){this._panner.rolloffFactor=t}get distanceModel(){return this._panner.distanceModel}set distanceModel(t){this._panner.distanceModel=t}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(t){this._panner.coneInnerAngle=t}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(t){this._panner.coneOuterAngle=t}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(t){this._panner.coneOuterGain=t}get maxDistance(){return this._panner.maxDistance}set maxDistance(t){this._panner.maxDistance=t}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class Tc extends ye{constructor(){super(V(Tc.getDefaults(),arguments)),this.name=\"Recorder\";let t=V(Tc.getDefaults(),arguments);this.input=new Ce({context:this.context}),Ae(Tc.supported,\"Media Recorder API is not available\"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:t.mimeType})}static getDefaults(){return ye.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return ka!==null\u0026\u0026Reflect.has(ka,\"MediaRecorder\")}get state(){return this._recorder.state===\"inactive\"?\"stopped\":this._recorder.state===\"paused\"?\"paused\":\"started\"}start(){return xt(this,void 0,void 0,function*(){Ae(this.state!==\"started\",\"Recorder is already started\");let t=new Promise(i=\u003e{let c=()=\u003e{this._recorder.removeEventListener(\"start\",c,!1),i()};this._recorder.addEventListener(\"start\",c,!1)});return this._recorder.start(),yield t})}stop(){return xt(this,void 0,void 0,function*(){Ae(this.state!==\"stopped\",\"Recorder is not started\");let t=new Promise(i=\u003e{let c=p=\u003e{this._recorder.removeEventListener(\"dataavailable\",c,!1),i(p.data)};this._recorder.addEventListener(\"dataavailable\",c,!1)});return this._recorder.stop(),yield t})}pause(){return Ae(this.state===\"started\",\"Recorder must be started\"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class ta extends ye{constructor(){super(V(ta.getDefaults(),arguments,[\"threshold\",\"ratio\"])),this.name=\"Compressor\",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;let t=V(ta.getDefaults(),arguments,[\"threshold\",\"ratio\"]);this.threshold=new Ue({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:\"decibels\",value:t.threshold}),this.attack=new Ue({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:\"time\",value:t.attack}),this.release=new Ue({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:\"time\",value:t.release}),this.knee=new Ue({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:\"decibels\",value:t.knee}),this.ratio=new Ue({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:\"positive\",value:t.ratio}),Ie(this,[\"knee\",\"release\",\"attack\",\"ratio\",\"threshold\"])}static getDefaults(){return Object.assign(ye.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Np extends ye{constructor(){super(Object.assign(V(Np.getDefaults(),arguments,[\"threshold\",\"smoothing\"]))),this.name=\"Gate\";let t=V(Np.getDefaults(),arguments,[\"threshold\",\"smoothing\"]);this._follower=new oo({context:this.context,smoothing:t.smoothing}),this._gt=new kc({context:this.context,value:Di(t.threshold)}),this.input=new Ce({context:this.context}),this._gate=this.output=new Ce({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(ye.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return vc(this._gt.value)}set threshold(t){this._gt.value=Di(t)}get smoothing(){return this._follower.smoothing}set smoothing(t){this._follower.smoothing=t}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class bp extends ye{constructor(){super(Object.assign(V(bp.getDefaults(),arguments,[\"threshold\"]))),this.name=\"Limiter\";let t=V(bp.getDefaults(),arguments,[\"threshold\"]);this._compressor=this.input=this.output=new ta({context:this.context,ratio:20,attack:.003,release:.01,threshold:t.threshold}),this.threshold=this._compressor.threshold,Ie(this,\"threshold\")}static getDefaults(){return Object.assign(ye.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class xp extends ye{constructor(){super(Object.assign(V(xp.getDefaults(),arguments))),this.name=\"MidSideCompressor\";let t=V(xp.getDefaults(),arguments);this._midSideSplit=this.input=new xc({context:this.context}),this._midSideMerge=this.output=new wc({context:this.context}),this.mid=new ta(Object.assign(t.mid,{context:this.context})),this.side=new ta(Object.assign(t.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),Ie(this,[\"mid\",\"side\"])}static getDefaults(){return Object.assign(ye.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class wp extends ye{constructor(){super(Object.assign(V(wp.getDefaults(),arguments))),this.name=\"MultibandCompressor\";let t=V(wp.getDefaults(),arguments);this._splitter=this.input=new uo({context:this.context,lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new Ce({context:this.context}),this.low=new ta(Object.assign(t.low,{context:this.context})),this.mid=new ta(Object.assign(t.mid,{context:this.context})),this.high=new ta(Object.assign(t.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),Ie(this,[\"high\",\"mid\",\"low\",\"highFrequency\",\"lowFrequency\"])}static getDefaults(){return Object.assign(ye.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class qp extends ye{constructor(){super(V(qp.getDefaults(),arguments,[\"low\",\"mid\",\"high\"])),this.name=\"EQ3\",this.output=new Ce({context:this.context}),this._internalChannels=[];let t=V(qp.getDefaults(),arguments,[\"low\",\"mid\",\"high\"]);this.input=this._multibandSplit=new uo({context:this.context,highFrequency:t.highFrequency,lowFrequency:t.lowFrequency}),this._lowGain=new Ce({context:this.context,gain:t.low,units:\"decibels\"}),this._midGain=new Ce({context:this.context,gain:t.mid,units:\"decibels\"}),this._highGain=new Ce({context:this.context,gain:t.high,units:\"decibels\"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),Ie(this,[\"low\",\"mid\",\"high\",\"lowFrequency\",\"highFrequency\"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(ye.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),mc(this,[\"low\",\"mid\",\"high\",\"lowFrequency\",\"highFrequency\"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class Tp extends ye{constructor(){super(V(Tp.getDefaults(),arguments,[\"url\",\"onload\"])),this.name=\"Convolver\",this._convolver=this.context.createConvolver();let t=V(Tp.getDefaults(),arguments,[\"url\",\"onload\"]);this._buffer=new ct(t.url,i=\u003e{this.buffer=i,t.onload()}),this.input=new Ce({context:this.context}),this.output=new Ce({context:this.context}),this._buffer.loaded\u0026\u0026(this.buffer=this._buffer),this.normalize=t.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(ye.getDefaults(),{normalize:!0,onload:at})}load(t){return xt(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(t)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(t){t\u0026\u0026this._buffer.set(t),this._convolver.buffer\u0026\u0026(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));let i=this._buffer.get();this._convolver.buffer=i||null}get normalize(){return this._convolver.normalize}set normalize(t){this._convolver.normalize=t}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function AF(){return Pt().now()}function RF(){return Pt().immediate()}let EF=Pt().transport;function jF(){return Pt().transport}let DF=Pt().destination,IF=Pt().destination;function FF(){return Pt().destination}let VF=Pt().listener;function WF(){return Pt().listener}let LF=Pt().draw;function BF(){return Pt().draw}let zF=Pt();function GF(){return ct.loaded()}let UF=ct,$F=Wi,HF=ba}])})});var Se=v((Eke,cu)=\u003e{function iee(r){return r\u0026\u0026r.__esModule?r:{default:r}}cu.exports=iee;cu.exports.default=cu.exports,cu.exports.__esModule=!0});var Co=v((jke,lr)=\u003e{function Qh(r){return typeof Symbol==\"function\"\u0026\u0026typeof Symbol.iterator==\"symbol\"?(lr.exports=Qh=function(a){return typeof a},lr.exports.default=lr.exports,lr.exports.__esModule=!0):(lr.exports=Qh=function(a){return a\u0026\u0026typeof Symbol==\"function\"\u0026\u0026a.constructor===Symbol\u0026\u0026a!==Symbol.prototype?\"symbol\":typeof a},lr.exports.default=lr.exports,lr.exports.__esModule=!0),Qh(r)}lr.exports=Qh;lr.exports.default=lr.exports,lr.exports.__esModule=!0});var en=v((Dke,uu)=\u003e{var oee=Co().default;function wR(r){if(typeof WeakMap!=\"function\")return null;var e=new WeakMap,a=new WeakMap;return(wR=function(o){return o?a:e})(r)}function cee(r,e){if(!e\u0026\u0026r\u0026\u0026r.__esModule)return r;if(r===null||oee(r)!==\"object\"\u0026\u0026typeof r!=\"function\")return{default:r};var a=wR(e);if(a\u0026\u0026a.has(r))return a.get(r);var s={},o=Object.defineProperty\u0026\u0026Object.getOwnPropertyDescriptor;for(var u in r)if(u!==\"default\"\u0026\u0026Object.prototype.hasOwnProperty.call(r,u)){var h=o?Object.getOwnPropertyDescriptor(r,u):null;h\u0026\u0026(h.get||h.set)?Object.defineProperty(s,u,h):s[u]=r[u]}return s.default=r,a\u0026\u0026a.set(r,s),s}uu.exports=cee;uu.exports.default=uu.exports,uu.exports.__esModule=!0});var Kg=v((Ike,lu)=\u003e{function uee(r,e){if(r==null)return{};var a={},s=Object.keys(r),o,u;for(u=0;u\u003cs.length;u++)o=s[u],!(e.indexOf(o)\u003e=0)\u0026\u0026(a[o]=r[o]);return a}lu.exports=uee;lu.exports.default=lu.exports,lu.exports.__esModule=!0});var Mn=v((Fke,pu)=\u003e{var lee=Kg();function pee(r,e){if(r==null)return{};var a=lee(r,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(o=0;o\u003cu.length;o++)s=u[o],!(e.indexOf(s)\u003e=0)\u0026\u0026(!Object.prototype.propertyIsEnumerable.call(r,s)||(a[s]=r[s]))}return a}pu.exports=pee;pu.exports.default=pu.exports,pu.exports.__esModule=!0});var yt=v((Vke,Aa)=\u003e{function Qg(){return Aa.exports=Qg=Object.assign||function(r){for(var e=1;e\u003carguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)\u0026\u0026(r[s]=a[s])}return r},Aa.exports.default=Aa.exports,Aa.exports.__esModule=!0,Qg.apply(this,arguments)}Aa.exports=Qg;Aa.exports.default=Aa.exports,Aa.exports.__esModule=!0});var TR=v((Wke,qR)=\u003e{\"use strict\";var hee=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\";qR.exports=hee});var OR=v((Lke,PR)=\u003e{\"use strict\";var dee=TR();function SR(){}function MR(){}MR.resetWarningCache=SR;PR.exports=function(){function r(s,o,u,h,f,y){if(y!==dee){var k=new Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\");throw k.name=\"Invariant Violation\",k}}r.isRequired=r;function e(){return r}var a={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:MR,resetWarningCache:SR};return a.PropTypes=a,a}});var It=v((Gke,CR)=\u003e{CR.exports=OR()();var Bke,zke});var ms=v((Uke,RR)=\u003e{function AR(r){var e,a,s=\"\";if(typeof r==\"string\"||typeof r==\"number\")s+=r;else if(typeof r==\"object\")if(Array.isArray(r))for(e=0;e\u003cr.length;e++)r[e]\u0026\u0026(a=AR(r[e]))\u0026\u0026(s\u0026\u0026(s+=\" \"),s+=a);else for(e in r)r[e]\u0026\u0026(s\u0026\u0026(s+=\" \"),s+=e);return s}RR.exports=function(){for(var r=0,e,a,s=\"\";r\u003carguments.length;)(e=arguments[r++])\u0026\u0026(a=AR(e))\u0026\u0026(s\u0026\u0026(s+=\" \"),s+=a);return s}});var Jh=v(Jg=\u003e{\"use strict\";Object.defineProperty(Jg,\"__esModule\",{value:!0});Jg.default=fee;function fee(r,e){return function(){return null}}});var DR=v(td=\u003e{\"use strict\";var ER=Se();Object.defineProperty(td,\"__esModule\",{value:!0});td.isPlainObject=ed;td.default=jR;var mee=ER(yt()),vee=ER(Co());function ed(r){return r\u0026\u0026(0,vee.default)(r)===\"object\"\u0026\u0026r.constructor===Object}function jR(r,e){var a=arguments.length\u003e2\u0026\u0026arguments[2]!==void 0?arguments[2]:{clone:!0},s=a.clone?(0,mee.default)({},r):r;return ed(r)\u0026\u0026ed(e)\u0026\u0026Object.keys(e).forEach(function(o){o!==\"__proto__\"\u0026\u0026(ed(e[o])\u0026\u0026o in r?s[o]=jR(r[o],e[o],a):s[o]=e[o])}),s}});var BR=v(nd=\u003e{\"use strict\";var IR=Se();Object.defineProperty(nd,\"__esModule\",{value:!0});nd.default=void 0;var FR=IR(It()),VR=IR(Jh());function gee(r){var e=r.prototype,a=e===void 0?{}:e;return Boolean(a.isReactComponent)}function WR(r,e,a,s,o){var u=r[e],h=o||e;if(u==null)return null;var f,y=u.type;return typeof y==\"function\"\u0026\u0026!gee(y)\u0026\u0026(f=\"Did you accidentally use a plain function component for an element instead?\"),f!==void 0?new Error(\"Invalid \".concat(s,\" `\").concat(h,\"` supplied to `\").concat(a,\"`. \")+\"Expected an element that can hold a ref. \".concat(f,\" \")+\"For more information see https://material-ui.com/r/caveat-with-refs-guide\"):null}var LR=(0,VR.default)(FR.default.element,WR);LR.isRequired=(0,VR.default)(FR.default.element.isRequired,WR);var yee=LR;nd.default=yee});var zR=v(rd=\u003e{\"use strict\";var _ee=Se(),kee=en();Object.defineProperty(rd,\"__esModule\",{value:!0});rd.default=void 0;var Nee=kee(It()),bee=_ee(Jh());function xee(r){var e=r.prototype,a=e===void 0?{}:e;return Boolean(a.isReactComponent)}function wee(r,e,a,s,o){var u=r[e],h=o||e;if(u==null)return null;var f;return typeof u==\"function\"\u0026\u0026!xee(u)\u0026\u0026(f=\"Did you accidentally provide a plain function component instead?\"),f!==void 0?new Error(\"Invalid \".concat(s,\" `\").concat(h,\"` supplied to `\").concat(a,\"`. \")+\"Expected an element type that can hold a ref. \".concat(f,\" \")+\"For more information see https://material-ui.com/r/caveat-with-refs-guide\"):null}var qee=(0,bee.default)(Nee.elementType,wee);rd.default=qee});var du=v((Zke,hu)=\u003e{function Tee(r,e,a){return e in r?Object.defineProperty(r,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[e]=a,r}hu.exports=Tee;hu.exports.default=hu.exports,hu.exports.__esModule=!0});var $R=v(fu=\u003e{\"use strict\";var GR=Se();Object.defineProperty(fu,\"__esModule\",{value:!0});fu.default=Pee;fu.specialProperty=void 0;var See=GR(du()),Mee=GR(yt()),UR=\"exact-prop: \\u200B\";fu.specialProperty=UR;function Pee(r){return r}});var HR=v(ey=\u003e{\"use strict\";Object.defineProperty(ey,\"__esModule\",{value:!0});ey.default=Oee;function Oee(r){for(var e=\"https://material-ui.com/production-error/?code=\"+r,a=1;a\u003carguments.length;a+=1)e+=\"\u0026args[]=\"+encodeURIComponent(arguments[a]);return\"Minified Material-UI error #\"+r+\"; visit \"+e+\" for the full message.\"}});var JR=v(Tt=\u003e{\"use strict\";var ad=60103,sd=60106,mu=60107,vu=60108,gu=60114,yu=60109,_u=60110,ku=60112,Nu=60113,ty=60120,bu=60115,xu=60116,YR=60121,XR=60122,ZR=60117,KR=60129,QR=60131;typeof Symbol==\"function\"\u0026\u0026Symbol.for\u0026\u0026(dn=Symbol.for,ad=dn(\"react.element\"),sd=dn(\"react.portal\"),mu=dn(\"react.fragment\"),vu=dn(\"react.strict_mode\"),gu=dn(\"react.profiler\"),yu=dn(\"react.provider\"),_u=dn(\"react.context\"),ku=dn(\"react.forward_ref\"),Nu=dn(\"react.suspense\"),ty=dn(\"react.suspense_list\"),bu=dn(\"react.memo\"),xu=dn(\"react.lazy\"),YR=dn(\"react.block\"),XR=dn(\"react.server.block\"),ZR=dn(\"react.fundamental\"),KR=dn(\"react.debug_trace_mode\"),QR=dn(\"react.legacy_hidden\"));var dn;function Gr(r){if(typeof r==\"object\"\u0026\u0026r!==null){var e=r.$$typeof;switch(e){case ad:switch(r=r.type,r){case mu:case gu:case vu:case Nu:case ty:return r;default:switch(r=r\u0026\u0026r.$$typeof,r){case _u:case ku:case xu:case bu:case yu:return r;default:return e}}case sd:return e}}}var Cee=yu,Aee=ad,Ree=ku,Eee=mu,jee=xu,Dee=bu,Iee=sd,Fee=gu,Vee=vu,Wee=Nu;Tt.ContextConsumer=_u;Tt.ContextProvider=Cee;Tt.Element=Aee;Tt.ForwardRef=Ree;Tt.Fragment=Eee;Tt.Lazy=jee;Tt.Memo=Dee;Tt.Portal=Iee;Tt.Profiler=Fee;Tt.StrictMode=Vee;Tt.Suspense=Wee;Tt.isAsyncMode=function(){return!1};Tt.isConcurrentMode=function(){return!1};Tt.isContextConsumer=function(r){return Gr(r)===_u};Tt.isContextProvider=function(r){return Gr(r)===yu};Tt.isElement=function(r){return typeof r==\"object\"\u0026\u0026r!==null\u0026\u0026r.$$typeof===ad};Tt.isForwardRef=function(r){return Gr(r)===ku};Tt.isFragment=function(r){return Gr(r)===mu};Tt.isLazy=function(r){return Gr(r)===xu};Tt.isMemo=function(r){return Gr(r)===bu};Tt.isPortal=function(r){return Gr(r)===sd};Tt.isProfiler=function(r){return Gr(r)===gu};Tt.isStrictMode=function(r){return Gr(r)===vu};Tt.isSuspense=function(r){return Gr(r)===Nu};Tt.isValidElementType=function(r){return typeof r==\"string\"||typeof r==\"function\"||r===mu||r===gu||r===KR||r===vu||r===Nu||r===ty||r===QR||typeof r==\"object\"\u0026\u0026r!==null\u0026\u0026(r.$$typeof===xu||r.$$typeof===bu||r.$$typeof===yu||r.$$typeof===_u||r.$$typeof===ku||r.$$typeof===ZR||r.$$typeof===YR||r[0]===XR)};Tt.typeOf=Gr});var ny=v((e0e,eE)=\u003e{\"use strict\";eE.exports=JR()});var sE=v(id=\u003e{\"use strict\";var Lee=Se();Object.defineProperty(id,\"__esModule\",{value:!0});id.getFunctionName=nE;id.default=Gee;var Bee=Lee(Co()),tE=ny(),zee=/^\\s*function(?:\\s|\\s*\\/\\*.*\\*\\/\\s*)+([^(\\s/]*)\\s*/;function nE(r){var e=\"\".concat(r).match(zee),a=e\u0026\u0026e[1];return a||\"\"}function rE(r){var e=arguments.length\u003e1\u0026\u0026arguments[1]!==void 0?arguments[1]:\"\";return r.displayName||r.name||nE(r)||e}function aE(r,e,a){var s=rE(e);return r.displayName||(s!==\"\"?\"\".concat(a,\"(\").concat(s,\")\"):a)}function Gee(r){if(r!=null){if(typeof r==\"string\")return r;if(typeof r==\"function\")return rE(r,\"Component\");if((0,Bee.default)(r)===\"object\")switch(r.$$typeof){case tE.ForwardRef:return aE(r,r.render,\"ForwardRef\");case tE.Memo:return aE(r,r.type,\"memo\");default:return}}}});var iE=v(ry=\u003e{\"use strict\";Object.defineProperty(ry,\"__esModule\",{value:!0});ry.default=Uee;function Uee(r,e,a,s,o){return null;var u,h}});var oE=v(od=\u003e{\"use strict\";Object.defineProperty(od,\"__esModule\",{value:!0});od.default=void 0;var $ee=typeof window!=\"undefined\"\u0026\u0026window.Math==Math?window:typeof self!=\"undefined\"\u0026\u0026self.Math==Math?self:Function(\"return this\")();od.default=$ee});var cE=v(cd=\u003e{\"use strict\";var Hee=Se();Object.defineProperty(cd,\"__esModule\",{value:!0});cd.default=void 0;var ay=Hee(It()),Yee=ay.default.oneOfType([ay.default.func,ay.default.object]),Xee=Yee;cd.default=Xee});var tn=v(Sr=\u003e{\"use strict\";var la=Se();Object.defineProperty(Sr,\"__esModule\",{value:!0});Object.defineProperty(Sr,\"chainPropTypes\",{enumerable:!0,get:function(){return Zee.default}});Object.defineProperty(Sr,\"deepmerge\",{enumerable:!0,get:function(){return Kee.default}});Object.defineProperty(Sr,\"elementAcceptingRef\",{enumerable:!0,get:function(){return Qee.default}});Object.defineProperty(Sr,\"elementTypeAcceptingRef\",{enumerable:!0,get:function(){return Jee.default}});Object.defineProperty(Sr,\"exactProp\",{enumerable:!0,get:function(){return ete.default}});Object.defineProperty(Sr,\"formatMuiErrorMessage\",{enumerable:!0,get:function(){return tte.default}});Object.defineProperty(Sr,\"getDisplayName\",{enumerable:!0,get:function(){return nte.default}});Object.defineProperty(Sr,\"HTMLElementType\",{enumerable:!0,get:function(){return rte.default}});Object.defineProperty(Sr,\"ponyfillGlobal\",{enumerable:!0,get:function(){return ate.default}});Object.defineProperty(Sr,\"refType\",{enumerable:!0,get:function(){return ste.default}});var Zee=la(Jh()),Kee=la(DR()),Qee=la(BR()),Jee=la(zR()),ete=la($R()),tte=la(HR()),nte=la(sE()),rte=la(iE()),ate=la(oE()),ste=la(cE())});var sy=v(ud=\u003e{\"use strict\";Object.defineProperty(ud,\"__esModule\",{value:!0});ud.default=void 0;var ite=typeof Symbol==\"function\"\u0026\u0026Symbol.for,ote=ite?Symbol.for(\"mui.nested\"):\"__THEME_NESTED__\";ud.default=ote});var uE=v(iy=\u003e{\"use strict\";var cte=Se();Object.defineProperty(iy,\"__esModule\",{value:!0});iy.default=pte;var ute=cte(sy()),lte=[\"checked\",\"disabled\",\"error\",\"focused\",\"focusVisible\",\"required\",\"expanded\",\"selected\"];function pte(){var r=arguments.length\u003e0\u0026\u0026arguments[0]!==void 0?arguments[0]:{},e=r.disableGlobal,a=e===void 0?!1:e,s=r.productionPrefix,o=s===void 0?\"jss\":s,u=r.seed,h=u===void 0?\"\":u,f=h===\"\"?\"\":\"\".concat(h,\"-\"),y=0,k=function(){return y+=1,y};return function(q,x){var M=x.options.name;if(M\u0026\u0026M.indexOf(\"Mui\")===0\u0026\u0026!x.options.link\u0026\u0026!a){if(lte.indexOf(q.key)!==-1)return\"Mui-\".concat(q.key);var L=\"\".concat(f).concat(M,\"-\").concat(q.key);return!x.options.theme[ute.default]||h!==\"\"?L:\"\".concat(L,\"-\").concat(k())}return\"\".concat(f).concat(o).concat(k());var j}}});var ld=v(oy=\u003e{\"use strict\";var hte=Se();Object.defineProperty(oy,\"__esModule\",{value:!0});Object.defineProperty(oy,\"default\",{enumerable:!0,get:function(){return dte.default}});var dte=hte(uE())});var lE=v(cy=\u003e{\"use strict\";Object.defineProperty(cy,\"__esModule\",{value:!0});cy.default=fte;function fte(r){return r}});var pE=v(uy=\u003e{\"use strict\";var mte=Se();Object.defineProperty(uy,\"__esModule\",{value:!0});Object.defineProperty(uy,\"default\",{enumerable:!0,get:function(){return vte.default}});var vte=mte(lE())});var hE=v(ly=\u003e{\"use strict\";Object.defineProperty(ly,\"__esModule\",{value:!0});ly.default=gte;function gte(r){var e=r.theme,a=r.name,s=r.props;if(!e||!e.props||!e.props[a])return s;var o=e.props[a],u;for(u in o)s[u]===void 0\u0026\u0026(s[u]=o[u]);return s}});var hy=v(py=\u003e{\"use strict\";var yte=Se();Object.defineProperty(py,\"__esModule\",{value:!0});Object.defineProperty(py,\"default\",{enumerable:!0,get:function(){return _te.default}});var _te=yte(hE())});var pd=v((d0e,dE)=\u003e{\"use strict\";var kte=!0;function Nte(r,e){if(!kte){if(r)return;var a=\"Warning: \"+e;typeof console!=\"undefined\"\u0026\u0026console.warn(a);try{throw Error(a)}catch(s){}}}dE.exports=Nte});var dy=v(hd=\u003e{\"use strict\";Object.defineProperty(hd,\"__esModule\",{value:!0});var fE=typeof Symbol==\"function\"\u0026\u0026typeof Symbol.iterator==\"symbol\"?function(r){return typeof r}:function(r){return r\u0026\u0026typeof Symbol==\"function\"\u0026\u0026r.constructor===Symbol\u0026\u0026r!==Symbol.prototype?\"symbol\":typeof r},bte=hd.isBrowser=(typeof window==\"undefined\"?\"undefined\":fE(window))===\"object\"\u0026\u0026(typeof document==\"undefined\"?\"undefined\":fE(document))===\"object\"\u0026\u0026document.nodeType===9;hd.default=bte});var fy=v((m0e,wu)=\u003e{function mE(r,e){for(var a=0;a\u003ce.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s\u0026\u0026(s.writable=!0),Object.defineProperty(r,s.key,s)}}function xte(r,e,a){return e\u0026\u0026mE(r.prototype,e),a\u0026\u0026mE(r,a),r}wu.exports=xte;wu.exports.default=wu.exports,wu.exports.__esModule=!0});var vE=v((v0e,Ra)=\u003e{function my(r,e){return Ra.exports=my=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},Ra.exports.default=Ra.exports,Ra.exports.__esModule=!0,my(r,e)}Ra.exports=my;Ra.exports.default=Ra.exports,Ra.exports.__esModule=!0});var gE=v((g0e,qu)=\u003e{var wte=vE();function qte(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,wte(r,e)}qu.exports=qte;qu.exports.default=qu.exports,qu.exports.__esModule=!0});var yE=v((y0e,Tu)=\u003e{function Tte(r){if(r===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return r}Tu.exports=Tte;Tu.exports.default=Tu.exports,Tu.exports.__esModule=!0});var vs=v(pr=\u003e{\"use strict\";Object.defineProperty(pr,\"__esModule\",{value:!0});var Ste=yt(),Mte=dy(),Pte=pd(),Ote=fy(),Cte=gE(),Ate=yE(),Rte=Kg();function ni(r){return r\u0026\u0026typeof r==\"object\"\u0026\u0026\"default\"in r?r:{default:r}}var pa=ni(Ste),Ete=ni(Mte),_E=ni(Pte),vy=ni(Ote),kE=ni(Cte),NE=ni(Ate),jte=ni(Rte),Dte={}.constructor;function gy(r){if(r==null||typeof r!=\"object\")return r;if(Array.isArray(r))return r.map(gy);if(r.constructor!==Dte)return r;var e={};for(var a in r)e[a]=gy(r[a]);return e}function yy(r,e,a){r===void 0\u0026\u0026(r=\"unnamed\");var s=a.jss,o=gy(e),u=s.plugins.onCreateRule(r,o,a);return u||(r[0]===\"@\",null)}var bE=function(e,a){for(var s=\"\",o=0;o\u003ce.length\u0026\u0026e[o]!==\"!important\";o++)s\u0026\u0026(s+=a),s+=e[o];return s},Ao=function(e,a){if(a===void 0\u0026\u0026(a=!1),!Array.isArray(e))return e;var s=\"\";if(Array.isArray(e[0]))for(var o=0;o\u003ce.length\u0026\u0026e[o]!==\"!important\";o++)s\u0026\u0026(s+=\", \"),s+=bE(e[o],\" \");else s=bE(e,\", \");return!a\u0026\u0026e[e.length-1]===\"!important\"\u0026\u0026(s+=\" !important\"),s};function Su(r,e){for(var a=\"\",s=0;s\u003ce;s++)a+=\"  \";return a+r}function Mu(r,e,a){a===void 0\u0026\u0026(a={});var s=\"\";if(!e)return s;var o=a,u=o.indent,h=u===void 0?0:u,f=e.fallbacks;if(r\u0026\u0026h++,f)if(Array.isArray(f))for(var y=0;y\u003cf.length;y++){var k=f[y];for(var q in k){var x=k[q];x!=null\u0026\u0026(s\u0026\u0026(s+=`\n`),s+=Su(q+\": \"+Ao(x)+\";\",h))}}else for(var M in f){var L=f[M];L!=null\u0026\u0026(s\u0026\u0026(s+=`\n`),s+=Su(M+\": \"+Ao(L)+\";\",h))}for(var j in e){var B=e[j];B!=null\u0026\u0026j!==\"fallbacks\"\u0026\u0026(s\u0026\u0026(s+=`\n`),s+=Su(j+\": \"+Ao(B)+\";\",h))}return!s\u0026\u0026!a.allowEmpty||!r?s:(h--,s\u0026\u0026(s=`\n`+s+`\n`),Su(r+\" {\"+s,h)+Su(\"}\",h))}var Ite=/([[\\].#*$\u003e\u003c+~=|^:(),\"'`\\s])/g,xE=typeof CSS!=\"undefined\"\u0026\u0026CSS.escape,_y=function(r){return xE?xE(r):r.replace(Ite,\"\\\\$1\")},wE=function(){function r(a,s,o){this.type=\"style\",this.key=void 0,this.isProcessed=!1,this.style=void 0,this.renderer=void 0,this.renderable=void 0,this.options=void 0;var u=o.sheet,h=o.Renderer;this.key=a,this.options=o,this.style=s,u?this.renderer=u.renderer:h\u0026\u0026(this.renderer=new h)}var e=r.prototype;return e.prop=function(s,o,u){if(o===void 0)return this.style[s];var h=u?u.force:!1;if(!h\u0026\u0026this.style[s]===o)return this;var f=o;(!u||u.process!==!1)\u0026\u0026(f=this.options.jss.plugins.onChangeValue(o,s,this));var y=f==null||f===!1,k=s in this.style;if(y\u0026\u0026!k\u0026\u0026!h)return this;var q=y\u0026\u0026k;if(q?delete this.style[s]:this.style[s]=f,this.renderable\u0026\u0026this.renderer)return q?this.renderer.removeProperty(this.renderable,s):this.renderer.setProperty(this.renderable,s,f),this;var x=this.options.sheet;return x\u0026\u0026x.attached,this},r}(),ky=function(r){kE.default(e,r);function e(s,o,u){var h;h=r.call(this,s,o,u)||this,h.selectorText=void 0,h.id=void 0,h.renderable=void 0;var f=u.selector,y=u.scoped,k=u.sheet,q=u.generateId;return f?h.selectorText=f:y!==!1\u0026\u0026(h.id=q(NE.default(NE.default(h)),k),h.selectorText=\".\"+_y(h.id)),h}var a=e.prototype;return a.applyTo=function(o){var u=this.renderer;if(u){var h=this.toJSON();for(var f in h)u.setProperty(o,f,h[f])}return this},a.toJSON=function(){var o={};for(var u in this.style){var h=this.style[u];typeof h!=\"object\"?o[u]=h:Array.isArray(h)\u0026\u0026(o[u]=Ao(h))}return o},a.toString=function(o){var u=this.options.sheet,h=u?u.options.link:!1,f=h?pa.default({},o,{allowEmpty:!0}):o;return Mu(this.selectorText,this.style,f)},vy.default(e,[{key:\"selector\",set:function(o){if(o!==this.selectorText){this.selectorText=o;var u=this.renderer,h=this.renderable;if(!(!h||!u)){var f=u.setSelector(h,o);f||u.replaceRule(h,this)}}},get:function(){return this.selectorText}}]),e}(wE),Fte={onCreateRule:function(e,a,s){return e[0]===\"@\"||s.parent\u0026\u0026s.parent.type===\"keyframes\"?null:new ky(e,a,s)}},Ny={indent:1,children:!0},Vte=/@([\\w-]+)/,Wte=function(){function r(a,s,o){this.type=\"conditional\",this.at=void 0,this.key=void 0,this.query=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=a;var u=a.match(Vte);this.at=u?u[1]:\"unknown\",this.query=o.name||\"@\"+this.at,this.options=o,this.rules=new dd(pa.default({},o,{parent:this}));for(var h in s)this.rules.add(h,s[h]);this.rules.process()}var e=r.prototype;return e.getRule=function(s){return this.rules.get(s)},e.indexOf=function(s){return this.rules.indexOf(s)},e.addRule=function(s,o,u){var h=this.rules.add(s,o,u);return h?(this.options.jss.plugins.onProcessRule(h),h):null},e.toString=function(s){if(s===void 0\u0026\u0026(s=Ny),s.indent==null\u0026\u0026(s.indent=Ny.indent),s.children==null\u0026\u0026(s.children=Ny.children),s.children===!1)return this.query+\" {}\";var o=this.rules.toString(s);return o?this.query+` {\n`+o+`\n}`:\"\"},r}(),Lte=/@media|@supports\\s+/,Bte={onCreateRule:function(e,a,s){return Lte.test(e)?new Wte(e,a,s):null}},by={indent:1,children:!0},zte=/@keyframes\\s+([\\w-]+)/,xy=function(){function r(a,s,o){this.type=\"keyframes\",this.at=\"@keyframes\",this.key=void 0,this.name=void 0,this.id=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0;var u=a.match(zte);u\u0026\u0026u[1]?this.name=u[1]:this.name=\"noname\",this.key=this.type+\"-\"+this.name,this.options=o;var h=o.scoped,f=o.sheet,y=o.generateId;this.id=h===!1?this.name:_y(y(this,f)),this.rules=new dd(pa.default({},o,{parent:this}));for(var k in s)this.rules.add(k,s[k],pa.default({},o,{parent:this}));this.rules.process()}var e=r.prototype;return e.toString=function(s){if(s===void 0\u0026\u0026(s=by),s.indent==null\u0026\u0026(s.indent=by.indent),s.children==null\u0026\u0026(s.children=by.children),s.children===!1)return this.at+\" \"+this.id+\" {}\";var o=this.rules.toString(s);return o\u0026\u0026(o=`\n`+o+`\n`),this.at+\" \"+this.id+\" {\"+o+\"}\"},r}(),Gte=/@keyframes\\s+/,Ute=/\\$([\\w-]+)/g,wy=function(e,a){return typeof e==\"string\"?e.replace(Ute,function(s,o){return o in a?a[o]:s}):e},qE=function(e,a,s){var o=e[a],u=wy(o,s);u!==o\u0026\u0026(e[a]=u)},$te={onCreateRule:function(e,a,s){return typeof e==\"string\"\u0026\u0026Gte.test(e)?new xy(e,a,s):null},onProcessStyle:function(e,a,s){return a.type!==\"style\"||!s||(\"animation-name\"in e\u0026\u0026qE(e,\"animation-name\",s.keyframes),\"animation\"in e\u0026\u0026qE(e,\"animation\",s.keyframes)),e},onChangeValue:function(e,a,s){var o=s.options.sheet;if(!o)return e;switch(a){case\"animation\":return wy(e,o.keyframes);case\"animation-name\":return wy(e,o.keyframes);default:return e}}},Hte=function(r){kE.default(e,r);function e(){for(var s,o=arguments.length,u=new Array(o),h=0;h\u003co;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u))||this,s.renderable=void 0,s}var a=e.prototype;return a.toString=function(o){var u=this.options.sheet,h=u?u.options.link:!1,f=h?pa.default({},o,{allowEmpty:!0}):o;return Mu(this.key,this.style,f)},e}(wE),Yte={onCreateRule:function(e,a,s){return s.parent\u0026\u0026s.parent.type===\"keyframes\"?new Hte(e,a,s):null}},Xte=function(){function r(a,s,o){this.type=\"font-face\",this.at=\"@font-face\",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=a,this.style=s,this.options=o}var e=r.prototype;return e.toString=function(s){if(Array.isArray(this.style)){for(var o=\"\",u=0;u\u003cthis.style.length;u++)o+=Mu(this.at,this.style[u]),this.style[u+1]\u0026\u0026(o+=`\n`);return o}return Mu(this.at,this.style,s)},r}(),Zte=/@font-face/,Kte={onCreateRule:function(e,a,s){return Zte.test(e)?new Xte(e,a,s):null}},Qte=function(){function r(a,s,o){this.type=\"viewport\",this.at=\"@viewport\",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=a,this.style=s,this.options=o}var e=r.prototype;return e.toString=function(s){return Mu(this.key,this.style,s)},r}(),Jte={onCreateRule:function(e,a,s){return e===\"@viewport\"||e===\"@-ms-viewport\"?new Qte(e,a,s):null}},ene=function(){function r(a,s,o){this.type=\"simple\",this.key=void 0,this.value=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=a,this.value=s,this.options=o}var e=r.prototype;return e.toString=function(s){if(Array.isArray(this.value)){for(var o=\"\",u=0;u\u003cthis.value.length;u++)o+=this.key+\" \"+this.value[u]+\";\",this.value[u+1]\u0026\u0026(o+=`\n`);return o}return this.key+\" \"+this.value+\";\"},r}(),tne={\"@charset\":!0,\"@import\":!0,\"@namespace\":!0},nne={onCreateRule:function(e,a,s){return e in tne?new ene(e,a,s):null}},TE=[Fte,Bte,$te,Yte,Kte,Jte,nne],rne={process:!0},SE={force:!0,process:!0},dd=function(){function r(a){this.map={},this.raw={},this.index=[],this.counter=0,this.options=void 0,this.classes=void 0,this.keyframes=void 0,this.options=a,this.classes=a.classes,this.keyframes=a.keyframes}var e=r.prototype;return e.add=function(s,o,u){var h=this.options,f=h.parent,y=h.sheet,k=h.jss,q=h.Renderer,x=h.generateId,M=h.scoped,L=pa.default({classes:this.classes,parent:f,sheet:y,jss:k,Renderer:q,generateId:x,scoped:M,name:s,keyframes:this.keyframes,selector:void 0},u),j=s;s in this.raw\u0026\u0026(j=s+\"-d\"+this.counter++),this.raw[j]=o,j in this.classes\u0026\u0026(L.selector=\".\"+_y(this.classes[j]));var B=yy(j,o,L);if(!B)return null;this.register(B);var ee=L.index===void 0?this.index.length:L.index;return this.index.splice(ee,0,B),B},e.get=function(s){return this.map[s]},e.remove=function(s){this.unregister(s),delete this.raw[s.key],this.index.splice(this.index.indexOf(s),1)},e.indexOf=function(s){return this.index.indexOf(s)},e.process=function(){var s=this.options.jss.plugins;this.index.slice(0).forEach(s.onProcessRule,s)},e.register=function(s){this.map[s.key]=s,s instanceof ky?(this.map[s.selector]=s,s.id\u0026\u0026(this.classes[s.key]=s.id)):s instanceof xy\u0026\u0026this.keyframes\u0026\u0026(this.keyframes[s.name]=s.id)},e.unregister=function(s){delete this.map[s.key],s instanceof ky?(delete this.map[s.selector],delete this.classes[s.key]):s instanceof xy\u0026\u0026delete this.keyframes[s.name]},e.update=function(){var s,o,u;if(typeof(arguments.length\u003c=0?void 0:arguments[0])==\"string\"?(s=arguments.length\u003c=0?void 0:arguments[0],o=arguments.length\u003c=1?void 0:arguments[1],u=arguments.length\u003c=2?void 0:arguments[2]):(o=arguments.length\u003c=0?void 0:arguments[0],u=arguments.length\u003c=1?void 0:arguments[1],s=null),s)this.updateOne(this.map[s],o,u);else for(var h=0;h\u003cthis.index.length;h++)this.updateOne(this.index[h],o,u)},e.updateOne=function(s,o,u){u===void 0\u0026\u0026(u=rne);var h=this.options,f=h.jss.plugins,y=h.sheet;if(s.rules instanceof r){s.rules.update(o,u);return}var k=s,q=k.style;if(f.onUpdate(o,s,y,u),u.process\u0026\u0026q\u0026\u0026q!==k.style){f.onProcessStyle(k.style,k,y);for(var x in k.style){var M=k.style[x],L=q[x];M!==L\u0026\u0026k.prop(x,M,SE)}for(var j in q){var B=k.style[j],ee=q[j];B==null\u0026\u0026B!==ee\u0026\u0026k.prop(j,null,SE)}}},e.toString=function(s){for(var o=\"\",u=this.options.sheet,h=u?u.options.link:!1,f=0;f\u003cthis.index.length;f++){var y=this.index[f],k=y.toString(s);!k\u0026\u0026!h||(o\u0026\u0026(o+=`\n`),o+=k)}return o},r}(),ME=function(){function r(a,s){this.options=void 0,this.deployed=void 0,this.attached=void 0,this.rules=void 0,this.renderer=void 0,this.classes=void 0,this.keyframes=void 0,this.queue=void 0,this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=pa.default({},s,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),s.Renderer\u0026\u0026(this.renderer=new s.Renderer(this)),this.rules=new dd(this.options);for(var o in a)this.rules.add(o,a[o]);this.rules.process()}var e=r.prototype;return e.attach=function(){return this.attached?this:(this.renderer\u0026\u0026this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer\u0026\u0026this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(s,o,u){var h=this.queue;this.attached\u0026\u0026!h\u0026\u0026(this.queue=[]);var f=this.rules.add(s,o,u);return f?(this.options.jss.plugins.onProcessRule(f),this.attached?(this.deployed\u0026\u0026(h?h.push(f):(this.insertRule(f),this.queue\u0026\u0026(this.queue.forEach(this.insertRule,this),this.queue=void 0))),f):(this.deployed=!1,f)):null},e.insertRule=function(s){this.renderer\u0026\u0026this.renderer.insertRule(s)},e.addRules=function(s,o){var u=[];for(var h in s){var f=this.addRule(h,s[h],o);f\u0026\u0026u.push(f)}return u},e.getRule=function(s){return this.rules.get(s)},e.deleteRule=function(s){var o=typeof s==\"object\"?s:this.rules.get(s);return!o||this.attached\u0026\u0026!o.renderable?!1:(this.rules.remove(o),this.attached\u0026\u0026o.renderable\u0026\u0026this.renderer?this.renderer.deleteRule(o.renderable):!0)},e.indexOf=function(s){return this.rules.indexOf(s)},e.deploy=function(){return this.renderer\u0026\u0026this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var s;return(s=this.rules).update.apply(s,arguments),this},e.updateOne=function(s,o,u){return this.rules.updateOne(s,o,u),this},e.toString=function(s){return this.rules.toString(s)},r}(),ane=function(){function r(){this.plugins={internal:[],external:[]},this.registry=void 0}var e=r.prototype;return e.onCreateRule=function(s,o,u){for(var h=0;h\u003cthis.registry.onCreateRule.length;h++){var f=this.registry.onCreateRule[h](s,o,u);if(f)return f}return null},e.onProcessRule=function(s){if(!s.isProcessed){for(var o=s.options.sheet,u=0;u\u003cthis.registry.onProcessRule.length;u++)this.registry.onProcessRule[u](s,o);s.style\u0026\u0026this.onProcessStyle(s.style,s,o),s.isProcessed=!0}},e.onProcessStyle=function(s,o,u){for(var h=0;h\u003cthis.registry.onProcessStyle.length;h++)o.style=this.registry.onProcessStyle[h](o.style,o,u)},e.onProcessSheet=function(s){for(var o=0;o\u003cthis.registry.onProcessSheet.length;o++)this.registry.onProcessSheet[o](s)},e.onUpdate=function(s,o,u,h){for(var f=0;f\u003cthis.registry.onUpdate.length;f++)this.registry.onUpdate[f](s,o,u,h)},e.onChangeValue=function(s,o,u){for(var h=s,f=0;f\u003cthis.registry.onChangeValue.length;f++)h=this.registry.onChangeValue[f](h,o,u);return h},e.use=function(s,o){o===void 0\u0026\u0026(o={queue:\"external\"});var u=this.plugins[o.queue];u.indexOf(s)===-1\u0026\u0026(u.push(s),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(h,f){for(var y in f)y in h\u0026\u0026h[y].push(f[y]);return h},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},r}(),PE=function(){function r(){this.registry=[]}var e=r.prototype;return e.add=function(s){var o=this.registry,u=s.options.index;if(o.indexOf(s)===-1){if(o.length===0||u\u003e=this.index){o.push(s);return}for(var h=0;h\u003co.length;h++)if(o[h].options.index\u003eu){o.splice(h,0,s);return}}},e.reset=function(){this.registry=[]},e.remove=function(s){var o=this.registry.indexOf(s);this.registry.splice(o,1)},e.toString=function(s){for(var o=s===void 0?{}:s,u=o.attached,h=jte.default(o,[\"attached\"]),f=\"\",y=0;y\u003cthis.registry.length;y++){var k=this.registry[y];u!=null\u0026\u0026k.attached!==u||(f\u0026\u0026(f+=`\n`),f+=k.toString(h))}return f},vy.default(r,[{key:\"index\",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),r}(),Ro=new PE,qy=typeof globalThis!=\"undefined\"?globalThis:typeof window!=\"undefined\"\u0026\u0026window.Math===Math?window:typeof self!=\"undefined\"\u0026\u0026self.Math===Math?self:Function(\"return this\")(),Ty=\"2f1acc6c3a606b082e5eef5e54414ffb\";qy[Ty]==null\u0026\u0026(qy[Ty]=0);var OE=qy[Ty]++,sne=1e10,Sy=function(e){e===void 0\u0026\u0026(e={});var a=0,s=function(u,h){a+=1,a\u003esne;var f=\"\",y=\"\";return h\u0026\u0026(h.options.classNamePrefix\u0026\u0026(y=h.options.classNamePrefix),h.options.jss.id!=null\u0026\u0026(f=String(h.options.jss.id))),e.minify?\"\"+(y||\"c\")+OE+f+a:y+u.key+\"-\"+OE+(f?\"-\"+f:\"\")+\"-\"+a};return s},CE=function(e){var a;return function(){return a||(a=e()),a}},ine=function(e,a){try{return e.attributeStyleMap?e.attributeStyleMap.get(a):e.style.getPropertyValue(a)}catch(s){return\"\"}},one=function(e,a,s){try{var o=s;if(Array.isArray(s)\u0026\u0026(o=Ao(s,!0),s[s.length-1]===\"!important\"))return e.style.setProperty(a,o,\"important\"),!0;e.attributeStyleMap?e.attributeStyleMap.set(a,o):e.style.setProperty(a,o)}catch(u){return!1}return!0},cne=function(e,a){try{e.attributeStyleMap?e.attributeStyleMap.delete(a):e.style.removeProperty(a)}catch(s){}},une=function(e,a){return e.selectorText=a,e.selectorText===a},AE=CE(function(){return document.querySelector(\"head\")});function lne(r,e){for(var a=0;a\u003cr.length;a++){var s=r[a];if(s.attached\u0026\u0026s.options.index\u003ee.index\u0026\u0026s.options.insertionPoint===e.insertionPoint)return s}return null}function pne(r,e){for(var a=r.length-1;a\u003e=0;a--){var s=r[a];if(s.attached\u0026\u0026s.options.insertionPoint===e.insertionPoint)return s}return null}function hne(r){for(var e=AE(),a=0;a\u003ce.childNodes.length;a++){var s=e.childNodes[a];if(s.nodeType===8\u0026\u0026s.nodeValue.trim()===r)return s}return null}function dne(r){var e=Ro.registry;if(e.length\u003e0){var a=lne(e,r);if(a\u0026\u0026a.renderer)return{parent:a.renderer.element.parentNode,node:a.renderer.element};if(a=pne(e,r),a\u0026\u0026a.renderer)return{parent:a.renderer.element.parentNode,node:a.renderer.element.nextSibling}}var s=r.insertionPoint;if(s\u0026\u0026typeof s==\"string\"){var o=hne(s);if(o)return{parent:o.parentNode,node:o.nextSibling}}return!1}function fne(r,e){var a=e.insertionPoint,s=dne(e);if(s!==!1\u0026\u0026s.parent){s.parent.insertBefore(r,s.node);return}if(a\u0026\u0026typeof a.nodeType==\"number\"){var o=a,u=o.parentNode;u\u0026\u0026u.insertBefore(r,o.nextSibling);return}AE().appendChild(r)}var mne=CE(function(){var r=document.querySelector('meta[property=\"csp-nonce\"]');return r?r.getAttribute(\"content\"):null}),RE=function(e,a,s){try{if(\"insertRule\"in e){var o=e;o.insertRule(a,s)}else if(\"appendRule\"in e){var u=e;u.appendRule(a)}}catch(h){return!1}return e.cssRules[s]},EE=function(e,a){var s=e.cssRules.length;return a===void 0||a\u003es?s:a},vne=function(){var e=document.createElement(\"style\");return e.textContent=`\n`,e},gne=function(){function r(a){this.getPropertyValue=ine,this.setProperty=one,this.removeProperty=cne,this.setSelector=une,this.element=void 0,this.sheet=void 0,this.hasInsertedRules=!1,this.cssRules=[],a\u0026\u0026Ro.add(a),this.sheet=a;var s=this.sheet?this.sheet.options:{},o=s.media,u=s.meta,h=s.element;this.element=h||vne(),this.element.setAttribute(\"data-jss\",\"\"),o\u0026\u0026this.element.setAttribute(\"media\",o),u\u0026\u0026this.element.setAttribute(\"data-meta\",u);var f=mne();f\u0026\u0026this.element.setAttribute(\"nonce\",f)}var e=r.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){fne(this.element,this.sheet.options);var s=Boolean(this.sheet\u0026\u0026this.sheet.deployed);this.hasInsertedRules\u0026\u0026s\u0026\u0026(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(!!this.sheet){var s=this.element.parentNode;s\u0026\u0026s.removeChild(this.element),this.sheet.options.link\u0026\u0026(this.cssRules=[],this.element.textContent=`\n`)}},e.deploy=function(){var s=this.sheet;if(!!s){if(s.options.link){this.insertRules(s.rules);return}this.element.textContent=`\n`+s.toString()+`\n`}},e.insertRules=function(s,o){for(var u=0;u\u003cs.index.length;u++)this.insertRule(s.index[u],u,o)},e.insertRule=function(s,o,u){if(u===void 0\u0026\u0026(u=this.element.sheet),s.rules){var h=s,f=u;if(s.type===\"conditional\"||s.type===\"keyframes\"){var y=EE(u,o);if(f=RE(u,h.toString({children:!1}),y),f===!1)return!1;this.refCssRule(s,y,f)}return this.insertRules(h.rules,f),f}var k=s.toString();if(!k)return!1;var q=EE(u,o),x=RE(u,k,q);return x===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(s,q,x),x)},e.refCssRule=function(s,o,u){s.renderable=u,s.options.parent instanceof ME\u0026\u0026(this.cssRules[o]=u)},e.deleteRule=function(s){var o=this.element.sheet,u=this.indexOf(s);return u===-1?!1:(o.deleteRule(u),this.cssRules.splice(u,1),!0)},e.indexOf=function(s){return this.cssRules.indexOf(s)},e.replaceRule=function(s,o){var u=this.indexOf(s);return u===-1?!1:(this.element.sheet.deleteRule(u),this.cssRules.splice(u,1),this.insertRule(o,u))},e.getRules=function(){return this.element.sheet.cssRules},r}(),yne=0,_ne=function(){function r(a){this.id=yne++,this.version=\"10.7.1\",this.plugins=new ane,this.options={id:{minify:!1},createGenerateId:Sy,Renderer:Ete.default?gne:null,plugins:[]},this.generateId=Sy({minify:!1});for(var s=0;s\u003cTE.length;s++)this.plugins.use(TE[s],{queue:\"internal\"});this.setup(a)}var e=r.prototype;return e.setup=function(s){return s===void 0\u0026\u0026(s={}),s.createGenerateId\u0026\u0026(this.options.createGenerateId=s.createGenerateId),s.id\u0026\u0026(this.options.id=pa.default({},this.options.id,s.id)),(s.createGenerateId||s.id)\u0026\u0026(this.generateId=this.options.createGenerateId(this.options.id)),s.insertionPoint!=null\u0026\u0026(this.options.insertionPoint=s.insertionPoint),\"Renderer\"in s\u0026\u0026(this.options.Renderer=s.Renderer),s.plugins\u0026\u0026this.use.apply(this,s.plugins),this},e.createStyleSheet=function(s,o){o===void 0\u0026\u0026(o={});var u=o,h=u.index;typeof h!=\"number\"\u0026\u0026(h=Ro.index===0?0:Ro.index+1);var f=new ME(s,pa.default({},o,{jss:this,generateId:o.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:h}));return this.plugins.onProcessSheet(f),f},e.removeStyleSheet=function(s){return s.detach(),Ro.remove(s),this},e.createRule=function(s,o,u){if(o===void 0\u0026\u0026(o={}),u===void 0\u0026\u0026(u={}),typeof s==\"object\")return this.createRule(void 0,s,o);var h=pa.default({},u,{name:s,jss:this,Renderer:this.options.Renderer});h.generateId||(h.generateId=this.generateId),h.classes||(h.classes={}),h.keyframes||(h.keyframes={});var f=yy(s,o,h);return f\u0026\u0026this.plugins.onProcessRule(f),f},e.use=function(){for(var s=this,o=arguments.length,u=new Array(o),h=0;h\u003co;h++)u[h]=arguments[h];return u.forEach(function(f){s.plugins.use(f)}),this},r}();function jE(r){var e=null;for(var a in r){var s=r[a],o=typeof s;if(o===\"function\")e||(e={}),e[a]=s;else if(o===\"object\"\u0026\u0026s!==null\u0026\u0026!Array.isArray(s)){var u=jE(s);u\u0026\u0026(e||(e={}),e[a]=u)}}return e}var kne=function(){function r(){this.length=0,this.sheets=new WeakMap}var e=r.prototype;return e.get=function(s){var o=this.sheets.get(s);return o\u0026\u0026o.sheet},e.add=function(s,o){this.sheets.has(s)||(this.length++,this.sheets.set(s,{sheet:o,refs:0}))},e.manage=function(s){var o=this.sheets.get(s);if(o)return o.refs===0\u0026\u0026o.sheet.attach(),o.refs++,o.sheet;_E.default(!1,\"[JSS] SheetsManager: can't find sheet to manage\")},e.unmanage=function(s){var o=this.sheets.get(s);o?o.refs\u003e0\u0026\u0026(o.refs--,o.refs===0\u0026\u0026o.sheet.detach()):_E.default(!1,\"SheetsManager: can't find sheet to unmanage\")},vy.default(r,[{key:\"size\",get:function(){return this.length}}]),r}();var Nne=typeof CSS==\"object\"\u0026\u0026CSS!=null\u0026\u0026\"number\"in CSS,DE=function(e){return new _ne(e)},bne=DE();pr.RuleList=dd;pr.SheetsManager=kne;pr.SheetsRegistry=PE;pr.create=DE;pr.createGenerateId=Sy;pr.createRule=yy;pr.default=bne;pr.getDynamicStyles=jE;pr.hasCSSTOMSupport=Nne;pr.sheets=Ro;pr.toCssValue=Ao});var FE=v(Oy=\u003e{\"use strict\";Object.defineProperty(Oy,\"__esModule\",{value:!0});var k0e=pd(),xne=vs(),IE=Date.now(),My=\"fnValues\"+IE,Py=\"fnStyle\"+ ++IE,wne=function(){return{onCreateRule:function(a,s,o){if(typeof s!=\"function\")return null;var u=xne.createRule(a,{},o);return u[Py]=s,u},onProcessStyle:function(a,s){if(My in s||Py in s)return a;var o={};for(var u in a){var h=a[u];typeof h==\"function\"\u0026\u0026(delete a[u],o[u]=h)}return s[My]=o,a},onUpdate:function(a,s,o,u){var h=s,f=h[Py];if(f\u0026\u0026(h.style=f(a)||{},!1))for(var y in h.style);var k=h[My];if(k)for(var q in k)h.prop(q,k[q](a),u)}}};Oy.default=wne});var WE=v(Ay=\u003e{\"use strict\";Object.defineProperty(Ay,\"__esModule\",{value:!0});var qne=yt(),Tne=vs();function Sne(r){return r\u0026\u0026typeof r==\"object\"\u0026\u0026\"default\"in r?r:{default:r}}var fd=Sne(qne),gs=\"@global\",Cy=\"@global \",Mne=function(){function r(a,s,o){this.type=\"global\",this.at=gs,this.rules=void 0,this.options=void 0,this.key=void 0,this.isProcessed=!1,this.key=a,this.options=o,this.rules=new Tne.RuleList(fd.default({},o,{parent:this}));for(var u in s)this.rules.add(u,s[u]);this.rules.process()}var e=r.prototype;return e.getRule=function(s){return this.rules.get(s)},e.addRule=function(s,o,u){var h=this.rules.add(s,o,u);return h\u0026\u0026this.options.jss.plugins.onProcessRule(h),h},e.indexOf=function(s){return this.rules.indexOf(s)},e.toString=function(){return this.rules.toString()},r}(),Pne=function(){function r(a,s,o){this.type=\"global\",this.at=gs,this.options=void 0,this.rule=void 0,this.isProcessed=!1,this.key=void 0,this.key=a,this.options=o;var u=a.substr(Cy.length);this.rule=o.jss.createRule(u,s,fd.default({},o,{parent:this}))}var e=r.prototype;return e.toString=function(s){return this.rule?this.rule.toString(s):\"\"},r}(),One=/\\s*,\\s*/g;function VE(r,e){for(var a=r.split(One),s=\"\",o=0;o\u003ca.length;o++)s+=e+\" \"+a[o].trim(),a[o+1]\u0026\u0026(s+=\", \");return s}function Cne(r,e){var a=r.options,s=r.style,o=s?s[gs]:null;if(!!o){for(var u in o)e.addRule(u,o[u],fd.default({},a,{selector:VE(u,r.selector)}));delete s[gs]}}function Ane(r,e){var a=r.options,s=r.style;for(var o in s)if(!(o[0]!==\"@\"||o.substr(0,gs.length)!==gs)){var u=VE(o.substr(gs.length),r.selector);e.addRule(u,s[o],fd.default({},a,{selector:u})),delete s[o]}}function Rne(){function r(a,s,o){if(!a)return null;if(a===gs)return new Mne(a,s,o);if(a[0]===\"@\"\u0026\u0026a.substr(0,Cy.length)===Cy)return new Pne(a,s,o);var u=o.parent;return u\u0026\u0026(u.type===\"global\"||u.options.parent\u0026\u0026u.options.parent.type===\"global\")\u0026\u0026(o.scoped=!1),o.scoped===!1\u0026\u0026(o.selector=a),null}function e(a,s){a.type!==\"style\"||!s||(Cne(a,s),Ane(a,s))}return{onCreateRule:r,onProcessRule:e}}Ay.default=Rne});var BE=v(Ey=\u003e{\"use strict\";Object.defineProperty(Ey,\"__esModule\",{value:!0});var Ene=yt(),x0e=pd();function jne(r){return r\u0026\u0026typeof r==\"object\"\u0026\u0026\"default\"in r?r:{default:r}}var Ry=jne(Ene),LE=/\\s*,\\s*/g,Dne=/\u0026/g,Ine=/\\$([\\w-]+)/g;function Fne(){function r(o,u){return function(h,f){var y=o.getRule(f)||u\u0026\u0026u.getRule(f);return y?(y=y,y.selector):f}}function e(o,u){for(var h=u.split(LE),f=o.split(LE),y=\"\",k=0;k\u003ch.length;k++)for(var q=h[k],x=0;x\u003cf.length;x++){var M=f[x];y\u0026\u0026(y+=\", \"),y+=M.indexOf(\"\u0026\")!==-1?M.replace(Dne,q):q+\" \"+M}return y}function a(o,u,h){if(h)return Ry.default({},h,{index:h.index+1});var f=o.options.nestingLevel;f=f===void 0?1:f+1;var y=Ry.default({},o.options,{nestingLevel:f,index:u.indexOf(o)+1});return delete y.name,y}function s(o,u,h){if(u.type!==\"style\")return o;var f=u,y=f.options.parent,k,q;for(var x in o){var M=x.indexOf(\"\u0026\")!==-1,L=x[0]===\"@\";if(!(!M\u0026\u0026!L)){if(k=a(f,y,k),M){var j=e(x,f.selector);q||(q=r(y,h)),j=j.replace(Ine,q),y.addRule(j,o[x],Ry.default({},k,{selector:j}))}else L\u0026\u0026y.addRule(x,{},k).addRule(f.key,o[x],{selector:f.selector});delete o[x]}}return o}return{onProcessStyle:s}}Ey.default=Fne});var GE=v((q0e,zE)=\u003e{\"use strict\";var Vne=/[A-Z]/g,Wne=/^ms-/,jy={};function Lne(r){return\"-\"+r.toLowerCase()}function Bne(r){if(jy.hasOwnProperty(r))return jy[r];var e=r.replace(Vne,Lne);return jy[r]=Wne.test(e)?\"-\"+e:e}zE.exports=Bne});var $E=v(Dy=\u003e{\"use strict\";Object.defineProperty(Dy,\"__esModule\",{value:!0});var zne=GE();function Gne(r){return r\u0026\u0026typeof r==\"object\"\u0026\u0026\"default\"in r?r:{default:r}}var UE=Gne(zne);function md(r){var e={};for(var a in r){var s=a.indexOf(\"--\")===0?a:UE.default(a);e[s]=r[a]}return r.fallbacks\u0026\u0026(Array.isArray(r.fallbacks)?e.fallbacks=r.fallbacks.map(md):e.fallbacks=md(r.fallbacks)),e}function Une(){function r(a){if(Array.isArray(a)){for(var s=0;s\u003ca.length;s++)a[s]=md(a[s]);return a}return md(a)}function e(a,s,o){if(s.indexOf(\"--\")===0)return a;var u=UE.default(s);return s===u?a:(o.prop(u,a),null)}return{onProcessStyle:r,onChangeValue:e}}Dy.default=Une});var YE=v(Fy=\u003e{\"use strict\";Object.defineProperty(Fy,\"__esModule\",{value:!0});var Iy=vs(),he=Iy.hasCSSTOMSupport\u0026\u0026CSS?CSS.px:\"px\",vd=Iy.hasCSSTOMSupport\u0026\u0026CSS?CSS.ms:\"ms\",Eo=Iy.hasCSSTOMSupport\u0026\u0026CSS?CSS.percent:\"%\",$ne={\"animation-delay\":vd,\"animation-duration\":vd,\"background-position\":he,\"background-position-x\":he,\"background-position-y\":he,\"background-size\":he,border:he,\"border-bottom\":he,\"border-bottom-left-radius\":he,\"border-bottom-right-radius\":he,\"border-bottom-width\":he,\"border-left\":he,\"border-left-width\":he,\"border-radius\":he,\"border-right\":he,\"border-right-width\":he,\"border-top\":he,\"border-top-left-radius\":he,\"border-top-right-radius\":he,\"border-top-width\":he,\"border-width\":he,\"border-block\":he,\"border-block-end\":he,\"border-block-end-width\":he,\"border-block-start\":he,\"border-block-start-width\":he,\"border-block-width\":he,\"border-inline\":he,\"border-inline-end\":he,\"border-inline-end-width\":he,\"border-inline-start\":he,\"border-inline-start-width\":he,\"border-inline-width\":he,\"border-start-start-radius\":he,\"border-start-end-radius\":he,\"border-end-start-radius\":he,\"border-end-end-radius\":he,margin:he,\"margin-bottom\":he,\"margin-left\":he,\"margin-right\":he,\"margin-top\":he,\"margin-block\":he,\"margin-block-end\":he,\"margin-block-start\":he,\"margin-inline\":he,\"margin-inline-end\":he,\"margin-inline-start\":he,padding:he,\"padding-bottom\":he,\"padding-left\":he,\"padding-right\":he,\"padding-top\":he,\"padding-block\":he,\"padding-block-end\":he,\"padding-block-start\":he,\"padding-inline\":he,\"padding-inline-end\":he,\"padding-inline-start\":he,\"mask-position-x\":he,\"mask-position-y\":he,\"mask-size\":he,height:he,width:he,\"min-height\":he,\"max-height\":he,\"min-width\":he,\"max-width\":he,bottom:he,left:he,top:he,right:he,inset:he,\"inset-block\":he,\"inset-block-end\":he,\"inset-block-start\":he,\"inset-inline\":he,\"inset-inline-end\":he,\"inset-inline-start\":he,\"box-shadow\":he,\"text-shadow\":he,\"column-gap\":he,\"column-rule\":he,\"column-rule-width\":he,\"column-width\":he,\"font-size\":he,\"font-size-delta\":he,\"letter-spacing\":he,\"text-decoration-thickness\":he,\"text-indent\":he,\"text-stroke\":he,\"text-stroke-width\":he,\"word-spacing\":he,motion:he,\"motion-offset\":he,outline:he,\"outline-offset\":he,\"outline-width\":he,perspective:he,\"perspective-origin-x\":Eo,\"perspective-origin-y\":Eo,\"transform-origin\":Eo,\"transform-origin-x\":Eo,\"transform-origin-y\":Eo,\"transform-origin-z\":Eo,\"transition-delay\":vd,\"transition-duration\":vd,\"vertical-align\":he,\"flex-basis\":he,\"shape-margin\":he,size:he,gap:he,grid:he,\"grid-gap\":he,\"row-gap\":he,\"grid-row-gap\":he,\"grid-column-gap\":he,\"grid-template-rows\":he,\"grid-template-columns\":he,\"grid-auto-rows\":he,\"grid-auto-columns\":he,\"box-shadow-x\":he,\"box-shadow-y\":he,\"box-shadow-blur\":he,\"box-shadow-spread\":he,\"font-line-height\":he,\"text-shadow-x\":he,\"text-shadow-y\":he,\"text-shadow-blur\":he};function HE(r){var e=/(-[a-z])/g,a=function(h){return h[1].toUpperCase()},s={};for(var o in r)s[o]=r[o],s[o.replace(e,a)]=r[o];return s}var Hne=HE($ne);function Pu(r,e,a){if(e==null)return e;if(Array.isArray(e))for(var s=0;s\u003ce.length;s++)e[s]=Pu(r,e[s],a);else if(typeof e==\"object\")if(r===\"fallbacks\")for(var o in e)e[o]=Pu(o,e[o],a);else for(var u in e)e[u]=Pu(r+\"-\"+u,e[u],a);else if(typeof e==\"number\"\u0026\u0026isNaN(e)===!1){var h=a[r]||Hne[r];return h\u0026\u0026!(e===0\u0026\u0026h===he)?typeof h==\"function\"?h(e).toString():\"\"+e+h:e.toString()}return e}function Yne(r){r===void 0\u0026\u0026(r={});var e=HE(r);function a(o,u){if(u.type!==\"style\")return o;for(var h in o)o[h]=Pu(h,o[h],e);return o}function s(o,u){return Pu(u,o,e)}return{onProcessStyle:a,onChangeValue:s}}Fy.default=Yne});var Vy=v((M0e,Ou)=\u003e{function Xne(r,e){(e==null||e\u003er.length)\u0026\u0026(e=r.length);for(var a=0,s=new Array(e);a\u003ce;a++)s[a]=r[a];return s}Ou.exports=Xne;Ou.exports.default=Ou.exports,Ou.exports.__esModule=!0});var XE=v((P0e,Cu)=\u003e{var Zne=Vy();function Kne(r){if(Array.isArray(r))return Zne(r)}Cu.exports=Kne;Cu.exports.default=Cu.exports,Cu.exports.__esModule=!0});var ZE=v((O0e,Au)=\u003e{function Qne(r){if(typeof Symbol!=\"undefined\"\u0026\u0026r[Symbol.iterator]!=null||r[\"@@iterator\"]!=null)return Array.from(r)}Au.exports=Qne;Au.exports.default=Au.exports,Au.exports.__esModule=!0});var Wy=v((C0e,Ru)=\u003e{var KE=Vy();function Jne(r,e){if(!!r){if(typeof r==\"string\")return KE(r,e);var a=Object.prototype.toString.call(r).slice(8,-1);if(a===\"Object\"\u0026\u0026r.constructor\u0026\u0026(a=r.constructor.name),a===\"Map\"||a===\"Set\")return Array.from(r);if(a===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return KE(r,e)}}Ru.exports=Jne;Ru.exports.default=Ru.exports,Ru.exports.__esModule=!0});var QE=v((A0e,Eu)=\u003e{function ere(){throw new TypeError(`Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Eu.exports=ere;Eu.exports.default=Eu.exports,Eu.exports.__esModule=!0});var Du=v((R0e,ju)=\u003e{var tre=XE(),nre=ZE(),rre=Wy(),are=QE();function sre(r){return tre(r)||nre(r)||rre(r)||are()}ju.exports=sre;ju.exports.default=ju.exports,ju.exports.__esModule=!0});var oj=v(Do=\u003e{\"use strict\";Object.defineProperty(Do,\"__esModule\",{value:!0});function JE(r){return r\u0026\u0026typeof r==\"object\"\u0026\u0026\"default\"in r?r.default:r}var gd=JE(dy()),ire=JE(Du()),Iu=\"\",Ly=\"\",ej=\"\",tj=\"\",ore=gd\u0026\u0026\"ontouchstart\"in document.documentElement;if(gd){yd={Moz:\"-moz-\",ms:\"-ms-\",O:\"-o-\",Webkit:\"-webkit-\"},nj=document.createElement(\"p\"),_d=nj.style,rj=\"Transform\";for(kd in yd)if(kd+rj in _d){Iu=kd,Ly=yd[kd];break}Iu===\"Webkit\"\u0026\u0026\"msHyphens\"in _d\u0026\u0026(Iu=\"ms\",Ly=yd.ms,tj=\"edge\"),Iu===\"Webkit\"\u0026\u0026\"-apple-trailing-word\"in _d\u0026\u0026(ej=\"apple\")}var yd,nj,_d,rj,kd,et={js:Iu,css:Ly,vendor:ej,browser:tj,isTouch:ore};function cre(r){return r[1]===\"-\"||et.js===\"ms\"?r:\"@\"+et.css+\"keyframes\"+r.substr(10)}var ure={noPrefill:[\"appearance\"],supportedProperty:function(e){return e!==\"appearance\"?!1:et.js===\"ms\"?\"-webkit-\"+e:et.css+e}},lre={noPrefill:[\"color-adjust\"],supportedProperty:function(e){return e!==\"color-adjust\"?!1:et.js===\"Webkit\"?et.css+\"print-\"+e:e}},pre=/[-\\s]+(.)?/g;function hre(r,e){return e?e.toUpperCase():\"\"}function By(r){return r.replace(pre,hre)}function ys(r){return By(\"-\"+r)}var dre={noPrefill:[\"mask\"],supportedProperty:function(e,a){if(!/^mask/.test(e))return!1;if(et.js===\"Webkit\"){var s=\"mask-image\";if(By(s)in a)return e;if(et.js+ys(s)in a)return et.css+e}return e}},fre={noPrefill:[\"text-orientation\"],supportedProperty:function(e){return e!==\"text-orientation\"?!1:et.vendor===\"apple\"\u0026\u0026!et.isTouch?et.css+e:e}},mre={noPrefill:[\"transform\"],supportedProperty:function(e,a,s){return e!==\"transform\"?!1:s.transform?e:et.css+e}},vre={noPrefill:[\"transition\"],supportedProperty:function(e,a,s){return e!==\"transition\"?!1:s.transition?e:et.css+e}},gre={noPrefill:[\"writing-mode\"],supportedProperty:function(e){return e!==\"writing-mode\"?!1:et.js===\"Webkit\"||et.js===\"ms\"\u0026\u0026et.browser!==\"edge\"?et.css+e:e}},yre={noPrefill:[\"user-select\"],supportedProperty:function(e){return e!==\"user-select\"?!1:et.js===\"Moz\"||et.js===\"ms\"||et.vendor===\"apple\"?et.css+e:e}},_re={supportedProperty:function(e,a){if(!/^break-/.test(e))return!1;if(et.js===\"Webkit\"){var s=\"WebkitColumn\"+ys(e);return s in a?et.css+\"column-\"+e:!1}if(et.js===\"Moz\"){var o=\"page\"+ys(e);return o in a?\"page-\"+e:!1}return!1}},kre={supportedProperty:function(e,a){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(et.js===\"Moz\")return e;var s=e.replace(\"-inline\",\"\");return et.js+ys(s)in a?et.css+s:!1}},Nre={supportedProperty:function(e,a){return By(e)in a?e:!1}},bre={supportedProperty:function(e,a){var s=ys(e);return e[0]===\"-\"||e[0]===\"-\"\u0026\u0026e[1]===\"-\"?e:et.js+s in a?et.css+e:et.js!==\"Webkit\"\u0026\u0026\"Webkit\"+s in a?\"-webkit-\"+e:!1}},xre={supportedProperty:function(e){return e.substring(0,11)!==\"scroll-snap\"?!1:et.js===\"ms\"?\"\"+et.css+e:e}},wre={supportedProperty:function(e){return e!==\"overscroll-behavior\"?!1:et.js===\"ms\"?et.css+\"scroll-chaining\":e}},qre={\"flex-grow\":\"flex-positive\",\"flex-shrink\":\"flex-negative\",\"flex-basis\":\"flex-preferred-size\",\"justify-content\":\"flex-pack\",order:\"flex-order\",\"align-items\":\"flex-align\",\"align-content\":\"flex-line-pack\"},Tre={supportedProperty:function(e,a){var s=qre[e];return s\u0026\u0026et.js+ys(s)in a?et.css+s:!1}},aj={flex:\"box-flex\",\"flex-grow\":\"box-flex\",\"flex-direction\":[\"box-orient\",\"box-direction\"],order:\"box-ordinal-group\",\"align-items\":\"box-align\",\"flex-flow\":[\"box-orient\",\"box-direction\"],\"justify-content\":\"box-pack\"},Sre=Object.keys(aj),Mre=function(e){return et.css+e},Pre={supportedProperty:function(e,a,s){var o=s.multiple;if(Sre.indexOf(e)\u003e-1){var u=aj[e];if(!Array.isArray(u))return et.js+ys(u)in a?et.css+u:!1;if(!o)return!1;for(var h=0;h\u003cu.length;h++)if(!(et.js+ys(u[0])in a))return!1;return u.map(Mre)}return!1}},sj=[ure,lre,dre,fre,mre,vre,gre,yre,_re,kre,Nre,bre,xre,wre,Tre,Pre],ij=sj.filter(function(r){return r.supportedProperty}).map(function(r){return r.supportedProperty}),Ore=sj.filter(function(r){return r.noPrefill}).reduce(function(r,e){return r.push.apply(r,ire(e.noPrefill)),r},[]),Fu,ri={};if(gd){Fu=document.createElement(\"p\"),Nd=window.getComputedStyle(document.documentElement,\"\");for(bd in Nd)isNaN(bd)||(ri[Nd[bd]]=Nd[bd]);Ore.forEach(function(r){return delete ri[r]})}var Nd,bd;function zy(r,e){if(e===void 0\u0026\u0026(e={}),!Fu)return r;if(ri[r]!=null)return ri[r];(r===\"transition\"||r===\"transform\")\u0026\u0026(e[r]=r in Fu.style);for(var a=0;a\u003cij.length\u0026\u0026(ri[r]=ij[a](r,Fu.style,e),!ri[r]);a++);try{Fu.style[r]=\"\"}catch(s){return!1}return ri[r]}var jo={},Cre={transition:1,\"transition-property\":1,\"-webkit-transition\":1,\"-webkit-transition-property\":1},Are=/(^\\s*[\\w-]+)|, (\\s*[\\w-]+)(?![^()]*\\))/g,_s;function Rre(r,e,a){if(e===\"var\")return\"var\";if(e===\"all\")return\"all\";if(a===\"all\")return\", all\";var s=e?zy(e):\", \"+zy(a);return s||e||a}gd\u0026\u0026(_s=document.createElement(\"p\"));function Ere(r,e){var a=e;if(!_s||r===\"content\")return e;if(typeof a!=\"string\"||!isNaN(parseInt(a,10)))return a;var s=r+a;if(jo[s]!=null)return jo[s];try{_s.style[r]=a}catch(o){return jo[s]=!1,!1}if(Cre[r])a=a.replace(Are,Rre);else if(_s.style[r]===\"\"\u0026\u0026(a=et.css+a,a===\"-ms-flex\"\u0026\u0026(_s.style[r]=\"-ms-flexbox\"),_s.style[r]=a,_s.style[r]===\"\"))return jo[s]=!1,!1;return _s.style[r]=\"\",jo[s]=a,jo[s]}Do.prefix=et;Do.supportedKeyframes=cre;Do.supportedProperty=zy;Do.supportedValue=Ere});var uj=v(Gy=\u003e{\"use strict\";Object.defineProperty(Gy,\"__esModule\",{value:!0});var xd=oj(),cj=vs();function jre(){function r(o){if(o.type===\"keyframes\"){var u=o;u.at=xd.supportedKeyframes(u.at)}}function e(o){for(var u in o){var h=o[u];if(u===\"fallbacks\"\u0026\u0026Array.isArray(h)){o[u]=h.map(e);continue}var f=!1,y=xd.supportedProperty(u);y\u0026\u0026y!==u\u0026\u0026(f=!0);var k=!1,q=xd.supportedValue(y,cj.toCssValue(h));q\u0026\u0026q!==h\u0026\u0026(k=!0),(f||k)\u0026\u0026(f\u0026\u0026delete o[u],o[y||u]=q||h)}return o}function a(o,u){return u.type!==\"style\"?o:e(o)}function s(o,u){return xd.supportedValue(u,cj.toCssValue(o))||o}return{onProcessRule:r,onProcessStyle:a,onChangeValue:s}}Gy.default=jre});var lj=v(Uy=\u003e{\"use strict\";Object.defineProperty(Uy,\"__esModule\",{value:!0});function Dre(){var r=function(a,s){return a.length===s.length?a\u003es?1:-1:a.length-s.length};return{onProcessStyle:function(a,s){if(s.type!==\"style\")return a;for(var o={},u=Object.keys(a).sort(r),h=0;h\u003cu.length;h++)o[u[h]]=a[u[h]];return o}}}Uy.default=Dre});var pj=v($y=\u003e{\"use strict\";var ai=Se();Object.defineProperty($y,\"__esModule\",{value:!0});$y.default=Gre;var Ire=ai(FE()),Fre=ai(WE()),Vre=ai(BE()),Wre=ai($E()),Lre=ai(YE()),Bre=ai(uj()),zre=ai(lj());function Gre(){return{plugins:[(0,Ire.default)(),(0,Fre.default)(),(0,Vre.default)(),(0,Wre.default)(),(0,Lre.default)(),typeof window==\"undefined\"?null:(0,Bre.default)(),(0,zre.default)()]}}});var Yy=v(Hy=\u003e{\"use strict\";var Ure=Se();Object.defineProperty(Hy,\"__esModule\",{value:!0});Object.defineProperty(Hy,\"default\",{enumerable:!0,get:function(){return $re.default}});var $re=Ure(pj())});var hj=v(Xy=\u003e{\"use strict\";var Hre=Se();Object.defineProperty(Xy,\"__esModule\",{value:!0});Xy.default=Xre;var Yre=Hre(yt()),V0e=tn();function Xre(){var r=arguments.length\u003e0\u0026\u0026arguments[0]!==void 0?arguments[0]:{},e=r.baseClasses,a=r.newClasses,s=r.Component;if(!a)return e;var o=(0,Yre.default)({},e);return Object.keys(a).forEach(function(u){a[u]\u0026\u0026(o[u]=\"\".concat(e[u],\" \").concat(a[u]))}),o}});var Ky=v(Zy=\u003e{\"use strict\";var Zre=Se();Object.defineProperty(Zy,\"__esModule\",{value:!0});Object.defineProperty(Zy,\"default\",{enumerable:!0,get:function(){return Kre.default}});var Kre=Zre(hj())});var dj=v(wd=\u003e{\"use strict\";Object.defineProperty(wd,\"__esModule\",{value:!0});wd.default=void 0;var Qre={set:function(e,a,s,o){var u=e.get(a);u||(u=new Map,e.set(a,u)),u.set(s,o)},get:function(e,a,s){var o=e.get(a);return o?o.get(s):void 0},delete:function(e,a,s){var o=e.get(a);o.delete(s)}},Jre=Qre;wd.default=Jre});var Qy=v(qd=\u003e{\"use strict\";var eae=Se();Object.defineProperty(qd,\"__esModule\",{value:!0});qd.default=void 0;var tae=eae(ot()),nae=tae.default.createContext(null),rae=nae;qd.default=rae});var mj=v(Jy=\u003e{\"use strict\";var fj=Se();Object.defineProperty(Jy,\"__esModule\",{value:!0});Jy.default=iae;var aae=fj(ot()),sae=fj(Qy());function iae(){var r=aae.default.useContext(sae.default);return r}});var Io=v(e_=\u003e{\"use strict\";var oae=Se();Object.defineProperty(e_,\"__esModule\",{value:!0});Object.defineProperty(e_,\"default\",{enumerable:!0,get:function(){return cae.default}});var cae=oae(mj())});var _j=v(si=\u003e{\"use strict\";var Fo=Se();Object.defineProperty(si,\"__esModule\",{value:!0});si.default=mae;si.StylesContext=si.sheetsManager=void 0;var uae=Fo(yt()),lae=Fo(Mn()),t_=Fo(ot()),$0e=Fo(It()),H0e=tn(),pae=Fo(ld()),vj=vs(),gj=Fo(Yy()),hae=(0,vj.create)((0,gj.default)()),dae=(0,pae.default)(),yj=new Map;si.sheetsManager=yj;var fae={disableGeneration:!1,generateClassName:dae,jss:hae,sheetsCache:null,sheetsManager:yj,sheetsRegistry:null},n_=t_.default.createContext(fae);si.StylesContext=n_;var Td;function mae(r){var e=r.children,a=r.injectFirst,s=a===void 0?!1:a,o=r.disableGeneration,u=o===void 0?!1:o,h=(0,lae.default)(r,[\"children\",\"injectFirst\",\"disableGeneration\"]),f=t_.default.useContext(n_),y=(0,uae.default)({},f,{disableGeneration:u},h);if(!y.jss.options.insertionPoint\u0026\u0026s\u0026\u0026typeof window!=\"undefined\"){if(!Td){var k=document.head;Td=document.createComment(\"mui-inject-first\"),k.insertBefore(Td,k.firstChild)}y.jss=(0,vj.create)({plugins:(0,gj.default)().plugins,insertionPoint:Td})}return t_.default.createElement(n_.Provider,{value:y},e)}});var Md=v(Sd=\u003e{\"use strict\";var vae=en();Object.defineProperty(Sd,\"__esModule\",{value:!0});var gae={};Object.defineProperty(Sd,\"default\",{enumerable:!0,get:function(){return r_.default}});var r_=vae(_j());Object.keys(r_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(gae,r)||Object.defineProperty(Sd,r,{enumerable:!0,get:function(){return r_[r]}})})});var Nj=v(a_=\u003e{\"use strict\";Object.defineProperty(a_,\"__esModule\",{value:!0});a_.increment=yae;var kj=-1e9;function yae(){return kj+=1,kj}});var s_=v(Pd=\u003e{\"use strict\";Object.defineProperty(Pd,\"__esModule\",{value:!0});Pd.default=void 0;var _ae={},kae=_ae;Pd.default=kae});var bj=v(o_=\u003e{\"use strict\";var i_=Se();Object.defineProperty(o_,\"__esModule\",{value:!0});o_.default=xae;var Nae=i_(yt()),Q0e=i_(Co()),bae=tn(),J0e=i_(s_());function xae(r){var e=typeof r==\"function\";return{create:function(s,o){var u;try{u=e?r(s):r}catch(y){throw y}if(!o||!s.overrides||!s.overrides[o])return u;var h=s.overrides[o],f=(0,Nae.default)({},u);return Object.keys(h).forEach(function(y){f[y]=(0,bae.deepmerge)(f[y],h[y])}),f},options:{}}}});var xj=v(c_=\u003e{\"use strict\";var wae=Se();Object.defineProperty(c_,\"__esModule\",{value:!0});Object.defineProperty(c_,\"default\",{enumerable:!0,get:function(){return qae.default}});var qae=wae(bj())});var qj=v(u_=\u003e{\"use strict\";var ks=Se();Object.defineProperty(u_,\"__esModule\",{value:!0});u_.default=Fae;var Tae=ks(Mn()),Od=ks(yt()),ii=ks(ot()),Sae=vs(),wj=ks(Ky()),Vo=ks(dj()),Mae=ks(Io()),Pae=Md(),Oae=Nj(),Cae=ks(xj()),Aae=ks(s_());function Rae(r,e,a){var s=r.state,o=r.stylesOptions;if(o.disableGeneration)return e||{};s.cacheClasses||(s.cacheClasses={value:null,lastProp:null,lastJSS:{}});var u=!1;return s.classes!==s.cacheClasses.lastJSS\u0026\u0026(s.cacheClasses.lastJSS=s.classes,u=!0),e!==s.cacheClasses.lastProp\u0026\u0026(s.cacheClasses.lastProp=e,u=!0),u\u0026\u0026(s.cacheClasses.value=(0,wj.default)({baseClasses:s.cacheClasses.lastJSS,newClasses:e,Component:a})),s.cacheClasses.value}function Eae(r,e){var a=r.state,s=r.theme,o=r.stylesOptions,u=r.stylesCreator,h=r.name;if(!o.disableGeneration){var f=Vo.default.get(o.sheetsManager,u,s);f||(f={refs:0,staticSheet:null,dynamicStyles:null},Vo.default.set(o.sheetsManager,u,s,f));var y=(0,Od.default)({},u.options,o,{theme:s,flip:typeof o.flip==\"boolean\"?o.flip:s.direction===\"rtl\"});y.generateId=y.serverGenerateClassName||y.generateClassName;var k=o.sheetsRegistry;if(f.refs===0){var q;o.sheetsCache\u0026\u0026(q=Vo.default.get(o.sheetsCache,u,s));var x=u.create(s,h);q||(q=o.jss.createStyleSheet(x,(0,Od.default)({link:!1},y)),q.attach(),o.sheetsCache\u0026\u0026Vo.default.set(o.sheetsCache,u,s,q)),k\u0026\u0026k.add(q),f.staticSheet=q,f.dynamicStyles=(0,Sae.getDynamicStyles)(x)}if(f.dynamicStyles){var M=o.jss.createStyleSheet(f.dynamicStyles,(0,Od.default)({link:!0},y));M.update(e),M.attach(),a.dynamicSheet=M,a.classes=(0,wj.default)({baseClasses:f.staticSheet.classes,newClasses:M.classes}),k\u0026\u0026k.add(M)}else a.classes=f.staticSheet.classes;f.refs+=1}}function jae(r,e){var a=r.state;a.dynamicSheet\u0026\u0026a.dynamicSheet.update(e)}function Dae(r){var e=r.state,a=r.theme,s=r.stylesOptions,o=r.stylesCreator;if(!s.disableGeneration){var u=Vo.default.get(s.sheetsManager,o,a);u.refs-=1;var h=s.sheetsRegistry;u.refs===0\u0026\u0026(Vo.default.delete(s.sheetsManager,o,a),s.jss.removeStyleSheet(u.staticSheet),h\u0026\u0026h.remove(u.staticSheet)),e.dynamicSheet\u0026\u0026(s.jss.removeStyleSheet(e.dynamicSheet),h\u0026\u0026h.remove(e.dynamicSheet))}}function Iae(r,e){var a=ii.default.useRef([]),s,o=ii.default.useMemo(function(){return{}},e);a.current!==o\u0026\u0026(a.current=o,s=r()),ii.default.useEffect(function(){return function(){s\u0026\u0026s()}},[o])}function Fae(r){var e=arguments.length\u003e1\u0026\u0026arguments[1]!==void 0?arguments[1]:{},a=e.name,s=e.classNamePrefix,o=e.Component,u=e.defaultTheme,h=u===void 0?Aae.default:u,f=(0,Tae.default)(e,[\"name\",\"classNamePrefix\",\"Component\",\"defaultTheme\"]),y=(0,Cae.default)(r),k=a||s||\"makeStyles\";y.options={index:(0,Oae.increment)(),name:a,meta:k,classNamePrefix:k};var q=function(){var M=arguments.length\u003e0\u0026\u0026arguments[0]!==void 0?arguments[0]:{},L=(0,Mae.default)()||h,j=(0,Od.default)({},ii.default.useContext(Pae.StylesContext),f),B=ii.default.useRef(),ee=ii.default.useRef();Iae(function(){var ie={name:a,state:{},stylesCreator:y,stylesOptions:j,theme:L};return Eae(ie,M),ee.current=!1,B.current=ie,function(){Dae(ie)}},[L,y]),ii.default.useEffect(function(){ee.current\u0026\u0026jae(B.current,M),ee.current=!0});var de=Rae(B.current,M.classes,o);return de};return q}});var Cd=v(l_=\u003e{\"use strict\";var Vae=Se();Object.defineProperty(l_,\"__esModule\",{value:!0});Object.defineProperty(l_,\"default\",{enumerable:!0,get:function(){return Wae.default}});var Wae=Vae(qj())});var Tj=v((aNe,Vu)=\u003e{function Lae(r,e){if(!(r instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Vu.exports=Lae;Vu.exports.default=Vu.exports,Vu.exports.__esModule=!0});var Pj=v(Ad=\u003e{\"use strict\";var Wo=Se();Object.defineProperty(Ad,\"__esModule\",{value:!0});Ad.default=void 0;var Sj=Wo(yt()),Bae=Wo(Tj()),zae=Wo(fy()),Mj=Wo(ot()),Gae=vs(),Uae=Wo(Md()),$ae=Wo(ld()),Hae=function(){function r(){var e=arguments.length\u003e0\u0026\u0026arguments[0]!==void 0?arguments[0]:{};(0,Bae.default)(this,r),this.options=e}return(0,zae.default)(r,[{key:\"collect\",value:function(a){var s=new Map;this.sheetsRegistry=new Gae.SheetsRegistry;var o=(0,$ae.default)();return Mj.default.createElement(Uae.default,(0,Sj.default)({sheetsManager:s,serverGenerateClassName:o,sheetsRegistry:this.sheetsRegistry},this.options),a)}},{key:\"toString\",value:function(){return this.sheetsRegistry?this.sheetsRegistry.toString():\"\"}},{key:\"getStyleElement\",value:function(a){return Mj.default.createElement(\"style\",(0,Sj.default)({id:\"jss-server-side\",key:\"jss-server-side\",dangerouslySetInnerHTML:{__html:this.toString()}},a))}}]),r}();Ad.default=Hae});var Oj=v(p_=\u003e{\"use strict\";var Yae=Se();Object.defineProperty(p_,\"__esModule\",{value:!0});Object.defineProperty(p_,\"default\",{enumerable:!0,get:function(){return Xae.default}});var Xae=Yae(Pj())});var Rd=v((oNe,Dj)=\u003e{\"use strict\";var h_=ny(),Zae={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Kae={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Qae={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Cj={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},d_={};d_[h_.ForwardRef]=Qae;d_[h_.Memo]=Cj;function Aj(r){return h_.isMemo(r)?Cj:d_[r.$$typeof]||Zae}var Jae=Object.defineProperty,ese=Object.getOwnPropertyNames,Rj=Object.getOwnPropertySymbols,tse=Object.getOwnPropertyDescriptor,nse=Object.getPrototypeOf,Ej=Object.prototype;function jj(r,e,a){if(typeof e!=\"string\"){if(Ej){var s=nse(e);s\u0026\u0026s!==Ej\u0026\u0026jj(r,s,a)}var o=ese(e);Rj\u0026\u0026(o=o.concat(Rj(e)));for(var u=Aj(r),h=Aj(e),f=0;f\u003co.length;++f){var y=o[f];if(!Kae[y]\u0026\u0026!(a\u0026\u0026a[y])\u0026\u0026!(h\u0026\u0026h[y])\u0026\u0026!(u\u0026\u0026u[y])){var k=tse(e,y);try{Jae(r,y,k)}catch(q){}}}}return r}Dj.exports=jj});var Vj=v(m_=\u003e{\"use strict\";var oi=Se();Object.defineProperty(m_,\"__esModule\",{value:!0});m_.default=ise;var Wu=oi(yt()),Ij=oi(Mn()),f_=oi(ot()),Fj=oi(ms()),cNe=oi(It()),uNe=tn(),rse=oi(Rd()),ase=oi(Cd());function sse(r,e){var a={};return Object.keys(r).forEach(function(s){e.indexOf(s)===-1\u0026\u0026(a[s]=r[s])}),a}function ise(r){var e=function(s){var o=arguments.length\u003e1\u0026\u0026arguments[1]!==void 0?arguments[1]:{},u=o.name,h=(0,Ij.default)(o,[\"name\"]),f=u;if(!1\u0026\u0026!u)var y;var k=typeof s==\"function\"?function(j){return{root:function(ee){return s((0,Wu.default)({theme:j},ee))}}}:{root:s},q=(0,ase.default)(k,(0,Wu.default)({Component:r,name:u||r.displayName,classNamePrefix:f},h)),x,M={};s.filterProps\u0026\u0026(x=s.filterProps,delete s.filterProps),s.propTypes\u0026\u0026(M=s.propTypes,delete s.propTypes);var L=f_.default.forwardRef(function(B,ee){var de=B.children,ie=B.className,pe=B.clone,G=B.component,R=(0,Ij.default)(B,[\"children\",\"className\",\"clone\",\"component\"]),H=q(B),$=(0,Fj.default)(H.root,ie),se=R;if(x\u0026\u0026(se=sse(se,x)),pe)return f_.default.cloneElement(de,(0,Wu.default)({className:(0,Fj.default)(de.props.className,$)},se));if(typeof de==\"function\")return de((0,Wu.default)({className:$},se));var ce=G||r;return f_.default.createElement(ce,(0,Wu.default)({ref:ee,className:$},se),de)});return(0,rse.default)(L,r),L};return e}});var Wj=v(v_=\u003e{\"use strict\";var ose=Se();Object.defineProperty(v_,\"__esModule\",{value:!0});Object.defineProperty(v_,\"default\",{enumerable:!0,get:function(){return cse.default}});var cse=ose(Vj())});var Bj=v(Ed=\u003e{\"use strict\";var Lo=Se();Object.defineProperty(Ed,\"__esModule\",{value:!0});Ed.default=void 0;var use=Lo(yt()),Lj=Lo(ot()),hNe=Lo(It()),dNe=tn(),lse=Lo(Qy()),pse=Lo(Io()),hse=Lo(sy());function dse(r,e){if(typeof e==\"function\"){var a=e(r);return a}return(0,use.default)({},r,e)}function fse(r){var e=r.children,a=r.theme,s=(0,pse.default)(),o=Lj.default.useMemo(function(){var u=s===null?a:dse(s,a);return u!=null\u0026\u0026(u[hse.default]=s!==null),u},[a,s]);return Lj.default.createElement(lse.default.Provider,{value:o},e)}var mse=fse;Ed.default=mse});var zj=v(g_=\u003e{\"use strict\";var vse=Se();Object.defineProperty(g_,\"__esModule\",{value:!0});Object.defineProperty(g_,\"default\",{enumerable:!0,get:function(){return gse.default}});var gse=vse(Bj())});var $j=v(jd=\u003e{\"use strict\";var Ns=Se();Object.defineProperty(jd,\"__esModule\",{value:!0});jd.default=void 0;var y_=Ns(yt()),Gj=Ns(Mn()),Uj=Ns(ot()),vNe=Ns(It()),yse=Ns(Rd()),gNe=tn(),_se=Ns(Cd()),kse=Ns(hy()),Nse=Ns(Io()),bse=function(e){var a=arguments.length\u003e1\u0026\u0026arguments[1]!==void 0?arguments[1]:{};return function(s){var o=a.defaultTheme,u=a.withTheme,h=u===void 0?!1:u,f=a.name,y=(0,Gj.default)(a,[\"defaultTheme\",\"withTheme\",\"name\"]),k=f;if(!1\u0026\u0026!f)var q;var x=(0,_se.default)(e,(0,y_.default)({defaultTheme:o,Component:s,name:f||s.displayName,classNamePrefix:k},y)),M=Uj.default.forwardRef(function(j,B){var ee=j.classes,de=j.innerRef,ie=(0,Gj.default)(j,[\"classes\",\"innerRef\"]),pe=x((0,y_.default)({},s.defaultProps,j)),G,R=ie;return(typeof f==\"string\"||h)\u0026\u0026(G=(0,Nse.default)()||o,f\u0026\u0026(R=(0,kse.default)({theme:G,name:f,props:ie})),h\u0026\u0026!R.theme\u0026\u0026(R.theme=G)),Uj.default.createElement(s,(0,y_.default)({ref:de||B,classes:pe},R))});return(0,yse.default)(M,s),M}},xse=bse;jd.default=xse});var Hj=v(__=\u003e{\"use strict\";var wse=Se();Object.defineProperty(__,\"__esModule\",{value:!0});Object.defineProperty(__,\"default\",{enumerable:!0,get:function(){return qse.default}});var qse=wse($j())});var Zj=v(Lu=\u003e{\"use strict\";var Bo=Se();Object.defineProperty(Lu,\"__esModule\",{value:!0});Lu.withThemeCreator=Xj;Lu.default=void 0;var Tse=Bo(yt()),Sse=Bo(Mn()),Yj=Bo(ot()),kNe=Bo(It()),Mse=Bo(Rd()),NNe=tn(),Pse=Bo(Io());function Xj(){var r=arguments.length\u003e0\u0026\u0026arguments[0]!==void 0?arguments[0]:{},e=r.defaultTheme,a=function(o){var u=Yj.default.forwardRef(function(f,y){var k=f.innerRef,q=(0,Sse.default)(f,[\"innerRef\"]),x=(0,Pse.default)()||e;return Yj.default.createElement(o,(0,Tse.default)({theme:x,ref:k||y},q))});return(0,Mse.default)(u,o),u};return a}var Ose=Xj(),Cse=Ose;Lu.default=Cse});var Kj=v(Dd=\u003e{\"use strict\";var Ase=en();Object.defineProperty(Dd,\"__esModule\",{value:!0});var Rse={};Object.defineProperty(Dd,\"default\",{enumerable:!0,get:function(){return k_.default}});var k_=Ase(Zj());Object.keys(k_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(Rse,r)||Object.defineProperty(Dd,r,{enumerable:!0,get:function(){return k_[r]}})})});var Qj=v(kt=\u003e{\"use strict\";var hr=en();Object.defineProperty(kt,\"__esModule\",{value:!0});var dr={createGenerateClassName:!0,createStyles:!0,getThemeProps:!0,jssPreset:!0,makeStyles:!0,mergeClasses:!0,ServerStyleSheets:!0,styled:!0,StylesProvider:!0,ThemeProvider:!0,useTheme:!0,withStyles:!0,withTheme:!0};Object.defineProperty(kt,\"createGenerateClassName\",{enumerable:!0,get:function(){return N_.default}});Object.defineProperty(kt,\"createStyles\",{enumerable:!0,get:function(){return b_.default}});Object.defineProperty(kt,\"getThemeProps\",{enumerable:!0,get:function(){return x_.default}});Object.defineProperty(kt,\"jssPreset\",{enumerable:!0,get:function(){return w_.default}});Object.defineProperty(kt,\"makeStyles\",{enumerable:!0,get:function(){return q_.default}});Object.defineProperty(kt,\"mergeClasses\",{enumerable:!0,get:function(){return T_.default}});Object.defineProperty(kt,\"ServerStyleSheets\",{enumerable:!0,get:function(){return S_.default}});Object.defineProperty(kt,\"styled\",{enumerable:!0,get:function(){return M_.default}});Object.defineProperty(kt,\"StylesProvider\",{enumerable:!0,get:function(){return P_.default}});Object.defineProperty(kt,\"ThemeProvider\",{enumerable:!0,get:function(){return O_.default}});Object.defineProperty(kt,\"useTheme\",{enumerable:!0,get:function(){return C_.default}});Object.defineProperty(kt,\"withStyles\",{enumerable:!0,get:function(){return A_.default}});Object.defineProperty(kt,\"withTheme\",{enumerable:!0,get:function(){return R_.default}});var wNe=tn(),N_=hr(ld());Object.keys(N_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return N_[r]}})});var b_=hr(pE());Object.keys(b_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return b_[r]}})});var x_=hr(hy());Object.keys(x_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return x_[r]}})});var w_=hr(Yy());Object.keys(w_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return w_[r]}})});var q_=hr(Cd());Object.keys(q_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return q_[r]}})});var T_=hr(Ky());Object.keys(T_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return T_[r]}})});var S_=hr(Oj());Object.keys(S_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return S_[r]}})});var M_=hr(Wj());Object.keys(M_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return M_[r]}})});var P_=hr(Md());Object.keys(P_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return P_[r]}})});var O_=hr(zj());Object.keys(O_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return O_[r]}})});var C_=hr(Io());Object.keys(C_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return C_[r]}})});var A_=hr(Hj());Object.keys(A_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return A_[r]}})});var R_=hr(Kj());Object.keys(R_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(dr,r)||Object.defineProperty(kt,r,{enumerable:!0,get:function(){return R_[r]}})})});var eD=v(Bu=\u003e{\"use strict\";var Jj=Se();Object.defineProperty(Bu,\"__esModule\",{value:!0});Bu.default=Dse;Bu.keys=void 0;var Ese=Jj(yt()),jse=Jj(Mn()),Ea=[\"xs\",\"sm\",\"md\",\"lg\",\"xl\"];Bu.keys=Ea;function Dse(r){var e=r.values,a=e===void 0?{xs:0,sm:600,md:960,lg:1280,xl:1920}:e,s=r.unit,o=s===void 0?\"px\":s,u=r.step,h=u===void 0?5:u,f=(0,jse.default)(r,[\"values\",\"unit\",\"step\"]);function y(j){var B=typeof a[j]==\"number\"?a[j]:j;return\"@media (min-width:\".concat(B).concat(o,\")\")}function k(j){var B=Ea.indexOf(j)+1,ee=a[Ea[B]];if(B===Ea.length)return y(\"xs\");var de=typeof ee==\"number\"\u0026\u0026B\u003e0?ee:j;return\"@media (max-width:\".concat(de-h/100).concat(o,\")\")}function q(j,B){var ee=Ea.indexOf(B);return ee===Ea.length-1?y(j):\"@media (min-width:\".concat(typeof a[j]==\"number\"?a[j]:j).concat(o,\") and \")+\"(max-width:\".concat((ee!==-1\u0026\u0026typeof a[Ea[ee+1]]==\"number\"?a[Ea[ee+1]]:B)-h/100).concat(o,\")\")}function x(j){return q(j,j)}var M=!1;function L(j){return a[j]}return(0,Ese.default)({keys:Ea,values:a,up:y,down:k,between:q,only:x,width:L},f)}});var nD=v(D_=\u003e{\"use strict\";var tD=Se();Object.defineProperty(D_,\"__esModule\",{value:!0});D_.default=Ise;var E_=tD(du()),j_=tD(yt());function Ise(r,e,a){var s;return(0,j_.default)({gutters:function(){var u=arguments.length\u003e0\u0026\u0026arguments[0]!==void 0?arguments[0]:{};return console.warn([\"Material-UI: theme.mixins.gutters() is deprecated.\",\"You can use the source of the mixin directly:\",`\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      `].join(`\n`)),(0,j_.default)({paddingLeft:e(2),paddingRight:e(2)},u,(0,E_.default)({},r.up(\"sm\"),(0,j_.default)({paddingLeft:e(3),paddingRight:e(3)},u[r.up(\"sm\")])))},toolbar:(s={minHeight:56},(0,E_.default)(s,\"\".concat(r.up(\"xs\"),\" and (orientation: landscape)\"),{minHeight:48}),(0,E_.default)(s,r.up(\"sm\"),{minHeight:64}),s)},a)}});var rD=v(Id=\u003e{\"use strict\";Object.defineProperty(Id,\"__esModule\",{value:!0});Id.default=void 0;var Fse={black:\"#000\",white:\"#fff\"},Vse=Fse;Id.default=Vse});var aD=v(Fd=\u003e{\"use strict\";Object.defineProperty(Fd,\"__esModule\",{value:!0});Fd.default=void 0;var Wse={50:\"#fafafa\",100:\"#f5f5f5\",200:\"#eeeeee\",300:\"#e0e0e0\",400:\"#bdbdbd\",500:\"#9e9e9e\",600:\"#757575\",700:\"#616161\",800:\"#424242\",900:\"#212121\",A100:\"#d5d5d5\",A200:\"#aaaaaa\",A400:\"#303030\",A700:\"#616161\"},Lse=Wse;Fd.default=Lse});var sD=v(Vd=\u003e{\"use strict\";Object.defineProperty(Vd,\"__esModule\",{value:!0});Vd.default=void 0;var Bse={50:\"#e8eaf6\",100:\"#c5cae9\",200:\"#9fa8da\",300:\"#7986cb\",400:\"#5c6bc0\",500:\"#3f51b5\",600:\"#3949ab\",700:\"#303f9f\",800:\"#283593\",900:\"#1a237e\",A100:\"#8c9eff\",A200:\"#536dfe\",A400:\"#3d5afe\",A700:\"#304ffe\"},zse=Bse;Vd.default=zse});var iD=v(Wd=\u003e{\"use strict\";Object.defineProperty(Wd,\"__esModule\",{value:!0});Wd.default=void 0;var Gse={50:\"#fce4ec\",100:\"#f8bbd0\",200:\"#f48fb1\",300:\"#f06292\",400:\"#ec407a\",500:\"#e91e63\",600:\"#d81b60\",700:\"#c2185b\",800:\"#ad1457\",900:\"#880e4f\",A100:\"#ff80ab\",A200:\"#ff4081\",A400:\"#f50057\",A700:\"#c51162\"},Use=Gse;Wd.default=Use});var oD=v(Ld=\u003e{\"use strict\";Object.defineProperty(Ld,\"__esModule\",{value:!0});Ld.default=void 0;var $se={50:\"#ffebee\",100:\"#ffcdd2\",200:\"#ef9a9a\",300:\"#e57373\",400:\"#ef5350\",500:\"#f44336\",600:\"#e53935\",700:\"#d32f2f\",800:\"#c62828\",900:\"#b71c1c\",A100:\"#ff8a80\",A200:\"#ff5252\",A400:\"#ff1744\",A700:\"#d50000\"},Hse=$se;Ld.default=Hse});var cD=v(Bd=\u003e{\"use strict\";Object.defineProperty(Bd,\"__esModule\",{value:!0});Bd.default=void 0;var Yse={50:\"#fff3e0\",100:\"#ffe0b2\",200:\"#ffcc80\",300:\"#ffb74d\",400:\"#ffa726\",500:\"#ff9800\",600:\"#fb8c00\",700:\"#f57c00\",800:\"#ef6c00\",900:\"#e65100\",A100:\"#ffd180\",A200:\"#ffab40\",A400:\"#ff9100\",A700:\"#ff6d00\"},Xse=Yse;Bd.default=Xse});var uD=v(zd=\u003e{\"use strict\";Object.defineProperty(zd,\"__esModule\",{value:!0});zd.default=void 0;var Zse={50:\"#e3f2fd\",100:\"#bbdefb\",200:\"#90caf9\",300:\"#64b5f6\",400:\"#42a5f5\",500:\"#2196f3\",600:\"#1e88e5\",700:\"#1976d2\",800:\"#1565c0\",900:\"#0d47a1\",A100:\"#82b1ff\",A200:\"#448aff\",A400:\"#2979ff\",A700:\"#2962ff\"},Kse=Zse;zd.default=Kse});var lD=v(Gd=\u003e{\"use strict\";Object.defineProperty(Gd,\"__esModule\",{value:!0});Gd.default=void 0;var Qse={50:\"#e8f5e9\",100:\"#c8e6c9\",200:\"#a5d6a7\",300:\"#81c784\",400:\"#66bb6a\",500:\"#4caf50\",600:\"#43a047\",700:\"#388e3c\",800:\"#2e7d32\",900:\"#1b5e20\",A100:\"#b9f6ca\",A200:\"#69f0ae\",A400:\"#00e676\",A700:\"#00c853\"},Jse=Qse;Gd.default=Jse});var vD=v(Zn=\u003e{\"use strict\";Object.defineProperty(Zn,\"__esModule\",{value:!0});Zn.hexToRgb=pD;Zn.rgbToHex=nie;Zn.hslToRgb=hD;Zn.decomposeColor=ja;Zn.recomposeColor=zu;Zn.getContrastRatio=rie;Zn.getLuminance=Ud;Zn.emphasize=aie;Zn.fade=sie;Zn.alpha=dD;Zn.darken=fD;Zn.lighten=mD;var eie=tn();function I_(r){var e=arguments.length\u003e1\u0026\u0026arguments[1]!==void 0?arguments[1]:0,a=arguments.length\u003e2\u0026\u0026arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(e,r),a)}function pD(r){r=r.substr(1);var e=new RegExp(\".{1,\".concat(r.length\u003e=6?2:1,\"}\"),\"g\"),a=r.match(e);return a\u0026\u0026a[0].length===1\u0026\u0026(a=a.map(function(s){return s+s})),a?\"rgb\".concat(a.length===4?\"a\":\"\",\"(\").concat(a.map(function(s,o){return o\u003c3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3}).join(\", \"),\")\"):\"\"}function tie(r){var e=r.toString(16);return e.length===1?\"0\".concat(e):e}function nie(r){if(r.indexOf(\"#\")===0)return r;var e=ja(r),a=e.values;return\"#\".concat(a.map(function(s){return tie(s)}).join(\"\"))}function hD(r){r=ja(r);var e=r,a=e.values,s=a[0],o=a[1]/100,u=a[2]/100,h=o*Math.min(u,1-u),f=function(x){var M=arguments.length\u003e1\u0026\u0026arguments[1]!==void 0?arguments[1]:(x+s/30)%12;return u-h*Math.max(Math.min(M-3,9-M,1),-1)},y=\"rgb\",k=[Math.round(f(0)*255),Math.round(f(8)*255),Math.round(f(4)*255)];return r.type===\"hsla\"\u0026\u0026(y+=\"a\",k.push(a[3])),zu({type:y,values:k})}function ja(r){if(r.type)return r;if(r.charAt(0)===\"#\")return ja(pD(r));var e=r.indexOf(\"(\"),a=r.substring(0,e);if([\"rgb\",\"rgba\",\"hsl\",\"hsla\"].indexOf(a)===-1)throw new Error((0,eie.formatMuiErrorMessage)(3,r));var s=r.substring(e+1,r.length-1).split(\",\");return s=s.map(function(o){return parseFloat(o)}),{type:a,values:s}}function zu(r){var e=r.type,a=r.values;return e.indexOf(\"rgb\")!==-1?a=a.map(function(s,o){return o\u003c3?parseInt(s,10):s}):e.indexOf(\"hsl\")!==-1\u0026\u0026(a[1]=\"\".concat(a[1],\"%\"),a[2]=\"\".concat(a[2],\"%\")),\"\".concat(e,\"(\").concat(a.join(\", \"),\")\")}function rie(r,e){var a=Ud(r),s=Ud(e);return(Math.max(a,s)+.05)/(Math.min(a,s)+.05)}function Ud(r){r=ja(r);var e=r.type===\"hsl\"?ja(hD(r)).values:r.values;return e=e.map(function(a){return a/=255,a\u003c=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)}),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function aie(r){var e=arguments.length\u003e1\u0026\u0026arguments[1]!==void 0?arguments[1]:.15;return Ud(r)\u003e.5?fD(r,e):mD(r,e)}function sie(r,e){return dD(r,e)}function dD(r,e){return r=ja(r),e=I_(e),(r.type===\"rgb\"||r.type===\"hsl\")\u0026\u0026(r.type+=\"a\"),r.values[3]=e,zu(r)}function fD(r,e){if(r=ja(r),e=I_(e),r.type.indexOf(\"hsl\")!==-1)r.values[2]*=1-e;else if(r.type.indexOf(\"rgb\")!==-1)for(var a=0;a\u003c3;a+=1)r.values[a]*=1-e;return zu(r)}function mD(r,e){if(r=ja(r),e=I_(e),r.type.indexOf(\"hsl\")!==-1)r.values[2]+=(100-r.values[2])*e;else if(r.type.indexOf(\"rgb\")!==-1)for(var a=0;a\u003c3;a+=1)r.values[a]+=(255-r.values[a])*e;return zu(r)}});var kD=v(ci=\u003e{\"use strict\";var ha=Se();Object.defineProperty(ci,\"__esModule\",{value:!0});ci.default=oie;ci.dark=ci.light=void 0;var gD=ha(yt()),iie=ha(Mn()),yD=tn(),$d=ha(rD()),F_=ha(aD()),V_=ha(sD()),W_=ha(iD()),L_=ha(oD()),B_=ha(cD()),z_=ha(uD()),G_=ha(lD()),U_=vD(),$_={text:{primary:\"rgba(0, 0, 0, 0.87)\",secondary:\"rgba(0, 0, 0, 0.54)\",disabled:\"rgba(0, 0, 0, 0.38)\",hint:\"rgba(0, 0, 0, 0.38)\"},divider:\"rgba(0, 0, 0, 0.12)\",background:{paper:$d.default.white,default:F_.default[50]},action:{active:\"rgba(0, 0, 0, 0.54)\",hover:\"rgba(0, 0, 0, 0.04)\",hoverOpacity:.04,selected:\"rgba(0, 0, 0, 0.08)\",selectedOpacity:.08,disabled:\"rgba(0, 0, 0, 0.26)\",disabledBackground:\"rgba(0, 0, 0, 0.12)\",disabledOpacity:.38,focus:\"rgba(0, 0, 0, 0.12)\",focusOpacity:.12,activatedOpacity:.12}};ci.light=$_;var Hd={text:{primary:$d.default.white,secondary:\"rgba(255, 255, 255, 0.7)\",disabled:\"rgba(255, 255, 255, 0.5)\",hint:\"rgba(255, 255, 255, 0.5)\",icon:\"rgba(255, 255, 255, 0.5)\"},divider:\"rgba(255, 255, 255, 0.12)\",background:{paper:F_.default[800],default:\"#303030\"},action:{active:$d.default.white,hover:\"rgba(255, 255, 255, 0.08)\",hoverOpacity:.08,selected:\"rgba(255, 255, 255, 0.16)\",selectedOpacity:.16,disabled:\"rgba(255, 255, 255, 0.3)\",disabledBackground:\"rgba(255, 255, 255, 0.12)\",disabledOpacity:.38,focus:\"rgba(255, 255, 255, 0.12)\",focusOpacity:.12,activatedOpacity:.24}};ci.dark=Hd;function _D(r,e,a,s){var o=s.light||s,u=s.dark||s*1.5;r[e]||(r.hasOwnProperty(a)?r[e]=r[a]:e===\"light\"?r.light=(0,U_.lighten)(r.main,o):e===\"dark\"\u0026\u0026(r.dark=(0,U_.darken)(r.main,u)))}function oie(r){var e=r.primary,a=e===void 0?{light:V_.default[300],main:V_.default[500],dark:V_.default[700]}:e,s=r.secondary,o=s===void 0?{light:W_.default.A200,main:W_.default.A400,dark:W_.default.A700}:s,u=r.error,h=u===void 0?{light:L_.default[300],main:L_.default[500],dark:L_.default[700]}:u,f=r.warning,y=f===void 0?{light:B_.default[300],main:B_.default[500],dark:B_.default[700]}:f,k=r.info,q=k===void 0?{light:z_.default[300],main:z_.default[500],dark:z_.default[700]}:k,x=r.success,M=x===void 0?{light:G_.default[300],main:G_.default[500],dark:G_.default[700]}:x,L=r.type,j=L===void 0?\"light\":L,B=r.contrastThreshold,ee=B===void 0?3:B,de=r.tonalOffset,ie=de===void 0?.2:de,pe=(0,iie.default)(r,[\"primary\",\"secondary\",\"error\",\"warning\",\"info\",\"success\",\"type\",\"contrastThreshold\",\"tonalOffset\"]);function G(se){var ce=(0,U_.getContrastRatio)(se,Hd.text.primary)\u003e=ee?Hd.text.primary:$_.text.primary;if(!1)var xe;return ce}var R=function(ce){var xe=arguments.length\u003e1\u0026\u0026arguments[1]!==void 0?arguments[1]:500,ke=arguments.length\u003e2\u0026\u0026arguments[2]!==void 0?arguments[2]:300,Re=arguments.length\u003e3\u0026\u0026arguments[3]!==void 0?arguments[3]:700;if(ce=(0,gD.default)({},ce),!ce.main\u0026\u0026ce[xe]\u0026\u0026(ce.main=ce[xe]),!ce.main)throw new Error((0,yD.formatMuiErrorMessage)(4,xe));if(typeof ce.main!=\"string\")throw new Error(_formatMuiErrorMessage(5,JSON.stringify(ce.main)));return _D(ce,\"light\",ke,ie),_D(ce,\"dark\",Re,ie),ce.contrastText||(ce.contrastText=G(ce.main)),ce},H={dark:Hd,light:$_},$=(0,yD.deepmerge)((0,gD.default)({common:$d.default,type:j,primary:R(a),secondary:R(o,\"A400\",\"A200\",\"A700\"),error:R(h),warning:R(y),info:R(q),success:R(M),grey:F_.default,contrastThreshold:ee,getContrastText:G,augmentColor:R,tonalOffset:ie},H[j]),pe);return $}});var TD=v(H_=\u003e{\"use strict\";var ND=Se();Object.defineProperty(H_,\"__esModule\",{value:!0});H_.default=pie;var bD=ND(yt()),cie=ND(Mn()),uie=tn();function xD(r){return Math.round(r*1e5)/1e5}function lie(r){return xD(r)}var wD={textTransform:\"uppercase\"},qD='\"Roboto\", \"Helvetica\", \"Arial\", sans-serif';function pie(r,e){var a=typeof e==\"function\"?e(r):e,s=a.fontFamily,o=s===void 0?qD:s,u=a.fontSize,h=u===void 0?14:u,f=a.fontWeightLight,y=f===void 0?300:f,k=a.fontWeightRegular,q=k===void 0?400:k,x=a.fontWeightMedium,M=x===void 0?500:x,L=a.fontWeightBold,j=L===void 0?700:L,B=a.htmlFontSize,ee=B===void 0?16:B,de=a.allVariants,ie=a.pxToRem,pe=(0,cie.default)(a,[\"fontFamily\",\"fontSize\",\"fontWeightLight\",\"fontWeightRegular\",\"fontWeightMedium\",\"fontWeightBold\",\"htmlFontSize\",\"allVariants\",\"pxToRem\"]),G=h/14,R=ie||function(se){return\"\".concat(se/ee*G,\"rem\")},H=function(ce,xe,ke,Re,ze){return(0,bD.default)({fontFamily:o,fontWeight:ce,fontSize:R(xe),lineHeight:ke},o===qD?{letterSpacing:\"\".concat(xD(Re/xe),\"em\")}:{},ze,de)},$={h1:H(y,96,1.167,-1.5),h2:H(y,60,1.2,-.5),h3:H(q,48,1.167,0),h4:H(q,34,1.235,.25),h5:H(q,24,1.334,0),h6:H(M,20,1.6,.15),subtitle1:H(q,16,1.75,.15),subtitle2:H(M,14,1.57,.1),body1:H(q,16,1.5,.15),body2:H(q,14,1.43,.15),button:H(M,14,1.75,.4,wD),caption:H(q,12,1.66,.4),overline:H(q,12,2.66,1,wD)};return(0,uie.deepmerge)((0,bD.default)({htmlFontSize:ee,pxToRem:R,round:lie,fontFamily:o,fontSize:h,fontWeightLight:y,fontWeightRegular:q,fontWeightMedium:M,fontWeightBold:j},$),pe,{clone:!1})}});var SD=v(Yd=\u003e{\"use strict\";Object.defineProperty(Yd,\"__esModule\",{value:!0});Yd.default=void 0;var hie=.2,die=.14,fie=.12;function Ft(){return[\"\".concat(arguments.length\u003c=0?void 0:arguments[0],\"px \").concat(arguments.length\u003c=1?void 0:arguments[1],\"px \").concat(arguments.length\u003c=2?void 0:arguments[2],\"px \").concat(arguments.length\u003c=3?void 0:arguments[3],\"px rgba(0,0,0,\").concat(hie,\")\"),\"\".concat(arguments.length\u003c=4?void 0:arguments[4],\"px \").concat(arguments.length\u003c=5?void 0:arguments[5],\"px \").concat(arguments.length\u003c=6?void 0:arguments[6],\"px \").concat(arguments.length\u003c=7?void 0:arguments[7],\"px rgba(0,0,0,\").concat(die,\")\"),\"\".concat(arguments.length\u003c=8?void 0:arguments[8],\"px \").concat(arguments.length\u003c=9?void 0:arguments[9],\"px \").concat(arguments.length\u003c=10?void 0:arguments[10],\"px \").concat(arguments.length\u003c=11?void 0:arguments[11],\"px rgba(0,0,0,\").concat(fie,\")\")].join(\",\")}var mie=[\"none\",Ft(0,2,1,-1,0,1,1,0,0,1,3,0),Ft(0,3,1,-2,0,2,2,0,0,1,5,0),Ft(0,3,3,-2,0,3,4,0,0,1,8,0),Ft(0,2,4,-1,0,4,5,0,0,1,10,0),Ft(0,3,5,-1,0,5,8,0,0,1,14,0),Ft(0,3,5,-1,0,6,10,0,0,1,18,0),Ft(0,4,5,-2,0,7,10,1,0,2,16,1),Ft(0,5,5,-3,0,8,10,1,0,3,14,2),Ft(0,5,6,-3,0,9,12,1,0,3,16,2),Ft(0,6,6,-3,0,10,14,1,0,4,18,3),Ft(0,6,7,-4,0,11,15,1,0,4,20,3),Ft(0,7,8,-4,0,12,17,2,0,5,22,4),Ft(0,7,8,-4,0,13,19,2,0,5,24,4),Ft(0,7,9,-4,0,14,21,2,0,5,26,4),Ft(0,8,9,-5,0,15,22,2,0,6,28,5),Ft(0,8,10,-5,0,16,24,2,0,6,30,5),Ft(0,8,11,-5,0,17,26,2,0,6,32,5),Ft(0,9,11,-5,0,18,28,2,0,7,34,6),Ft(0,9,12,-6,0,19,29,2,0,7,36,6),Ft(0,10,13,-6,0,20,31,3,0,8,38,7),Ft(0,10,13,-6,0,21,33,3,0,8,40,7),Ft(0,10,14,-6,0,22,35,3,0,8,42,7),Ft(0,11,14,-7,0,23,36,3,0,9,44,8),Ft(0,11,15,-7,0,24,38,3,0,9,46,8)],vie=mie;Yd.default=vie});var MD=v(Xd=\u003e{\"use strict\";Object.defineProperty(Xd,\"__esModule\",{value:!0});Xd.default=void 0;var gie={borderRadius:4},yie=gie;Xd.default=yie});var Y_=v(Zd=\u003e{\"use strict\";var _ie=Se();Object.defineProperty(Zd,\"__esModule\",{value:!0});Zd.default=void 0;var LNe=_ie(It()),kie={},Nie=kie;Zd.default=Nie});var Gu=v(Kd=\u003e{\"use strict\";Object.defineProperty(Kd,\"__esModule\",{value:!0});Kd.default=void 0;var bie=tn();function xie(r,e){return e?(0,bie.deepmerge)(r,e,{clone:!1}):r}var wie=xie;Kd.default=wie});var Qd=v($u=\u003e{\"use strict\";var Uu=Se();Object.defineProperty($u,\"__esModule\",{value:!0});$u.handleBreakpoints=Oie;$u.default=void 0;var qie=Uu(Du()),Tie=Uu(yt()),Sie=Uu(Co()),GNe=Uu(It()),Mie=Uu(Gu()),Pie={xs:0,sm:600,md:960,lg:1280,xl:1920},X_={keys:[\"xs\",\"sm\",\"md\",\"lg\",\"xl\"],up:function(e){return\"@media (min-width:\".concat(Pie[e],\"px)\")}};function Oie(r,e,a){if(Array.isArray(e)){var s=r.theme.breakpoints||X_;return e.reduce(function(h,f,y){return h[s.up(s.keys[y])]=a(e[y]),h},{})}if((0,Sie.default)(e)===\"object\"){var o=r.theme.breakpoints||X_;return Object.keys(e).reduce(function(h,f){return h[o.up(f)]=a(e[f]),h},{})}var u=a(e);return u}function Cie(r){var e=function(s){var o=r(s),u=s.theme.breakpoints||X_,h=u.keys.reduce(function(f,y){return s[y]\u0026\u0026(f=f||{},f[u.up(y)]=r((0,Tie.default)({theme:s.theme},s[y]))),f},null);return(0,Mie.default)(o,h)};return e.propTypes={},e.filterProps=[\"xs\",\"sm\",\"md\",\"lg\",\"xl\"].concat((0,qie.default)(r.filterProps)),e}var Aie=Cie;$u.default=Aie});var Ur=v(Jd=\u003e{\"use strict\";var PD=Se();Object.defineProperty(Jd,\"__esModule\",{value:!0});Jd.default=void 0;var Rie=PD(du()),$Ne=PD(Y_()),Eie=Qd();function OD(r,e){return!e||typeof e!=\"string\"?null:e.split(\".\").reduce(function(a,s){return a\u0026\u0026a[s]?a[s]:null},r)}function jie(r){var e=r.prop,a=r.cssProperty,s=a===void 0?r.prop:a,o=r.themeKey,u=r.transform,h=function(y){if(y[e]==null)return null;var k=y[e],q=y.theme,x=OD(q,o)||{},M=function(j){var B;return typeof x==\"function\"?B=x(j):Array.isArray(x)?B=x[j]||j:(B=OD(x,j)||j,u\u0026\u0026(B=u(B))),s===!1?B:(0,Rie.default)({},s,B)};return(0,Eie.handleBreakpoints)(y,k,M)};return h.propTypes={},h.filterProps=[e],h}var Die=jie;Jd.default=Die});var da=v(ef=\u003e{\"use strict\";var CD=Se();Object.defineProperty(ef,\"__esModule\",{value:!0});ef.default=void 0;var YNe=CD(yt()),Iie=CD(Gu());function Fie(){for(var r=arguments.length,e=new Array(r),a=0;a\u003cr;a++)e[a]=arguments[a];var s=function(u){return e.reduce(function(h,f){var y=f(u);return y?(0,Iie.default)(h,y):h},{})};return s.propTypes={},s.filterProps=e.reduce(function(o,u){return o.concat(u.filterProps)},[]),s}var Vie=Fie;ef.default=Vie});var WD=v(fn=\u003e{\"use strict\";var AD=Se();Object.defineProperty(fn,\"__esModule\",{value:!0});fn.default=fn.borderRadius=fn.borderColor=fn.borderLeft=fn.borderBottom=fn.borderRight=fn.borderTop=fn.border=void 0;var ui=AD(Ur()),Wie=AD(da());function Hu(r){return typeof r!=\"number\"?r:\"\".concat(r,\"px solid\")}var RD=(0,ui.default)({prop:\"border\",themeKey:\"borders\",transform:Hu});fn.border=RD;var ED=(0,ui.default)({prop:\"borderTop\",themeKey:\"borders\",transform:Hu});fn.borderTop=ED;var jD=(0,ui.default)({prop:\"borderRight\",themeKey:\"borders\",transform:Hu});fn.borderRight=jD;var DD=(0,ui.default)({prop:\"borderBottom\",themeKey:\"borders\",transform:Hu});fn.borderBottom=DD;var ID=(0,ui.default)({prop:\"borderLeft\",themeKey:\"borders\",transform:Hu});fn.borderLeft=ID;var FD=(0,ui.default)({prop:\"borderColor\",themeKey:\"palette\"});fn.borderColor=FD;var VD=(0,ui.default)({prop:\"borderRadius\",themeKey:\"shape\"});fn.borderRadius=VD;var Lie=(0,Wie.default)(RD,ED,jD,DD,ID,FD,VD),Bie=Lie;fn.default=Bie});var GD=v(Yu=\u003e{\"use strict\";var tf=Se();Object.defineProperty(Yu,\"__esModule\",{value:!0});Yu.css=Gie;Yu.default=void 0;var zie=tf(Du()),nf=tf(yt()),KNe=tf(It()),QNe=tn(),LD=tf(Gu());function BD(r,e){var a={};return Object.keys(r).forEach(function(s){e.indexOf(s)===-1\u0026\u0026(a[s]=r[s])}),a}function zD(r){var e=function(s){var o=r(s);return s.css?(0,nf.default)({},(0,LD.default)(o,r((0,nf.default)({theme:s.theme},s.css))),BD(s.css,[r.filterProps])):s.sx?(0,nf.default)({},(0,LD.default)(o,r((0,nf.default)({theme:s.theme},s.sx))),BD(s.sx,[r.filterProps])):o};return e.propTypes={},e.filterProps=[\"css\",\"sx\"].concat((0,zie.default)(r.filterProps)),e}function Gie(r){return zD(r)}var Uie=zD;Yu.default=Uie});var QD=v(Pn=\u003e{\"use strict\";var UD=Se();Object.defineProperty(Pn,\"__esModule\",{value:!0});Pn.default=Pn.whiteSpace=Pn.visibility=Pn.textOverflow=Pn.overflow=Pn.displayRaw=Pn.displayPrint=void 0;var zo=UD(Ur()),$ie=UD(da()),$D=(0,zo.default)({prop:\"displayPrint\",cssProperty:!1,transform:function(e){return{\"@media print\":{display:e}}}});Pn.displayPrint=$D;var HD=(0,zo.default)({prop:\"display\"});Pn.displayRaw=HD;var YD=(0,zo.default)({prop:\"overflow\"});Pn.overflow=YD;var XD=(0,zo.default)({prop:\"textOverflow\"});Pn.textOverflow=XD;var ZD=(0,zo.default)({prop:\"visibility\"});Pn.visibility=ZD;var KD=(0,zo.default)({prop:\"whiteSpace\"});Pn.whiteSpace=KD;var Hie=(0,$ie.default)($D,HD,YD,XD,ZD,KD);Pn.default=Hie});var d2=v(gt=\u003e{\"use strict\";var JD=Se();Object.defineProperty(gt,\"__esModule\",{value:!0});gt.default=gt.justifySelf=gt.justifyItems=gt.alignSelf=gt.flexShrink=gt.flexGrow=gt.flex=gt.order=gt.alignContent=gt.alignItems=gt.justifyContent=gt.flexWrap=gt.flexDirection=gt.flexBasis=void 0;var fr=JD(Ur()),Yie=JD(da()),e2=(0,fr.default)({prop:\"flexBasis\"});gt.flexBasis=e2;var t2=(0,fr.default)({prop:\"flexDirection\"});gt.flexDirection=t2;var n2=(0,fr.default)({prop:\"flexWrap\"});gt.flexWrap=n2;var r2=(0,fr.default)({prop:\"justifyContent\"});gt.justifyContent=r2;var a2=(0,fr.default)({prop:\"alignItems\"});gt.alignItems=a2;var s2=(0,fr.default)({prop:\"alignContent\"});gt.alignContent=s2;var i2=(0,fr.default)({prop:\"order\"});gt.order=i2;var o2=(0,fr.default)({prop:\"flex\"});gt.flex=o2;var c2=(0,fr.default)({prop:\"flexGrow\"});gt.flexGrow=c2;var u2=(0,fr.default)({prop:\"flexShrink\"});gt.flexShrink=u2;var l2=(0,fr.default)({prop:\"alignSelf\"});gt.alignSelf=l2;var p2=(0,fr.default)({prop:\"justifyItems\"});gt.justifyItems=p2;var h2=(0,fr.default)({prop:\"justifySelf\"});gt.justifySelf=h2;var Xie=(0,Yie.default)(e2,t2,n2,r2,a2,s2,i2,o2,c2,u2,l2,p2,h2),Zie=Xie;gt.default=Zie});var S2=v(Nt=\u003e{\"use strict\";var f2=Se();Object.defineProperty(Nt,\"__esModule\",{value:!0});Nt.default=Nt.gridArea=Nt.gridTemplateAreas=Nt.gridTemplateRows=Nt.gridTemplateColumns=Nt.gridAutoRows=Nt.gridAutoColumns=Nt.gridAutoFlow=Nt.gridRow=Nt.gridColumn=Nt.gridRowGap=Nt.gridColumnGap=Nt.gridGap=void 0;var Mr=f2(Ur()),Kie=f2(da()),m2=(0,Mr.default)({prop:\"gridGap\"});Nt.gridGap=m2;var v2=(0,Mr.default)({prop:\"gridColumnGap\"});Nt.gridColumnGap=v2;var g2=(0,Mr.default)({prop:\"gridRowGap\"});Nt.gridRowGap=g2;var y2=(0,Mr.default)({prop:\"gridColumn\"});Nt.gridColumn=y2;var _2=(0,Mr.default)({prop:\"gridRow\"});Nt.gridRow=_2;var k2=(0,Mr.default)({prop:\"gridAutoFlow\"});Nt.gridAutoFlow=k2;var N2=(0,Mr.default)({prop:\"gridAutoColumns\"});Nt.gridAutoColumns=N2;var b2=(0,Mr.default)({prop:\"gridAutoRows\"});Nt.gridAutoRows=b2;var x2=(0,Mr.default)({prop:\"gridTemplateColumns\"});Nt.gridTemplateColumns=x2;var w2=(0,Mr.default)({prop:\"gridTemplateRows\"});Nt.gridTemplateRows=w2;var q2=(0,Mr.default)({prop:\"gridTemplateAreas\"});Nt.gridTemplateAreas=q2;var T2=(0,Mr.default)({prop:\"gridArea\"});Nt.gridArea=T2;var Qie=(0,Kie.default)(m2,v2,g2,y2,_2,k2,N2,b2,x2,w2,q2,T2),Jie=Qie;Nt.default=Jie});var A2=v(bs=\u003e{\"use strict\";var M2=Se();Object.defineProperty(bs,\"__esModule\",{value:!0});bs.default=bs.bgcolor=bs.color=void 0;var P2=M2(Ur()),eoe=M2(da()),O2=(0,P2.default)({prop:\"color\",themeKey:\"palette\"});bs.color=O2;var C2=(0,P2.default)({prop:\"bgcolor\",cssProperty:\"backgroundColor\",themeKey:\"palette\"});bs.bgcolor=C2;var toe=(0,eoe.default)(O2,C2),noe=toe;bs.default=noe});var W2=v(On=\u003e{\"use strict\";var R2=Se();Object.defineProperty(On,\"__esModule\",{value:!0});On.default=On.left=On.bottom=On.right=On.top=On.zIndex=On.position=void 0;var Go=R2(Ur()),roe=R2(da()),E2=(0,Go.default)({prop:\"position\"});On.position=E2;var j2=(0,Go.default)({prop:\"zIndex\",themeKey:\"zIndex\"});On.zIndex=j2;var D2=(0,Go.default)({prop:\"top\"});On.top=D2;var I2=(0,Go.default)({prop:\"right\"});On.right=I2;var F2=(0,Go.default)({prop:\"bottom\"});On.bottom=F2;var V2=(0,Go.default)({prop:\"left\"});On.left=V2;var aoe=(0,roe.default)(E2,j2,D2,I2,F2,V2);On.default=aoe});var L2=v(rf=\u003e{\"use strict\";var soe=Se();Object.defineProperty(rf,\"__esModule\",{value:!0});rf.default=void 0;var ioe=soe(Ur()),ooe=(0,ioe.default)({prop:\"boxShadow\",themeKey:\"shadows\"}),coe=ooe;rf.default=coe});var Z2=v(Gt=\u003e{\"use strict\";var B2=Se();Object.defineProperty(Gt,\"__esModule\",{value:!0});Gt.default=Gt.boxSizing=Gt.sizeHeight=Gt.sizeWidth=Gt.minHeight=Gt.maxHeight=Gt.height=Gt.minWidth=Gt.maxWidth=Gt.width=void 0;var Da=B2(Ur()),uoe=B2(da());function xs(r){return r\u003c=1?\"\".concat(r*100,\"%\"):r}var z2=(0,Da.default)({prop:\"width\",transform:xs});Gt.width=z2;var G2=(0,Da.default)({prop:\"maxWidth\",transform:xs});Gt.maxWidth=G2;var U2=(0,Da.default)({prop:\"minWidth\",transform:xs});Gt.minWidth=U2;var $2=(0,Da.default)({prop:\"height\",transform:xs});Gt.height=$2;var H2=(0,Da.default)({prop:\"maxHeight\",transform:xs});Gt.maxHeight=H2;var Y2=(0,Da.default)({prop:\"minHeight\",transform:xs});Gt.minHeight=Y2;var loe=(0,Da.default)({prop:\"size\",cssProperty:\"width\",transform:xs});Gt.sizeWidth=loe;var poe=(0,Da.default)({prop:\"size\",cssProperty:\"height\",transform:xs});Gt.sizeHeight=poe;var X2=(0,Da.default)({prop:\"boxSizing\"});Gt.boxSizing=X2;var hoe=(0,uoe.default)(z2,G2,U2,$2,H2,Y2,X2),doe=hoe;Gt.default=doe});var K2=v((obe,Xu)=\u003e{function foe(r){if(Array.isArray(r))return r}Xu.exports=foe;Xu.exports.default=Xu.exports,Xu.exports.__esModule=!0});var Q2=v((cbe,Zu)=\u003e{function moe(r,e){var a=r==null?null:typeof Symbol!=\"undefined\"\u0026\u0026r[Symbol.iterator]||r[\"@@iterator\"];if(a!=null){var s=[],o=!0,u=!1,h,f;try{for(a=a.call(r);!(o=(h=a.next()).done)\u0026\u0026(s.push(h.value),!(e\u0026\u0026s.length===e));o=!0);}catch(y){u=!0,f=y}finally{try{!o\u0026\u0026a.return!=null\u0026\u0026a.return()}finally{if(u)throw f}}return s}}Zu.exports=moe;Zu.exports.default=Zu.exports,Zu.exports.__esModule=!0});var J2=v((ube,Ku)=\u003e{function voe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Ku.exports=voe;Ku.exports.default=Ku.exports,Ku.exports.__esModule=!0});var e3=v((lbe,Qu)=\u003e{var goe=K2(),yoe=Q2(),_oe=Wy(),koe=J2();function Noe(r,e){return goe(r)||yoe(r,e)||_oe(r,e)||koe()}Qu.exports=Noe;Qu.exports.default=Qu.exports,Qu.exports.__esModule=!0});var t3=v(Z_=\u003e{\"use strict\";Object.defineProperty(Z_,\"__esModule\",{value:!0});Z_.default=boe;function boe(r){var e={};return function(a){return e[a]===void 0\u0026\u0026(e[a]=r(a)),e[a]}}});var s3=v(Ju=\u003e{\"use strict\";var af=Se();Object.defineProperty(Ju,\"__esModule\",{value:!0});Ju.createUnarySpacing=a3;Ju.default=void 0;var xoe=af(e3()),hbe=af(Y_()),woe=Qd(),qoe=af(Gu()),Toe=af(t3()),Soe={m:\"margin\",p:\"padding\"},Moe={t:\"Top\",r:\"Right\",b:\"Bottom\",l:\"Left\",x:[\"Left\",\"Right\"],y:[\"Top\",\"Bottom\"]},n3={marginX:\"mx\",marginY:\"my\",paddingX:\"px\",paddingY:\"py\"},Poe=(0,Toe.default)(function(r){if(r.length\u003e2)if(n3[r])r=n3[r];else return[r];var e=r.split(\"\"),a=(0,xoe.default)(e,2),s=a[0],o=a[1],u=Soe[s],h=Moe[o]||\"\";return Array.isArray(h)?h.map(function(f){return u+f}):[u+h]}),r3=[\"m\",\"mt\",\"mr\",\"mb\",\"ml\",\"mx\",\"my\",\"p\",\"pt\",\"pr\",\"pb\",\"pl\",\"px\",\"py\",\"margin\",\"marginTop\",\"marginRight\",\"marginBottom\",\"marginLeft\",\"marginX\",\"marginY\",\"padding\",\"paddingTop\",\"paddingRight\",\"paddingBottom\",\"paddingLeft\",\"paddingX\",\"paddingY\"];function a3(r){var e=r.spacing||8;return typeof e==\"number\"?function(a){return e*a}:Array.isArray(e)?function(a){return e[a]}:typeof e==\"function\"?e:function(){}}function Ooe(r,e){if(typeof e==\"string\"||e==null)return e;var a=Math.abs(e),s=r(a);return e\u003e=0?s:typeof s==\"number\"?-s:\"-\".concat(s)}function Coe(r,e){return function(a){return r.reduce(function(s,o){return s[o]=Ooe(e,a),s},{})}}function K_(r){var e=r.theme,a=a3(e);return Object.keys(r).map(function(s){if(r3.indexOf(s)===-1)return null;var o=Poe(s),u=Coe(o,a),h=r[s];return(0,woe.handleBreakpoints)(r,h,u)}).reduce(qoe.default,{})}K_.propTypes={};K_.filterProps=r3;var Aoe=K_;Ju.default=Aoe});var f3=v(mn=\u003e{\"use strict\";var i3=Se();Object.defineProperty(mn,\"__esModule\",{value:!0});mn.default=mn.textAlign=mn.lineHeight=mn.letterSpacing=mn.fontWeight=mn.fontStyle=mn.fontSize=mn.fontFamily=void 0;var li=i3(Ur()),Roe=i3(da()),o3=(0,li.default)({prop:\"fontFamily\",themeKey:\"typography\"});mn.fontFamily=o3;var c3=(0,li.default)({prop:\"fontSize\",themeKey:\"typography\"});mn.fontSize=c3;var u3=(0,li.default)({prop:\"fontStyle\",themeKey:\"typography\"});mn.fontStyle=u3;var l3=(0,li.default)({prop:\"fontWeight\",themeKey:\"typography\"});mn.fontWeight=l3;var p3=(0,li.default)({prop:\"letterSpacing\"});mn.letterSpacing=p3;var h3=(0,li.default)({prop:\"lineHeight\"});mn.lineHeight=h3;var d3=(0,li.default)({prop:\"textAlign\"});mn.textAlign=d3;var Eoe=(0,Roe.default)(o3,c3,u3,l3,p3,h3,d3),joe=Eoe;mn.default=joe});var m3=v(Rt=\u003e{\"use strict\";var el=Se(),Ia=en();Object.defineProperty(Rt,\"__esModule\",{value:!0});var Fa={borders:!0,breakpoints:!0,compose:!0,styleFunctionSx:!0,display:!0,flexbox:!0,grid:!0,palette:!0,positions:!0,shadows:!0,sizing:!0,spacing:!0,style:!0,typography:!0};Object.defineProperty(Rt,\"borders\",{enumerable:!0,get:function(){return Q_.default}});Object.defineProperty(Rt,\"breakpoints\",{enumerable:!0,get:function(){return Doe.default}});Object.defineProperty(Rt,\"compose\",{enumerable:!0,get:function(){return Ioe.default}});Object.defineProperty(Rt,\"styleFunctionSx\",{enumerable:!0,get:function(){return J_.default}});Object.defineProperty(Rt,\"display\",{enumerable:!0,get:function(){return Foe.default}});Object.defineProperty(Rt,\"flexbox\",{enumerable:!0,get:function(){return ek.default}});Object.defineProperty(Rt,\"grid\",{enumerable:!0,get:function(){return tk.default}});Object.defineProperty(Rt,\"palette\",{enumerable:!0,get:function(){return nk.default}});Object.defineProperty(Rt,\"positions\",{enumerable:!0,get:function(){return rk.default}});Object.defineProperty(Rt,\"shadows\",{enumerable:!0,get:function(){return Voe.default}});Object.defineProperty(Rt,\"sizing\",{enumerable:!0,get:function(){return ak.default}});Object.defineProperty(Rt,\"spacing\",{enumerable:!0,get:function(){return sk.default}});Object.defineProperty(Rt,\"style\",{enumerable:!0,get:function(){return Woe.default}});Object.defineProperty(Rt,\"typography\",{enumerable:!0,get:function(){return ik.default}});var Q_=Ia(WD());Object.keys(Q_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(Fa,r)||Object.defineProperty(Rt,r,{enumerable:!0,get:function(){return Q_[r]}})});var Doe=el(Qd()),Ioe=el(da()),J_=Ia(GD());Object.keys(J_).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(Fa,r)||Object.defineProperty(Rt,r,{enumerable:!0,get:function(){return J_[r]}})});var Foe=el(QD()),ek=Ia(d2());Object.keys(ek).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(Fa,r)||Object.defineProperty(Rt,r,{enumerable:!0,get:function(){return ek[r]}})});var tk=Ia(S2());Object.keys(tk).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(Fa,r)||Object.defineProperty(Rt,r,{enumerable:!0,get:function(){return tk[r]}})});var nk=Ia(A2());Object.keys(nk).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(Fa,r)||Object.defineProperty(Rt,r,{enumerable:!0,get:function(){return nk[r]}})});var rk=Ia(W2());Object.keys(rk).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(Fa,r)||Object.defineProperty(Rt,r,{enumerable:!0,get:function(){return rk[r]}})});var Voe=el(L2()),ak=Ia(Z2());Object.keys(ak).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(Fa,r)||Object.defineProperty(Rt,r,{enumerable:!0,get:function(){return ak[r]}})});var sk=Ia(s3());Object.keys(sk).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(Fa,r)||Object.defineProperty(Rt,r,{enumerable:!0,get:function(){return sk[r]}})});var Woe=el(Ur()),ik=Ia(f3());Object.keys(ik).forEach(function(r){r===\"default\"||r===\"__esModule\"||Object.prototype.hasOwnProperty.call(Fa,r)||Object.defineProperty(Rt,r,{enumerable:!0,get:function(){return ik[r]}})})});var v3=v(ok=\u003e{\"use strict\";Object.defineProperty(ok,\"__esModule\",{value:!0});ok.default=Boe;var Loe=m3();function Boe(){var r=arguments.length\u003e0\u0026\u0026arguments[0]!==void 0?arguments[0]:8;if(r.mui)return r;var e=(0,Loe.createUnarySpacing)({spacing:r}),a=function(){for(var o=arguments.length,u=new Array(o),h=0;h\u003co;h++)u[h]=arguments[h];return u.length===0?e(1):u.length===1?e(u[0]):u.map(function(f){if(typeof f==\"string\")return f;var y=e(f);return typeof y==\"number\"?\"\".concat(y,\"px\"):y}).join(\" \")};return Object.defineProperty(a,\"unit\",{get:function(){return r}}),a.mui=!0,a}});var y3=v(ws=\u003e{\"use strict\";var zoe=Se();Object.defineProperty(ws,\"__esModule\",{value:!0});ws.default=ws.duration=ws.easing=void 0;var Goe=zoe(Mn()),ck={easeInOut:\"cubic-bezier(0.4, 0, 0.2, 1)\",easeOut:\"cubic-bezier(0.0, 0, 0.2, 1)\",easeIn:\"cubic-bezier(0.4, 0, 1, 1)\",sharp:\"cubic-bezier(0.4, 0, 0.6, 1)\"};ws.easing=ck;var uk={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};ws.duration=uk;function g3(r){return\"\".concat(Math.round(r),\"ms\")}var Uoe={easing:ck,duration:uk,create:function(){var e=arguments.length\u003e0\u0026\u0026arguments[0]!==void 0?arguments[0]:[\"all\"],a=arguments.length\u003e1\u0026\u0026arguments[1]!==void 0?arguments[1]:{},s=a.duration,o=s===void 0?uk.standard:s,u=a.easing,h=u===void 0?ck.easeInOut:u,f=a.delay,y=f===void 0?0:f,k=(0,Goe.default)(a,[\"duration\",\"easing\",\"delay\"]);if(!1)var q,x;return(Array.isArray(e)?e:[e]).map(function(M){return\"\".concat(M,\" \").concat(typeof o==\"string\"?o:g3(o),\" \").concat(h,\" \").concat(typeof y==\"string\"?y:g3(y))}).join(\",\")},getAutoHeightDuration:function(e){if(!e)return 0;var a=e/36;return Math.round((4+15*Math.pow(a,.25)+a/5)*10)}};ws.default=Uoe});var _3=v(sf=\u003e{\"use strict\";Object.defineProperty(sf,\"__esModule\",{value:!0});sf.default=void 0;var $oe={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Hoe=$oe;sf.default=Hoe});var b3=v(tl=\u003e{\"use strict\";var $r=Se();Object.defineProperty(tl,\"__esModule\",{value:!0});tl.createMuiTheme=ace;tl.default=void 0;var _be=$r(du()),Yoe=$r(Mn()),k3=tn(),Xoe=$r(eD()),Zoe=$r(nD()),Koe=$r(kD()),Qoe=$r(TD()),Joe=$r(SD()),ece=$r(MD()),tce=$r(v3()),nce=$r(y3()),rce=$r(_3());function N3(){for(var r=arguments.length\u003e0\u0026\u0026arguments[0]!==void 0?arguments[0]:{},e=r.breakpoints,a=e===void 0?{}:e,s=r.mixins,o=s===void 0?{}:s,u=r.palette,h=u===void 0?{}:u,f=r.spacing,y=r.typography,k=y===void 0?{}:y,q=(0,Yoe.default)(r,[\"breakpoints\",\"mixins\",\"palette\",\"spacing\",\"typography\"]),x=(0,Koe.default)(h),M=(0,Xoe.default)(a),L=(0,tce.default)(f),j=(0,k3.deepmerge)({breakpoints:M,direction:\"ltr\",mixins:(0,Zoe.default)(M,L,o),overrides:{},palette:x,props:{},shadows:Joe.default,typography:(0,Qoe.default)(x,k),spacing:L,shape:ece.default,transitions:nce.default,zIndex:rce.default},q),B=arguments.length,ee=new Array(B\u003e1?B-1:0),de=1;de\u003cB;de++)ee[de-1]=arguments[de];if(j=ee.reduce(function(G,R){return(0,k3.deepmerge)(G,R)},j),!1)var ie,pe;return j}function ace(){return N3.apply(void 0,arguments)}var sce=N3;tl.default=sce});var x3=v(of=\u003e{\"use strict\";var ice=Se();Object.defineProperty(of,\"__esModule\",{value:!0});of.default=void 0;var oce=ice(b3()),cce=(0,oce.default)(),uce=cce;of.default=uce});var Uo=v(cf=\u003e{\"use strict\";var w3=Se();Object.defineProperty(cf,\"__esModule\",{value:!0});cf.default=void 0;var lce=w3(yt()),pce=Qj(),hce=w3(x3());function dce(r,e){return(0,pce.withStyles)(r,(0,lce.default)({defaultTheme:hce.default},e))}var fce=dce;cf.default=fce});var nl=v((xbe,q3)=\u003e{q3.exports=ReactDOM});var pk=v(lk=\u003e{\"use strict\";Object.defineProperty(lk,\"__esModule\",{value:!0});lk.default=mce;function mce(r,e){typeof r==\"function\"?r(e):r\u0026\u0026(r.current=e)}});var dk=v(hk=\u003e{\"use strict\";var vce=Se(),gce=en();Object.defineProperty(hk,\"__esModule\",{value:!0});hk.default=_ce;var yce=gce(ot()),T3=vce(pk());function _ce(r,e){return yce.useMemo(function(){return r==null\u0026\u0026e==null?null:function(a){(0,T3.default)(r,a),(0,T3.default)(e,a)}},[r,e])}});var lf=v(fk=\u003e{\"use strict\";var kce=en();Object.defineProperty(fk,\"__esModule\",{value:!0});fk.default=bce;var uf=kce(ot()),Nce=typeof window!=\"undefined\"?uf.useLayoutEffect:uf.useEffect;function bce(r){var e=uf.useRef(r);return Nce(function(){e.current=r}),uf.useCallback(function(){return e.current.apply(void 0,arguments)},[])}});var vk=v(mk=\u003e{\"use strict\";Object.defineProperty(mk,\"__esModule\",{value:!0});mk.default=xce;function xce(r,e){return function(){return null}}});var yk=v(hf=\u003e{\"use strict\";var S3=en();Object.defineProperty(hf,\"__esModule\",{value:!0});hf.teardown=Pce;hf.default=Ace;var wce=S3(ot()),qce=S3(nl()),pf=!0,gk=!1,M3=null,Tce={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,\"datetime-local\":!0};function Sce(r){var e=r.type,a=r.tagName;return!!(a===\"INPUT\"\u0026\u0026Tce[e]\u0026\u0026!r.readOnly||a===\"TEXTAREA\"\u0026\u0026!r.readOnly||r.isContentEditable)}function P3(r){r.metaKey||r.altKey||r.ctrlKey||(pf=!0)}function $o(){pf=!1}function O3(){this.visibilityState===\"hidden\"\u0026\u0026gk\u0026\u0026(pf=!0)}function Mce(r){r.addEventListener(\"keydown\",P3,!0),r.addEventListener(\"mousedown\",$o,!0),r.addEventListener(\"pointerdown\",$o,!0),r.addEventListener(\"touchstart\",$o,!0),r.addEventListener(\"visibilitychange\",O3,!0)}function Pce(r){r.removeEventListener(\"keydown\",P3,!0),r.removeEventListener(\"mousedown\",$o,!0),r.removeEventListener(\"pointerdown\",$o,!0),r.removeEventListener(\"touchstart\",$o,!0),r.removeEventListener(\"visibilitychange\",O3,!0)}function Oce(r){var e=r.target;try{return e.matches(\":focus-visible\")}catch(a){}return pf||Sce(e)}function Cce(){gk=!0,window.clearTimeout(M3),M3=window.setTimeout(function(){gk=!1},100)}function Ace(){var r=wce.useCallback(function(e){var a=qce.findDOMNode(e);a!=null\u0026\u0026Mce(a.ownerDocument)},[]);return{isFocusVisible:Oce,onBlurVisible:Cce,ref:r}}});var A3=v((df,C3)=\u003e{\"use strict\";df.__esModule=!0;df.default=Rce;function Rce(r,e){return r.classList?!!e\u0026\u0026r.classList.contains(e):(\" \"+(r.className.baseVal||r.className)+\" \").indexOf(\" \"+e+\" \")!==-1}C3.exports=df.default});var E3=v((ff,R3)=\u003e{\"use strict\";var Ece=Se();ff.__esModule=!0;ff.default=Dce;var jce=Ece(A3());function Dce(r,e){r.classList?r.classList.add(e):(0,jce.default)(r,e)||(typeof r.className==\"string\"?r.className=r.className+\" \"+e:r.setAttribute(\"class\",(r.className\u0026\u0026r.className.baseVal||\"\")+\" \"+e))}R3.exports=ff.default});var I3=v((mf,D3)=\u003e{\"use strict\";mf.__esModule=!0;mf.default=Ice;function j3(r,e){return r.replace(new RegExp(\"(^|\\\\s)\"+e+\"(?:\\\\s|$)\",\"g\"),\"$1\").replace(/\\s+/g,\" \").replace(/^\\s*|\\s*$/g,\"\")}function Ice(r,e){r.classList?r.classList.remove(e):typeof r.className==\"string\"?r.className=j3(r.className,e):r.setAttribute(\"class\",j3(r.className\u0026\u0026r.className.baseVal||\"\",e))}D3.exports=mf.default});var _k=v((rl,F3)=\u003e{\"use strict\";rl.__esModule=!0;rl.default=void 0;var Fce={disabled:!1};rl.default=Fce;F3.exports=rl.default});var kk=v(Ho=\u003e{\"use strict\";Ho.__esModule=!0;Ho.classNamesShape=Ho.timeoutsShape=void 0;var Pbe=Vce(It());function Vce(r){return r\u0026\u0026r.__esModule?r:{default:r}}var Wce=null;Ho.timeoutsShape=Wce;var Lce=null;Ho.classNamesShape=Lce});var vf=v((al,V3)=\u003e{\"use strict\";al.__esModule=!0;al.default=void 0;var Bce=zce(ot());function zce(r){return r\u0026\u0026r.__esModule?r:{default:r}}var Gce=Bce.default.createContext(null);al.default=Gce;V3.exports=al.default});var _f=v(Kn=\u003e{\"use strict\";Kn.__esModule=!0;Kn.default=Kn.EXITING=Kn.ENTERED=Kn.ENTERING=Kn.EXITED=Kn.UNMOUNTED=void 0;var Cbe=sl(It()),gf=sl(ot()),Nk=sl(nl()),W3=sl(_k()),Abe=kk(),L3=sl(vf());function sl(r){return r\u0026\u0026r.__esModule?r:{default:r}}function Uce(r,e){if(r==null)return{};var a={},s=Object.keys(r),o,u;for(u=0;u\u003cs.length;u++)o=s[u],!(e.indexOf(o)\u003e=0)\u0026\u0026(a[o]=r[o]);return a}function $ce(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var Yo=\"unmounted\";Kn.UNMOUNTED=Yo;var qs=\"exited\";Kn.EXITED=qs;var Ts=\"entering\";Kn.ENTERING=Ts;var pi=\"entered\";Kn.ENTERED=pi;var yf=\"exiting\";Kn.EXITING=yf;var Va=function(r){$ce(e,r);function e(s,o){var u;u=r.call(this,s,o)||this;var h=o,f=h\u0026\u0026!h.isMounting?s.enter:s.appear,y;return u.appearStatus=null,s.in?f?(y=qs,u.appearStatus=Ts):y=pi:s.unmountOnExit||s.mountOnEnter?y=Yo:y=qs,u.state={status:y},u.nextCallback=null,u}e.getDerivedStateFromProps=function(o,u){var h=o.in;return h\u0026\u0026u.status===Yo?{status:qs}:null};var a=e.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(o){var u=null;if(o!==this.props){var h=this.state.status;this.props.in?h!==Ts\u0026\u0026h!==pi\u0026\u0026(u=Ts):(h===Ts||h===pi)\u0026\u0026(u=yf)}this.updateStatus(!1,u)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var o=this.props.timeout,u,h,f;return u=h=f=o,o!=null\u0026\u0026typeof o!=\"number\"\u0026\u0026(u=o.exit,h=o.enter,f=o.appear!==void 0?o.appear:h),{exit:u,enter:h,appear:f}},a.updateStatus=function(o,u){o===void 0\u0026\u0026(o=!1),u!==null?(this.cancelNextCallback(),u===Ts?this.performEnter(o):this.performExit()):this.props.unmountOnExit\u0026\u0026this.state.status===qs\u0026\u0026this.setState({status:Yo})},a.performEnter=function(o){var u=this,h=this.props.enter,f=this.context?this.context.isMounting:o,y=this.props.nodeRef?[f]:[Nk.default.findDOMNode(this),f],k=y[0],q=y[1],x=this.getTimeouts(),M=f?x.appear:x.enter;if(!o\u0026\u0026!h||W3.default.disabled){this.safeSetState({status:pi},function(){u.props.onEntered(k)});return}this.props.onEnter(k,q),this.safeSetState({status:Ts},function(){u.props.onEntering(k,q),u.onTransitionEnd(M,function(){u.safeSetState({status:pi},function(){u.props.onEntered(k,q)})})})},a.performExit=function(){var o=this,u=this.props.exit,h=this.getTimeouts(),f=this.props.nodeRef?void 0:Nk.default.findDOMNode(this);if(!u||W3.default.disabled){this.safeSetState({status:qs},function(){o.props.onExited(f)});return}this.props.onExit(f),this.safeSetState({status:yf},function(){o.props.onExiting(f),o.onTransitionEnd(h.exit,function(){o.safeSetState({status:qs},function(){o.props.onExited(f)})})})},a.cancelNextCallback=function(){this.nextCallback!==null\u0026\u0026(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(o,u){u=this.setNextCallback(u),this.setState(o,u)},a.setNextCallback=function(o){var u=this,h=!0;return this.nextCallback=function(f){h\u0026\u0026(h=!1,u.nextCallback=null,o(f))},this.nextCallback.cancel=function(){h=!1},this.nextCallback},a.onTransitionEnd=function(o,u){this.setNextCallback(u);var h=this.props.nodeRef?this.props.nodeRef.current:Nk.default.findDOMNode(this),f=o==null\u0026\u0026!this.props.addEndListener;if(!h||f){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var y=this.props.nodeRef?[this.nextCallback]:[h,this.nextCallback],k=y[0],q=y[1];this.props.addEndListener(k,q)}o!=null\u0026\u0026setTimeout(this.nextCallback,o)},a.render=function(){var o=this.state.status;if(o===Yo)return null;var u=this.props,h=u.children,f=u.in,y=u.mountOnEnter,k=u.unmountOnExit,q=u.appear,x=u.enter,M=u.exit,L=u.timeout,j=u.addEndListener,B=u.onEnter,ee=u.onEntering,de=u.onEntered,ie=u.onExit,pe=u.onExiting,G=u.onExited,R=u.nodeRef,H=Uce(u,[\"children\",\"in\",\"mountOnEnter\",\"unmountOnExit\",\"appear\",\"enter\",\"exit\",\"timeout\",\"addEndListener\",\"onEnter\",\"onEntering\",\"onEntered\",\"onExit\",\"onExiting\",\"onExited\",\"nodeRef\"]);return gf.default.createElement(L3.default.Provider,{value:null},typeof h==\"function\"?h(o,H):gf.default.cloneElement(gf.default.Children.only(h),H))},e}(gf.default.Component);Va.contextType=L3.default;Va.propTypes={};function Xo(){}Va.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Xo,onEntering:Xo,onEntered:Xo,onExit:Xo,onExiting:Xo,onExited:Xo};Va.UNMOUNTED=Yo;Va.EXITED=qs;Va.ENTERING=Ts;Va.ENTERED=pi;Va.EXITING=yf;var Hce=Va;Kn.default=Hce});var G3=v((ol,z3)=\u003e{\"use strict\";ol.__esModule=!0;ol.default=void 0;var Ebe=il(It()),Yce=il(E3()),Xce=il(I3()),B3=il(ot()),Zce=il(_f()),jbe=kk();function il(r){return r\u0026\u0026r.__esModule?r:{default:r}}function bk(){return bk=Object.assign||function(r){for(var e=1;e\u003carguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)\u0026\u0026(r[s]=a[s])}return r},bk.apply(this,arguments)}function Kce(r,e){if(r==null)return{};var a={},s=Object.keys(r),o,u;for(u=0;u\u003cs.length;u++)o=s[u],!(e.indexOf(o)\u003e=0)\u0026\u0026(a[o]=r[o]);return a}function Qce(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var Jce=function(e,a){return e\u0026\u0026a\u0026\u0026a.split(\" \").forEach(function(s){return(0,Yce.default)(e,s)})},xk=function(e,a){return e\u0026\u0026a\u0026\u0026a.split(\" \").forEach(function(s){return(0,Xce.default)(e,s)})},wk=function(r){Qce(e,r);function e(){for(var s,o=arguments.length,u=new Array(o),h=0;h\u003co;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(f,y){var k=s.resolveArguments(f,y),q=k[0],x=k[1];s.removeClasses(q,\"exit\"),s.addClass(q,x?\"appear\":\"enter\",\"base\"),s.props.onEnter\u0026\u0026s.props.onEnter(f,y)},s.onEntering=function(f,y){var k=s.resolveArguments(f,y),q=k[0],x=k[1],M=x?\"appear\":\"enter\";s.addClass(q,M,\"active\"),s.props.onEntering\u0026\u0026s.props.onEntering(f,y)},s.onEntered=function(f,y){var k=s.resolveArguments(f,y),q=k[0],x=k[1],M=x?\"appear\":\"enter\";s.removeClasses(q,M),s.addClass(q,M,\"done\"),s.props.onEntered\u0026\u0026s.props.onEntered(f,y)},s.onExit=function(f){var y=s.resolveArguments(f),k=y[0];s.removeClasses(k,\"appear\"),s.removeClasses(k,\"enter\"),s.addClass(k,\"exit\",\"base\"),s.props.onExit\u0026\u0026s.props.onExit(f)},s.onExiting=function(f){var y=s.resolveArguments(f),k=y[0];s.addClass(k,\"exit\",\"active\"),s.props.onExiting\u0026\u0026s.props.onExiting(f)},s.onExited=function(f){var y=s.resolveArguments(f),k=y[0];s.removeClasses(k,\"exit\"),s.addClass(k,\"exit\",\"done\"),s.props.onExited\u0026\u0026s.props.onExited(f)},s.resolveArguments=function(f,y){return s.props.nodeRef?[s.props.nodeRef.current,f]:[f,y]},s.getClassNames=function(f){var y=s.props.classNames,k=typeof y==\"string\",q=k\u0026\u0026y?y+\"-\":\"\",x=k?\"\"+q+f:y[f],M=k?x+\"-active\":y[f+\"Active\"],L=k?x+\"-done\":y[f+\"Done\"];return{baseClassName:x,activeClassName:M,doneClassName:L}},s}var a=e.prototype;return a.addClass=function(o,u,h){var f=this.getClassNames(u)[h+\"ClassName\"],y=this.getClassNames(\"enter\"),k=y.doneClassName;u===\"appear\"\u0026\u0026h===\"done\"\u0026\u0026k\u0026\u0026(f+=\" \"+k),h===\"active\"\u0026\u0026o\u0026\u0026o.scrollTop,f\u0026\u0026(this.appliedClasses[u][h]=f,Jce(o,f))},a.removeClasses=function(o,u){var h=this.appliedClasses[u],f=h.base,y=h.active,k=h.done;this.appliedClasses[u]={},f\u0026\u0026xk(o,f),y\u0026\u0026xk(o,y),k\u0026\u0026xk(o,k)},a.render=function(){var o=this.props,u=o.classNames,h=Kce(o,[\"classNames\"]);return B3.default.createElement(Zce.default,bk({},h,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(B3.default.Component);wk.defaultProps={classNames:\"\"};wk.propTypes={};var eue=wk;ol.default=eue;z3.exports=ol.default});var $3=v(Zo=\u003e{\"use strict\";Zo.__esModule=!0;Zo.getChildMapping=qk;Zo.mergeChildMappings=U3;Zo.getInitialChildMapping=tue;Zo.getNextChildMapping=nue;var Wa=ot();function qk(r,e){var a=function(u){return e\u0026\u0026(0,Wa.isValidElement)(u)?e(u):u},s=Object.create(null);return r\u0026\u0026Wa.Children.map(r,function(o){return o}).forEach(function(o){s[o.key]=a(o)}),s}function U3(r,e){r=r||{},e=e||{};function a(q){return q in e?e[q]:r[q]}var s=Object.create(null),o=[];for(var u in r)u in e?o.length\u0026\u0026(s[u]=o,o=[]):o.push(u);var h,f={};for(var y in e){if(s[y])for(h=0;h\u003cs[y].length;h++){var k=s[y][h];f[s[y][h]]=a(k)}f[y]=a(y)}for(h=0;h\u003co.length;h++)f[o[h]]=a(o[h]);return f}function hi(r,e,a){return a[e]!=null?a[e]:r.props[e]}function tue(r,e){return qk(r.children,function(a){return(0,Wa.cloneElement)(a,{onExited:e.bind(null,a),in:!0,appear:hi(a,\"appear\",r),enter:hi(a,\"enter\",r),exit:hi(a,\"exit\",r)})})}function nue(r,e,a){var s=qk(r.children),o=U3(e,s);return Object.keys(o).forEach(function(u){var h=o[u];if(!!(0,Wa.isValidElement)(h)){var f=u in e,y=u in s,k=e[u],q=(0,Wa.isValidElement)(k)\u0026\u0026!k.props.in;y\u0026\u0026(!f||q)?o[u]=(0,Wa.cloneElement)(h,{onExited:a.bind(null,h),in:!0,exit:hi(h,\"exit\",r),enter:hi(h,\"enter\",r)}):!y\u0026\u0026f\u0026\u0026!q?o[u]=(0,Wa.cloneElement)(h,{in:!1}):y\u0026\u0026f\u0026\u0026(0,Wa.isValidElement)(k)\u0026\u0026(o[u]=(0,Wa.cloneElement)(h,{onExited:a.bind(null,h),in:k.props.in,exit:hi(h,\"exit\",r),enter:hi(h,\"enter\",r)}))}}),o}});var Ok=v((cl,Y3)=\u003e{\"use strict\";cl.__esModule=!0;cl.default=void 0;var Ibe=Sk(It()),kf=Sk(ot()),H3=Sk(vf()),Tk=$3();function Sk(r){return r\u0026\u0026r.__esModule?r:{default:r}}function rue(r,e){if(r==null)return{};var a={},s=Object.keys(r),o,u;for(u=0;u\u003cs.length;u++)o=s[u],!(e.indexOf(o)\u003e=0)\u0026\u0026(a[o]=r[o]);return a}function Mk(){return Mk=Object.assign||function(r){for(var e=1;e\u003carguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)\u0026\u0026(r[s]=a[s])}return r},Mk.apply(this,arguments)}function aue(r){if(r===void 0)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return r}function sue(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var iue=Object.values||function(r){return Object.keys(r).map(function(e){return r[e]})},oue={component:\"div\",childFactory:function(e){return e}},Pk=function(r){sue(e,r);function e(s,o){var u;u=r.call(this,s,o)||this;var h=u.handleExited.bind(aue(u));return u.state={contextValue:{isMounting:!0},handleExited:h,firstRender:!0},u}var a=e.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(o,u){var h=u.children,f=u.handleExited,y=u.firstRender;return{children:y?(0,Tk.getInitialChildMapping)(o,f):(0,Tk.getNextChildMapping)(o,h,f),firstRender:!1}},a.handleExited=function(o,u){var h=(0,Tk.getChildMapping)(this.props.children);o.key in h||(o.props.onExited\u0026\u0026o.props.onExited(u),this.mounted\u0026\u0026this.setState(function(f){var y=Mk({},f.children);return delete y[o.key],{children:y}}))},a.render=function(){var o=this.props,u=o.component,h=o.childFactory,f=rue(o,[\"component\",\"childFactory\"]),y=this.state.contextValue,k=iue(this.state.children).map(h);return delete f.appear,delete f.enter,delete f.exit,u===null?kf.default.createElement(H3.default.Provider,{value:y},k):kf.default.createElement(H3.default.Provider,{value:y},kf.default.createElement(u,f,k))},e}(kf.default.Component);Pk.propTypes={};Pk.defaultProps=oue;var cue=Pk;cl.default=cue;Y3.exports=cl.default});var K3=v((ul,Z3)=\u003e{\"use strict\";ul.__esModule=!0;ul.default=void 0;var Fbe=Nf(It()),Ko=Nf(ot()),uue=Nf(nl()),lue=Nf(Ok());function Nf(r){return r\u0026\u0026r.__esModule?r:{default:r}}function pue(r,e){if(r==null)return{};var a={},s=Object.keys(r),o,u;for(u=0;u\u003cs.length;u++)o=s[u],!(e.indexOf(o)\u003e=0)\u0026\u0026(a[o]=r[o]);return a}function hue(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var X3=function(r){hue(e,r);function e(){for(var s,o=arguments.length,u=new Array(o),h=0;h\u003co;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u))||this,s.handleEnter=function(){for(var f=arguments.length,y=new Array(f),k=0;k\u003cf;k++)y[k]=arguments[k];return s.handleLifecycle(\"onEnter\",0,y)},s.handleEntering=function(){for(var f=arguments.length,y=new Array(f),k=0;k\u003cf;k++)y[k]=arguments[k];return s.handleLifecycle(\"onEntering\",0,y)},s.handleEntered=function(){for(var f=arguments.length,y=new Array(f),k=0;k\u003cf;k++)y[k]=arguments[k];return s.handleLifecycle(\"onEntered\",0,y)},s.handleExit=function(){for(var f=arguments.length,y=new Array(f),k=0;k\u003cf;k++)y[k]=arguments[k];return s.handleLifecycle(\"onExit\",1,y)},s.handleExiting=function(){for(var f=arguments.length,y=new Array(f),k=0;k\u003cf;k++)y[k]=arguments[k];return s.handleLifecycle(\"onExiting\",1,y)},s.handleExited=function(){for(var f=arguments.length,y=new Array(f),k=0;k\u003cf;k++)y[k]=arguments[k];return s.handleLifecycle(\"onExited\",1,y)},s}var a=e.prototype;return a.handleLifecycle=function(o,u,h){var f,y=this.props.children,k=Ko.default.Children.toArray(y)[u];if(k.props[o]\u0026\u0026(f=k.props)[o].apply(f,h),this.props[o]){var q=k.props.nodeRef?void 0:uue.default.findDOMNode(this);this.props[o](q)}},a.render=function(){var o=this.props,u=o.children,h=o.in,f=pue(o,[\"children\",\"in\"]),y=Ko.default.Children.toArray(u),k=y[0],q=y[1];return delete f.onEnter,delete f.onEntering,delete f.onEntered,delete f.onExit,delete f.onExiting,delete f.onExited,Ko.default.createElement(lue.default,f,h?Ko.default.cloneElement(k,{key:\"first\",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):Ko.default.cloneElement(q,{key:\"second\",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},e}(Ko.default.Component);X3.propTypes={};var due=X3;ul.default=due;Z3.exports=ul.default});var Q3=v(Qo=\u003e{\"use strict\";Qo.__esModule=!0;Qo.default=Qo.modes=void 0;var Pr=Ck(ot()),Vbe=Ck(It()),Hr=_f(),fue=Ck(vf()),bf,xf;function Ck(r){return r\u0026\u0026r.__esModule?r:{default:r}}function mue(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}function vue(r,e){return!(r===e||Pr.default.isValidElement(r)\u0026\u0026Pr.default.isValidElement(e)\u0026\u0026r.key!=null\u0026\u0026r.key===e.key)}var di={out:\"out-in\",in:\"in-out\"};Qo.modes=di;var wf=function(e,a,s){return function(){var o;e.props[a]\u0026\u0026(o=e.props)[a].apply(o,arguments),s()}},gue=(bf={},bf[di.out]=function(r){var e=r.current,a=r.changeState;return Pr.default.cloneElement(e,{in:!1,onExited:wf(e,\"onExited\",function(){a(Hr.ENTERING,null)})})},bf[di.in]=function(r){var e=r.current,a=r.changeState,s=r.children;return[e,Pr.default.cloneElement(s,{in:!0,onEntered:wf(s,\"onEntered\",function(){a(Hr.ENTERING)})})]},bf),yue=(xf={},xf[di.out]=function(r){var e=r.children,a=r.changeState;return Pr.default.cloneElement(e,{in:!0,onEntered:wf(e,\"onEntered\",function(){a(Hr.ENTERED,Pr.default.cloneElement(e,{in:!0}))})})},xf[di.in]=function(r){var e=r.current,a=r.children,s=r.changeState;return[Pr.default.cloneElement(e,{in:!1,onExited:wf(e,\"onExited\",function(){s(Hr.ENTERED,Pr.default.cloneElement(a,{in:!0}))})}),Pr.default.cloneElement(a,{in:!0})]},xf),Ak=function(r){mue(e,r);function e(){for(var s,o=arguments.length,u=new Array(o),h=0;h\u003co;h++)u[h]=arguments[h];return s=r.call.apply(r,[this].concat(u))||this,s.state={status:Hr.ENTERED,current:null},s.appeared=!1,s.changeState=function(f,y){y===void 0\u0026\u0026(y=s.state.current),s.setState({status:f,current:y})},s}var a=e.prototype;return a.componentDidMount=function(){this.appeared=!0},e.getDerivedStateFromProps=function(o,u){return o.children==null?{current:null}:u.status===Hr.ENTERING\u0026\u0026o.mode===di.in?{status:Hr.ENTERING}:u.current\u0026\u0026vue(u.current,o.children)?{status:Hr.EXITING}:{current:Pr.default.cloneElement(o.children,{in:!0})}},a.render=function(){var o=this.props,u=o.children,h=o.mode,f=this.state,y=f.status,k=f.current,q={children:u,current:k,changeState:this.changeState,status:y},x;switch(y){case Hr.ENTERING:x=yue[h](q);break;case Hr.EXITING:x=gue[h](q);break;case Hr.ENTERED:x=k}return Pr.default.createElement(fue.default.Provider,{value:{isMounting:!this.appeared}},x)},e}(Pr.default.Component);Ak.propTypes={};Ak.defaultProps={mode:di.out};var _ue=Ak;Qo.default=_ue});var J3=v(Qn=\u003e{\"use strict\";Qn.__esModule=!0;Qn.config=Qn.Transition=Qn.TransitionGroup=Qn.SwitchTransition=Qn.ReplaceTransition=Qn.CSSTransition=void 0;var kue=Jo(G3());Qn.CSSTransition=kue.default;var Nue=Jo(K3());Qn.ReplaceTransition=Nue.default;var bue=Jo(Q3());Qn.SwitchTransition=bue.default;var xue=Jo(Ok());Qn.TransitionGroup=xue.default;var wue=Jo(_f());Qn.Transition=wue.default;var que=Jo(_k());Qn.config=que.default;function Jo(r){return r\u0026\u0026r.__esModule?r:{default:r}}});var tI=v(qf=\u003e{\"use strict\";var Rk=Se(),Tue=en();Object.defineProperty(qf,\"__esModule\",{value:!0});qf.default=void 0;var ll=Tue(ot()),Bbe=Rk(It()),eI=Rk(ms()),Sue=Rk(lf()),Mue=typeof window==\"undefined\"?ll.useEffect:ll.useLayoutEffect;function Pue(r){var e=r.classes,a=r.pulsate,s=a===void 0?!1:a,o=r.rippleX,u=r.rippleY,h=r.rippleSize,f=r.in,y=r.onExited,k=y===void 0?function(){}:y,q=r.timeout,x=ll.useState(!1),M=x[0],L=x[1],j=(0,eI.default)(e.ripple,e.rippleVisible,s\u0026\u0026e.ripplePulsate),B={width:h,height:h,top:-(h/2)+u,left:-(h/2)+o},ee=(0,eI.default)(e.child,M\u0026\u0026e.childLeaving,s\u0026\u0026e.childPulsate),de=(0,Sue.default)(k);return Mue(function(){if(!f){L(!0);var ie=setTimeout(de,q);return function(){clearTimeout(ie)}}},[de,f,q]),ll.createElement(\"span\",{className:j,style:B},ll.createElement(\"span\",{className:ee}))}var Oue=Pue;qf.default=Oue});var aI=v(Ss=\u003e{\"use strict\";var Cue=en(),fi=Se();Object.defineProperty(Ss,\"__esModule\",{value:!0});Ss.default=Ss.styles=Ss.DELAY_RIPPLE=void 0;var Aue=fi(yt()),Rue=fi(Du()),Eue=fi(Mn()),cn=Cue(ot()),Gbe=fi(It()),jue=J3(),Due=fi(ms()),Iue=fi(Uo()),Fue=fi(tI()),Ek=550,nI=80;Ss.DELAY_RIPPLE=nI;var rI=function(e){return{root:{overflow:\"hidden\",pointerEvents:\"none\",position:\"absolute\",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:\"inherit\"},ripple:{opacity:0,position:\"absolute\"},rippleVisible:{opacity:.3,transform:\"scale(1)\",animation:\"$enter \".concat(Ek,\"ms \").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:\"\".concat(e.transitions.duration.shorter,\"ms\")},child:{opacity:1,display:\"block\",width:\"100%\",height:\"100%\",borderRadius:\"50%\",backgroundColor:\"currentColor\"},childLeaving:{opacity:0,animation:\"$exit \".concat(Ek,\"ms \").concat(e.transitions.easing.easeInOut)},childPulsate:{position:\"absolute\",left:0,top:0,animation:\"$pulsate 2500ms \".concat(e.transitions.easing.easeInOut,\" 200ms infinite\")},\"@keyframes enter\":{\"0%\":{transform:\"scale(0)\",opacity:.1},\"100%\":{transform:\"scale(1)\",opacity:.3}},\"@keyframes exit\":{\"0%\":{opacity:1},\"100%\":{opacity:0}},\"@keyframes pulsate\":{\"0%\":{transform:\"scale(1)\"},\"50%\":{transform:\"scale(0.92)\"},\"100%\":{transform:\"scale(1)\"}}}};Ss.styles=rI;var Vue=cn.forwardRef(function(e,a){var s=e.center,o=s===void 0?!1:s,u=e.classes,h=e.className,f=(0,Eue.default)(e,[\"center\",\"classes\",\"className\"]),y=cn.useState([]),k=y[0],q=y[1],x=cn.useRef(0),M=cn.useRef(null);cn.useEffect(function(){M.current\u0026\u0026(M.current(),M.current=null)},[k]);var L=cn.useRef(!1),j=cn.useRef(null),B=cn.useRef(null),ee=cn.useRef(null);cn.useEffect(function(){return function(){clearTimeout(j.current)}},[]);var de=cn.useCallback(function(R){var H=R.pulsate,$=R.rippleX,se=R.rippleY,ce=R.rippleSize,xe=R.cb;q(function(ke){return[].concat((0,Rue.default)(ke),[cn.createElement(Fue.default,{key:x.current,classes:u,timeout:Ek,pulsate:H,rippleX:$,rippleY:se,rippleSize:ce})])}),x.current+=1,M.current=xe},[u]),ie=cn.useCallback(function(){var R=arguments.length\u003e0\u0026\u0026arguments[0]!==void 0?arguments[0]:{},H=arguments.length\u003e1\u0026\u0026arguments[1]!==void 0?arguments[1]:{},$=arguments.length\u003e2?arguments[2]:void 0,se=H.pulsate,ce=se===void 0?!1:se,xe=H.center,ke=xe===void 0?o||H.pulsate:xe,Re=H.fakeElement,ze=Re===void 0?!1:Re;if(R.type===\"mousedown\"\u0026\u0026L.current){L.current=!1;return}R.type===\"touchstart\"\u0026\u0026(L.current=!0);var He=ze?null:ee.current,X=He?He.getBoundingClientRect():{width:0,height:0,left:0,top:0},oe,Y,J;if(ke||R.clientX===0\u0026\u0026R.clientY===0||!R.clientX\u0026\u0026!R.touches)oe=Math.round(X.width/2),Y=Math.round(X.height/2);else{var ge=R.touches?R.touches[0]:R,me=ge.clientX,We=ge.clientY;oe=Math.round(me-X.left),Y=Math.round(We-X.top)}if(ke)J=Math.sqrt((2*Math.pow(X.width,2)+Math.pow(X.height,2))/3),J%2==0\u0026\u0026(J+=1);else{var Qe=Math.max(Math.abs((He?He.clientWidth:0)-oe),oe)*2+2,ft=Math.max(Math.abs((He?He.clientHeight:0)-Y),Y)*2+2;J=Math.sqrt(Math.pow(Qe,2)+Math.pow(ft,2))}R.touches?B.current===null\u0026\u0026(B.current=function(){de({pulsate:ce,rippleX:oe,rippleY:Y,rippleSize:J,cb:$})},j.current=setTimeout(function(){B.current\u0026\u0026(B.current(),B.current=null)},nI)):de({pulsate:ce,rippleX:oe,rippleY:Y,rippleSize:J,cb:$})},[o,de]),pe=cn.useCallback(function(){ie({},{pulsate:!0})},[ie]),G=cn.useCallback(function(R,H){if(clearTimeout(j.current),R.type===\"touchend\"\u0026\u0026B.current){R.persist(),B.current(),B.current=null,j.current=setTimeout(function(){G(R,H)});return}B.current=null,q(function($){return $.length\u003e0?$.slice(1):$}),M.current=H},[]);return cn.useImperativeHandle(a,function(){return{pulsate:pe,start:ie,stop:G}},[pe,ie,G]),cn.createElement(\"span\",(0,Aue.default)({className:(0,Due.default)(u.root,h),ref:ee},f),cn.createElement(jue.TransitionGroup,{component:null,exit:!0},k))}),Wue=(0,Iue.default)(rI,{flip:!1,name:\"MuiTouchRipple\"})(cn.memo(Vue));Ss.default=Wue});var cI=v(ec=\u003e{\"use strict\";var sI=en(),fa=Se();Object.defineProperty(ec,\"__esModule\",{value:!0});ec.default=ec.styles=void 0;var iI=fa(yt()),Lue=fa(Mn()),Yr=sI(ot()),$be=fa(It()),Bue=sI(nl()),zue=fa(ms()),Hbe=tn(),jk=fa(dk()),Tf=fa(lf()),Ybe=fa(vk()),Gue=fa(Uo()),Uue=fa(yk()),$ue=fa(aI()),oI={root:{display:\"inline-flex\",alignItems:\"center\",justifyContent:\"center\",position:\"relative\",WebkitTapHighlightColor:\"transparent\",backgroundColor:\"transparent\",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:\"pointer\",userSelect:\"none\",verticalAlign:\"middle\",\"-moz-appearance\":\"none\",\"-webkit-appearance\":\"none\",textDecoration:\"none\",color:\"inherit\",\"\u0026::-moz-focus-inner\":{borderStyle:\"none\"},\"\u0026$disabled\":{pointerEvents:\"none\",cursor:\"default\"},\"@media print\":{colorAdjust:\"exact\"}},disabled:{},focusVisible:{}};ec.styles=oI;var Hue=Yr.forwardRef(function(e,a){var s=e.action,o=e.buttonRef,u=e.centerRipple,h=u===void 0?!1:u,f=e.children,y=e.classes,k=e.className,q=e.component,x=q===void 0?\"button\":q,M=e.disabled,L=M===void 0?!1:M,j=e.disableRipple,B=j===void 0?!1:j,ee=e.disableTouchRipple,de=ee===void 0?!1:ee,ie=e.focusRipple,pe=ie===void 0?!1:ie,G=e.focusVisibleClassName,R=e.onBlur,H=e.onClick,$=e.onFocus,se=e.onFocusVisible,ce=e.onKeyDown,xe=e.onKeyUp,ke=e.onMouseDown,Re=e.onMouseLeave,ze=e.onMouseUp,He=e.onTouchEnd,X=e.onTouchMove,oe=e.onTouchStart,Y=e.onDragLeave,J=e.tabIndex,ge=J===void 0?0:J,me=e.TouchRippleProps,We=e.type,Qe=We===void 0?\"button\":We,ft=(0,Lue.default)(e,[\"action\",\"buttonRef\",\"centerRipple\",\"children\",\"classes\",\"className\",\"component\",\"disabled\",\"disableRipple\",\"disableTouchRipple\",\"focusRipple\",\"focusVisibleClassName\",\"onBlur\",\"onClick\",\"onFocus\",\"onFocusVisible\",\"onKeyDown\",\"onKeyUp\",\"onMouseDown\",\"onMouseLeave\",\"onMouseUp\",\"onTouchEnd\",\"onTouchMove\",\"onTouchStart\",\"onDragLeave\",\"tabIndex\",\"TouchRippleProps\",\"type\"]),le=Yr.useRef(null);function Ne(){return Bue.findDOMNode(le.current)}var Me=Yr.useRef(null),Be=Yr.useState(!1),Oe=Be[0],Pe=Be[1];L\u0026\u0026Oe\u0026\u0026Pe(!1);var tt=(0,Uue.default)(),mt=tt.isFocusVisible,Zt=tt.onBlurVisible,An=tt.ref;Yr.useImperativeHandle(s,function(){return{focusVisible:function(){Pe(!0),le.current.focus()}}},[]),Yr.useEffect(function(){Oe\u0026\u0026pe\u0026\u0026!B\u0026\u0026Me.current.pulsate()},[B,pe,Oe]);function Et(Ze,ga){var uc=arguments.length\u003e2\u0026\u0026arguments[2]!==void 0?arguments[2]:de;return(0,Tf.default)(function(bi){ga\u0026\u0026ga(bi);var xi=uc;return!xi\u0026\u0026Me.current\u0026\u0026Me.current[Ze](bi),!0})}var Rn=Et(\"start\",ke),En=Et(\"stop\",Y),Or=Et(\"stop\",ze),mr=Et(\"stop\",function(Ze){Oe\u0026\u0026Ze.preventDefault(),Re\u0026\u0026Re(Ze)}),Cr=Et(\"start\",oe),vt=Et(\"stop\",He),er=Et(\"stop\",X),Fn=Et(\"stop\",function(Ze){Oe\u0026\u0026(Zt(Ze),Pe(!1)),R\u0026\u0026R(Ze)},!1),La=(0,Tf.default)(function(Ze){le.current||(le.current=Ze.currentTarget),mt(Ze)\u0026\u0026(Pe(!0),se\u0026\u0026se(Ze)),$\u0026\u0026$(Ze)}),Ba=function(){var ga=Ne();return x\u0026\u0026x!==\"button\"\u0026\u0026!(ga.tagName===\"A\"\u0026\u0026ga.href)},ma=Yr.useRef(!1),va=(0,Tf.default)(function(Ze){pe\u0026\u0026!ma.current\u0026\u0026Oe\u0026\u0026Me.current\u0026\u0026Ze.key===\" \"\u0026\u0026(ma.current=!0,Ze.persist(),Me.current.stop(Ze,function(){Me.current.start(Ze)})),Ze.target===Ze.currentTarget\u0026\u0026Ba()\u0026\u0026Ze.key===\" \"\u0026\u0026Ze.preventDefault(),ce\u0026\u0026ce(Ze),Ze.target===Ze.currentTarget\u0026\u0026Ba()\u0026\u0026Ze.key===\"Enter\"\u0026\u0026!L\u0026\u0026(Ze.preventDefault(),H\u0026\u0026H(Ze))}),oc=(0,Tf.default)(function(Ze){pe\u0026\u0026Ze.key===\" \"\u0026\u0026Me.current\u0026\u0026Oe\u0026\u0026!Ze.defaultPrevented\u0026\u0026(ma.current=!1,Ze.persist(),Me.current.stop(Ze,function(){Me.current.pulsate(Ze)})),xe\u0026\u0026xe(Ze),H\u0026\u0026Ze.target===Ze.currentTarget\u0026\u0026Ba()\u0026\u0026Ze.key===\" \"\u0026\u0026!Ze.defaultPrevented\u0026\u0026H(Ze)}),Ar=x;Ar===\"button\"\u0026\u0026ft.href\u0026\u0026(Ar=\"a\");var Rr={};Ar===\"button\"?(Rr.type=Qe,Rr.disabled=L):((Ar!==\"a\"||!ft.href)\u0026\u0026(Rr.role=\"button\"),Rr[\"aria-disabled\"]=L);var _i=(0,jk.default)(o,a),ki=(0,jk.default)(An,le),za=(0,jk.default)(_i,ki),Os=Yr.useState(!1),Ga=Os[0],cc=Os[1];Yr.useEffect(function(){cc(!0)},[]);var Ni=Ga\u0026\u0026!B\u0026\u0026!L;return Yr.createElement(Ar,(0,iI.default)({className:(0,zue.default)(y.root,k,Oe\u0026\u0026[y.focusVisible,G],L\u0026\u0026y.disabled),onBlur:Fn,onClick:H,onFocus:La,onKeyDown:va,onKeyUp:oc,onMouseDown:Rn,onMouseLeave:mr,onMouseUp:Or,onDragLeave:En,onTouchEnd:vt,onTouchMove:er,onTouchStart:Cr,ref:za,tabIndex:L?-1:ge},Rr,ft),f,Ni?Yr.createElement($ue.default,(0,iI.default)({ref:Me,center:h},me)):null)}),Yue=(0,Gue.default)(oI,{name:\"MuiButtonBase\"})(Hue);ec.default=Yue});var uI=v(Dk=\u003e{\"use strict\";var Xue=Se();Object.defineProperty(Dk,\"__esModule\",{value:!0});Object.defineProperty(Dk,\"default\",{enumerable:!0,get:function(){return Zue.default}});var Zue=Xue(cI())});var pl=v(Ik=\u003e{\"use strict\";Object.defineProperty(Ik,\"__esModule\",{value:!0});Ik.default=Que;var Kue=tn();function Que(r){if(typeof r!=\"string\")throw new Error((0,Kue.formatMuiErrorMessage)(7));return r.charAt(0).toUpperCase()+r.slice(1)}});var dI=v(tc=\u003e{\"use strict\";var Jue=en(),mi=Se();Object.defineProperty(tc,\"__esModule\",{value:!0});tc.default=tc.styles=void 0;var ele=mi(Mn()),lI=mi(yt()),Fk=Jue(ot()),Qbe=mi(It()),pI=mi(ms()),Jbe=tn(),tle=mi(Uo()),nle=mi(uI()),rle=mi(pl()),hI=function(e){return{root:(0,lI.default)({},e.typography.button,{boxSizing:\"border-box\",minHeight:36,transition:e.transitions.create([\"background-color\",\"box-shadow\",\"border\"],{duration:e.transitions.duration.short}),borderRadius:\"50%\",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],\"\u0026:active\":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],\"\u0026:hover\":{backgroundColor:e.palette.grey.A100,\"@media (hover: none)\":{backgroundColor:e.palette.grey[300]},\"\u0026$disabled\":{backgroundColor:e.palette.action.disabledBackground},textDecoration:\"none\"},\"\u0026$focusVisible\":{boxShadow:e.shadows[6]},\"\u0026$disabled\":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:\"100%\",display:\"inherit\",alignItems:\"inherit\",justifyContent:\"inherit\"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,\"\u0026:hover\":{backgroundColor:e.palette.primary.dark,\"@media (hover: none)\":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,\"\u0026:hover\":{backgroundColor:e.palette.secondary.dark,\"@media (hover: none)\":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:48/2,padding:\"0 16px\",width:\"auto\",minHeight:\"auto\",minWidth:48,height:48,\"\u0026$sizeSmall\":{width:\"auto\",padding:\"0 8px\",borderRadius:34/2,minWidth:34,height:34},\"\u0026$sizeMedium\":{width:\"auto\",padding:\"0 16px\",borderRadius:40/2,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:\"inherit\"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}};tc.styles=hI;var ale=Fk.forwardRef(function(e,a){var s=e.children,o=e.classes,u=e.className,h=e.color,f=h===void 0?\"default\":h,y=e.component,k=y===void 0?\"button\":y,q=e.disabled,x=q===void 0?!1:q,M=e.disableFocusRipple,L=M===void 0?!1:M,j=e.focusVisibleClassName,B=e.size,ee=B===void 0?\"large\":B,de=e.variant,ie=de===void 0?\"circular\":de,pe=(0,ele.default)(e,[\"children\",\"classes\",\"className\",\"color\",\"component\",\"disabled\",\"disableFocusRipple\",\"focusVisibleClassName\",\"size\",\"variant\"]);return Fk.createElement(nle.default,(0,lI.default)({className:(0,pI.default)(o.root,u,ee!==\"large\"\u0026\u0026o[\"size\".concat((0,rle.default)(ee))],x\u0026\u0026o.disabled,ie===\"extended\"\u0026\u0026o.extended,{primary:o.primary,secondary:o.secondary,inherit:o.colorInherit}[f]),component:k,disabled:x,focusRipple:!L,focusVisibleClassName:(0,pI.default)(o.focusVisible,j),ref:a},pe),Fk.createElement(\"span\",{className:o.label},s))}),sle=(0,tle.default)(hI,{name:\"MuiFab\"})(ale);tc.default=sle});var fI=v(Vk=\u003e{\"use strict\";var ile=Se();Object.defineProperty(Vk,\"__esModule\",{value:!0});Object.defineProperty(Vk,\"default\",{enumerable:!0,get:function(){return ole.default}});var ole=ile(dI())});var mI=v(Wk=\u003e{\"use strict\";Object.defineProperty(Wk,\"__esModule\",{value:!0});Wk.default=cle;function cle(){for(var r=arguments.length,e=new Array(r),a=0;a\u003cr;a++)e[a]=arguments[a];return e.reduce(function(s,o){return o==null?s:function(){for(var h=arguments.length,f=new Array(h),y=0;y\u003ch;y++)f[y]=arguments[y];s.apply(this,f),o.apply(this,f)}},function(){})}});var _I=v(rc=\u003e{\"use strict\";var ule=en(),nc=Se();Object.defineProperty(rc,\"__esModule\",{value:!0});rc.default=rc.styles=void 0;var lle=nc(yt()),ple=nc(Mn()),Lk=ule(ot()),rxe=nc(It()),hle=nc(ms()),axe=tn(),dle=nc(Uo()),vI=nc(pl()),gI=function(e){return{root:{userSelect:\"none\",width:\"1em\",height:\"1em\",display:\"inline-block\",fill:\"currentColor\",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create(\"fill\",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:\"inherit\"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}};rc.styles=gI;var yI=Lk.forwardRef(function(e,a){var s=e.children,o=e.classes,u=e.className,h=e.color,f=h===void 0?\"inherit\":h,y=e.component,k=y===void 0?\"svg\":y,q=e.fontSize,x=q===void 0?\"medium\":q,M=e.htmlColor,L=e.titleAccess,j=e.viewBox,B=j===void 0?\"0 0 24 24\":j,ee=(0,ple.default)(e,[\"children\",\"classes\",\"className\",\"color\",\"component\",\"fontSize\",\"htmlColor\",\"titleAccess\",\"viewBox\"]);return Lk.createElement(k,(0,lle.default)({className:(0,hle.default)(o.root,u,f!==\"inherit\"\u0026\u0026o[\"color\".concat((0,vI.default)(f))],x!==\"default\"\u0026\u0026x!==\"medium\"\u0026\u0026o[\"fontSize\".concat((0,vI.default)(x))]),focusable:\"false\",viewBox:B,color:M,\"aria-hidden\":L?void 0:!0,role:L?\"img\":void 0,ref:a},ee),s,L?Lk.createElement(\"title\",null,L):null)});yI.muiName=\"SvgIcon\";var fle=(0,dle.default)(gI,{name:\"MuiSvgIcon\"})(yI);rc.default=fle});var kI=v(Bk=\u003e{\"use strict\";var mle=Se();Object.defineProperty(Bk,\"__esModule\",{value:!0});Object.defineProperty(Bk,\"default\",{enumerable:!0,get:function(){return vle.default}});var vle=mle(_I())});var bI=v(Uk=\u003e{\"use strict\";var zk=Se();Object.defineProperty(Uk,\"__esModule\",{value:!0});Uk.default=yle;var gle=zk(yt()),Gk=zk(ot()),NI=zk(kI());function yle(r,e){var a=function(o,u){return Gk.default.createElement(NI.default,(0,gle.default)({ref:u},o),r)};return a.muiName=NI.default.muiName,Gk.default.memo(Gk.default.forwardRef(a))}});var xI=v($k=\u003e{\"use strict\";Object.defineProperty($k,\"__esModule\",{value:!0});$k.default=_le;function _le(r){var e=arguments.length\u003e1\u0026\u0026arguments[1]!==void 0?arguments[1]:166,a;function s(){for(var o=arguments.length,u=new Array(o),h=0;h\u003co;h++)u[h]=arguments[h];var f=this,y=function(){r.apply(f,u)};clearTimeout(a),a=setTimeout(y,e)}return s.clear=function(){clearTimeout(a)},s}});var wI=v(Hk=\u003e{\"use strict\";var kle=en();Object.defineProperty(Hk,\"__esModule\",{value:!0});Hk.default=ble;var Nle=kle(ot());function ble(r,e){return Nle.isValidElement(r)\u0026\u0026e.indexOf(r.type.muiName)!==-1}});var Xk=v(Yk=\u003e{\"use strict\";Object.defineProperty(Yk,\"__esModule\",{value:!0});Yk.default=xle;function xle(r){return r\u0026\u0026r.ownerDocument||document}});var qI=v(Zk=\u003e{\"use strict\";var wle=Se();Object.defineProperty(Zk,\"__esModule\",{value:!0});Zk.default=Tle;var qle=wle(Xk());function Tle(r){var e=(0,qle.default)(r);return e.defaultView||window}});var TI=v(Kk=\u003e{\"use strict\";Object.defineProperty(Kk,\"__esModule\",{value:!0});Kk.default=Sle;function Sle(r){return function(){return null};var e}});var SI=v(Qk=\u003e{\"use strict\";Object.defineProperty(Qk,\"__esModule\",{value:!0});Qk.default=Mle;function Mle(r,e,a,s,o){return null;var u}});var MI=v(e0=\u003e{\"use strict\";var Ple=en();Object.defineProperty(e0,\"__esModule\",{value:!0});e0.default=Ole;var Jk=Ple(ot());function Ole(r){var e=r.controlled,a=r.default,s=r.name,o=r.state,u=o===void 0?\"value\":o,h=Jk.useRef(e!==void 0),f=h.current,y=Jk.useState(a),k=y[0],q=y[1],x=f?e:k;if(!1)var M,L;var j=Jk.useCallback(function(B){f||q(B)},[]);return[x,j]}});var OI=v(t0=\u003e{\"use strict\";var Cle=en();Object.defineProperty(t0,\"__esModule\",{value:!0});t0.default=Ale;var PI=Cle(ot());function Ale(r){var e=PI.useState(r),a=e[0],s=e[1],o=r||a;return PI.useEffect(function(){a==null\u0026\u0026s(\"mui-\".concat(Math.round(Math.random()*1e5)))},[a]),o}});var CI=v(vn=\u003e{\"use strict\";var Cn=Se();Object.defineProperty(vn,\"__esModule\",{value:!0});Object.defineProperty(vn,\"capitalize\",{enumerable:!0,get:function(){return Rle.default}});Object.defineProperty(vn,\"createChainedFunction\",{enumerable:!0,get:function(){return Ele.default}});Object.defineProperty(vn,\"createSvgIcon\",{enumerable:!0,get:function(){return jle.default}});Object.defineProperty(vn,\"debounce\",{enumerable:!0,get:function(){return Dle.default}});Object.defineProperty(vn,\"deprecatedPropType\",{enumerable:!0,get:function(){return Ile.default}});Object.defineProperty(vn,\"isMuiElement\",{enumerable:!0,get:function(){return Fle.default}});Object.defineProperty(vn,\"ownerDocument\",{enumerable:!0,get:function(){return Vle.default}});Object.defineProperty(vn,\"ownerWindow\",{enumerable:!0,get:function(){return Wle.default}});Object.defineProperty(vn,\"requirePropFactory\",{enumerable:!0,get:function(){return Lle.default}});Object.defineProperty(vn,\"setRef\",{enumerable:!0,get:function(){return Ble.default}});Object.defineProperty(vn,\"unsupportedProp\",{enumerable:!0,get:function(){return zle.default}});Object.defineProperty(vn,\"useControlled\",{enumerable:!0,get:function(){return Gle.default}});Object.defineProperty(vn,\"useEventCallback\",{enumerable:!0,get:function(){return Ule.default}});Object.defineProperty(vn,\"useForkRef\",{enumerable:!0,get:function(){return $le.default}});Object.defineProperty(vn,\"unstable_useId\",{enumerable:!0,get:function(){return Hle.default}});Object.defineProperty(vn,\"useIsFocusVisible\",{enumerable:!0,get:function(){return Yle.default}});var Rle=Cn(pl()),Ele=Cn(mI()),jle=Cn(bI()),Dle=Cn(xI()),Ile=Cn(vk()),Fle=Cn(wI()),Vle=Cn(Xk()),Wle=Cn(qI()),Lle=Cn(TI()),Ble=Cn(pk()),zle=Cn(SI()),Gle=Cn(MI()),Ule=Cn(lf()),$le=Cn(dk()),Hle=Cn(OI()),Yle=Cn(yk())});var r0=v(n0=\u003e{\"use strict\";Object.defineProperty(n0,\"__esModule\",{value:!0});Object.defineProperty(n0,\"default\",{enumerable:!0,get:function(){return Xle.createSvgIcon}});var Xle=CI()});var AI=v(Sf=\u003e{\"use strict\";var Zle=Se(),Kle=en();Object.defineProperty(Sf,\"__esModule\",{value:!0});Sf.default=void 0;var Qle=Kle(ot()),Jle=Zle(r0()),epe=(0,Jle.default)(Qle.createElement(\"path\",{d:\"M8 5v14l11-7z\"}),\"PlayArrow\");Sf.default=epe});var RI=v(Mf=\u003e{\"use strict\";var tpe=Se(),npe=en();Object.defineProperty(Mf,\"__esModule\",{value:!0});Mf.default=void 0;var rpe=npe(ot()),ape=tpe(r0()),spe=(0,ape.default)(rpe.createElement(\"path\",{d:\"M6 6h12v12H6z\"}),\"Stop\");Mf.default=spe});var II=v(sc=\u003e{\"use strict\";var ipe=en(),ac=Se();Object.defineProperty(sc,\"__esModule\",{value:!0});sc.default=sc.styles=void 0;var EI=ac(yt()),ope=ac(Mn()),Pf=ipe(ot()),kxe=ac(It()),jI=ac(ms()),Nxe=tn(),cpe=ac(Uo()),upe=ac(pl()),Ms=44,DI=function(e){return{root:{display:\"inline-block\"},static:{transition:e.transitions.create(\"transform\")},indeterminate:{animation:\"$circular-rotate 1.4s linear infinite\"},determinate:{transition:e.transitions.create(\"transform\")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:\"block\"},circle:{stroke:\"currentColor\"},circleStatic:{transition:e.transitions.create(\"stroke-dashoffset\")},circleIndeterminate:{animation:\"$circular-dash 1.4s ease-in-out infinite\",strokeDasharray:\"80px, 200px\",strokeDashoffset:\"0px\"},circleDeterminate:{transition:e.transitions.create(\"stroke-dashoffset\")},\"@keyframes circular-rotate\":{\"0%\":{transformOrigin:\"50% 50%\"},\"100%\":{transform:\"rotate(360deg)\"}},\"@keyframes circular-dash\":{\"0%\":{strokeDasharray:\"1px, 200px\",strokeDashoffset:\"0px\"},\"50%\":{strokeDasharray:\"100px, 200px\",strokeDashoffset:\"-15px\"},\"100%\":{strokeDasharray:\"100px, 200px\",strokeDashoffset:\"-125px\"}},circleDisableShrink:{animation:\"none\"}}};sc.styles=DI;var lpe=Pf.forwardRef(function(e,a){var s=e.classes,o=e.className,u=e.color,h=u===void 0?\"primary\":u,f=e.disableShrink,y=f===void 0?!1:f,k=e.size,q=k===void 0?40:k,x=e.style,M=e.thickness,L=M===void 0?3.6:M,j=e.value,B=j===void 0?0:j,ee=e.variant,de=ee===void 0?\"indeterminate\":ee,ie=(0,ope.default)(e,[\"classes\",\"className\",\"color\",\"disableShrink\",\"size\",\"style\",\"thickness\",\"value\",\"variant\"]),pe={},G={},R={};if(de===\"determinate\"||de===\"static\"){var H=2*Math.PI*((Ms-L)/2);pe.strokeDasharray=H.toFixed(3),R[\"aria-valuenow\"]=Math.round(B),pe.strokeDashoffset=\"\".concat(((100-B)/100*H).toFixed(3),\"px\"),G.transform=\"rotate(-90deg)\"}return Pf.createElement(\"div\",(0,EI.default)({className:(0,jI.default)(s.root,o,h!==\"inherit\"\u0026\u0026s[\"color\".concat((0,upe.default)(h))],{determinate:s.determinate,indeterminate:s.indeterminate,static:s.static}[de]),style:(0,EI.default)({width:q,height:q},G,x),ref:a,role:\"progressbar\"},R,ie),Pf.createElement(\"svg\",{className:s.svg,viewBox:\"\".concat(Ms/2,\" \").concat(Ms/2,\" \").concat(Ms,\" \").concat(Ms)},Pf.createElement(\"circle\",{className:(0,jI.default)(s.circle,y\u0026\u0026s.circleDisableShrink,{determinate:s.circleDeterminate,indeterminate:s.circleIndeterminate,static:s.circleStatic}[de]),style:pe,cx:Ms,cy:Ms,r:(Ms-L)/2,fill:\"none\",strokeWidth:L})))}),ppe=(0,cpe.default)(DI,{name:\"MuiCircularProgress\",flip:!1})(lpe);sc.default=ppe});var FI=v(a0=\u003e{\"use strict\";var hpe=Se();Object.defineProperty(a0,\"__esModule\",{value:!0});Object.defineProperty(a0,\"default\",{enumerable:!0,get:function(){return dpe.default}});var dpe=hpe(II())});var xpe={};n7(xpe,{default:()=\u003ebpe,frontmatter:()=\u003ekpe});var n=nt(FN());var oA=nt(Kp());function sn(r){return typeof r!=\"object\"||Array.isArray(r)?{value:r}:r}function Br(r){return Array.isArray(r)?r:[r]}function Yc(r,e={}){let a=e.getChildren||vQ,s=e.isDeep||(h=\u003eh.value\u0026\u0026typeof h.value==\"object\"),o=[],u=a(r,e);return u.forEach((h,f)=\u003e{typeof e.mapChild==\"function\"\u0026\u0026(h=e.mapChild({child:h,isLeaf:!s(h),index:f,props:e,siblings:u,parent:r})),s(h)?(o=o.concat(Yc(h,e)),e.includeNonLeaves\u0026\u0026o.push(h)):o.push(h)}),o}function vQ(r){let e=sn(r);return(Br(e.value)||[]).map((s,o,u)=\u003e({...sn(s),path:(e.path||[]).concat([[o,u.length]])}))}var Lv=nt(aa());function Bv(r){let e=sn(r);if(e.type\u0026\u0026e.type!==\"sequential\"||!e.value\u0026\u0026!e.sequential)return e;if(e.value\u0026\u0026e.sequential)throw new Error(\"cannot set value together with sequential\");let a=e.sequential||e.value;return delete e.sequential,{...e,value:a}}function zv(r,e=[]){let a=Bv(r);if(!a.value)return a;let s=Br(a.value||[]),o=s.map(h=\u003esn(h).duration??1),u=(0,Lv.sum)(o);return{...a,value:s.map((h,f)=\u003e{let y=(0,Lv.sum)(o.slice(0,f));h=sn(h);let k;return k=(a.path||[]).concat([[y,o[f],u]]),{...h,path:k}})}}var yC=nt(aa());function Gv(r){if(typeof r!=\"object\")return r;let e=r;if(e.type===\"parallel\"||e.parallel){if(e.value\u0026\u0026e.parallel)throw new Error(\"cannot set value together with parallel\");e.value=e.parallel||e.value,e.type=\"parallel\",delete e.parallel}return e}function Uv(r){let e=Gv(r);if(typeof e!=\"object\"||e.type!==\"parallel\")return e;let a=sn(e),s=Br(a.value||[]),o=s.map(h=\u003esn(h).duration??1),u=(0,yC.max)(o);return{...a,value:s.map((h,f)=\u003e{h=sn(h);let y;return y=(a.path||[]).concat([[0,o[f],u]]),{...h,path:y}})}}var sA=nt(Kp()),iA=nt(yg());var dh=nt(yg());var JC=nt(aa());function _g(r){return Array.isArray(r)?r:r?.parallel||r?.sequential}function eA(r,e){return Array.isArray(r)?e:r.parallel?{...r,parallel:e}:{...r,sequential:e}}var fh=nt(Fc()),kg=nt(Zp()),Kc=nt(ss()),CJ=r=\u003e!!_g(r),tA=(0,dh.makeZipper)(CJ,_g,eA),{isEnd:AJ,isLeaf:RJ,next:nA,root:EJ,up:cye,down:uye,isTop:lye}=dh.zip,rA=(0,Kc.default)((r,e)=\u003e(0,fh.default)((0,kg.default)(AJ,(0,fh.default)(r,nA)),EJ)(e)),jJ=(0,Kc.default)((r,e)=\u003erA((0,fh.default)((0,kg.default)(RJ,nA),r),e)),aA=(0,Kc.default)((r,e)=\u003erA(r,tA(e)).value()),pye=(0,Kc.default)((r,e)=\u003ejJ(r,tA(e)).value());function Qc(r){return e=\u003e{let a=sn(e);return!a[r]||!a.value?a:{...a,value:Br(a.value).map(s=\u003e{let o=sn(s);return{...o,[r]:o[r]||a[r]}})}}}function Jc(r){return({child:e,parent:a})=\u003ee?.[r]??a?.[r]?{...e,[r]:e[r]??a[r]}:e}function DJ(r){return Array.isArray(r)?{sequential:r}:typeof r==\"object\"?r:{value:r}}var vye=(0,sA.curry)((r,e)=\u003eaA(a=\u003e{let s=a.up?.()?.value();return s?.[r]===void 0?a:iA.zip.edit(o=\u003e{let u=DJ(o);return{...u,[r]:u[r]??s?.[r]}})(a)},e));function Ng(r,e=1){let a=0,s=e;for(let o=0;o\u003cr.length;o++)a=a+r[o][0]/r[o][2]*s,s*=r[o][1]/r[o][2];return[a,s]}function bg(r,e){return e.forEach(a=\u003e{r=a(r)}),r}function IJ(r,e=[],a={}){return Yc(r,{getChildren:s=\u003e{let o=sn(bg(s,[zv,Uv,Qc(\"color\"),...e]));return(Br(o.value)||[]).map((h,f)=\u003ebg(h,[Bv,Gv]))},...a})}function cs(r,e=[],a={}){let o=sn(r).duration||1;return IJ(r,e,a).map(u=\u003e{let{path:h}=u,[f,y]=Ng(h,o);return{...u,time:f,duration:y,path:h}})}function us(r,e=[],a={}){let o=sn(r).duration||1;return Yc(r,{getChildren:VJ,isDeep:u=\u003e!!u\u0026\u0026[\"value\",\"parallel\",\"sequential\"].reduce((h,f)=\u003eh||u[f]\u0026\u0026typeof u[f]==\"object\",!1),mapChild:FJ(e),...a}).map(u=\u003e{let h=u?.path||[[0,1,1]],[f,y]=Ng(h,o);return{...u,time:f,duration:y,path:h}})}function FJ(r=[]){return e=\u003e(r.forEach(a=\u003e{e.child=a(e)}),e.child)}function VJ(r){let e=sn(bg(r,[zv,Uv]));return Br(e.value)||[]}var qye=(0,oA.curry)((r,e)=\u003eus(e,r));var qg=nt(Ca());var Xn=nt(Ca());var tu={m7:[\"3m 5P 7m 9M\",\"7m 9M 10m 12P\"],\"7\":[\"3M 6M 7m 9M\",\"7m 9M 10M 13M\"],\"^7\":[\"3M 5P 7M 9M\",\"7M 9M 10M 12P\"],\"69\":[\"3M 5P 6A 9M\"],m7b5:[\"3m 5d 7m 8P\",\"7m 8P 10m 12d\"],\"7b9\":[\"3M 6m 7m 9m\",\"7m 9m 10M 13m\"],\"7b13\":[\"3M 6m 7m 9m\",\"7m 9m 10M 13m\"],o7:[\"1P 3m 5d 6M\",\"5d 6M 8P 10m\"],\"7#11\":[\"7m 9M 11A 13A\"],\"7#9\":[\"3M 7m 9A\"],mM7:[\"3m 5P 7M 9M\",\"7M 9M 10m 12P\"],m6:[\"3m 5P 6M 9M\",\"6M 9M 10m 12P\"]};var Ks={M:[\"1P 3M 5P\",\"3M 5P 8P\",\"5P 8P 10M\"],m:[\"1P 3m 5P\",\"3m 5P 8P\",\"5P 8P 10m\"],o:[\"1P 3m 5d\",\"3m 5d 8P\",\"5d 8P 10m\"],aug:[\"1P 3m 5A\",\"3m 5A 8P\",\"5A 8P 10m\"]};var Wh=nt(Ca());function VA(r,e){let{alt:a,letter:s}=Wh.Note.get(e),{oct:o}=Wh.Note.get(r),u=Wh.Note.chroma(s)+a;return u\u003e11?o--:u\u003c0\u0026\u0026o++,e+o}function Lh(r,e=tu,a=[\"D3\",\"A4\"]){let{tonic:s,aliases:o}=Xn.Chord.get(r),u=o?.length?Object.keys(e).find(y=\u003eo.includes(y)):r;if(!e[u])return[];let h=e[u].map(y=\u003ey.split(\" \")),f=Xn.Range.chromatic(a);return h.reduce((y,k)=\u003e{let q=k.map(j=\u003eXn.Interval.substract(j,k[0])),x=Xn.Note.transpose(s,k[0]),L=f.filter(j=\u003eXn.Note.chroma(j)===Xn.Note.chroma(x)).filter(j=\u003eXn.Note.midi(Xn.Note.transpose(j,q[q.length-1]))\u003c=Xn.Note.midi(a[1])).map(j=\u003eVA(j,x)).map(j=\u003eq.map(B=\u003eXn.Note.transpose(j,B)));return y.concat(L)},[])}var Tg=({dictionary:r,range:e})=\u003e({child:a,isLeaf:s,props:o,parent:u})=\u003e{if(!s||u.chord||a.plugin!==\"chords\")return a;let h=Lh(a.value,a.dictionary||r,a.range||e);if(o.lastVoicing){let f=y=\u003eMath.abs(qg.Note.midi(o.lastVoicing[o.lastVoicing.length-1])-qg.Note.midi(y[y.length-1]));h=h.sort((y,k)=\u003ef(y)-f(k))}return o.lastVoicing=h[0],{...a,chord:a.value,value:h[0],type:\"parallel\"}};var Ps=nt(ot()),ic=nt(ru());function ps(){return!!(typeof window!=\"undefined\"\u0026\u0026window.document\u0026\u0026window.document.createElement)}var YI=nt(aa()),XI=nt(ot());var Po=nt(ot()),on=nt(Ca());function zA(r,e){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(e).domain(r);break}return this}var Kh=nt(aa());var uR=nt(aa());function Bh(r,e,a){r.prototype=e.prototype=a,a.constructor=r}function Mg(r,e){var a=Object.create(r.prototype);for(var s in e)a[s]=e[s];return a}function au(){}var su=.7,zh=1/su,To=\"\\\\s*([+-]?\\\\d+)\\\\s*\",iu=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",oa=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",WJ=/^#([0-9a-f]{3,8})$/,LJ=new RegExp(\"^rgb\\\\(\"+[To,To,To]+\"\\\\)$\"),BJ=new RegExp(\"^rgb\\\\(\"+[oa,oa,oa]+\"\\\\)$\"),zJ=new RegExp(\"^rgba\\\\(\"+[To,To,To,iu]+\"\\\\)$\"),GJ=new RegExp(\"^rgba\\\\(\"+[oa,oa,oa,iu]+\"\\\\)$\"),UJ=new RegExp(\"^hsl\\\\(\"+[iu,oa,oa]+\"\\\\)$\"),$J=new RegExp(\"^hsla\\\\(\"+[iu,oa,oa,iu]+\"\\\\)$\"),GA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bh(au,hs,{copy:function(r){return Object.assign(new this.constructor,this,r)},displayable:function(){return this.rgb().displayable()},hex:UA,formatHex:UA,formatHsl:HJ,formatRgb:$A,toString:$A});function UA(){return this.rgb().formatHex()}function HJ(){return KA(this).formatHsl()}function $A(){return this.rgb().formatRgb()}function hs(r){var e,a;return r=(r+\"\").trim().toLowerCase(),(e=WJ.exec(r))?(a=e[1].length,e=parseInt(e[1],16),a===6?HA(e):a===3?new ur(e\u003e\u003e8\u002615|e\u003e\u003e4\u0026240,e\u003e\u003e4\u002615|e\u0026240,(e\u002615)\u003c\u003c4|e\u002615,1):a===8?Gh(e\u003e\u003e24\u0026255,e\u003e\u003e16\u0026255,e\u003e\u003e8\u0026255,(e\u0026255)/255):a===4?Gh(e\u003e\u003e12\u002615|e\u003e\u003e8\u0026240,e\u003e\u003e8\u002615|e\u003e\u003e4\u0026240,e\u003e\u003e4\u002615|e\u0026240,((e\u002615)\u003c\u003c4|e\u002615)/255):null):(e=LJ.exec(r))?new ur(e[1],e[2],e[3],1):(e=BJ.exec(r))?new ur(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=zJ.exec(r))?Gh(e[1],e[2],e[3],e[4]):(e=GJ.exec(r))?Gh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=UJ.exec(r))?ZA(e[1],e[2]/100,e[3]/100,1):(e=$J.exec(r))?ZA(e[1],e[2]/100,e[3]/100,e[4]):GA.hasOwnProperty(r)?HA(GA[r]):r===\"transparent\"?new ur(NaN,NaN,NaN,0):null}function HA(r){return new ur(r\u003e\u003e16\u0026255,r\u003e\u003e8\u0026255,r\u0026255,1)}function Gh(r,e,a,s){return s\u003c=0\u0026\u0026(r=e=a=NaN),new ur(r,e,a,s)}function YJ(r){return r instanceof au||(r=hs(r)),r?(r=r.rgb(),new ur(r.r,r.g,r.b,r.opacity)):new ur}function So(r,e,a,s){return arguments.length===1?YJ(r):new ur(r,e,a,s??1)}function ur(r,e,a,s){this.r=+r,this.g=+e,this.b=+a,this.opacity=+s}Bh(ur,So,Mg(au,{brighter:function(r){return r=r==null?zh:Math.pow(zh,r),new ur(this.r*r,this.g*r,this.b*r,this.opacity)},darker:function(r){return r=r==null?su:Math.pow(su,r),new ur(this.r*r,this.g*r,this.b*r,this.opacity)},rgb:function(){return this},displayable:function(){return-.5\u003c=this.r\u0026\u0026this.r\u003c255.5\u0026\u0026-.5\u003c=this.g\u0026\u0026this.g\u003c255.5\u0026\u0026-.5\u003c=this.b\u0026\u0026this.b\u003c255.5\u0026\u00260\u003c=this.opacity\u0026\u0026this.opacity\u003c=1},hex:YA,formatHex:YA,formatRgb:XA,toString:XA}));function YA(){return\"#\"+Pg(this.r)+Pg(this.g)+Pg(this.b)}function XA(){var r=this.opacity;return r=isNaN(r)?1:Math.max(0,Math.min(1,r)),(r===1?\"rgb(\":\"rgba(\")+Math.max(0,Math.min(255,Math.round(this.r)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.g)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.b)||0))+(r===1?\")\":\", \"+r+\")\")}function Pg(r){return r=Math.max(0,Math.min(255,Math.round(r)||0)),(r\u003c16?\"0\":\"\")+r.toString(16)}function ZA(r,e,a,s){return s\u003c=0?r=e=a=NaN:a\u003c=0||a\u003e=1?r=e=NaN:e\u003c=0\u0026\u0026(r=NaN),new ca(r,e,a,s)}function KA(r){if(r instanceof ca)return new ca(r.h,r.s,r.l,r.opacity);if(r instanceof au||(r=hs(r)),!r)return new ca;if(r instanceof ca)return r;r=r.rgb();var e=r.r/255,a=r.g/255,s=r.b/255,o=Math.min(e,a,s),u=Math.max(e,a,s),h=NaN,f=u-o,y=(u+o)/2;return f?(e===u?h=(a-s)/f+(a\u003cs)*6:a===u?h=(s-e)/f+2:h=(e-a)/f+4,f/=y\u003c.5?u+o:2-u-o,h*=60):f=y\u003e0\u0026\u0026y\u003c1?0:h,new ca(h,f,y,r.opacity)}function QA(r,e,a,s){return arguments.length===1?KA(r):new ca(r,e,a,s??1)}function ca(r,e,a,s){this.h=+r,this.s=+e,this.l=+a,this.opacity=+s}Bh(ca,QA,Mg(au,{brighter:function(r){return r=r==null?zh:Math.pow(zh,r),new ca(this.h,this.s,this.l*r,this.opacity)},darker:function(r){return r=r==null?su:Math.pow(su,r),new ca(this.h,this.s,this.l*r,this.opacity)},rgb:function(){var r=this.h%360+(this.h\u003c0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a\u003c.5?a:1-a)*e,o=2*a-s;return new ur(Og(r\u003e=240?r-240:r+120,o,s),Og(r,o,s),Og(r\u003c120?r+240:r-120,o,s),this.opacity)},displayable:function(){return(0\u003c=this.s\u0026\u0026this.s\u003c=1||isNaN(this.s))\u0026\u00260\u003c=this.l\u0026\u0026this.l\u003c=1\u0026\u00260\u003c=this.opacity\u0026\u0026this.opacity\u003c=1},formatHsl:function(){var r=this.opacity;return r=isNaN(r)?1:Math.max(0,Math.min(1,r)),(r===1?\"hsl(\":\"hsla(\")+(this.h||0)+\", \"+(this.s||0)*100+\"%, \"+(this.l||0)*100+\"%\"+(r===1?\")\":\", \"+r+\")\")}}));function Og(r,e,a){return(r\u003c60?e+(a-e)*r/60:r\u003c180?a:r\u003c240?e+(a-e)*(240-r)/60:e)*255}function Cg(r,e,a,s,o){var u=r*r,h=u*r;return((1-3*r+3*u-h)*e+(4-6*u+3*h)*a+(1+3*r+3*u-3*h)*s+h*o)/6}function JA(r){var e=r.length-1;return function(a){var s=a\u003c=0?a=0:a\u003e=1?(a=1,e-1):Math.floor(a*e),o=r[s],u=r[s+1],h=s\u003e0?r[s-1]:2*o-u,f=s\u003ce-1?r[s+2]:2*u-o;return Cg((a-s/e)*e,h,o,u,f)}}function eR(r){var e=r.length;return function(a){var s=Math.floor(((a%=1)\u003c0?++a:a)*e),o=r[(s+e-1)%e],u=r[s%e],h=r[(s+1)%e],f=r[(s+2)%e];return Cg((a-s/e)*e,o,u,h,f)}}var ou=r=\u003e()=\u003er;function XJ(r,e){return function(a){return r+a*e}}function ZJ(r,e,a){return r=Math.pow(r,a),e=Math.pow(e,a)-r,a=1/a,function(s){return Math.pow(r+s*e,a)}}function tR(r){return(r=+r)==1?Uh:function(e,a){return a-e?ZJ(e,a,r):ou(isNaN(e)?a:e)}}function Uh(r,e){var a=e-r;return a?XJ(r,a):ou(isNaN(r)?e:r)}var $h=function r(e){var a=tR(e);function s(o,u){var h=a((o=So(o)).r,(u=So(u)).r),f=a(o.g,u.g),y=a(o.b,u.b),k=Uh(o.opacity,u.opacity);return function(q){return o.r=h(q),o.g=f(q),o.b=y(q),o.opacity=k(q),o+\"\"}}return s.gamma=r,s}(1);function nR(r){return function(e){var a=e.length,s=new Array(a),o=new Array(a),u=new Array(a),h,f;for(h=0;h\u003ca;++h)f=So(e[h]),s[h]=f.r||0,o[h]=f.g||0,u[h]=f.b||0;return s=r(s),o=r(o),u=r(u),f.opacity=1,function(y){return f.r=s(y),f.g=o(y),f.b=u(y),f+\"\"}}}var Ag=nR(JA),KJ=nR(eR);function rR(r,e){e||(e=[]);var a=r?Math.min(e.length,r.length):0,s=e.slice(),o;return function(u){for(o=0;o\u003ca;++o)s[o]=r[o]*(1-u)+e[o]*u;return s}}function aR(r){return ArrayBuffer.isView(r)\u0026\u0026!(r instanceof DataView)}function sR(r,e){var a=e?e.length:0,s=r?Math.min(a,r.length):0,o=new Array(s),u=new Array(a),h;for(h=0;h\u003cs;++h)o[h]=Qs(r[h],e[h]);for(;h\u003ca;++h)u[h]=e[h];return function(f){for(h=0;h\u003cs;++h)u[h]=o[h](f);return u}}function iR(r,e){var a=new Date;return r=+r,e=+e,function(s){return a.setTime(r*(1-s)+e*s),a}}function ds(r,e){return r=+r,e=+e,function(a){return r*(1-a)+e*a}}function oR(r,e){var a={},s={},o;(r===null||typeof r!=\"object\")\u0026\u0026(r={}),(e===null||typeof e!=\"object\")\u0026\u0026(e={});for(o in e)o in r?a[o]=Qs(r[o],e[o]):s[o]=e[o];return function(u){for(o in a)s[o]=a[o](u);return s}}var Rg=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,Eg=new RegExp(Rg.source,\"g\");function QJ(r){return function(){return r}}function JJ(r){return function(e){return r(e)+\"\"}}function cR(r,e){var a=Rg.lastIndex=Eg.lastIndex=0,s,o,u,h=-1,f=[],y=[];for(r=r+\"\",e=e+\"\";(s=Rg.exec(r))\u0026\u0026(o=Eg.exec(e));)(u=o.index)\u003ea\u0026\u0026(u=e.slice(a,u),f[h]?f[h]+=u:f[++h]=u),(s=s[0])===(o=o[0])?f[h]?f[h]+=o:f[++h]=o:(f[++h]=null,y.push({i:h,x:ds(s,o)})),a=Eg.lastIndex;return a\u003ce.length\u0026\u0026(u=e.slice(a),f[h]?f[h]+=u:f[++h]=u),f.length\u003c2?y[0]?JJ(y[0].x):QJ(e):(e=y.length,function(k){for(var q=0,x;q\u003ce;++q)f[(x=y[q]).i]=x.x(k);return f.join(\"\")})}function Qs(r,e){var a=typeof e,s;return e==null||a===\"boolean\"?ou(e):(a===\"number\"?ds:a===\"string\"?(s=hs(e))?(e=s,$h):cR:e instanceof hs?$h:e instanceof Date?iR:aR(e)?rR:Array.isArray(e)?sR:typeof e.valueOf!=\"function\"\u0026\u0026typeof e.toString!=\"function\"||isNaN(e)?oR:ds)(r,e)}function jg(r,e){return r=+r,e=+e,function(a){return Math.round(r*(1-a)+e*a)}}function Dg(r){return function(){return r}}function Ig(r){return+r}var lR=[0,1];function Mo(r){return r}function Fg(r,e){return(e-=r=+r)?function(a){return(a-r)/e}:Dg(isNaN(e)?NaN:.5)}function eee(r,e){var a;return r\u003ee\u0026\u0026(a=r,r=e,e=a),function(s){return Math.max(r,Math.min(e,s))}}function tee(r,e,a){var s=r[0],o=r[1],u=e[0],h=e[1];return o\u003cs?(s=Fg(o,s),u=a(h,u)):(s=Fg(s,o),u=a(u,h)),function(f){return u(s(f))}}function nee(r,e,a){var s=Math.min(r.length,e.length)-1,o=new Array(s),u=new Array(s),h=-1;for(r[s]\u003cr[0]\u0026\u0026(r=r.slice().reverse(),e=e.slice().reverse());++h\u003cs;)o[h]=Fg(r[h],r[h+1]),u[h]=a(e[h],e[h+1]);return function(f){var y=(0,uR.bisect)(r,f,1,s)-1;return u[y](o[y](f))}}function pR(r,e){return e.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function ree(){var r=lR,e=lR,a=Qs,s,o,u,h=Mo,f,y,k;function q(){var M=Math.min(r.length,e.length);return h!==Mo\u0026\u0026(h=eee(r[0],r[M-1])),f=M\u003e2?nee:tee,y=k=null,x}function x(M){return M==null||isNaN(M=+M)?u:(y||(y=f(r.map(s),e,a)))(s(h(M)))}return x.invert=function(M){return h(o((k||(k=f(e,r.map(s),ds)))(M)))},x.domain=function(M){return arguments.length?(r=Array.from(M,Ig),q()):r.slice()},x.range=function(M){return arguments.length?(e=Array.from(M),q()):e.slice()},x.rangeRound=function(M){return e=Array.from(M),a=jg,q()},x.clamp=function(M){return arguments.length?(h=M?!0:Mo,q()):h!==Mo},x.interpolate=function(M){return arguments.length?(a=M,q()):a},x.unknown=function(M){return arguments.length?(u=M,x):u},function(M,L){return s=M,o=L,q()}}function Vg(){return ree()(Mo,Mo)}var kR=nt(aa());function hR(r){return Math.abs(r=Math.round(r))\u003e=1e21?r.toLocaleString(\"en\").replace(/,/g,\"\"):r.toString(10)}function Js(r,e){if((a=(r=e?r.toExponential(e-1):r.toExponential()).indexOf(\"e\"))\u003c0)return null;var a,s=r.slice(0,a);return[s.length\u003e1?s[0]+s.slice(2):s,+r.slice(a+1)]}function ua(r){return r=Js(Math.abs(r)),r?r[1]:NaN}function dR(r,e){return function(a,s){for(var o=a.length,u=[],h=0,f=r[0],y=0;o\u003e0\u0026\u0026f\u003e0\u0026\u0026(y+f+1\u003es\u0026\u0026(f=Math.max(1,s-y)),u.push(a.substring(o-=f,o+f)),!((y+=f+1)\u003es));)f=r[h=(h+1)%r.length];return u.reverse().join(e)}}function fR(r){return function(e){return e.replace(/[0-9]/g,function(a){return r[+a]})}}var aee=/^(?:(.)?([\u003c\u003e=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;function fs(r){if(!(e=aee.exec(r)))throw new Error(\"invalid format: \"+r);var e;return new Hh({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]\u0026\u0026e[8].slice(1),trim:e[9],type:e[10]})}fs.prototype=Hh.prototype;function Hh(r){this.fill=r.fill===void 0?\" \":r.fill+\"\",this.align=r.align===void 0?\"\u003e\":r.align+\"\",this.sign=r.sign===void 0?\"-\":r.sign+\"\",this.symbol=r.symbol===void 0?\"\":r.symbol+\"\",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?\"\":r.type+\"\"}Hh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?\"0\":\"\")+(this.width===void 0?\"\":Math.max(1,this.width|0))+(this.comma?\",\":\"\")+(this.precision===void 0?\"\":\".\"+Math.max(0,this.precision|0))+(this.trim?\"~\":\"\")+this.type};function mR(r){e:for(var e=r.length,a=1,s=-1,o;a\u003ce;++a)switch(r[a]){case\".\":s=o=a;break;case\"0\":s===0\u0026\u0026(s=a),o=a;break;default:if(!+r[a])break e;s\u003e0\u0026\u0026(s=0);break}return s\u003e0?r.slice(0,s)+r.slice(o+1):r}var Wg;function vR(r,e){var a=Js(r,e);if(!a)return r+\"\";var s=a[0],o=a[1],u=o-(Wg=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,h=s.length;return u===h?s:u\u003eh?s+new Array(u-h+1).join(\"0\"):u\u003e0?s.slice(0,u)+\".\"+s.slice(u):\"0.\"+new Array(1-u).join(\"0\")+Js(r,Math.max(0,e+u-1))[0]}function Lg(r,e){var a=Js(r,e);if(!a)return r+\"\";var s=a[0],o=a[1];return o\u003c0?\"0.\"+new Array(-o).join(\"0\")+s:s.length\u003eo+1?s.slice(0,o+1)+\".\"+s.slice(o+1):s+new Array(o-s.length+2).join(\"0\")}var Bg={\"%\":(r,e)=\u003e(r*100).toFixed(e),b:r=\u003eMath.round(r).toString(2),c:r=\u003er+\"\",d:hR,e:(r,e)=\u003er.toExponential(e),f:(r,e)=\u003er.toFixed(e),g:(r,e)=\u003er.toPrecision(e),o:r=\u003eMath.round(r).toString(8),p:(r,e)=\u003eLg(r*100,e),r:Lg,s:vR,X:r=\u003eMath.round(r).toString(16).toUpperCase(),x:r=\u003eMath.round(r).toString(16)};function zg(r){return r}var gR=Array.prototype.map,yR=[\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\\xB5\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];function _R(r){var e=r.grouping===void 0||r.thousands===void 0?zg:dR(gR.call(r.grouping,Number),r.thousands+\"\"),a=r.currency===void 0?\"\":r.currency[0]+\"\",s=r.currency===void 0?\"\":r.currency[1]+\"\",o=r.decimal===void 0?\".\":r.decimal+\"\",u=r.numerals===void 0?zg:fR(gR.call(r.numerals,String)),h=r.percent===void 0?\"%\":r.percent+\"\",f=r.minus===void 0?\"\\u2212\":r.minus+\"\",y=r.nan===void 0?\"NaN\":r.nan+\"\";function k(x){x=fs(x);var M=x.fill,L=x.align,j=x.sign,B=x.symbol,ee=x.zero,de=x.width,ie=x.comma,pe=x.precision,G=x.trim,R=x.type;R===\"n\"?(ie=!0,R=\"g\"):Bg[R]||(pe===void 0\u0026\u0026(pe=12),G=!0,R=\"g\"),(ee||M===\"0\"\u0026\u0026L===\"=\")\u0026\u0026(ee=!0,M=\"0\",L=\"=\");var H=B===\"$\"?a:B===\"#\"\u0026\u0026/[boxX]/.test(R)?\"0\"+R.toLowerCase():\"\",$=B===\"$\"?s:/[%p]/.test(R)?h:\"\",se=Bg[R],ce=/[defgprs%]/.test(R);pe=pe===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,pe)):Math.max(0,Math.min(20,pe));function xe(ke){var Re=H,ze=$,He,X,oe;if(R===\"c\")ze=se(ke)+ze,ke=\"\";else{ke=+ke;var Y=ke\u003c0||1/ke\u003c0;if(ke=isNaN(ke)?y:se(Math.abs(ke),pe),G\u0026\u0026(ke=mR(ke)),Y\u0026\u0026+ke==0\u0026\u0026j!==\"+\"\u0026\u0026(Y=!1),Re=(Y?j===\"(\"?j:f:j===\"-\"||j===\"(\"?\"\":j)+Re,ze=(R===\"s\"?yR[8+Wg/3]:\"\")+ze+(Y\u0026\u0026j===\"(\"?\")\":\"\"),ce){for(He=-1,X=ke.length;++He\u003cX;)if(oe=ke.charCodeAt(He),48\u003eoe||oe\u003e57){ze=(oe===46?o+ke.slice(He+1):ke.slice(He))+ze,ke=ke.slice(0,He);break}}}ie\u0026\u0026!ee\u0026\u0026(ke=e(ke,1/0));var J=Re.length+ke.length+ze.length,ge=J\u003cde?new Array(de-J+1).join(M):\"\";switch(ie\u0026\u0026ee\u0026\u0026(ke=e(ge+ke,ge.length?de-ze.length:1/0),ge=\"\"),L){case\"\u003c\":ke=Re+ke+ze+ge;break;case\"=\":ke=Re+ge+ke+ze;break;case\"^\":ke=ge.slice(0,J=ge.length\u003e\u003e1)+Re+ke+ze+ge.slice(J);break;default:ke=ge+Re+ke+ze;break}return u(ke)}return xe.toString=function(){return x+\"\"},xe}function q(x,M){var L=k((x=fs(x),x.type=\"f\",x)),j=Math.max(-8,Math.min(8,Math.floor(ua(M)/3)))*3,B=Math.pow(10,-j),ee=yR[8+j/3];return function(de){return L(B*de)+ee}}return{format:k,formatPrefix:q}}var Yh,Xh,Zh;Gg({thousands:\",\",grouping:[3],currency:[\"$\",\"\"]});function Gg(r){return Yh=_R(r),Xh=Yh.format,Zh=Yh.formatPrefix,Yh}function Ug(r){return Math.max(0,-ua(Math.abs(r)))}function $g(r,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ua(e)/3)))*3-ua(Math.abs(r)))}function Hg(r,e){return r=Math.abs(r),e=Math.abs(e)-r,Math.max(0,ua(e)-ua(r))+1}function Yg(r,e,a,s){var o=(0,kR.tickStep)(r,e,a),u;switch(s=fs(s??\",f\"),s.type){case\"s\":{var h=Math.max(Math.abs(r),Math.abs(e));return s.precision==null\u0026\u0026!isNaN(u=$g(o,h))\u0026\u0026(s.precision=u),Zh(s,h)}case\"\":case\"e\":case\"g\":case\"p\":case\"r\":{s.precision==null\u0026\u0026!isNaN(u=Hg(o,Math.max(Math.abs(r),Math.abs(e))))\u0026\u0026(s.precision=u-(s.type===\"e\"));break}case\"f\":case\"%\":{s.precision==null\u0026\u0026!isNaN(u=Ug(o))\u0026\u0026(s.precision=u-(s.type===\"%\")*2);break}}return Xh(s)}function see(r){var e=r.domain;return r.ticks=function(a){var s=e();return(0,Kh.ticks)(s[0],s[s.length-1],a??10)},r.tickFormat=function(a,s){var o=e();return Yg(o[0],o[o.length-1],a??10,s)},r.nice=function(a){a==null\u0026\u0026(a=10);var s=e(),o=0,u=s.length-1,h=s[o],f=s[u],y,k,q=10;for(f\u003ch\u0026\u0026(k=h,h=f,f=k,k=o,o=u,u=k);q-- \u003e0;){if(k=(0,Kh.tickIncrement)(h,f,a),k===y)return s[o]=h,s[u]=f,e(s);if(k\u003e0)h=Math.floor(h/k)*k,f=Math.ceil(f/k)*k;else if(k\u003c0)h=Math.ceil(h*k)/k,f=Math.floor(f*k)/k;else break;y=k}return r},r}function ei(){var r=Vg();return r.copy=function(){return pR(r,ei())},zA.apply(r,arguments),see(r)}function NR(r){for(var e=r.length/6|0,a=new Array(e),s=0;s\u003ce;)a[s]=\"#\"+r.slice(s*6,++s*6);return a}var bR=r=\u003eAg(r[r.length-1]);var xR=new Array(3).concat(\"deebf79ecae13182bd\",\"eff3ffbdd7e76baed62171b5\",\"eff3ffbdd7e76baed63182bd08519c\",\"eff3ffc6dbef9ecae16baed63182bd08519c\",\"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\").map(NR),Xg=bR(xR);var Oo=nt(aa());function Zg(r){let{width:e=600,height:a=200,noteRange:s,rhythmLanes:o,noteLanes:u,timeRange:h,strokeWidth:f=1,hiddenSymbols:y=[\"r\"],fold:k=!1,time:q=0,center:x=.5,events:M}=r,L=Y=\u003e[\"string\",\"number\"].includes(typeof Y.value),j=M.filter(L),B=(0,Oo.max)(j.map(Y=\u003eY.path?Y.path.length:1));x=x*e;let ee=j.filter(({value:Y})=\u003ey.indexOf(Y)===-1).map(Y=\u003eY.value).filter((Y,J,ge)=\u003ege.indexOf(Y)===J).sort((Y,J)=\u003eon.Note.midi(J)-on.Note.midi(Y)),de=ee.filter(Y=\u003e!!on.Note.name(Y)),ie=ee.filter(Y=\u003e!on.Note.name(Y)),pe=(0,Oo.max)(j.map(Y=\u003eY.time+Y.duration));h=h?[h[0],h[1]]:[0,pe];let G;if(k)G=(u?u.filter(Y=\u003ede.find(J=\u003eon.Note.midi(J)===on.Note.midi(Y))):de).map(Y=\u003eon.Note.midi(Y)+\"\").concat(o?o.filter(Y=\u003eie.indexOf(Y)!==-1):ie.reverse());else{if(de.length){let Y=s?s.map(J=\u003eon.Note.midi(J)):[(0,Oo.min)(de.map(J=\u003eon.Note.midi(J))),(0,Oo.max)(de.map(J=\u003eon.Note.midi(J)))];u=(u||on.Range.chromatic(Y.reverse().map(J=\u003eon.Note.fromMidi(J)))).map(J=\u003eon.Note.midi(J)+\"\")}else u=u||[];G=u.concat(o||ie.reverse())}let R=[];r.hierarchy\u0026\u0026(R=M.filter(Y=\u003e!L(Y)).map(Y=\u003e({...Y,lane:Y.lane||`container-${Y.path.length}`})),G=[].concat(R.map(Y=\u003eY.lane).reverse(),G).filter((Y,J,ge)=\u003ege.indexOf(Y)===J));let H=ei().domain(h).range([f,e-f]),$=ei().domain([0,pe]).range([0,e]),se=ei().domain([G.length,0]).range([a-f,f]),ce=Y=\u003eti(se(Y)-f),xe=j.filter(({value:Y,time:J,duration:ge})=\u003ey.indexOf(Y)===-1\u0026\u0026G.indexOf(on.Note.midi(Y)?on.Note.midi(Y)+\"\":Y)!==-1).map(Y=\u003e({...Y,height:1})).concat(R),ke=$(q)%e,Re=a/G.length;function ze(Y=0){return Po.default.createElement(\"g\",null,xe.map(({value:J,time:ge,duration:me,path:We,color:Qe,height:ft,lane:le},Ne)=\u003e{let Me=ti(H(ge+Y)-x),Be=ti($(me));if(!(Me\u003ce-f+ke\u0026\u0026Me+Be\u003ef+ke))return;J=on.Note.midi(J)?on.Note.midi(J)+\"\":J;let Pe=G.indexOf(le||J),tt=ke!==0\u0026\u0026ke+x\u003eMe\u0026\u0026ke+x\u003cMe+Be;return Po.default.createElement(\"rect\",{rx:Re/2,ry:Re/2,stroke:\"black\",strokeWidth:f,fill:tt?\"white\":Qe||Xg((We?We.length:1)/B),key:Ne,x:Me,y:ti(se(Pe)),width:Be,height:ce(ft||1)})}))}let He=!0,X,oe;return He?(X=x-ti(f),oe=-ti(ke)):(oe=-x,X=ti(ke)),Po.default.createElement(\"svg\",{...{width:e,height:a}},Po.default.createElement(\"g\",{style:{transform:`translateX(${oe}px)`,willChange:\"transform\"}},ze(),ze(pe),ze(2*pe)),Po.default.createElement(\"line\",{x1:X,x2:X,y1:0,y2:a,strokeWidth:f*2,stroke:\"black\"}))}function ti(r){return Math.floor(r*2)/2}var hl=nt(ot()),BI=nt(fI()),zI=nt(AI()),GI=nt(RI()),UI=nt(FI());var VI=nt(ru());function WI(r,e={}){return()=\u003enew Promise((a,s)=\u003e{let o;e={volume:-12,attack:.01,...e,onload:()=\u003e{a(o)}};let u=new VI.Players(r,e);o={customSymbols:Object.keys(r),triggerAttackRelease:(h,f,y,k)=\u003e{if(!u.has(h)){console.warn(`key ${h} not found for playback`);return}let q=u.player(h);q.start(y),q.stop(y+f)},connect:h=\u003e(u.connect(h),o),toMaster:()=\u003e(u.toDestination(),o),toDestination:()=\u003e(u.toDestination(),o)}})}var LI={load:async()=\u003e{let r={bd:\"../samples/tidal/bd/BT0A0D0.wav\",sn:\"../samples/tidal/sn/ST0T0S3.wav\",hh:\"../samples/tidal/hh/000_hh3closedhh.wav\",cp:\"../samples/tidal/cp/HANDCLP0.wav\",mt:\"../samples/tidal/mt/MT0D3.wav\",ht:\"../samples/tidal/ht/HT0D3.wav\",lt:\"../samples/tidal/lt/LT0D3.wav\"};return ps()\u0026\u0026(await WI(r,{volume:-20})()).toDestination()}};var Of=nt(ru()),vi=nt(ot());function Cf({events:r,instruments:e,draw:a,loop:s}){let[o,u]=(0,vi.useState)(!1),[h,f]=(0,vi.useState)(!1),y=(0,vi.useRef)();(0,vi.useEffect)(()=\u003e{!o||(o?.removeAll?.(),r.forEach(M=\u003eo.add(M.time,M)))},[r]);function k(){y.current\u0026\u0026y.current.stop(),o?.stop?.(),Of.Transport.stop(),u(!1)}async function q(){let M=Object.keys(e||{});return(await Promise.all(M.map(j=\u003etypeof e[j]==\"function\"?e[j]():typeof e[j]?.load==\"function\"?e[j].load():e[j]))).reduce((j,B,ee)=\u003e({...j,[M[ee]]:B}),{})}async function x(){if(h)return;Of.start(),f(!0);let M=await q();u($I(r,{instruments:M||{synth:Af,drums:LI},loop:s})),y.current=HI(a),f(!1)}return hl.default.createElement(BI.default,{color:\"primary\",onClick:()=\u003eo?k():x()},o?hl.default.createElement(GI.default,null):h?hl.default.createElement(UI.default,null):hl.default.createElement(zI.default,null))}var{PolySynth:ZI,Synth:KI}=ic,Af=ps()\u0026\u0026new ZI({maxPolyphony:12,voice:KI,options:{volume:-16,envelope:{attack:.01,decay:.2,sustain:.5,release:.1},oscillator:{type:\"fmtriangle\"}}}).toDestination(),jxe=ps()\u0026\u0026new ZI({maxPolyphony:12,voice:KI,options:{volume:-16,envelope:{attack:.01,decay:.1,sustain:0,release:0},oscillator:{type:\"fmtriangle\"}}}).toDestination();function $I(r,e={}){let a=r.filter(f=\u003e[\"string\",\"number\"].includes(typeof f.value)),{loop:s=!0,instruments:o={synth:Af},duration:u=(0,YI.max)(a.map(f=\u003ef.time+f.duration))}=e,h=new ic.Part((f,y)=\u003e{y.value===\"r\"||![\"string\",\"number\"].includes(typeof y.value)||fpe(y.instrument,o).triggerAttackRelease(y.value,y.duration,f,y.velocity||.9)},a).start(0);return h.loop=s,h.loopEnd=u,ic.Transport.start(\"+0.1\"),h}function fpe(r,e){let a=Object.keys(e);!a.length,r=r||a[0];let s,o=a.find(u=\u003eu===r);if(o)s=e[o];else{let u=a[0];s=e[u]||Af}return s}function HI(r,e=1/30){if(r)return new ic.Loop(a=\u003e{ic.Draw.schedule(()=\u003er(ic.Transport.seconds),a)},e).start(0)}function Dn(r){let{hidePianoRoll:e}=r,[a,s]=(0,XI.useState)(0);return e?Ps.default.createElement(Cf,{...r,draw:s}):Ps.default.createElement(Ps.default.Fragment,null,Ps.default.createElement(Zg,{...r,time:a}),Ps.default.createElement(\"div\",{style:{float:\"right\"}},Ps.default.createElement(Cf,{...r,draw:s})),Ps.default.createElement(\"div\",{style:{clear:\"both\"}}))}var QI=nt(Kp());var nn=nt(Ca()),In=class{static getBassNote(e,a=!1){if(!e)return null;if(!a\u0026\u0026e.includes(\"/\"))return e.split(\"/\")[1];let s=e.match(/^([A-G][b|#]?)/);return!s||!s.length?\"\":s[0]}static chordInversions(e,a,s){let o=nn.Chord.getChord(e,a).notes.map(f=\u003enn.Note.get(f).pc),u=nn.Range.chromatic(s).filter(In.byPitches(o));return u.length-o.length+1\u003c=0?[]:Array.from({length:u.length-o.length+1},(f,y)=\u003enn.Collection.rotate(y,u).slice(0,o.length))}static tokenizeChord(e){if(!e)return null;let a=In.getBassNote(e,!0)||\"\",s=e.replace(a,\"\");return s=s.split(\"/\")[0],Object.keys(In.irealToTonal).find(o=\u003eIn.irealToTonal[o]===s)?a+s:[a,s]}static getTonalChord(e){if(!e)return null;let a=In.getBassNote(e,!0)||\"\",s=e.replace(a,\"\");return s=s.split(\"/\")[0],Object.keys(In.irealToTonal).find(o=\u003eIn.irealToTonal[o]===s)?a+s:(s=In.irealToTonal[s],s===void 0?null:a+s)}static minInterval(e,a,s){if(e=In.reduceInterval(e,!0),a)return In.forceDirection(e,a,s);let o=In.invertInterval(e);return Math.abs(nn.Interval.semitones(o))\u003cMath.abs(nn.Interval.semitones(e))\u0026\u0026(e=o),e}static reduceInterval(e=\"\",a=!1){let s={\"0A\":\"1P\",\"-0A\":\"1P\"};return a\u0026\u0026(s={...s,\"8P\":\"1P\",\"-8P\":\"1P\"},e=nn.Interval.simplify(e)),Object.keys(s).includes(e)?s[e]:e}static forceDirection(e,a,s=!1){let o=nn.Interval.semitones(e);return a===\"up\"\u0026\u0026o\u003c0||a===\"down\"\u0026\u0026o\u003e0?In.invertInterval(e):e===\"1P\"\u0026\u0026s?(a===\"down\"?\"-\":\"\")+\"8P\":e}static invertInterval(e){if(!e)return null;let a=e.replace(\"-\",\"\"),s=In.intervalComplement(a);return(e.length\u003ea.length?\"\":\"-\")+s}static intervalComplement(e){let a={\"8P\":\"1P\",\"8d\":\"1A\",\"8A\":\"1d\",\"1A\":\"8d\",\"1d\":\"8A\"},s=Object.keys(a).find(o=\u003ee.match(o));return s?a[s]:nn.Interval.invert(e)}static isInterval(e){return typeof nn.Interval.semitones(e)==\"number\"}static isInRange(e,a){let s=nn.Note.midi(e);return nn.Note.midi(a[0])\u003c=s\u0026\u0026s\u003c=nn.Note.midi(a[1])}static byPitches(e){let a=e.map(s=\u003enn.Note.chroma(s));return s=\u003ea.includes(nn.Note.chroma(s))}},Rf=In;DN(Rf,\"irealToTonal\",{\"^7\":\"M7\",\"7\":\"7\",\"-7\":\"m7\",h7:\"m7b5\",\"7#9\":\"7#9\",\"7b9\":\"7b9\",\"^7#5\":\"M7#5\",\"^#5\":\"M#5\",\"\":\"\",\"^\":\"M\",\"6\":\"6\",\"9\":\"9\",\"-6\":\"m6\",o7:\"o7\",h:\"m7b5\",\"-^7\":\"mM7\",o:\"o\",\"^9\":\"M9\",\"7#11\":\"7#11\",\"7#5\":\"7#5\",\"-\":\"m\",\"7sus\":\"7sus\",\"69\":\"69\",\"7b13\":\"7b13\",\"+\":\"+\",\"7b9b5\":\"7b5b9\",\"-9\":\"m9\",\"9sus\":\"9sus\",\"7b9sus\":\"7b9sus\",\"7b9#5\":\"7#5b9\",\"13\":\"13\",\"^7#11\":\"M7#11\",\"-7b5\":\"m7b5\",\"^13\":\"M13\",\"7#9b5\":\"7b5#9\",\"-11\":\"m11\",\"11\":\"11\",\"7b5\":\"7b5\",\"9#5\":\"9#5\",\"13b9\":\"13b9\",\"9#11\":\"9#11\",\"13#11\":\"13#11\",\"-b6\":\"mb6\",\"7#9#5\":\"7#5#9\",\"-69\":\"m69\",\"13sus\":\"13sus\",\"^9#11\":\"M9#11\",\"7b9#9\":\"7b9#9\",sus:\"sus\",sus4:\"Msus4\",sus2:\"Msus2\",\"7#9#11\":\"7#9#11\",\"7b9b13\":\"7b9b13\",\"7b9#11\":\"7b9#11\",\"13#9\":\"13#9\",\"9b5\":\"9b5\",\"-^9\":\"mM9\",\"2\":\"Madd9\",\"-#5\":\"m#5\",\"7+\":\"7#5\",\"7sus4\":\"7sus\",M69:\"M69\"});var mpe=(0,QI.curry)((r,e)=\u003ee.reduce(r,[])),s0=r=\u003e(e,a,s,o)=\u003e{r\u0026\u0026(o=o.filter(r));let u=f=\u003ef\u003co.length\u0026\u0026o[f].value===\"_\";if(u(s))return e;if(!u(s+1))return e.concat([a]);let h=a.duration;for(;u(++s);)h+=o[s].duration;return e.concat([{...a,duration:h}])},Vxe=mpe(s0()),gi=(r,e,a,s)=\u003e{if(typeof e.value!=\"string\")return r;let o=Rf.getBassNote(e.value);return r.concat([{...e,value:o+\"2\"}])},dl=r=\u003e(e,a,s,o)=\u003e(r.forEach(u=\u003e{e=u(e,a,s,o)}),e),Ef=(r,e=vpe)=\u003e{let a=({track:s})=\u003es===r;return(s,o,...u)=\u003ea(o)?e(s,o,...u):s},vpe=(r,e)=\u003er.concat([e]),JI=(r=!0)=\u003e(e,a,...s)=\u003e(a.reducer\u0026\u0026(e=a.reducer(e,a,...s)),r?e.concat([a]):e);var gpe=nt(aa());var fl=nt(Ca());var ype=r=\u003e{let e=r[r.length-1].value,a=s=\u003eMath.abs(fl.Note.midi(e)-fl.Note.midi(s[s.length-1]));return(s,o)=\u003ea(s)-a(o)},yi=(r,e,a=ype)=\u003e(s,o)=\u003e{if(typeof o.value!=\"string\")return s;let u=Lh(o.value,r,e),{tonic:h,aliases:f}=fl.Chord.get(o.value);if(!Object.keys(r).find(x=\u003ef.includes(x)))return console.log(`no voicings found for chord \"${o.value}\"`),s;let k,q=s.filter(x=\u003e!!x.chord);return q.length?k=u.sort(a(q))[0]:k=u[Math.ceil(u.length/2)],s.concat(k.map(x=\u003e({...o,value:x,chord:o.value})))};var _pe=nt(ot());var ml=nt(Ca()),e5=nt(ru());function t5(r,e={}){return()=\u003enew Promise(a=\u003e{e={volume:-12,attack:.01,...e,onload:()=\u003e{a(o)}};let s=new e5.Sampler(r,e),o={triggerAttackRelease:(u,h,f,y)=\u003e{if(typeof u==\"number\"){s.triggerAttackRelease(u,h,f,y);return}e.transpose\u0026\u0026(u=ml.Note.transpose(u,ml.Interval.fromSemitones(e.transpose))),s.triggerAttackRelease(ml.Note.simplify(u),h,f,y)},triggerAttack:s.triggerAttack,triggerRelease:s.triggerAttack,connect:u=\u003e(s.connect(u),o),toMaster:()=\u003e(s.toDestination(),o),toDestination:()=\u003e(s.toDestination(),o)}})}var Jn={load:async()=\u003e{let r={C1:\"../samples/piano/C1.mp3\",C2:\"../samples/piano/C2.mp3\",C3:\"../samples/piano/C3.mp3\",C4:\"../samples/piano/C4.mp3\",C5:\"../samples/piano/C5.mp3\",C6:\"../samples/piano/C6.mp3\",C7:\"../samples/piano/C7.mp3\"};return ps()\u0026\u0026(await t5(r,{volume:-20})()).toDestination()}};var n5=nt(Ca()),kpe={title:\"Rhythmical Mutations\",date:\"2020-08-02\",image:\"./img/pianoroll-color.png\",tags:[\"rhythmical\",\"code\"],description:\"In this post, I want to develop the idea of mutation to allow more flexibility.\"};function Npe(r){let e=Object.assign({p:\"p\",ol:\"ol\",li:\"li\",a:\"a\",h2:\"h2\",span:\"span\",pre:\"pre\",code:\"code\",h3:\"h3\",ul:\"ul\",h4:\"h4\"},r.components),{wrapper:a}=e,s=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"So far, rhythmical knows two ways of data transformation/mutation:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"../rhythmical-objects/#feature-encapsulation\",children:\"plugins\"}),\" as preprocessors\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"../rhythmical-ties\",children:\"reducers\"}),\" as postprocessors\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"In this post, I want to develop the idea of mutation to allow more flexibility.\"}),`\n`,`\n`,(0,n.jsxs)(e.h2,{id:\"reducers\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#reducers\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Reducers\"]}),`\n`,(0,n.jsx)(e.p,{children:\"With reducers, flat rhythmical events can be mutated after rendering:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n  sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'d4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'eb4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'e4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'f4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'_'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"tieReducer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:'// appends \"_\" event to \"f4\" event'}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"or\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n  sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"voicings\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"triads\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'C3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// generates notes in range for each chord symbol (implemented in last post)\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"As a reducer runs, the previous state of the events is lost, for example, the chord symbols will be vanished after the voicing reducer.\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"bass-reducer\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#bass-reducer\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Bass Reducer\"]}),`\n`,(0,n.jsx)(e.p,{children:\"As another example, I want to introduce this simple reducer:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// reduces events to bass notes\"}),`\n`,(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" bassNotes\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"EventReducer\"})}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" index\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" array\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"typeof\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!==\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'string'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" bassNote \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getBassNote\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"concat\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" bassNote \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'2'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// returns bass note of given chord\"}),`\n`,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getBassNote\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"chord\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" string\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" ignoreSlash \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"chord\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword null nil\",children:\"null\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"ignoreSlash \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u0026\u0026\"}),\" chord\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"includes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" chord\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"split\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" match \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" chord\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"match\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token regex\",children:[(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-source language-regex\",children:\"^([A-G][b|#]?)\"}),(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"match \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"match\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"length\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" match\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"It takes chord symbols and returns only the bass note in a fixed octave:\"}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},fold:!1,events:cs({duration:8,sequential:[[\"F\",\"G\"],\"C\"]}).reduce(gi,[])}),`\n`,(0,n.jsxs)(\"details\",{children:[(0,n.jsx)(\"summary\",{children:\"show source\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  fold`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"bassNotes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})]}),`\n`,(0,n.jsx)(e.p,{children:\"I will improve this later, adding a range option + error handling..\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"voicing-reducer\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#voicing-reducer\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Voicing Reducer\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Another reducer that works with chord symbols is the voicing reducer introduced \",(0,n.jsx)(e.a,{href:\"../rhythmical-chords\",children:\"in the last post\"}),`.\nI now removed the hard coded bass note from it.`]}),`\n`,(0,n.jsx)(e.p,{children:\"If we run the voicings reducer on the same rhythm object, we get:\"}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},fold:!1,events:cs({duration:8,sequential:[[\"F\",\"G\"],\"C\"]}).reduce(yi(Ks,[\"C3\",\"A4\"]),[])}),`\n`,(0,n.jsxs)(\"details\",{children:[(0,n.jsx)(\"summary\",{children:\"show source\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  fold`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"voicings\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"triads\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'C3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})]}),`\n`,(0,n.jsxs)(e.h3,{id:\"running-two-reducers-on-the-same-array\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#running-two-reducers-on-the-same-array\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Running two reducers on the same array\"]}),`\n`,(0,n.jsx)(e.p,{children:\"To get chords + bassline, we could combine both reducers like this:\"}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},fold:!1,events:(()=\u003e{let o=cs({duration:8,sequential:[[\"F\",\"G\"],\"C\"]});return[...o.reduce(yi(Ks,[\"C3\",\"A4\"]),[]),...o.reduce(gi,[])]})()}),`\n`,(0,n.jsxs)(\"details\",{children:[(0,n.jsx)(\"summary\",{children:\"show source\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  fold`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" events \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"voicings\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"triads\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'C3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"bassNotes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"But this is kind of ugly if we want to use a single function call (like needed for MDX), which requires wrapping it in an \",(0,n.jsx)(e.a,{href:\"https://flaviocopes.com/javascript-iife/\",children:\"IIFE\"}),\".. It would be nice to have something like this:\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  fold`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"parallel\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"voicings\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"triads\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'C3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" bassNotes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"The parallel reducer will run both reducers on the same events in parallel.\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"parallel-reducer\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#parallel-reducer\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"parallel reducer\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The implementation is pretty straightforward:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"parallel\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"reducers\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"EventReducer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"EventReducer\"})}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"reducers\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" index\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" array\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    reducers`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"forEach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"r\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      events `,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"r\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" index\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" array\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"That's it!\"}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},fold:!1,events:cs({duration:8,sequential:[[\"F\",\"G\"],\"C\"]}).reduce(dl([yi(Ks,[\"C3\",\"A4\"]),gi]),[])}),`\n`,(0,n.jsxs)(\"details\",{children:[(0,n.jsx)(\"summary\",{children:\"show source\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  fold`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"parallel\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"voicings\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"triads\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'C3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" bassNotes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})]}),`\n`,(0,n.jsx)(\"br\",{}),`\n`,(0,n.jsx)(e.p,{children:\"Let's try a more sophisticated example:\"}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},fold:!1,events:cs({duration:64,sequential:[[\"Fm7\",\"Bbm7\",\"Eb7\",\"Ab^7\"],[\"Db^7\",[\"Dm7\",\"G7\"],\"C^7\",\"_\"],[\"Cm7\",\"Fm7\",\"Bb7\",\"Eb^7\"],[\"Ab^7\",[\"Am7\",\"D7\"],\"G^7\",\"_\"],[\"Am7\",\"D7\",\"G^7\",\"_\"],[\"F#m7b5\",\"B7b9\",\"E^7\",\"C7b13\"],[\"Fm7\",\"Bbm7\",\"Eb7\",\"Ab^7\"],[\"Db^7\",\"DbmM7\",\"Cm7\",\"Bo7\"],[\"Bbm7\",\"Eb7\",\"Ab^7\",[\"Gm7b5\",\"C7b9\"]]]}).reduce(s0(),[]).reduce(dl([yi(tu,[\"G3\",\"G5\"]),gi]),[])}),`\n`,(0,n.jsxs)(\"details\",{children:[(0,n.jsx)(\"summary\",{children:\"show source\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  fold`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"64\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Fm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Bbm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Eb7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Ab^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Db^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Dm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'_'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Cm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Fm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Bb7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Eb^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Ab^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Am7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'_'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Am7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'_'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F#m7b5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B7b9'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C7b13'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Fm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Bbm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Eb7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Ab^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Db^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'DbmM7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Cm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Bo7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Bbm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Eb7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Ab^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Gm7b5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C7b9'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"tieReducer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"parallel\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"voicings\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"lefthand\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" bassNotes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})]}),`\n`,(0,n.jsx)(\"br\",{}),`\n`,(0,n.jsx)(e.p,{children:\"To make the parallel reducer work with voicings, I had to adjust the voicings reducer (see comments):\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"voicings\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"dictionary\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" range\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" sorter \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" topNoteSort\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" event\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"typeof\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!==\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'string'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),` events\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" voicings \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"voicingsInRange\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" dictionary\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" range\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tonic\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" aliases \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Chord\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"get\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" symbol \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token known-class-name class-name\",children:\"Object\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"keys\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"dictionary\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"find\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"_symbol\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" aliases\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"includes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"_symbol\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"symbol\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token console class-name\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"log\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token template-string\",children:[(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'no voicings found for chord \"'}),(0,n.jsxs)(e.span,{className:\"token interpolation\",children:[(0,n.jsx)(e.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"'}),(0,n.jsx)(e.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" notes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// here we filter the events for having a chord set (skips bass notes)\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" lastVoiced \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"filter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"e\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"e\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"chord\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"lastVoiced\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"length\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    notes `,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" voicings\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"ceil\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"voicings\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    notes `,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" voicings\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"sort\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"sorter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"lastVoiced\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// here we pass the chord symbol that generated the note\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"concat\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"notes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"note\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" note\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" chord\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:`In general, to make a reducer work in parallel, we need to add some filterable property (like chord property above).\nWithout filtering, other events from parallel reducers will pollute the array (like bass notes in a voicing reducer).`}),`\n`,(0,n.jsxs)(e.h3,{id:\"track-reducer\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#track-reducer\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"track reducer\"]}),`\n`,(0,n.jsx)(e.p,{children:\"What if we want to run reducers only on a certain set of events? For example, if we add a melody, we want the voicing reducer to ignore that part. For this case, I wrote this track reducer:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"track\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"track\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" reducer \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" idleReducer\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"trackFilter\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" track\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" t \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" t \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" track\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"args\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"trackFilter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"event \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"as\"}),\" any\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"?\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"reducer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"args\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// if no reducer passed to track, all events are used as is\"}),`\n`,(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"idleReducer\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" event\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"concat\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"In Action:\"}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},fold:!1,events:cs({duration:8,parallel:[{track:\"melody\",sequential:[[\"A4\",[\"C5\",\"A4\"],\"B4\",\"D5\"],\"E5\"]},{track:\"chords\",sequential:[[\"F\",\"G\"],\"C\"]}]},[Qc(\"track\")]).reduce(dl([Ef(\"melody\"),Ef(\"chords\",gi),Ef(\"chords\",yi(Ks,[\"C3\",\"G4\"]))]),[])}),`\n`,(0,n.jsxs)(\"details\",{children:[(0,n.jsx)(\"summary\",{children:\"show source\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  fold`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      parallel`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n          track`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'melody'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n          sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'C5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n          track`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'chords'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n          sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"inheritProperty\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'track'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token function\",children:\"parallel\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"track\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'melody'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"track\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'chords'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" bassNotes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"track\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'chords'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"voicings\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"triads\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'C3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})]}),`\n`,(0,n.jsx)(e.p,{children:\"Now the bassNotes and voicings reducers only run on events on the chords track, while the melody track stays as it is.\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"mutation-inheritance\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#mutation-inheritance\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Mutation Inheritance\"]}),`\n`,(0,n.jsx)(e.p,{children:\"We could also inherit mutation functions:\"}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},fold:!1,events:cs({duration:8,parallel:[[[\"A4\",[\"C5\",\"A4\"],\"B4\",\"D5\"],\"E5\"],{sequential:[[\"F\",\"G\"],\"C\"],reducer:dl([yi(Ks,[\"C3\",\"G4\"]),gi])}]},[Qc(\"reducer\")]).reduce(JI(!0),[]).filter(o=\u003e!!n5.Note.midi(o.value))}),`\n`,(0,n.jsxs)(\"details\",{children:[(0,n.jsx)(\"summary\",{children:\"show source\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  fold`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      parallel`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'C5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n          sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n          reducer`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"parallel\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"voicings\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"triads\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'C3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" bassNotes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"inheritProperty\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'reducer'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"applyReducers\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"filter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"e\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Note\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"midi\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// filter out chords\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})]}),`\n`,(0,n.jsx)(\"br\",{}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"applyReducers\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"keepEventsWithoutReducer\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" boolean\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"EventReducer\"})}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"keepEventsWithoutReducer \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"args\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"reducer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      events `,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reducer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"args\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"keepEventsWithoutReducer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"concat\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" events\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"Pro\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"no track reducer filter magic needed\"}),`\n`,(0,n.jsx)(e.li,{children:\"much shorter\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Contra\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"JS in JSON =\u003e not serializable\"}),`\n`,(0,n.jsx)(e.li,{children:\"chords pollute final event array =\u003e need to filter non usable events\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"thoughts-on-reducers\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#thoughts-on-reducers\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Thoughts on Reducers\"]}),`\n`,(0,n.jsx)(e.p,{children:`Reducers are a handy way of postprocessing events. On the other hand, it starts to get a little bit magical and untransparent when having different purpose tracks and nesting...\nAlso, it seems kind of odd that there are now two hierarchial structures: the rhythmical object and the postprocessing tree.`}),`\n`,(0,n.jsxs)(e.h2,{id:\"plugins\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#plugins\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Plugins\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"As opposed to reducers, plugins (previously called \",(0,n.jsx)(e.a,{href:\"../rhythmical-objects/#feature-encapsulation\",children:\"features\"}),`) are applied while the rhythmical tree is processed.\nIt would be nice if some of the above reducer functionality could be added as plugins, for example:`]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      parallel`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n          sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'C5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n          plugin`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'chords'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n          sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"inherit\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'plugin'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"chords\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" dictionary\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" triads \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"The above snippet would produce the same output as this notation:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    parallel`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n        sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'C5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n        sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n          `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'C3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'F3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n          `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'E3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"which can be rendered normally:\"}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},events:us({duration:8,parallel:[{sequential:[[\"A4\",[\"C5\",\"A4\"],\"B4\",\"D5\"],\"E5\"]},{plugin:\"chords\",sequential:[[{parallel:[\"C3\",\"F3\",\"A3\"]},{parallel:[\"D3\",\"G3\",\"B3\"]}],{parallel:[\"E3\",\"G3\",\"C4\"]}]}]})}),`\n`,(0,n.jsxs)(e.h3,{id:\"back-to-the-basics\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#back-to-the-basics\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"back to the basics\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"For the above ideas to work, I first needed to add more flexibility to the \",(0,n.jsx)(e.a,{href:\"https://felixroos.github.io/blog/rhythmical-objects/#flattening-nested-objects\",children:\"flatObject\"}),\" method:\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" flatObject\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"T\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"agnostic\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"AgnosticChild\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"T\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" props\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"FlatObjectProps\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"T\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"ValueChild\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"T\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" getChildren\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"ChildrenResolver\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"T\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"getChildren\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" getChildrenWithPath\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// this function decides if the given child should be flattened or not\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"isDeep\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"child\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"ValueChild\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"T\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" boolean \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\n    props`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"isDeep\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"child\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u0026\u0026\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"typeof\"}),\" child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'object'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" flat\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"ValueChild\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"T\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" children \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getChildren\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"agnostic\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  children`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"forEach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" index\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"typeof\"}),\" props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"mapChild\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'function'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// this function will mutate the child\"}),`\n      child `,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mapChild\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n        child`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        isLeaf`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"isDeep\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        index`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        props`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        siblings`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" children\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        parent`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" agnostic\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"isDeep\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      flat `,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" flat\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"concat\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"flatObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      flat`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"push\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" flat\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"isDeep can now be passed as a function to override the exit condition of the recursion\"}),`\n`,(0,n.jsx)(e.li,{children:\"mapChild can be used to manipulate children before the exit condition runs\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"new-renderrhythm-method\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#new-renderrhythm-method\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"new renderRhythm method\"]}),`\n`,(0,n.jsx)(e.p,{children:\"renderRhythmObject is now replaced by renderRhythm, which uses isDeep and mapChild:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" renderRhythm\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"T\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"agnostic\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"AgnosticChild\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"T\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" rhythmPlugins \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" root \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"toObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"agnostic\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" totalDuration \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" root\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"duration\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// outer duration\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"flatObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"agnostic\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    getChildren`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" rhythmChildren\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// dont stop recursion if child has parallel or sequential props\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"isDeep\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"child\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'value'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'parallel'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'sequential'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// this spares the sequential child mess from earlier\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"reduce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"deep\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" prop\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" deep \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"prop\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u0026\u0026\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"typeof\"}),\" child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"prop\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"===\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'object'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// apply features to children\"}),`\n    mapChild`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmPlugins\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"rhythmPlugins\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"event\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" path \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"time\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" duration\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getTimeDuration\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"path\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" totalDuration\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" time\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" duration\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" path \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythmPlugins\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"rhythmPlugins \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"props\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    rhythmPlugins`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"forEach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"plugin\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      props`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"child\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"plugin\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"child\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" rhythmChildren\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"T\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"agnostic\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"AgnosticChild\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"T\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" parent \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"toObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"applyFeatures\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"agnostic\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"sequentialParent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parallelParent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" children \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"toArray\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"parent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" children\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,n.jsxs)(e.h3,{id:\"inherit-plugin\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#inherit-plugin\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"inherit plugin\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Now, plugins look much sexier than the old features. The \",(0,n.jsx)(e.a,{href:\"https://felixroos.github.io/blog/rhythmical-objects/#inheritance\",children:\"inherit\"}),\" plugin can be implemented like this:\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"inherit\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"property\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"property\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"property\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"??\"}),\" parent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"property\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})}),`\n`,(0,n.jsxs)(\"details\",{children:[(0,n.jsx)(\"summary\",{children:\"compare this to the old inheritProperty feature\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"inheritProperty\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"property\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"_parent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" parent \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"toObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"_parent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"parent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"property\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"parent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" parent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"parent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      value`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"toArray\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"parent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token parameter\",children:\"child\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" childObj \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"toObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n          `,(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"childObj\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n          `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"property\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" childObj\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"property\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" parent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"property\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})})]}),`\n`,(0,n.jsx)(\"br\",{}),`\n`,(0,n.jsxs)(e.h3,{id:\"chords-plugin\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#chords-plugin\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"chords plugin\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Chord voicings can be resolved like this:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"chords\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" dictionary\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" range \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" isLeaf\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" parent \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"isLeaf \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" parent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"chord\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"plugin\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!==\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'chords'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// prevent infinite loop\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"let\"}),\" options \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"voicingsInRange\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"dictionary\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" dictionary\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"range\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"||\"}),\" range\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"lastVoicing\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// if not the first =\u003e voice leading\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" diff \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n        voicing `,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// returns distance between top notes\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token known-class-name class-name\",children:\"Math\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"abs\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Note\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"midi\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"lastVoicing\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"props\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"lastVoicing\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Note\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"midi\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"voicing\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"voicing\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n      options `,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"sort\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[\"a\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" b\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"diff\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"a\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"diff\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"b\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// sort by min top note distance\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n    props`,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"lastVoicing\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// pick best voicing\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      chord`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" child\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"value\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// this is needed to stop the plugin from running again on its children\"}),`\n      value`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" options\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      type`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'parallel'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"In action:\"}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},fold:!1,events:us({duration:8,parallel:[{sequential:[[\"A4\",\"C5\",\"Ab4\",\"C5\"],\"G4\"],color:\"darksalmon\"},{sequential:[[\"F\",\"Fm\"],\"C\"],plugin:\"chords\",velocity:.6}]},[Jc(\"plugin\"),Jc(\"color\"),Jc(\"velocity\"),Tg({dictionary:Ks})])}),`\n`,(0,n.jsxs)(\"details\",{children:[(0,n.jsx)(\"summary\",{children:\"show source\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  fold`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythm\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      parallel`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n          sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'A4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Ab4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n          color`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'darksalmon'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n          sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Fm'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n          plugin`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'chords'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n          velocity`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0.6\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"inherit\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'plugin'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"inherit\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'color'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"inherit\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'velocity'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"chords\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" dictionary\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" triads \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})]}),`\n`,(0,n.jsx)(\"br\",{}),`\n`,(0,n.jsxs)(e.h3,{id:\"thoughts-on-plugins\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#thoughts-on-plugins\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Thoughts on Plugins\"]}),`\n`,(0,n.jsx)(e.p,{children:`Comparing the above snippet with the reducer version, I like it much more.\nThe good thing about plugins is that the structural information of the object is not yet lost.\nBeing able to add a plugin anywhere in the tree spares all the indirect track selection stuff from earlier.`}),`\n`,(0,n.jsx)(e.p,{children:\"The only thing that is not yet solved is running two plugins on the same source, like voicings and bass notes.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"multiple-mutation-data-flow\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#multiple-mutation-data-flow\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Multiple Mutation Data Flow\"]}),`\n`,(0,n.jsx)(e.p,{children:\"There are different scenarios how data can flow through multiple mutations:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"sequential: data flows out of one plugin into the nexxt\"}),`\n`,(0,n.jsx)(e.li,{children:\"parallel: data flows from the source into each plugin\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"So this is basically polyphony for mutation functions!\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"sequential-mutation\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#sequential-mutation\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"sequential mutation\"]}),`\n`,(0,n.jsx)(e.p,{children:`This applies one mutation after the other.\nFor example, we could first apply a voicing plugin and then use the generated notes as an input of a pattern plugin:`}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythm\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"12\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'E-'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E-'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B-'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B-'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      mutate`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// those mutations are applied sequentially\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token string\",children:\"'chords'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" pattern\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"chords\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" dictionary\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" triads \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" patternPlugin\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"After only the chord mutation, it could sound like this:\"}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},events:us({duration:12,sequential:[{parallel:[\"E3\",\"G3\",\"B3\",\"E4\"]},{parallel:[\"E3\",\"G3\",\"B3\",\"E4\"]},{parallel:[\"D3\",\"G3\",\"B3\",\"D4\"]},{parallel:[\"D3\",\"G3\",\"B3\",\"D4\"]},{parallel:[\"D3\",\"F#3\",\"B3\",\"D4\"]},{parallel:[\"D3\",\"F#3\",\"B3\",\"D4\"]},{parallel:[\"D3\",\"F#3\",\"A3\",\"D4\"]},{parallel:[\"D3\",\"F#3\",\"A3\",\"D4\"]}]})}),`\n`,(0,n.jsx)(e.p,{children:\"Now only the pattern mutation is left:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythm\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"12\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'E3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'E3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'F#3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'F#3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'F#3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'F#3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    mutate`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" pattern\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"After the pattern mutation:\"}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},events:us({duration:12,sequential:[[{parallel:[\"E3\",\"E4\"]},\"B3\",{parallel:[\"G3\",\"E4\"]},\"B3\"],[{parallel:[\"E3\",\"E4\"]},\"B3\",{parallel:[\"G3\",\"E4\"]},\"B3\"],[{parallel:[\"D3\",\"D4\"]},\"B3\",{parallel:[\"G3\",\"D4\"]},\"B3\"],[{parallel:[\"D3\",\"D4\"]},\"B3\",{parallel:[\"G3\",\"D4\"]},\"B3\"],[{parallel:[\"D3\",\"D4\"]},\"B3\",{parallel:[\"F#3\",\"D4\"]},\"B3\"],[{parallel:[\"D3\",\"D4\"]},\"B3\",{parallel:[\"F#3\",\"D4\"]},\"B3\"],[{parallel:[\"D3\",\"D4\"]},\"A3\",{parallel:[\"F#3\",\"D4\"]},\"A3\"],[{parallel:[\"D3\",\"D4\"]},\"A3\",{parallel:[\"F#3\",\"D4\"]},\"A3\"]]})}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythm\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"12\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'E3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'E3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F#3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F#3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F#3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'D3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F#3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D4'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,n.jsxs)(e.h4,{id:\"how-musicians-think\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#how-musicians-think\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"How musicians think\"]}),`\n`,(0,n.jsx)(e.p,{children:\"If we look again at the notation:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythm\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'E-'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E-'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B-'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B-'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      mutate`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token comment\",children:\"// those mutations are applied sequentially\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token string\",children:\"'chords'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" pattern\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"3\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"chords\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" dictionary\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" triads \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" patternPlugin\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:'This is structurally similar to how a musician would remember a piece of music by creating \"chunks\":'}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"the info needed to play (render) the piece are abtract chunks of information (chord symbols)\"}),`\n`,(0,n.jsx)(e.li,{children:\"each abstract chunk has a recipe (mutation) that is applied to get to the notes\"}),`\n`,(0,n.jsx)(e.li,{children:\"by using mutations in a certain order, interesting results could be achieved quickly, which is good for algorithmic composition\"}),`\n`]}),`\n`,(0,n.jsxs)(e.h3,{id:\"parallel-mutation\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#parallel-mutation\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Parallel Mutation\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Parallel mutation will pass the same data to each plugin. For example to render chords and bass notes for a set of chord symbols:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  fold`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythm\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Fm'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      mutate`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'chords'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'bass'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"chords\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" dictionary\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" triads \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"bass\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" octave\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"after mutation:\"}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},fold:!1,events:us({duration:8,parallel:[[[{parallel:[\"F3\",\"A3\",\"C3\"]},{parallel:[\"F3\",\"Ab3\",\"C3\"]}],{parallel:[\"E3\",\"G3\",\"C3\"]}],[[\"F2\",\"F2\"],\"C2\"]]})}),`\n`,(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  fold`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythm\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n    duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"8\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    parallel`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'A3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Ab3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" parallel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'E3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F2'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'F2'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C2'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})}),`\n`,(0,n.jsx)(e.p,{children:\"As this post now exceeds the limit of 1000 lines, I will stop here and implement polyphonic mutation in another post.\"}),`\n`,(0,n.jsxs)(e.h2,{id:\"conclusion\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#conclusion\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),`\n`,(0,n.jsx)(e.p,{children:`With reducers and plugins, many musical abstractions can be achieved.\nSome are more practical using reducers (like micro time adjustems e.g. swing), others are easier implemented using plugins (anything that needs structural info).`}),`\n`,(0,n.jsx)(e.p,{children:`I cannot wait to finish the mutation data flow and play around with it!\nWhen it's done, many possibilities are open, like grooves, arpeggios, patterns, melodies etc..`}),`\n`,(0,n.jsx)(Dn,{instruments:{tinypiano:Jn},fold:!1,events:us({duration:64,plugin:\"chords\",sequential:[[\"Fm7\",\"Bbm7\",\"Eb7\",\"Ab^7\"],[\"Db^7\",[\"Dm7\",\"G7\"],\"C^7\",\"C^7\"],[\"Cm7\",\"Fm7\",\"Bb7\",\"Eb^7\"],[\"Ab^7\",[\"Am7\",\"D7\"],\"G^7\",\"G^7\"],[\"Am7\",\"D7\",\"G^7\",\"G^7\"],[\"F#m7b5\",\"B7b9\",\"E^7\",\"C7b13\"],[\"Fm7\",\"Bbm7\",\"Eb7\",\"Ab^7\"],[\"Db^7\",\"DbmM7\",\"Cm7\",\"Bo7\"],[\"Bbm7\",\"Eb7\",\"Ab^7\",[\"Gm7b5\",\"C7b9\"]]]},[Jc(\"plugin\"),Tg({dictionary:tu,range:[\"G3\",\"G5\"]})])}),`\n`,(0,n.jsxs)(\"details\",{children:[(0,n.jsx)(\"summary\",{children:\"show source\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js\",children:[(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"Player\"}),`\n  instruments`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" tinypiano \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  fold`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n  events`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"renderRhythm\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n      duration`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"64\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      plugin`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'chords'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      sequential`,(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Fm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Bbm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Eb7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Ab^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Db^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Dm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Cm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Fm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Bb7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Eb^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Ab^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Am7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Am7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'D7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'F#m7b5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'B7b9'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'E^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C7b13'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Fm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Bbm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Eb7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Ab^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Db^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'DbmM7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Cm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Bo7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n        `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Bbm7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Eb7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Ab^7'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Gm7b5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'C7b9'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n      `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n    `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"inherit\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'plugin'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"chords\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" dictionary\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" lefthand\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" range\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'G3'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'G5'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n  `,(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`,(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]})})]}),`\n`,(0,n.jsx)(\"br\",{}),`\n`,(0,n.jsxs)(e.h3,{id:\"tbd\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#tbd\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"TBD\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"find way to implement tieReducer as plugin (cannot use ties in above)\"}),`\n`,(0,n.jsx)(e.li,{children:\"implement polyphonic mutations\"}),`\n`]})]});return a?(0,n.jsx)(a,Object.assign({},r,{children:s})):s}var bpe=Npe;return xpe;})();\n/*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n\n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */\n/**\n * A better abstraction over CSS.\n *\n * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present\n * @website https://github.com/cssinjs/jss\n * @license MIT\n */\n/**\n * Tone.js\n * @author Yotam Mann\n * @license http://opensource.org/licenses/MIT MIT License\n * @copyright 2014-2019 Yotam Mann\n */\n/** @license Material-UI v4.11.2\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/** @license Material-UI v4.11.4\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/** @license Material-UI v4.12.1\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/** @license React v17.0.2\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n;return Component.default;"},"__N_SSG":true},"page":"/[slug]","query":{"slug":"rhythmical-reducers"},"buildId":"G3PuGP-3UQ_TjRSvK8pry","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>